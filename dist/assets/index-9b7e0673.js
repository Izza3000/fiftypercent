var e7=Object.defineProperty;var t7=(n,e,t)=>e in n?e7(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var St=(n,e,t)=>(t7(n,typeof e!="symbol"?e+"":e,t),t);function n7(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var ca=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eP(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function i7(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var d5={exports:{}},Aw={},h5={exports:{}},_n={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ny=Symbol.for("react.element"),r7=Symbol.for("react.portal"),s7=Symbol.for("react.fragment"),a7=Symbol.for("react.strict_mode"),o7=Symbol.for("react.profiler"),l7=Symbol.for("react.provider"),c7=Symbol.for("react.context"),u7=Symbol.for("react.forward_ref"),d7=Symbol.for("react.suspense"),h7=Symbol.for("react.memo"),f7=Symbol.for("react.lazy"),HN=Symbol.iterator;function p7(n){return n===null||typeof n!="object"?null:(n=HN&&n[HN]||n["@@iterator"],typeof n=="function"?n:null)}var f5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p5=Object.assign,m5={};function nm(n,e,t){this.props=n,this.context=e,this.refs=m5,this.updater=t||f5}nm.prototype.isReactComponent={};nm.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};nm.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function g5(){}g5.prototype=nm.prototype;function tP(n,e,t){this.props=n,this.context=e,this.refs=m5,this.updater=t||f5}var nP=tP.prototype=new g5;nP.constructor=tP;p5(nP,nm.prototype);nP.isPureReactComponent=!0;var VN=Array.isArray,y5=Object.prototype.hasOwnProperty,iP={current:null},v5={key:!0,ref:!0,__self:!0,__source:!0};function x5(n,e,t){var i,r={},s=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)y5.call(e,i)&&!v5.hasOwnProperty(i)&&(r[i]=e[i]);var o=arguments.length-2;if(o===1)r.children=t;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in o=n.defaultProps,o)r[i]===void 0&&(r[i]=o[i]);return{$$typeof:Ny,type:n,key:s,ref:a,props:r,_owner:iP.current}}function m7(n,e){return{$$typeof:Ny,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function rP(n){return typeof n=="object"&&n!==null&&n.$$typeof===Ny}function g7(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var $N=/\/+/g;function aE(n,e){return typeof n=="object"&&n!==null&&n.key!=null?g7(""+n.key):e.toString(36)}function n1(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case Ny:case r7:a=!0}}if(a)return a=n,r=r(a),n=i===""?"."+aE(a,0):i,VN(r)?(t="",n!=null&&(t=n.replace($N,"$&/")+"/"),n1(r,e,t,"",function(c){return c})):r!=null&&(rP(r)&&(r=m7(r,t+(!r.key||a&&a.key===r.key?"":(""+r.key).replace($N,"$&/")+"/")+n)),e.push(r)),1;if(a=0,i=i===""?".":i+":",VN(n))for(var o=0;o<n.length;o++){s=n[o];var l=i+aE(s,o);a+=n1(s,e,t,l,r)}else if(l=p7(n),typeof l=="function")for(n=l.call(n),o=0;!(s=n.next()).done;)s=s.value,l=i+aE(s,o++),a+=n1(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function ax(n,e,t){if(n==null)return n;var i=[],r=0;return n1(n,i,"","",function(s){return e.call(t,s,r++)}),i}function y7(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ys={current:null},i1={transition:null},v7={ReactCurrentDispatcher:ys,ReactCurrentBatchConfig:i1,ReactCurrentOwner:iP};function _5(){throw Error("act(...) is not supported in production builds of React.")}_n.Children={map:ax,forEach:function(n,e,t){ax(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return ax(n,function(){e++}),e},toArray:function(n){return ax(n,function(e){return e})||[]},only:function(n){if(!rP(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};_n.Component=nm;_n.Fragment=s7;_n.Profiler=o7;_n.PureComponent=tP;_n.StrictMode=a7;_n.Suspense=d7;_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v7;_n.act=_5;_n.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=p5({},n.props),r=n.key,s=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=iP.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(l in e)y5.call(e,l)&&!v5.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];i.children=o}return{$$typeof:Ny,type:n.type,key:r,ref:s,props:i,_owner:a}};_n.createContext=function(n){return n={$$typeof:c7,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:l7,_context:n},n.Consumer=n};_n.createElement=x5;_n.createFactory=function(n){var e=x5.bind(null,n);return e.type=n,e};_n.createRef=function(){return{current:null}};_n.forwardRef=function(n){return{$$typeof:u7,render:n}};_n.isValidElement=rP;_n.lazy=function(n){return{$$typeof:f7,_payload:{_status:-1,_result:n},_init:y7}};_n.memo=function(n,e){return{$$typeof:h7,type:n,compare:e===void 0?null:e}};_n.startTransition=function(n){var e=i1.transition;i1.transition={};try{n()}finally{i1.transition=e}};_n.unstable_act=_5;_n.useCallback=function(n,e){return ys.current.useCallback(n,e)};_n.useContext=function(n){return ys.current.useContext(n)};_n.useDebugValue=function(){};_n.useDeferredValue=function(n){return ys.current.useDeferredValue(n)};_n.useEffect=function(n,e){return ys.current.useEffect(n,e)};_n.useId=function(){return ys.current.useId()};_n.useImperativeHandle=function(n,e,t){return ys.current.useImperativeHandle(n,e,t)};_n.useInsertionEffect=function(n,e){return ys.current.useInsertionEffect(n,e)};_n.useLayoutEffect=function(n,e){return ys.current.useLayoutEffect(n,e)};_n.useMemo=function(n,e){return ys.current.useMemo(n,e)};_n.useReducer=function(n,e,t){return ys.current.useReducer(n,e,t)};_n.useRef=function(n){return ys.current.useRef(n)};_n.useState=function(n){return ys.current.useState(n)};_n.useSyncExternalStore=function(n,e,t){return ys.current.useSyncExternalStore(n,e,t)};_n.useTransition=function(){return ys.current.useTransition()};_n.version="18.3.1";h5.exports=_n;var F=h5.exports;const sn=eP(F),x7=n7({__proto__:null,default:sn},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _7=F,b7=Symbol.for("react.element"),w7=Symbol.for("react.fragment"),S7=Object.prototype.hasOwnProperty,M7=_7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,E7={key:!0,ref:!0,__self:!0,__source:!0};function b5(n,e,t){var i,r={},s=null,a=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)S7.call(e,i)&&!E7.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:b7,type:n,key:s,ref:a,props:r,_owner:M7.current}}Aw.Fragment=w7;Aw.jsx=b5;Aw.jsxs=b5;d5.exports=Aw;var g=d5.exports,M2={},w5={exports:{}},fa={},S5={exports:{}},M5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(L,W){var j=L.length;L.push(W);e:for(;0<j;){var te=j-1>>>1,ae=L[te];if(0<r(ae,W))L[te]=W,L[j]=ae,j=te;else break e}}function t(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var W=L[0],j=L.pop();if(j!==W){L[0]=j;e:for(var te=0,ae=L.length,me=ae>>>1;te<me;){var K=2*(te+1)-1,re=L[K],oe=K+1,_e=L[oe];if(0>r(re,j))oe<ae&&0>r(_e,re)?(L[te]=_e,L[oe]=j,te=oe):(L[te]=re,L[K]=j,te=K);else if(oe<ae&&0>r(_e,j))L[te]=_e,L[oe]=j,te=oe;else break e}}return W}function r(L,W){var j=L.sortIndex-W.sortIndex;return j!==0?j:L.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,p=!1,y=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(L){for(var W=t(c);W!==null;){if(W.callback===null)i(c);else if(W.startTime<=L)i(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=t(c)}}function S(L){if(x=!1,w(L),!y)if(t(l)!==null)y=!0,X(A);else{var W=t(c);W!==null&&Q(S,W.startTime-L)}}function A(L,W){y=!1,x&&(x=!1,v(T),T=-1),p=!0;var j=h;try{for(w(W),d=t(l);d!==null&&(!(d.expirationTime>W)||L&&!I());){var te=d.callback;if(typeof te=="function"){d.callback=null,h=d.priorityLevel;var ae=te(d.expirationTime<=W);W=n.unstable_now(),typeof ae=="function"?d.callback=ae:d===t(l)&&i(l),w(W)}else i(l);d=t(l)}if(d!==null)var me=!0;else{var K=t(c);K!==null&&Q(S,K.startTime-W),me=!1}return me}finally{d=null,h=j,p=!1}}var P=!1,k=null,T=-1,E=5,R=-1;function I(){return!(n.unstable_now()-R<E)}function D(){if(k!==null){var L=n.unstable_now();R=L;var W=!0;try{W=k(!0,L)}finally{W?B():(P=!1,k=null)}}else P=!1}var B;if(typeof b=="function")B=function(){b(D)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Y=G.port2;G.port1.onmessage=D,B=function(){Y.postMessage(null)}}else B=function(){_(D,0)};function X(L){k=L,P||(P=!0,B())}function Q(L,W){T=_(function(){L(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){y||p||(y=!0,X(A))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(L){switch(h){case 1:case 2:case 3:var W=3;break;default:W=h}var j=h;h=W;try{return L()}finally{h=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,W){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var j=h;h=L;try{return W()}finally{h=j}},n.unstable_scheduleCallback=function(L,W,j){var te=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?te+j:te):j=te,L){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=j+ae,L={id:u++,callback:W,priorityLevel:L,startTime:j,expirationTime:ae,sortIndex:-1},j>te?(L.sortIndex=j,e(c,L),t(l)===null&&L===t(c)&&(x?(v(T),T=-1):x=!0,Q(S,j-te))):(L.sortIndex=ae,e(l,L),y||p||(y=!0,X(A))),L},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(L){var W=h;return function(){var j=h;h=W;try{return L.apply(this,arguments)}finally{h=j}}}})(M5);S5.exports=M5;var T7=S5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C7=F,ua=T7;function rt(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var E5=new Set,M0={};function Nh(n,e){Ep(n,e),Ep(n+"Capture",e)}function Ep(n,e){for(M0[n]=e,n=0;n<e.length;n++)E5.add(e[n])}var Zl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),E2=Object.prototype.hasOwnProperty,A7=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,WN={},GN={};function P7(n){return E2.call(GN,n)?!0:E2.call(WN,n)?!1:A7.test(n)?GN[n]=!0:(WN[n]=!0,!1)}function R7(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function k7(n,e,t,i){if(e===null||typeof e>"u"||R7(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function vs(n,e,t,i,r,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Pr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Pr[n]=new vs(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Pr[e]=new vs(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Pr[n]=new vs(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Pr[n]=new vs(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Pr[n]=new vs(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Pr[n]=new vs(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Pr[n]=new vs(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Pr[n]=new vs(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Pr[n]=new vs(n,5,!1,n.toLowerCase(),null,!1,!1)});var sP=/[\-:]([a-z])/g;function aP(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(sP,aP);Pr[e]=new vs(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(sP,aP);Pr[e]=new vs(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(sP,aP);Pr[e]=new vs(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Pr[n]=new vs(n,1,!1,n.toLowerCase(),null,!1,!1)});Pr.xlinkHref=new vs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Pr[n]=new vs(n,1,!1,n.toLowerCase(),null,!0,!0)});function oP(n,e,t,i){var r=Pr.hasOwnProperty(e)?Pr[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(k7(e,t,r,i)&&(t=null),i||r===null?P7(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var lc=C7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ox=Symbol.for("react.element"),jf=Symbol.for("react.portal"),zf=Symbol.for("react.fragment"),lP=Symbol.for("react.strict_mode"),T2=Symbol.for("react.profiler"),T5=Symbol.for("react.provider"),C5=Symbol.for("react.context"),cP=Symbol.for("react.forward_ref"),C2=Symbol.for("react.suspense"),A2=Symbol.for("react.suspense_list"),uP=Symbol.for("react.memo"),Fc=Symbol.for("react.lazy"),A5=Symbol.for("react.offscreen"),qN=Symbol.iterator;function Nm(n){return n===null||typeof n!="object"?null:(n=qN&&n[qN]||n["@@iterator"],typeof n=="function"?n:null)}var _i=Object.assign,oE;function mg(n){if(oE===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);oE=e&&e[1]||""}return`
`+oE+n}var lE=!1;function cE(n,e){if(!n||lE)return"";lE=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||r[a]!==s[o]){var l=`
`+r[a].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=a&&0<=o);break}}}finally{lE=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?mg(n):""}function N7(n){switch(n.tag){case 5:return mg(n.type);case 16:return mg("Lazy");case 13:return mg("Suspense");case 19:return mg("SuspenseList");case 0:case 2:case 15:return n=cE(n.type,!1),n;case 11:return n=cE(n.type.render,!1),n;case 1:return n=cE(n.type,!0),n;default:return""}}function P2(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case zf:return"Fragment";case jf:return"Portal";case T2:return"Profiler";case lP:return"StrictMode";case C2:return"Suspense";case A2:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case C5:return(n.displayName||"Context")+".Consumer";case T5:return(n._context.displayName||"Context")+".Provider";case cP:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case uP:return e=n.displayName||null,e!==null?e:P2(n.type)||"Memo";case Fc:e=n._payload,n=n._init;try{return P2(n(e))}catch{}}return null}function I7(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P2(e);case 8:return e===lP?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tu(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function P5(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function D7(n){var e=P5(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function lx(n){n._valueTracker||(n._valueTracker=D7(n))}function R5(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=P5(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function I1(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function R2(n,e){var t=e.checked;return _i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function XN(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Tu(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function k5(n,e){e=e.checked,e!=null&&oP(n,"checked",e,!1)}function k2(n,e){k5(n,e);var t=Tu(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?N2(n,e.type,t):e.hasOwnProperty("defaultValue")&&N2(n,e.type,Tu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function YN(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function N2(n,e,t){(e!=="number"||I1(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var gg=Array.isArray;function ap(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Tu(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function I2(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(rt(91));return _i({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function KN(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(rt(92));if(gg(t)){if(1<t.length)throw Error(rt(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Tu(t)}}function N5(n,e){var t=Tu(e.value),i=Tu(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function ZN(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function I5(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function D2(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?I5(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var cx,D5=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(cx=cx||document.createElement("div"),cx.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cx.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function E0(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Dg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},L7=["Webkit","ms","Moz","O"];Object.keys(Dg).forEach(function(n){L7.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Dg[e]=Dg[n]})});function L5(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Dg.hasOwnProperty(n)&&Dg[n]?(""+e).trim():e+"px"}function O5(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=L5(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var O7=_i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function L2(n,e){if(e){if(O7[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(rt(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(rt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(rt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(rt(62))}}function O2(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var F2=null;function dP(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var U2=null,op=null,lp=null;function JN(n){if(n=Ly(n)){if(typeof U2!="function")throw Error(rt(280));var e=n.stateNode;e&&(e=Iw(e),U2(n.stateNode,n.type,e))}}function F5(n){op?lp?lp.push(n):lp=[n]:op=n}function U5(){if(op){var n=op,e=lp;if(lp=op=null,JN(n),e)for(n=0;n<e.length;n++)JN(e[n])}}function j5(n,e){return n(e)}function z5(){}var uE=!1;function B5(n,e,t){if(uE)return n(e,t);uE=!0;try{return j5(n,e,t)}finally{uE=!1,(op!==null||lp!==null)&&(z5(),U5())}}function T0(n,e){var t=n.stateNode;if(t===null)return null;var i=Iw(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(rt(231,e,typeof t));return t}var j2=!1;if(Zl)try{var Im={};Object.defineProperty(Im,"passive",{get:function(){j2=!0}}),window.addEventListener("test",Im,Im),window.removeEventListener("test",Im,Im)}catch{j2=!1}function F7(n,e,t,i,r,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var Lg=!1,D1=null,L1=!1,z2=null,U7={onError:function(n){Lg=!0,D1=n}};function j7(n,e,t,i,r,s,a,o,l){Lg=!1,D1=null,F7.apply(U7,arguments)}function z7(n,e,t,i,r,s,a,o,l){if(j7.apply(this,arguments),Lg){if(Lg){var c=D1;Lg=!1,D1=null}else throw Error(rt(198));L1||(L1=!0,z2=c)}}function Ih(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function H5(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function QN(n){if(Ih(n)!==n)throw Error(rt(188))}function B7(n){var e=n.alternate;if(!e){if(e=Ih(n),e===null)throw Error(rt(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return QN(r),n;if(s===i)return QN(r),e;s=s.sibling}throw Error(rt(188))}if(t.return!==i.return)t=r,i=s;else{for(var a=!1,o=r.child;o;){if(o===t){a=!0,t=r,i=s;break}if(o===i){a=!0,i=r,t=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===t){a=!0,t=s,i=r;break}if(o===i){a=!0,i=s,t=r;break}o=o.sibling}if(!a)throw Error(rt(189))}}if(t.alternate!==i)throw Error(rt(190))}if(t.tag!==3)throw Error(rt(188));return t.stateNode.current===t?n:e}function V5(n){return n=B7(n),n!==null?$5(n):null}function $5(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=$5(n);if(e!==null)return e;n=n.sibling}return null}var W5=ua.unstable_scheduleCallback,eI=ua.unstable_cancelCallback,H7=ua.unstable_shouldYield,V7=ua.unstable_requestPaint,Li=ua.unstable_now,$7=ua.unstable_getCurrentPriorityLevel,hP=ua.unstable_ImmediatePriority,G5=ua.unstable_UserBlockingPriority,O1=ua.unstable_NormalPriority,W7=ua.unstable_LowPriority,q5=ua.unstable_IdlePriority,Pw=null,Qo=null;function G7(n){if(Qo&&typeof Qo.onCommitFiberRoot=="function")try{Qo.onCommitFiberRoot(Pw,n,void 0,(n.current.flags&128)===128)}catch{}}var bo=Math.clz32?Math.clz32:Y7,q7=Math.log,X7=Math.LN2;function Y7(n){return n>>>=0,n===0?32:31-(q7(n)/X7|0)|0}var ux=64,dx=4194304;function yg(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function F1(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~r;o!==0?i=yg(o):(s&=a,s!==0&&(i=yg(s)))}else a=t&~r,a!==0?i=yg(a):s!==0&&(i=yg(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-bo(e),r=1<<t,i|=n[t],e&=~r;return i}function K7(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Z7(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var a=31-bo(s),o=1<<a,l=r[a];l===-1?(!(o&t)||o&i)&&(r[a]=K7(o,e)):l<=e&&(n.expiredLanes|=o),s&=~o}}function B2(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function X5(){var n=ux;return ux<<=1,!(ux&4194240)&&(ux=64),n}function dE(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Iy(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-bo(e),n[e]=t}function J7(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-bo(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function fP(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-bo(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var Un=0;function Y5(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var K5,pP,Z5,J5,Q5,H2=!1,hx=[],uu=null,du=null,hu=null,C0=new Map,A0=new Map,Hc=[],Q7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tI(n,e){switch(n){case"focusin":case"focusout":uu=null;break;case"dragenter":case"dragleave":du=null;break;case"mouseover":case"mouseout":hu=null;break;case"pointerover":case"pointerout":C0.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":A0.delete(e.pointerId)}}function Dm(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Ly(e),e!==null&&pP(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function e9(n,e,t,i,r){switch(e){case"focusin":return uu=Dm(uu,n,e,t,i,r),!0;case"dragenter":return du=Dm(du,n,e,t,i,r),!0;case"mouseover":return hu=Dm(hu,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return C0.set(s,Dm(C0.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,A0.set(s,Dm(A0.get(s)||null,n,e,t,i,r)),!0}return!1}function eU(n){var e=Fd(n.target);if(e!==null){var t=Ih(e);if(t!==null){if(e=t.tag,e===13){if(e=H5(t),e!==null){n.blockedOn=e,Q5(n.priority,function(){Z5(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function r1(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=V2(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);F2=i,t.target.dispatchEvent(i),F2=null}else return e=Ly(t),e!==null&&pP(e),n.blockedOn=t,!1;e.shift()}return!0}function nI(n,e,t){r1(n)&&t.delete(e)}function t9(){H2=!1,uu!==null&&r1(uu)&&(uu=null),du!==null&&r1(du)&&(du=null),hu!==null&&r1(hu)&&(hu=null),C0.forEach(nI),A0.forEach(nI)}function Lm(n,e){n.blockedOn===e&&(n.blockedOn=null,H2||(H2=!0,ua.unstable_scheduleCallback(ua.unstable_NormalPriority,t9)))}function P0(n){function e(r){return Lm(r,n)}if(0<hx.length){Lm(hx[0],n);for(var t=1;t<hx.length;t++){var i=hx[t];i.blockedOn===n&&(i.blockedOn=null)}}for(uu!==null&&Lm(uu,n),du!==null&&Lm(du,n),hu!==null&&Lm(hu,n),C0.forEach(e),A0.forEach(e),t=0;t<Hc.length;t++)i=Hc[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Hc.length&&(t=Hc[0],t.blockedOn===null);)eU(t),t.blockedOn===null&&Hc.shift()}var cp=lc.ReactCurrentBatchConfig,U1=!0;function n9(n,e,t,i){var r=Un,s=cp.transition;cp.transition=null;try{Un=1,mP(n,e,t,i)}finally{Un=r,cp.transition=s}}function i9(n,e,t,i){var r=Un,s=cp.transition;cp.transition=null;try{Un=4,mP(n,e,t,i)}finally{Un=r,cp.transition=s}}function mP(n,e,t,i){if(U1){var r=V2(n,e,t,i);if(r===null)bE(n,e,i,j1,t),tI(n,i);else if(e9(r,n,e,t,i))i.stopPropagation();else if(tI(n,i),e&4&&-1<Q7.indexOf(n)){for(;r!==null;){var s=Ly(r);if(s!==null&&K5(s),s=V2(n,e,t,i),s===null&&bE(n,e,i,j1,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else bE(n,e,i,null,t)}}var j1=null;function V2(n,e,t,i){if(j1=null,n=dP(i),n=Fd(n),n!==null)if(e=Ih(n),e===null)n=null;else if(t=e.tag,t===13){if(n=H5(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return j1=n,null}function tU(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($7()){case hP:return 1;case G5:return 4;case O1:case W7:return 16;case q5:return 536870912;default:return 16}default:return 16}}var qc=null,gP=null,s1=null;function nU(){if(s1)return s1;var n,e=gP,t=e.length,i,r="value"in qc?qc.value:qc.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var a=t-n;for(i=1;i<=a&&e[t-i]===r[s-i];i++);return s1=r.slice(n,1<i?1-i:void 0)}function a1(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function fx(){return!0}function iI(){return!1}function pa(n){function e(t,i,r,s,a){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?fx:iI,this.isPropagationStopped=iI,this}return _i(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=fx)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=fx)},persist:function(){},isPersistent:fx}),e}var im={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yP=pa(im),Dy=_i({},im,{view:0,detail:0}),r9=pa(Dy),hE,fE,Om,Rw=_i({},Dy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vP,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Om&&(Om&&n.type==="mousemove"?(hE=n.screenX-Om.screenX,fE=n.screenY-Om.screenY):fE=hE=0,Om=n),hE)},movementY:function(n){return"movementY"in n?n.movementY:fE}}),rI=pa(Rw),s9=_i({},Rw,{dataTransfer:0}),a9=pa(s9),o9=_i({},Dy,{relatedTarget:0}),pE=pa(o9),l9=_i({},im,{animationName:0,elapsedTime:0,pseudoElement:0}),c9=pa(l9),u9=_i({},im,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),d9=pa(u9),h9=_i({},im,{data:0}),sI=pa(h9),f9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},p9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},m9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function g9(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=m9[n])?!!e[n]:!1}function vP(){return g9}var y9=_i({},Dy,{key:function(n){if(n.key){var e=f9[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=a1(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?p9[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vP,charCode:function(n){return n.type==="keypress"?a1(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?a1(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),v9=pa(y9),x9=_i({},Rw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aI=pa(x9),_9=_i({},Dy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vP}),b9=pa(_9),w9=_i({},im,{propertyName:0,elapsedTime:0,pseudoElement:0}),S9=pa(w9),M9=_i({},Rw,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),E9=pa(M9),T9=[9,13,27,32],xP=Zl&&"CompositionEvent"in window,Og=null;Zl&&"documentMode"in document&&(Og=document.documentMode);var C9=Zl&&"TextEvent"in window&&!Og,iU=Zl&&(!xP||Og&&8<Og&&11>=Og),oI=String.fromCharCode(32),lI=!1;function rU(n,e){switch(n){case"keyup":return T9.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sU(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Bf=!1;function A9(n,e){switch(n){case"compositionend":return sU(e);case"keypress":return e.which!==32?null:(lI=!0,oI);case"textInput":return n=e.data,n===oI&&lI?null:n;default:return null}}function P9(n,e){if(Bf)return n==="compositionend"||!xP&&rU(n,e)?(n=nU(),s1=gP=qc=null,Bf=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return iU&&e.locale!=="ko"?null:e.data;default:return null}}var R9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cI(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!R9[n.type]:e==="textarea"}function aU(n,e,t,i){F5(i),e=z1(e,"onChange"),0<e.length&&(t=new yP("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Fg=null,R0=null;function k9(n){yU(n,0)}function kw(n){var e=$f(n);if(R5(e))return n}function N9(n,e){if(n==="change")return e}var oU=!1;if(Zl){var mE;if(Zl){var gE="oninput"in document;if(!gE){var uI=document.createElement("div");uI.setAttribute("oninput","return;"),gE=typeof uI.oninput=="function"}mE=gE}else mE=!1;oU=mE&&(!document.documentMode||9<document.documentMode)}function dI(){Fg&&(Fg.detachEvent("onpropertychange",lU),R0=Fg=null)}function lU(n){if(n.propertyName==="value"&&kw(R0)){var e=[];aU(e,R0,n,dP(n)),B5(k9,e)}}function I9(n,e,t){n==="focusin"?(dI(),Fg=e,R0=t,Fg.attachEvent("onpropertychange",lU)):n==="focusout"&&dI()}function D9(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return kw(R0)}function L9(n,e){if(n==="click")return kw(e)}function O9(n,e){if(n==="input"||n==="change")return kw(e)}function F9(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Mo=typeof Object.is=="function"?Object.is:F9;function k0(n,e){if(Mo(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!E2.call(e,r)||!Mo(n[r],e[r]))return!1}return!0}function hI(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function fI(n,e){var t=hI(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=hI(t)}}function cU(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?cU(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function uU(){for(var n=window,e=I1();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=I1(n.document)}return e}function _P(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function U9(n){var e=uU(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&cU(t.ownerDocument.documentElement,t)){if(i!==null&&_P(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=fI(t,s);var a=fI(t,i);r&&a&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var j9=Zl&&"documentMode"in document&&11>=document.documentMode,Hf=null,$2=null,Ug=null,W2=!1;function pI(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;W2||Hf==null||Hf!==I1(i)||(i=Hf,"selectionStart"in i&&_P(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ug&&k0(Ug,i)||(Ug=i,i=z1($2,"onSelect"),0<i.length&&(e=new yP("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Hf)))}function px(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Vf={animationend:px("Animation","AnimationEnd"),animationiteration:px("Animation","AnimationIteration"),animationstart:px("Animation","AnimationStart"),transitionend:px("Transition","TransitionEnd")},yE={},dU={};Zl&&(dU=document.createElement("div").style,"AnimationEvent"in window||(delete Vf.animationend.animation,delete Vf.animationiteration.animation,delete Vf.animationstart.animation),"TransitionEvent"in window||delete Vf.transitionend.transition);function Nw(n){if(yE[n])return yE[n];if(!Vf[n])return n;var e=Vf[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in dU)return yE[n]=e[t];return n}var hU=Nw("animationend"),fU=Nw("animationiteration"),pU=Nw("animationstart"),mU=Nw("transitionend"),gU=new Map,mI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ou(n,e){gU.set(n,e),Nh(e,[n])}for(var vE=0;vE<mI.length;vE++){var xE=mI[vE],z9=xE.toLowerCase(),B9=xE[0].toUpperCase()+xE.slice(1);Ou(z9,"on"+B9)}Ou(hU,"onAnimationEnd");Ou(fU,"onAnimationIteration");Ou(pU,"onAnimationStart");Ou("dblclick","onDoubleClick");Ou("focusin","onFocus");Ou("focusout","onBlur");Ou(mU,"onTransitionEnd");Ep("onMouseEnter",["mouseout","mouseover"]);Ep("onMouseLeave",["mouseout","mouseover"]);Ep("onPointerEnter",["pointerout","pointerover"]);Ep("onPointerLeave",["pointerout","pointerover"]);Nh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),H9=new Set("cancel close invalid load scroll toggle".split(" ").concat(vg));function gI(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,z7(i,e,void 0,n),n.currentTarget=null}function yU(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;gI(r,o,c),s=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;gI(r,o,c),s=l}}}if(L1)throw n=z2,L1=!1,z2=null,n}function Jn(n,e){var t=e[K2];t===void 0&&(t=e[K2]=new Set);var i=n+"__bubble";t.has(i)||(vU(e,n,2,!1),t.add(i))}function _E(n,e,t){var i=0;e&&(i|=4),vU(t,n,i,e)}var mx="_reactListening"+Math.random().toString(36).slice(2);function N0(n){if(!n[mx]){n[mx]=!0,E5.forEach(function(t){t!=="selectionchange"&&(H9.has(t)||_E(t,!1,n),_E(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[mx]||(e[mx]=!0,_E("selectionchange",!1,e))}}function vU(n,e,t,i){switch(tU(e)){case 1:var r=n9;break;case 4:r=i9;break;default:r=mP}t=r.bind(null,e,t,n),r=void 0,!j2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function bE(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;a=a.return}for(;o!==null;){if(a=Fd(o),a===null)return;if(l=a.tag,l===5||l===6){i=s=a;continue e}o=o.parentNode}}i=i.return}B5(function(){var c=s,u=dP(t),d=[];e:{var h=gU.get(n);if(h!==void 0){var p=yP,y=n;switch(n){case"keypress":if(a1(t)===0)break e;case"keydown":case"keyup":p=v9;break;case"focusin":y="focus",p=pE;break;case"focusout":y="blur",p=pE;break;case"beforeblur":case"afterblur":p=pE;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=rI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=a9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=b9;break;case hU:case fU:case pU:p=c9;break;case mU:p=S9;break;case"scroll":p=r9;break;case"wheel":p=E9;break;case"copy":case"cut":case"paste":p=d9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=aI}var x=(e&4)!==0,_=!x&&n==="scroll",v=x?h!==null?h+"Capture":null:h;x=[];for(var b=c,w;b!==null;){w=b;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,v!==null&&(S=T0(b,v),S!=null&&x.push(I0(b,S,w)))),_)break;b=b.return}0<x.length&&(h=new p(h,y,null,t,u),d.push({event:h,listeners:x}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",h&&t!==F2&&(y=t.relatedTarget||t.fromElement)&&(Fd(y)||y[Jl]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(y=t.relatedTarget||t.toElement,p=c,y=y?Fd(y):null,y!==null&&(_=Ih(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=c),p!==y)){if(x=rI,S="onMouseLeave",v="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(x=aI,S="onPointerLeave",v="onPointerEnter",b="pointer"),_=p==null?h:$f(p),w=y==null?h:$f(y),h=new x(S,b+"leave",p,t,u),h.target=_,h.relatedTarget=w,S=null,Fd(u)===c&&(x=new x(v,b+"enter",y,t,u),x.target=w,x.relatedTarget=_,S=x),_=S,p&&y)t:{for(x=p,v=y,b=0,w=x;w;w=ef(w))b++;for(w=0,S=v;S;S=ef(S))w++;for(;0<b-w;)x=ef(x),b--;for(;0<w-b;)v=ef(v),w--;for(;b--;){if(x===v||v!==null&&x===v.alternate)break t;x=ef(x),v=ef(v)}x=null}else x=null;p!==null&&yI(d,h,p,x,!1),y!==null&&_!==null&&yI(d,_,y,x,!0)}}e:{if(h=c?$f(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var A=N9;else if(cI(h))if(oU)A=O9;else{A=D9;var P=I9}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(A=L9);if(A&&(A=A(n,c))){aU(d,A,t,u);break e}P&&P(n,h,c),n==="focusout"&&(P=h._wrapperState)&&P.controlled&&h.type==="number"&&N2(h,"number",h.value)}switch(P=c?$f(c):window,n){case"focusin":(cI(P)||P.contentEditable==="true")&&(Hf=P,$2=c,Ug=null);break;case"focusout":Ug=$2=Hf=null;break;case"mousedown":W2=!0;break;case"contextmenu":case"mouseup":case"dragend":W2=!1,pI(d,t,u);break;case"selectionchange":if(j9)break;case"keydown":case"keyup":pI(d,t,u)}var k;if(xP)e:{switch(n){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Bf?rU(n,t)&&(T="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(T="onCompositionStart");T&&(iU&&t.locale!=="ko"&&(Bf||T!=="onCompositionStart"?T==="onCompositionEnd"&&Bf&&(k=nU()):(qc=u,gP="value"in qc?qc.value:qc.textContent,Bf=!0)),P=z1(c,T),0<P.length&&(T=new sI(T,n,null,t,u),d.push({event:T,listeners:P}),k?T.data=k:(k=sU(t),k!==null&&(T.data=k)))),(k=C9?A9(n,t):P9(n,t))&&(c=z1(c,"onBeforeInput"),0<c.length&&(u=new sI("onBeforeInput","beforeinput",null,t,u),d.push({event:u,listeners:c}),u.data=k))}yU(d,e)})}function I0(n,e,t){return{instance:n,listener:e,currentTarget:t}}function z1(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=T0(n,t),s!=null&&i.unshift(I0(n,s,r)),s=T0(n,e),s!=null&&i.push(I0(n,s,r))),n=n.return}return i}function ef(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function yI(n,e,t,i,r){for(var s=e._reactName,a=[];t!==null&&t!==i;){var o=t,l=o.alternate,c=o.stateNode;if(l!==null&&l===i)break;o.tag===5&&c!==null&&(o=c,r?(l=T0(t,s),l!=null&&a.unshift(I0(t,l,o))):r||(l=T0(t,s),l!=null&&a.push(I0(t,l,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var V9=/\r\n?/g,$9=/\u0000|\uFFFD/g;function vI(n){return(typeof n=="string"?n:""+n).replace(V9,`
`).replace($9,"")}function gx(n,e,t){if(e=vI(e),vI(n)!==e&&t)throw Error(rt(425))}function B1(){}var G2=null,q2=null;function X2(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Y2=typeof setTimeout=="function"?setTimeout:void 0,W9=typeof clearTimeout=="function"?clearTimeout:void 0,xI=typeof Promise=="function"?Promise:void 0,G9=typeof queueMicrotask=="function"?queueMicrotask:typeof xI<"u"?function(n){return xI.resolve(null).then(n).catch(q9)}:Y2;function q9(n){setTimeout(function(){throw n})}function wE(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),P0(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);P0(e)}function fu(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function _I(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var rm=Math.random().toString(36).slice(2),qo="__reactFiber$"+rm,D0="__reactProps$"+rm,Jl="__reactContainer$"+rm,K2="__reactEvents$"+rm,X9="__reactListeners$"+rm,Y9="__reactHandles$"+rm;function Fd(n){var e=n[qo];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Jl]||t[qo]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=_I(n);n!==null;){if(t=n[qo])return t;n=_I(n)}return e}n=t,t=n.parentNode}return null}function Ly(n){return n=n[qo]||n[Jl],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function $f(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(rt(33))}function Iw(n){return n[D0]||null}var Z2=[],Wf=-1;function Fu(n){return{current:n}}function ni(n){0>Wf||(n.current=Z2[Wf],Z2[Wf]=null,Wf--)}function Kn(n,e){Wf++,Z2[Wf]=n.current,n.current=e}var Cu={},Yr=Fu(Cu),Ns=Fu(!1),fh=Cu;function Tp(n,e){var t=n.type.contextTypes;if(!t)return Cu;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Is(n){return n=n.childContextTypes,n!=null}function H1(){ni(Ns),ni(Yr)}function bI(n,e,t){if(Yr.current!==Cu)throw Error(rt(168));Kn(Yr,e),Kn(Ns,t)}function xU(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(rt(108,I7(n)||"Unknown",r));return _i({},t,i)}function V1(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Cu,fh=Yr.current,Kn(Yr,n),Kn(Ns,Ns.current),!0}function wI(n,e,t){var i=n.stateNode;if(!i)throw Error(rt(169));t?(n=xU(n,e,fh),i.__reactInternalMemoizedMergedChildContext=n,ni(Ns),ni(Yr),Kn(Yr,n)):ni(Ns),Kn(Ns,t)}var Nl=null,Dw=!1,SE=!1;function _U(n){Nl===null?Nl=[n]:Nl.push(n)}function K9(n){Dw=!0,_U(n)}function Uu(){if(!SE&&Nl!==null){SE=!0;var n=0,e=Un;try{var t=Nl;for(Un=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Nl=null,Dw=!1}catch(r){throw Nl!==null&&(Nl=Nl.slice(n+1)),W5(hP,Uu),r}finally{Un=e,SE=!1}}return null}var Gf=[],qf=0,$1=null,W1=0,Aa=[],Pa=0,ph=null,jl=1,zl="";function Md(n,e){Gf[qf++]=W1,Gf[qf++]=$1,$1=n,W1=e}function bU(n,e,t){Aa[Pa++]=jl,Aa[Pa++]=zl,Aa[Pa++]=ph,ph=n;var i=jl;n=zl;var r=32-bo(i)-1;i&=~(1<<r),t+=1;var s=32-bo(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,jl=1<<32-bo(e)+r|t<<r|i,zl=s+n}else jl=1<<s|t<<r|i,zl=n}function bP(n){n.return!==null&&(Md(n,1),bU(n,1,0))}function wP(n){for(;n===$1;)$1=Gf[--qf],Gf[qf]=null,W1=Gf[--qf],Gf[qf]=null;for(;n===ph;)ph=Aa[--Pa],Aa[Pa]=null,zl=Aa[--Pa],Aa[Pa]=null,jl=Aa[--Pa],Aa[Pa]=null}var aa=null,ra=null,oi=!1,go=null;function wU(n,e){var t=Oa(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function SI(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,aa=n,ra=fu(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,aa=n,ra=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=ph!==null?{id:jl,overflow:zl}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Oa(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,aa=n,ra=null,!0):!1;default:return!1}}function J2(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Q2(n){if(oi){var e=ra;if(e){var t=e;if(!SI(n,e)){if(J2(n))throw Error(rt(418));e=fu(t.nextSibling);var i=aa;e&&SI(n,e)?wU(i,t):(n.flags=n.flags&-4097|2,oi=!1,aa=n)}}else{if(J2(n))throw Error(rt(418));n.flags=n.flags&-4097|2,oi=!1,aa=n}}}function MI(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;aa=n}function yx(n){if(n!==aa)return!1;if(!oi)return MI(n),oi=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!X2(n.type,n.memoizedProps)),e&&(e=ra)){if(J2(n))throw SU(),Error(rt(418));for(;e;)wU(n,e),e=fu(e.nextSibling)}if(MI(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(rt(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){ra=fu(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}ra=null}}else ra=aa?fu(n.stateNode.nextSibling):null;return!0}function SU(){for(var n=ra;n;)n=fu(n.nextSibling)}function Cp(){ra=aa=null,oi=!1}function SP(n){go===null?go=[n]:go.push(n)}var Z9=lc.ReactCurrentBatchConfig;function Fm(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(rt(309));var i=t.stateNode}if(!i)throw Error(rt(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=r.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof n!="string")throw Error(rt(284));if(!t._owner)throw Error(rt(290,n))}return n}function vx(n,e){throw n=Object.prototype.toString.call(e),Error(rt(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function EI(n){var e=n._init;return e(n._payload)}function MU(n){function e(v,b){if(n){var w=v.deletions;w===null?(v.deletions=[b],v.flags|=16):w.push(b)}}function t(v,b){if(!n)return null;for(;b!==null;)e(v,b),b=b.sibling;return null}function i(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function r(v,b){return v=yu(v,b),v.index=0,v.sibling=null,v}function s(v,b,w){return v.index=w,n?(w=v.alternate,w!==null?(w=w.index,w<b?(v.flags|=2,b):w):(v.flags|=2,b)):(v.flags|=1048576,b)}function a(v){return n&&v.alternate===null&&(v.flags|=2),v}function o(v,b,w,S){return b===null||b.tag!==6?(b=RE(w,v.mode,S),b.return=v,b):(b=r(b,w),b.return=v,b)}function l(v,b,w,S){var A=w.type;return A===zf?u(v,b,w.props.children,S,w.key):b!==null&&(b.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Fc&&EI(A)===b.type)?(S=r(b,w.props),S.ref=Fm(v,b,w),S.return=v,S):(S=f1(w.type,w.key,w.props,null,v.mode,S),S.ref=Fm(v,b,w),S.return=v,S)}function c(v,b,w,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=kE(w,v.mode,S),b.return=v,b):(b=r(b,w.children||[]),b.return=v,b)}function u(v,b,w,S,A){return b===null||b.tag!==7?(b=Zd(w,v.mode,S,A),b.return=v,b):(b=r(b,w),b.return=v,b)}function d(v,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=RE(""+b,v.mode,w),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ox:return w=f1(b.type,b.key,b.props,null,v.mode,w),w.ref=Fm(v,null,b),w.return=v,w;case jf:return b=kE(b,v.mode,w),b.return=v,b;case Fc:var S=b._init;return d(v,S(b._payload),w)}if(gg(b)||Nm(b))return b=Zd(b,v.mode,w,null),b.return=v,b;vx(v,b)}return null}function h(v,b,w,S){var A=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return A!==null?null:o(v,b,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ox:return w.key===A?l(v,b,w,S):null;case jf:return w.key===A?c(v,b,w,S):null;case Fc:return A=w._init,h(v,b,A(w._payload),S)}if(gg(w)||Nm(w))return A!==null?null:u(v,b,w,S,null);vx(v,w)}return null}function p(v,b,w,S,A){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(w)||null,o(b,v,""+S,A);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ox:return v=v.get(S.key===null?w:S.key)||null,l(b,v,S,A);case jf:return v=v.get(S.key===null?w:S.key)||null,c(b,v,S,A);case Fc:var P=S._init;return p(v,b,w,P(S._payload),A)}if(gg(S)||Nm(S))return v=v.get(w)||null,u(b,v,S,A,null);vx(b,S)}return null}function y(v,b,w,S){for(var A=null,P=null,k=b,T=b=0,E=null;k!==null&&T<w.length;T++){k.index>T?(E=k,k=null):E=k.sibling;var R=h(v,k,w[T],S);if(R===null){k===null&&(k=E);break}n&&k&&R.alternate===null&&e(v,k),b=s(R,b,T),P===null?A=R:P.sibling=R,P=R,k=E}if(T===w.length)return t(v,k),oi&&Md(v,T),A;if(k===null){for(;T<w.length;T++)k=d(v,w[T],S),k!==null&&(b=s(k,b,T),P===null?A=k:P.sibling=k,P=k);return oi&&Md(v,T),A}for(k=i(v,k);T<w.length;T++)E=p(k,v,T,w[T],S),E!==null&&(n&&E.alternate!==null&&k.delete(E.key===null?T:E.key),b=s(E,b,T),P===null?A=E:P.sibling=E,P=E);return n&&k.forEach(function(I){return e(v,I)}),oi&&Md(v,T),A}function x(v,b,w,S){var A=Nm(w);if(typeof A!="function")throw Error(rt(150));if(w=A.call(w),w==null)throw Error(rt(151));for(var P=A=null,k=b,T=b=0,E=null,R=w.next();k!==null&&!R.done;T++,R=w.next()){k.index>T?(E=k,k=null):E=k.sibling;var I=h(v,k,R.value,S);if(I===null){k===null&&(k=E);break}n&&k&&I.alternate===null&&e(v,k),b=s(I,b,T),P===null?A=I:P.sibling=I,P=I,k=E}if(R.done)return t(v,k),oi&&Md(v,T),A;if(k===null){for(;!R.done;T++,R=w.next())R=d(v,R.value,S),R!==null&&(b=s(R,b,T),P===null?A=R:P.sibling=R,P=R);return oi&&Md(v,T),A}for(k=i(v,k);!R.done;T++,R=w.next())R=p(k,v,T,R.value,S),R!==null&&(n&&R.alternate!==null&&k.delete(R.key===null?T:R.key),b=s(R,b,T),P===null?A=R:P.sibling=R,P=R);return n&&k.forEach(function(D){return e(v,D)}),oi&&Md(v,T),A}function _(v,b,w,S){if(typeof w=="object"&&w!==null&&w.type===zf&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case ox:e:{for(var A=w.key,P=b;P!==null;){if(P.key===A){if(A=w.type,A===zf){if(P.tag===7){t(v,P.sibling),b=r(P,w.props.children),b.return=v,v=b;break e}}else if(P.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Fc&&EI(A)===P.type){t(v,P.sibling),b=r(P,w.props),b.ref=Fm(v,P,w),b.return=v,v=b;break e}t(v,P);break}else e(v,P);P=P.sibling}w.type===zf?(b=Zd(w.props.children,v.mode,S,w.key),b.return=v,v=b):(S=f1(w.type,w.key,w.props,null,v.mode,S),S.ref=Fm(v,b,w),S.return=v,v=S)}return a(v);case jf:e:{for(P=w.key;b!==null;){if(b.key===P)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){t(v,b.sibling),b=r(b,w.children||[]),b.return=v,v=b;break e}else{t(v,b);break}else e(v,b);b=b.sibling}b=kE(w,v.mode,S),b.return=v,v=b}return a(v);case Fc:return P=w._init,_(v,b,P(w._payload),S)}if(gg(w))return y(v,b,w,S);if(Nm(w))return x(v,b,w,S);vx(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(t(v,b.sibling),b=r(b,w),b.return=v,v=b):(t(v,b),b=RE(w,v.mode,S),b.return=v,v=b),a(v)):t(v,b)}return _}var Ap=MU(!0),EU=MU(!1),G1=Fu(null),q1=null,Xf=null,MP=null;function EP(){MP=Xf=q1=null}function TP(n){var e=G1.current;ni(G1),n._currentValue=e}function eC(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function up(n,e){q1=n,MP=Xf=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(ks=!0),n.firstContext=null)}function qa(n){var e=n._currentValue;if(MP!==n)if(n={context:n,memoizedValue:e,next:null},Xf===null){if(q1===null)throw Error(rt(308));Xf=n,q1.dependencies={lanes:0,firstContext:n}}else Xf=Xf.next=n;return e}var Ud=null;function CP(n){Ud===null?Ud=[n]:Ud.push(n)}function TU(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,CP(e)):(t.next=r.next,r.next=t),e.interleaved=t,Ql(n,i)}function Ql(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Uc=!1;function AP(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CU(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Gl(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function pu(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,En&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Ql(n,t)}return r=i.interleaved,r===null?(e.next=e,CP(i)):(e.next=r.next,r.next=e),i.interleaved=e,Ql(n,t)}function o1(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,fP(n,t)}}function TI(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=a:s=s.next=a,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function X1(n,e,t,i){var r=n.updateQueue;Uc=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var u=n.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;a=0,u=c=l=null,o=s;do{var h=o.lane,p=o.eventTime;if((i&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=n,x=o;switch(h=e,p=t,x.tag){case 1:if(y=x.payload,typeof y=="function"){d=y.call(p,d,h);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,h=typeof y=="function"?y.call(p,d,h):y,h==null)break e;d=_i({},d,h);break e;case 2:Uc=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,h=r.effects,h===null?r.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,a|=h;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;h=o,o=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(1);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);gh|=a,n.lanes=a,n.memoizedState=d}}function CI(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(rt(191,r));r.call(i)}}}var Oy={},el=Fu(Oy),L0=Fu(Oy),O0=Fu(Oy);function jd(n){if(n===Oy)throw Error(rt(174));return n}function PP(n,e){switch(Kn(O0,e),Kn(L0,n),Kn(el,Oy),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:D2(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=D2(e,n)}ni(el),Kn(el,e)}function Pp(){ni(el),ni(L0),ni(O0)}function AU(n){jd(O0.current);var e=jd(el.current),t=D2(e,n.type);e!==t&&(Kn(L0,n),Kn(el,t))}function RP(n){L0.current===n&&(ni(el),ni(L0))}var fi=Fu(0);function Y1(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ME=[];function kP(){for(var n=0;n<ME.length;n++)ME[n]._workInProgressVersionPrimary=null;ME.length=0}var l1=lc.ReactCurrentDispatcher,EE=lc.ReactCurrentBatchConfig,mh=0,xi=null,tr=null,gr=null,K1=!1,jg=!1,F0=0,J9=0;function Dr(){throw Error(rt(321))}function NP(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Mo(n[t],e[t]))return!1;return!0}function IP(n,e,t,i,r,s){if(mh=s,xi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,l1.current=n===null||n.memoizedState===null?nW:iW,n=t(i,r),jg){s=0;do{if(jg=!1,F0=0,25<=s)throw Error(rt(301));s+=1,gr=tr=null,e.updateQueue=null,l1.current=rW,n=t(i,r)}while(jg)}if(l1.current=Z1,e=tr!==null&&tr.next!==null,mh=0,gr=tr=xi=null,K1=!1,e)throw Error(rt(300));return n}function DP(){var n=F0!==0;return F0=0,n}function Bo(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gr===null?xi.memoizedState=gr=n:gr=gr.next=n,gr}function Xa(){if(tr===null){var n=xi.alternate;n=n!==null?n.memoizedState:null}else n=tr.next;var e=gr===null?xi.memoizedState:gr.next;if(e!==null)gr=e,tr=n;else{if(n===null)throw Error(rt(310));tr=n,n={memoizedState:tr.memoizedState,baseState:tr.baseState,baseQueue:tr.baseQueue,queue:tr.queue,next:null},gr===null?xi.memoizedState=gr=n:gr=gr.next=n}return gr}function U0(n,e){return typeof e=="function"?e(n):e}function TE(n){var e=Xa(),t=e.queue;if(t===null)throw Error(rt(311));t.lastRenderedReducer=n;var i=tr,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var o=a=null,l=null,c=s;do{var u=c.lane;if((mh&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=d,a=i):l=l.next=d,xi.lanes|=u,gh|=u}c=c.next}while(c!==null&&c!==s);l===null?a=i:l.next=o,Mo(i,e.memoizedState)||(ks=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,xi.lanes|=s,gh|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function CE(n){var e=Xa(),t=e.queue;if(t===null)throw Error(rt(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var a=r=r.next;do s=n(s,a.action),a=a.next;while(a!==r);Mo(s,e.memoizedState)||(ks=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function PU(){}function RU(n,e){var t=xi,i=Xa(),r=e(),s=!Mo(i.memoizedState,r);if(s&&(i.memoizedState=r,ks=!0),i=i.queue,LP(IU.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||gr!==null&&gr.memoizedState.tag&1){if(t.flags|=2048,j0(9,NU.bind(null,t,i,r,e),void 0,null),xr===null)throw Error(rt(349));mh&30||kU(t,e,r)}return r}function kU(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=xi.updateQueue,e===null?(e={lastEffect:null,stores:null},xi.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function NU(n,e,t,i){e.value=t,e.getSnapshot=i,DU(e)&&LU(n)}function IU(n,e,t){return t(function(){DU(e)&&LU(n)})}function DU(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Mo(n,t)}catch{return!0}}function LU(n){var e=Ql(n,1);e!==null&&wo(e,n,1,-1)}function AI(n){var e=Bo();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:U0,lastRenderedState:n},e.queue=n,n=n.dispatch=tW.bind(null,xi,n),[e.memoizedState,n]}function j0(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=xi.updateQueue,e===null?(e={lastEffect:null,stores:null},xi.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function OU(){return Xa().memoizedState}function c1(n,e,t,i){var r=Bo();xi.flags|=n,r.memoizedState=j0(1|e,t,void 0,i===void 0?null:i)}function Lw(n,e,t,i){var r=Xa();i=i===void 0?null:i;var s=void 0;if(tr!==null){var a=tr.memoizedState;if(s=a.destroy,i!==null&&NP(i,a.deps)){r.memoizedState=j0(e,t,s,i);return}}xi.flags|=n,r.memoizedState=j0(1|e,t,s,i)}function PI(n,e){return c1(8390656,8,n,e)}function LP(n,e){return Lw(2048,8,n,e)}function FU(n,e){return Lw(4,2,n,e)}function UU(n,e){return Lw(4,4,n,e)}function jU(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function zU(n,e,t){return t=t!=null?t.concat([n]):null,Lw(4,4,jU.bind(null,e,n),t)}function OP(){}function BU(n,e){var t=Xa();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&NP(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function HU(n,e){var t=Xa();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&NP(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function VU(n,e,t){return mh&21?(Mo(t,e)||(t=X5(),xi.lanes|=t,gh|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,ks=!0),n.memoizedState=t)}function Q9(n,e){var t=Un;Un=t!==0&&4>t?t:4,n(!0);var i=EE.transition;EE.transition={};try{n(!1),e()}finally{Un=t,EE.transition=i}}function $U(){return Xa().memoizedState}function eW(n,e,t){var i=gu(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},WU(n))GU(e,t);else if(t=TU(n,e,t,i),t!==null){var r=ps();wo(t,n,i,r),qU(t,e,i)}}function tW(n,e,t){var i=gu(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(WU(n))GU(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,t);if(r.hasEagerState=!0,r.eagerState=o,Mo(o,a)){var l=e.interleaved;l===null?(r.next=r,CP(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=TU(n,e,r,i),t!==null&&(r=ps(),wo(t,n,i,r),qU(t,e,i))}}function WU(n){var e=n.alternate;return n===xi||e!==null&&e===xi}function GU(n,e){jg=K1=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function qU(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,fP(n,t)}}var Z1={readContext:qa,useCallback:Dr,useContext:Dr,useEffect:Dr,useImperativeHandle:Dr,useInsertionEffect:Dr,useLayoutEffect:Dr,useMemo:Dr,useReducer:Dr,useRef:Dr,useState:Dr,useDebugValue:Dr,useDeferredValue:Dr,useTransition:Dr,useMutableSource:Dr,useSyncExternalStore:Dr,useId:Dr,unstable_isNewReconciler:!1},nW={readContext:qa,useCallback:function(n,e){return Bo().memoizedState=[n,e===void 0?null:e],n},useContext:qa,useEffect:PI,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,c1(4194308,4,jU.bind(null,e,n),t)},useLayoutEffect:function(n,e){return c1(4194308,4,n,e)},useInsertionEffect:function(n,e){return c1(4,2,n,e)},useMemo:function(n,e){var t=Bo();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Bo();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=eW.bind(null,xi,n),[i.memoizedState,n]},useRef:function(n){var e=Bo();return n={current:n},e.memoizedState=n},useState:AI,useDebugValue:OP,useDeferredValue:function(n){return Bo().memoizedState=n},useTransition:function(){var n=AI(!1),e=n[0];return n=Q9.bind(null,n[1]),Bo().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=xi,r=Bo();if(oi){if(t===void 0)throw Error(rt(407));t=t()}else{if(t=e(),xr===null)throw Error(rt(349));mh&30||kU(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,PI(IU.bind(null,i,s,n),[n]),i.flags|=2048,j0(9,NU.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=Bo(),e=xr.identifierPrefix;if(oi){var t=zl,i=jl;t=(i&~(1<<32-bo(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=F0++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=J9++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},iW={readContext:qa,useCallback:BU,useContext:qa,useEffect:LP,useImperativeHandle:zU,useInsertionEffect:FU,useLayoutEffect:UU,useMemo:HU,useReducer:TE,useRef:OU,useState:function(){return TE(U0)},useDebugValue:OP,useDeferredValue:function(n){var e=Xa();return VU(e,tr.memoizedState,n)},useTransition:function(){var n=TE(U0)[0],e=Xa().memoizedState;return[n,e]},useMutableSource:PU,useSyncExternalStore:RU,useId:$U,unstable_isNewReconciler:!1},rW={readContext:qa,useCallback:BU,useContext:qa,useEffect:LP,useImperativeHandle:zU,useInsertionEffect:FU,useLayoutEffect:UU,useMemo:HU,useReducer:CE,useRef:OU,useState:function(){return CE(U0)},useDebugValue:OP,useDeferredValue:function(n){var e=Xa();return tr===null?e.memoizedState=n:VU(e,tr.memoizedState,n)},useTransition:function(){var n=CE(U0)[0],e=Xa().memoizedState;return[n,e]},useMutableSource:PU,useSyncExternalStore:RU,useId:$U,unstable_isNewReconciler:!1};function uo(n,e){if(n&&n.defaultProps){e=_i({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function tC(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:_i({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Ow={isMounted:function(n){return(n=n._reactInternals)?Ih(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=ps(),r=gu(n),s=Gl(i,r);s.payload=e,t!=null&&(s.callback=t),e=pu(n,s,r),e!==null&&(wo(e,n,r,i),o1(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=ps(),r=gu(n),s=Gl(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=pu(n,s,r),e!==null&&(wo(e,n,r,i),o1(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=ps(),i=gu(n),r=Gl(t,i);r.tag=2,e!=null&&(r.callback=e),e=pu(n,r,i),e!==null&&(wo(e,n,i,t),o1(e,n,i))}};function RI(n,e,t,i,r,s,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!k0(t,i)||!k0(r,s):!0}function XU(n,e,t){var i=!1,r=Cu,s=e.contextType;return typeof s=="object"&&s!==null?s=qa(s):(r=Is(e)?fh:Yr.current,i=e.contextTypes,s=(i=i!=null)?Tp(n,r):Cu),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ow,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function kI(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&Ow.enqueueReplaceState(e,e.state,null)}function nC(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},AP(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=qa(s):(s=Is(e)?fh:Yr.current,r.context=Tp(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(tC(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Ow.enqueueReplaceState(r,r.state,null),X1(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Rp(n,e){try{var t="",i=e;do t+=N7(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function AE(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function iC(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var sW=typeof WeakMap=="function"?WeakMap:Map;function YU(n,e,t){t=Gl(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){Q1||(Q1=!0,fC=i),iC(n,e)},t}function KU(n,e,t){t=Gl(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){iC(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){iC(n,e),typeof i!="function"&&(mu===null?mu=new Set([this]):mu.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function NI(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new sW;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=xW.bind(null,n,e,t),e.then(n,n))}function II(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function DI(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Gl(-1,1),e.tag=2,pu(t,e,1))),t.lanes|=1),n)}var aW=lc.ReactCurrentOwner,ks=!1;function os(n,e,t,i){e.child=n===null?EU(e,null,t,i):Ap(e,n.child,t,i)}function LI(n,e,t,i,r){t=t.render;var s=e.ref;return up(e,r),i=IP(n,e,t,i,s,r),t=DP(),n!==null&&!ks?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,ec(n,e,r)):(oi&&t&&bP(e),e.flags|=1,os(n,e,i,r),e.child)}function OI(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!$P(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,ZU(n,e,s,i,r)):(n=f1(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var a=s.memoizedProps;if(t=t.compare,t=t!==null?t:k0,t(a,i)&&n.ref===e.ref)return ec(n,e,r)}return e.flags|=1,n=yu(s,i),n.ref=e.ref,n.return=e,e.child=n}function ZU(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(k0(s,i)&&n.ref===e.ref)if(ks=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(ks=!0);else return e.lanes=n.lanes,ec(n,e,r)}return rC(n,e,t,i,r)}function JU(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kn(Kf,Zs),Zs|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Kn(Kf,Zs),Zs|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,Kn(Kf,Zs),Zs|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,Kn(Kf,Zs),Zs|=i;return os(n,e,r,t),e.child}function QU(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function rC(n,e,t,i,r){var s=Is(t)?fh:Yr.current;return s=Tp(e,s),up(e,r),t=IP(n,e,t,i,s,r),i=DP(),n!==null&&!ks?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,ec(n,e,r)):(oi&&i&&bP(e),e.flags|=1,os(n,e,t,r),e.child)}function FI(n,e,t,i,r){if(Is(t)){var s=!0;V1(e)}else s=!1;if(up(e,r),e.stateNode===null)u1(n,e),XU(e,t,i),nC(e,t,i,r),i=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=t.contextType;typeof c=="object"&&c!==null?c=qa(c):(c=Is(t)?fh:Yr.current,c=Tp(e,c));var u=t.getDerivedStateFromProps,d=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||l!==c)&&kI(e,a,i,c),Uc=!1;var h=e.memoizedState;a.state=h,X1(e,i,a,r),l=e.memoizedState,o!==i||h!==l||Ns.current||Uc?(typeof u=="function"&&(tC(e,t,u,i),l=e.memoizedState),(o=Uc||RI(e,t,o,i,h,l,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,CU(n,e),o=e.memoizedProps,c=e.type===e.elementType?o:uo(e.type,o),a.props=c,d=e.pendingProps,h=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=qa(l):(l=Is(t)?fh:Yr.current,l=Tp(e,l));var p=t.getDerivedStateFromProps;(u=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||h!==l)&&kI(e,a,i,l),Uc=!1,h=e.memoizedState,a.state=h,X1(e,i,a,r);var y=e.memoizedState;o!==d||h!==y||Ns.current||Uc?(typeof p=="function"&&(tC(e,t,p,i),y=e.memoizedState),(c=Uc||RI(e,t,c,i,h,y,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,y,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,y,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),a.props=i,a.state=y,a.context=l,i=c):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),i=!1)}return sC(n,e,t,i,s,r)}function sC(n,e,t,i,r,s){QU(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&wI(e,t,!1),ec(n,e,s);i=e.stateNode,aW.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=Ap(e,n.child,null,s),e.child=Ap(e,null,o,s)):os(n,e,o,s),e.memoizedState=i.state,r&&wI(e,t,!0),e.child}function ej(n){var e=n.stateNode;e.pendingContext?bI(n,e.pendingContext,e.pendingContext!==e.context):e.context&&bI(n,e.context,!1),PP(n,e.containerInfo)}function UI(n,e,t,i,r){return Cp(),SP(r),e.flags|=256,os(n,e,t,i),e.child}var aC={dehydrated:null,treeContext:null,retryLane:0};function oC(n){return{baseLanes:n,cachePool:null,transitions:null}}function tj(n,e,t){var i=e.pendingProps,r=fi.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(r&2)!==0),o?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Kn(fi,r&1),n===null)return Q2(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,s?(i=e.mode,s=e.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=jw(a,i,0,null),n=Zd(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=oC(t),e.memoizedState=aC,n):FP(e,a));if(r=n.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return oW(n,e,a,i,o,r,t);if(s){s=i.fallback,a=e.mode,r=n.child,o=r.sibling;var l={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=yu(r,l),i.subtreeFlags=r.subtreeFlags&14680064),o!==null?s=yu(o,s):(s=Zd(s,a,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,a=n.child.memoizedState,a=a===null?oC(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=n.childLanes&~t,e.memoizedState=aC,i}return s=n.child,n=s.sibling,i=yu(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function FP(n,e){return e=jw({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function xx(n,e,t,i){return i!==null&&SP(i),Ap(e,n.child,null,t),n=FP(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function oW(n,e,t,i,r,s,a){if(t)return e.flags&256?(e.flags&=-257,i=AE(Error(rt(422))),xx(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=jw({mode:"visible",children:i.children},r,0,null),s=Zd(s,r,a,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Ap(e,n.child,null,a),e.child.memoizedState=oC(a),e.memoizedState=aC,s);if(!(e.mode&1))return xx(n,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var o=i.dgst;return i=o,s=Error(rt(419)),i=AE(s,i,void 0),xx(n,e,a,i)}if(o=(a&n.childLanes)!==0,ks||o){if(i=xr,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Ql(n,r),wo(i,n,r,-1))}return VP(),i=AE(Error(rt(421))),xx(n,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=_W.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,ra=fu(r.nextSibling),aa=e,oi=!0,go=null,n!==null&&(Aa[Pa++]=jl,Aa[Pa++]=zl,Aa[Pa++]=ph,jl=n.id,zl=n.overflow,ph=e),e=FP(e,i.children),e.flags|=4096,e)}function jI(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),eC(n.return,e,t)}function PE(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function nj(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(os(n,e,i.children,t),i=fi.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&jI(n,t,e);else if(n.tag===19)jI(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Kn(fi,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Y1(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),PE(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Y1(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}PE(e,!0,t,null,s);break;case"together":PE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function u1(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ec(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),gh|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(rt(153));if(e.child!==null){for(n=e.child,t=yu(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=yu(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function lW(n,e,t){switch(e.tag){case 3:ej(e),Cp();break;case 5:AU(e);break;case 1:Is(e.type)&&V1(e);break;case 4:PP(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Kn(G1,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Kn(fi,fi.current&1),e.flags|=128,null):t&e.child.childLanes?tj(n,e,t):(Kn(fi,fi.current&1),n=ec(n,e,t),n!==null?n.sibling:null);Kn(fi,fi.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return nj(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Kn(fi,fi.current),i)break;return null;case 22:case 23:return e.lanes=0,JU(n,e,t)}return ec(n,e,t)}var ij,lC,rj,sj;ij=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};lC=function(){};rj=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,jd(el.current);var s=null;switch(t){case"input":r=R2(n,r),i=R2(n,i),s=[];break;case"select":r=_i({},r,{value:void 0}),i=_i({},i,{value:void 0}),s=[];break;case"textarea":r=I2(n,r),i=I2(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=B1)}L2(t,i);var a;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var o=r[c];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(M0.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(o=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(M0.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Jn("scroll",n),s||o===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};sj=function(n,e,t,i){t!==i&&(e.flags|=4)};function Um(n,e){if(!oi)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Lr(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function cW(n,e,t){var i=e.pendingProps;switch(wP(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lr(e),null;case 1:return Is(e.type)&&H1(),Lr(e),null;case 3:return i=e.stateNode,Pp(),ni(Ns),ni(Yr),kP(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(yx(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,go!==null&&(gC(go),go=null))),lC(n,e),Lr(e),null;case 5:RP(e);var r=jd(O0.current);if(t=e.type,n!==null&&e.stateNode!=null)rj(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(rt(166));return Lr(e),null}if(n=jd(el.current),yx(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[qo]=e,i[D0]=s,n=(e.mode&1)!==0,t){case"dialog":Jn("cancel",i),Jn("close",i);break;case"iframe":case"object":case"embed":Jn("load",i);break;case"video":case"audio":for(r=0;r<vg.length;r++)Jn(vg[r],i);break;case"source":Jn("error",i);break;case"img":case"image":case"link":Jn("error",i),Jn("load",i);break;case"details":Jn("toggle",i);break;case"input":XN(i,s),Jn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Jn("invalid",i);break;case"textarea":KN(i,s),Jn("invalid",i)}L2(t,s),r=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?i.textContent!==o&&(s.suppressHydrationWarning!==!0&&gx(i.textContent,o,n),r=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&gx(i.textContent,o,n),r=["children",""+o]):M0.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Jn("scroll",i)}switch(t){case"input":lx(i),YN(i,s,!0);break;case"textarea":lx(i),ZN(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=B1)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=I5(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(t,{is:i.is}):(n=a.createElement(t),t==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,t),n[qo]=e,n[D0]=i,ij(n,e,!1,!1),e.stateNode=n;e:{switch(a=O2(t,i),t){case"dialog":Jn("cancel",n),Jn("close",n),r=i;break;case"iframe":case"object":case"embed":Jn("load",n),r=i;break;case"video":case"audio":for(r=0;r<vg.length;r++)Jn(vg[r],n);r=i;break;case"source":Jn("error",n),r=i;break;case"img":case"image":case"link":Jn("error",n),Jn("load",n),r=i;break;case"details":Jn("toggle",n),r=i;break;case"input":XN(n,i),r=R2(n,i),Jn("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=_i({},i,{value:void 0}),Jn("invalid",n);break;case"textarea":KN(n,i),r=I2(n,i),Jn("invalid",n);break;default:r=i}L2(t,r),o=r;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?O5(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&D5(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&E0(n,l):typeof l=="number"&&E0(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(M0.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Jn("scroll",n):l!=null&&oP(n,s,l,a))}switch(t){case"input":lx(n),YN(n,i,!1);break;case"textarea":lx(n),ZN(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Tu(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?ap(n,!!i.multiple,s,!1):i.defaultValue!=null&&ap(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=B1)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lr(e),null;case 6:if(n&&e.stateNode!=null)sj(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(rt(166));if(t=jd(O0.current),jd(el.current),yx(e)){if(i=e.stateNode,t=e.memoizedProps,i[qo]=e,(s=i.nodeValue!==t)&&(n=aa,n!==null))switch(n.tag){case 3:gx(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&gx(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[qo]=e,e.stateNode=i}return Lr(e),null;case 13:if(ni(fi),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(oi&&ra!==null&&e.mode&1&&!(e.flags&128))SU(),Cp(),e.flags|=98560,s=!1;else if(s=yx(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(rt(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(rt(317));s[qo]=e}else Cp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lr(e),s=!1}else go!==null&&(gC(go),go=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||fi.current&1?rr===0&&(rr=3):VP())),e.updateQueue!==null&&(e.flags|=4),Lr(e),null);case 4:return Pp(),lC(n,e),n===null&&N0(e.stateNode.containerInfo),Lr(e),null;case 10:return TP(e.type._context),Lr(e),null;case 17:return Is(e.type)&&H1(),Lr(e),null;case 19:if(ni(fi),s=e.memoizedState,s===null)return Lr(e),null;if(i=(e.flags&128)!==0,a=s.rendering,a===null)if(i)Um(s,!1);else{if(rr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=Y1(n),a!==null){for(e.flags|=128,Um(s,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,n=a.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Kn(fi,fi.current&1|2),e.child}n=n.sibling}s.tail!==null&&Li()>kp&&(e.flags|=128,i=!0,Um(s,!1),e.lanes=4194304)}else{if(!i)if(n=Y1(a),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Um(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!oi)return Lr(e),null}else 2*Li()-s.renderingStartTime>kp&&t!==1073741824&&(e.flags|=128,i=!0,Um(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(t=s.last,t!==null?t.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Li(),e.sibling=null,t=fi.current,Kn(fi,i?t&1|2:t&1),e):(Lr(e),null);case 22:case 23:return HP(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Zs&1073741824&&(Lr(e),e.subtreeFlags&6&&(e.flags|=8192)):Lr(e),null;case 24:return null;case 25:return null}throw Error(rt(156,e.tag))}function uW(n,e){switch(wP(e),e.tag){case 1:return Is(e.type)&&H1(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Pp(),ni(Ns),ni(Yr),kP(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return RP(e),null;case 13:if(ni(fi),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(rt(340));Cp()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ni(fi),null;case 4:return Pp(),null;case 10:return TP(e.type._context),null;case 22:case 23:return HP(),null;case 24:return null;default:return null}}var _x=!1,Hr=!1,dW=typeof WeakSet=="function"?WeakSet:Set,At=null;function Yf(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Mi(n,e,i)}else t.current=null}function cC(n,e,t){try{t()}catch(i){Mi(n,e,i)}}var zI=!1;function hW(n,e){if(G2=U1,n=uU(),_P(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,c=0,u=0,d=n,h=null;t:for(;;){for(var p;d!==t||r!==0&&d.nodeType!==3||(o=a+r),d!==s||i!==0&&d.nodeType!==3||(l=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===n)break t;if(h===t&&++c===r&&(o=a),h===s&&++u===i&&(l=a),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(q2={focusedElem:n,selectionRange:t},U1=!1,At=e;At!==null;)if(e=At,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,At=n;else for(;At!==null;){e=At;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,_=y.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:uo(e.type,x),_);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(rt(163))}}catch(S){Mi(e,e.return,S)}if(n=e.sibling,n!==null){n.return=e.return,At=n;break}At=e.return}return y=zI,zI=!1,y}function zg(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&cC(e,t,s)}r=r.next}while(r!==i)}}function Fw(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function uC(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function aj(n){var e=n.alternate;e!==null&&(n.alternate=null,aj(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[qo],delete e[D0],delete e[K2],delete e[X9],delete e[Y9])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function oj(n){return n.tag===5||n.tag===3||n.tag===4}function BI(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||oj(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function dC(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=B1));else if(i!==4&&(n=n.child,n!==null))for(dC(n,e,t),n=n.sibling;n!==null;)dC(n,e,t),n=n.sibling}function hC(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(hC(n,e,t),n=n.sibling;n!==null;)hC(n,e,t),n=n.sibling}var Sr=null,po=!1;function Sc(n,e,t){for(t=t.child;t!==null;)lj(n,e,t),t=t.sibling}function lj(n,e,t){if(Qo&&typeof Qo.onCommitFiberUnmount=="function")try{Qo.onCommitFiberUnmount(Pw,t)}catch{}switch(t.tag){case 5:Hr||Yf(t,e);case 6:var i=Sr,r=po;Sr=null,Sc(n,e,t),Sr=i,po=r,Sr!==null&&(po?(n=Sr,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Sr.removeChild(t.stateNode));break;case 18:Sr!==null&&(po?(n=Sr,t=t.stateNode,n.nodeType===8?wE(n.parentNode,t):n.nodeType===1&&wE(n,t),P0(n)):wE(Sr,t.stateNode));break;case 4:i=Sr,r=po,Sr=t.stateNode.containerInfo,po=!0,Sc(n,e,t),Sr=i,po=r;break;case 0:case 11:case 14:case 15:if(!Hr&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&cC(t,e,a),r=r.next}while(r!==i)}Sc(n,e,t);break;case 1:if(!Hr&&(Yf(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(o){Mi(t,e,o)}Sc(n,e,t);break;case 21:Sc(n,e,t);break;case 22:t.mode&1?(Hr=(i=Hr)||t.memoizedState!==null,Sc(n,e,t),Hr=i):Sc(n,e,t);break;default:Sc(n,e,t)}}function HI(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new dW),e.forEach(function(i){var r=bW.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function no(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Sr=o.stateNode,po=!1;break e;case 3:Sr=o.stateNode.containerInfo,po=!0;break e;case 4:Sr=o.stateNode.containerInfo,po=!0;break e}o=o.return}if(Sr===null)throw Error(rt(160));lj(s,a,r),Sr=null,po=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Mi(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cj(e,n),e=e.sibling}function cj(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(no(e,n),Fo(n),i&4){try{zg(3,n,n.return),Fw(3,n)}catch(x){Mi(n,n.return,x)}try{zg(5,n,n.return)}catch(x){Mi(n,n.return,x)}}break;case 1:no(e,n),Fo(n),i&512&&t!==null&&Yf(t,t.return);break;case 5:if(no(e,n),Fo(n),i&512&&t!==null&&Yf(t,t.return),n.flags&32){var r=n.stateNode;try{E0(r,"")}catch(x){Mi(n,n.return,x)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,a=t!==null?t.memoizedProps:s,o=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&k5(r,s),O2(o,a);var c=O2(o,s);for(a=0;a<l.length;a+=2){var u=l[a],d=l[a+1];u==="style"?O5(r,d):u==="dangerouslySetInnerHTML"?D5(r,d):u==="children"?E0(r,d):oP(r,u,d,c)}switch(o){case"input":k2(r,s);break;case"textarea":N5(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?ap(r,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?ap(r,!!s.multiple,s.defaultValue,!0):ap(r,!!s.multiple,s.multiple?[]:"",!1))}r[D0]=s}catch(x){Mi(n,n.return,x)}}break;case 6:if(no(e,n),Fo(n),i&4){if(n.stateNode===null)throw Error(rt(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(x){Mi(n,n.return,x)}}break;case 3:if(no(e,n),Fo(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{P0(e.containerInfo)}catch(x){Mi(n,n.return,x)}break;case 4:no(e,n),Fo(n);break;case 13:no(e,n),Fo(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(zP=Li())),i&4&&HI(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Hr=(c=Hr)||u,no(e,n),Hr=c):no(e,n),Fo(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(At=n,u=n.child;u!==null;){for(d=At=u;At!==null;){switch(h=At,p=h.child,h.tag){case 0:case 11:case 14:case 15:zg(4,h,h.return);break;case 1:Yf(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){i=h,t=h.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(x){Mi(i,t,x)}}break;case 5:Yf(h,h.return);break;case 22:if(h.memoizedState!==null){$I(d);continue}}p!==null?(p.return=h,At=p):$I(d)}u=u.sibling}e:for(u=null,d=n;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=L5("display",a))}catch(x){Mi(n,n.return,x)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(x){Mi(n,n.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:no(e,n),Fo(n),i&4&&HI(n);break;case 21:break;default:no(e,n),Fo(n)}}function Fo(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(oj(t)){var i=t;break e}t=t.return}throw Error(rt(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(E0(r,""),i.flags&=-33);var s=BI(n);hC(n,s,r);break;case 3:case 4:var a=i.stateNode.containerInfo,o=BI(n);dC(n,o,a);break;default:throw Error(rt(161))}}catch(l){Mi(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function fW(n,e,t){At=n,uj(n)}function uj(n,e,t){for(var i=(n.mode&1)!==0;At!==null;){var r=At,s=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||_x;if(!a){var o=r.alternate,l=o!==null&&o.memoizedState!==null||Hr;o=_x;var c=Hr;if(_x=a,(Hr=l)&&!c)for(At=r;At!==null;)a=At,l=a.child,a.tag===22&&a.memoizedState!==null?WI(r):l!==null?(l.return=a,At=l):WI(r);for(;s!==null;)At=s,uj(s),s=s.sibling;At=r,_x=o,Hr=c}VI(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,At=s):VI(n)}}function VI(n){for(;At!==null;){var e=At;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Hr||Fw(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Hr)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:uo(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&CI(e,s,i);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}CI(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&P0(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(rt(163))}Hr||e.flags&512&&uC(e)}catch(h){Mi(e,e.return,h)}}if(e===n){At=null;break}if(t=e.sibling,t!==null){t.return=e.return,At=t;break}At=e.return}}function $I(n){for(;At!==null;){var e=At;if(e===n){At=null;break}var t=e.sibling;if(t!==null){t.return=e.return,At=t;break}At=e.return}}function WI(n){for(;At!==null;){var e=At;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Fw(4,e)}catch(l){Mi(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Mi(e,r,l)}}var s=e.return;try{uC(e)}catch(l){Mi(e,s,l)}break;case 5:var a=e.return;try{uC(e)}catch(l){Mi(e,a,l)}}}catch(l){Mi(e,e.return,l)}if(e===n){At=null;break}var o=e.sibling;if(o!==null){o.return=e.return,At=o;break}At=e.return}}var pW=Math.ceil,J1=lc.ReactCurrentDispatcher,UP=lc.ReactCurrentOwner,Wa=lc.ReactCurrentBatchConfig,En=0,xr=null,Xi=null,Er=0,Zs=0,Kf=Fu(0),rr=0,z0=null,gh=0,Uw=0,jP=0,Bg=null,Cs=null,zP=0,kp=1/0,Al=null,Q1=!1,fC=null,mu=null,bx=!1,Xc=null,eb=0,Hg=0,pC=null,d1=-1,h1=0;function ps(){return En&6?Li():d1!==-1?d1:d1=Li()}function gu(n){return n.mode&1?En&2&&Er!==0?Er&-Er:Z9.transition!==null?(h1===0&&(h1=X5()),h1):(n=Un,n!==0||(n=window.event,n=n===void 0?16:tU(n.type)),n):1}function wo(n,e,t,i){if(50<Hg)throw Hg=0,pC=null,Error(rt(185));Iy(n,t,i),(!(En&2)||n!==xr)&&(n===xr&&(!(En&2)&&(Uw|=t),rr===4&&Vc(n,Er)),Ds(n,i),t===1&&En===0&&!(e.mode&1)&&(kp=Li()+500,Dw&&Uu()))}function Ds(n,e){var t=n.callbackNode;Z7(n,e);var i=F1(n,n===xr?Er:0);if(i===0)t!==null&&eI(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&eI(t),e===1)n.tag===0?K9(GI.bind(null,n)):_U(GI.bind(null,n)),G9(function(){!(En&6)&&Uu()}),t=null;else{switch(Y5(i)){case 1:t=hP;break;case 4:t=G5;break;case 16:t=O1;break;case 536870912:t=q5;break;default:t=O1}t=vj(t,dj.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function dj(n,e){if(d1=-1,h1=0,En&6)throw Error(rt(327));var t=n.callbackNode;if(dp()&&n.callbackNode!==t)return null;var i=F1(n,n===xr?Er:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=tb(n,i);else{e=i;var r=En;En|=2;var s=fj();(xr!==n||Er!==e)&&(Al=null,kp=Li()+500,Kd(n,e));do try{yW();break}catch(o){hj(n,o)}while(1);EP(),J1.current=s,En=r,Xi!==null?e=0:(xr=null,Er=0,e=rr)}if(e!==0){if(e===2&&(r=B2(n),r!==0&&(i=r,e=mC(n,r))),e===1)throw t=z0,Kd(n,0),Vc(n,i),Ds(n,Li()),t;if(e===6)Vc(n,i);else{if(r=n.current.alternate,!(i&30)&&!mW(r)&&(e=tb(n,i),e===2&&(s=B2(n),s!==0&&(i=s,e=mC(n,s))),e===1))throw t=z0,Kd(n,0),Vc(n,i),Ds(n,Li()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(rt(345));case 2:Ed(n,Cs,Al);break;case 3:if(Vc(n,i),(i&130023424)===i&&(e=zP+500-Li(),10<e)){if(F1(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){ps(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=Y2(Ed.bind(null,n,Cs,Al),e);break}Ed(n,Cs,Al);break;case 4:if(Vc(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var a=31-bo(i);s=1<<a,a=e[a],a>r&&(r=a),i&=~s}if(i=r,i=Li()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*pW(i/1960))-i,10<i){n.timeoutHandle=Y2(Ed.bind(null,n,Cs,Al),i);break}Ed(n,Cs,Al);break;case 5:Ed(n,Cs,Al);break;default:throw Error(rt(329))}}}return Ds(n,Li()),n.callbackNode===t?dj.bind(null,n):null}function mC(n,e){var t=Bg;return n.current.memoizedState.isDehydrated&&(Kd(n,e).flags|=256),n=tb(n,e),n!==2&&(e=Cs,Cs=t,e!==null&&gC(e)),n}function gC(n){Cs===null?Cs=n:Cs.push.apply(Cs,n)}function mW(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Mo(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vc(n,e){for(e&=~jP,e&=~Uw,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-bo(e),i=1<<t;n[t]=-1,e&=~i}}function GI(n){if(En&6)throw Error(rt(327));dp();var e=F1(n,0);if(!(e&1))return Ds(n,Li()),null;var t=tb(n,e);if(n.tag!==0&&t===2){var i=B2(n);i!==0&&(e=i,t=mC(n,i))}if(t===1)throw t=z0,Kd(n,0),Vc(n,e),Ds(n,Li()),t;if(t===6)throw Error(rt(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Ed(n,Cs,Al),Ds(n,Li()),null}function BP(n,e){var t=En;En|=1;try{return n(e)}finally{En=t,En===0&&(kp=Li()+500,Dw&&Uu())}}function yh(n){Xc!==null&&Xc.tag===0&&!(En&6)&&dp();var e=En;En|=1;var t=Wa.transition,i=Un;try{if(Wa.transition=null,Un=1,n)return n()}finally{Un=i,Wa.transition=t,En=e,!(En&6)&&Uu()}}function HP(){Zs=Kf.current,ni(Kf)}function Kd(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,W9(t)),Xi!==null)for(t=Xi.return;t!==null;){var i=t;switch(wP(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&H1();break;case 3:Pp(),ni(Ns),ni(Yr),kP();break;case 5:RP(i);break;case 4:Pp();break;case 13:ni(fi);break;case 19:ni(fi);break;case 10:TP(i.type._context);break;case 22:case 23:HP()}t=t.return}if(xr=n,Xi=n=yu(n.current,null),Er=Zs=e,rr=0,z0=null,jP=Uw=gh=0,Cs=Bg=null,Ud!==null){for(e=0;e<Ud.length;e++)if(t=Ud[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var a=s.next;s.next=r,i.next=a}t.pending=i}Ud=null}return n}function hj(n,e){do{var t=Xi;try{if(EP(),l1.current=Z1,K1){for(var i=xi.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}K1=!1}if(mh=0,gr=tr=xi=null,jg=!1,F0=0,UP.current=null,t===null||t.return===null){rr=1,z0=e,Xi=null;break}e:{var s=n,a=t.return,o=t,l=e;if(e=Er,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=o,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=II(a);if(p!==null){p.flags&=-257,DI(p,a,o,s,e),p.mode&1&&NI(s,c,e),e=p,l=c;var y=e.updateQueue;if(y===null){var x=new Set;x.add(l),e.updateQueue=x}else y.add(l);break e}else{if(!(e&1)){NI(s,c,e),VP();break e}l=Error(rt(426))}}else if(oi&&o.mode&1){var _=II(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),DI(_,a,o,s,e),SP(Rp(l,o));break e}}s=l=Rp(l,o),rr!==4&&(rr=2),Bg===null?Bg=[s]:Bg.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=YU(s,l,e);TI(s,v);break e;case 1:o=l;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(mu===null||!mu.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=KU(s,o,e);TI(s,S);break e}}s=s.return}while(s!==null)}mj(t)}catch(A){e=A,Xi===t&&t!==null&&(Xi=t=t.return);continue}break}while(1)}function fj(){var n=J1.current;return J1.current=Z1,n===null?Z1:n}function VP(){(rr===0||rr===3||rr===2)&&(rr=4),xr===null||!(gh&268435455)&&!(Uw&268435455)||Vc(xr,Er)}function tb(n,e){var t=En;En|=2;var i=fj();(xr!==n||Er!==e)&&(Al=null,Kd(n,e));do try{gW();break}catch(r){hj(n,r)}while(1);if(EP(),En=t,J1.current=i,Xi!==null)throw Error(rt(261));return xr=null,Er=0,rr}function gW(){for(;Xi!==null;)pj(Xi)}function yW(){for(;Xi!==null&&!H7();)pj(Xi)}function pj(n){var e=yj(n.alternate,n,Zs);n.memoizedProps=n.pendingProps,e===null?mj(n):Xi=e,UP.current=null}function mj(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=uW(t,e),t!==null){t.flags&=32767,Xi=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{rr=6,Xi=null;return}}else if(t=cW(t,e,Zs),t!==null){Xi=t;return}if(e=e.sibling,e!==null){Xi=e;return}Xi=e=n}while(e!==null);rr===0&&(rr=5)}function Ed(n,e,t){var i=Un,r=Wa.transition;try{Wa.transition=null,Un=1,vW(n,e,t,i)}finally{Wa.transition=r,Un=i}return null}function vW(n,e,t,i){do dp();while(Xc!==null);if(En&6)throw Error(rt(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(rt(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(J7(n,s),n===xr&&(Xi=xr=null,Er=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||bx||(bx=!0,vj(O1,function(){return dp(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Wa.transition,Wa.transition=null;var a=Un;Un=1;var o=En;En|=4,UP.current=null,hW(n,t),cj(t,n),U9(q2),U1=!!G2,q2=G2=null,n.current=t,fW(t),V7(),En=o,Un=a,Wa.transition=s}else n.current=t;if(bx&&(bx=!1,Xc=n,eb=r),s=n.pendingLanes,s===0&&(mu=null),G7(t.stateNode),Ds(n,Li()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(Q1)throw Q1=!1,n=fC,fC=null,n;return eb&1&&n.tag!==0&&dp(),s=n.pendingLanes,s&1?n===pC?Hg++:(Hg=0,pC=n):Hg=0,Uu(),null}function dp(){if(Xc!==null){var n=Y5(eb),e=Wa.transition,t=Un;try{if(Wa.transition=null,Un=16>n?16:n,Xc===null)var i=!1;else{if(n=Xc,Xc=null,eb=0,En&6)throw Error(rt(331));var r=En;for(En|=4,At=n.current;At!==null;){var s=At,a=s.child;if(At.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(At=c;At!==null;){var u=At;switch(u.tag){case 0:case 11:case 15:zg(8,u,s)}var d=u.child;if(d!==null)d.return=u,At=d;else for(;At!==null;){u=At;var h=u.sibling,p=u.return;if(aj(u),u===c){At=null;break}if(h!==null){h.return=p,At=h;break}At=p}}}var y=s.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var _=x.sibling;x.sibling=null,x=_}while(x!==null)}}At=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,At=a;else e:for(;At!==null;){if(s=At,s.flags&2048)switch(s.tag){case 0:case 11:case 15:zg(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,At=v;break e}At=s.return}}var b=n.current;for(At=b;At!==null;){a=At;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,At=w;else e:for(a=b;At!==null;){if(o=At,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Fw(9,o)}}catch(A){Mi(o,o.return,A)}if(o===a){At=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,At=S;break e}At=o.return}}if(En=r,Uu(),Qo&&typeof Qo.onPostCommitFiberRoot=="function")try{Qo.onPostCommitFiberRoot(Pw,n)}catch{}i=!0}return i}finally{Un=t,Wa.transition=e}}return!1}function qI(n,e,t){e=Rp(t,e),e=YU(n,e,1),n=pu(n,e,1),e=ps(),n!==null&&(Iy(n,1,e),Ds(n,e))}function Mi(n,e,t){if(n.tag===3)qI(n,n,t);else for(;e!==null;){if(e.tag===3){qI(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(mu===null||!mu.has(i))){n=Rp(t,n),n=KU(e,n,1),e=pu(e,n,1),n=ps(),e!==null&&(Iy(e,1,n),Ds(e,n));break}}e=e.return}}function xW(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=ps(),n.pingedLanes|=n.suspendedLanes&t,xr===n&&(Er&t)===t&&(rr===4||rr===3&&(Er&130023424)===Er&&500>Li()-zP?Kd(n,0):jP|=t),Ds(n,e)}function gj(n,e){e===0&&(n.mode&1?(e=dx,dx<<=1,!(dx&130023424)&&(dx=4194304)):e=1);var t=ps();n=Ql(n,e),n!==null&&(Iy(n,e,t),Ds(n,t))}function _W(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),gj(n,t)}function bW(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(rt(314))}i!==null&&i.delete(e),gj(n,t)}var yj;yj=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Ns.current)ks=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return ks=!1,lW(n,e,t);ks=!!(n.flags&131072)}else ks=!1,oi&&e.flags&1048576&&bU(e,W1,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;u1(n,e),n=e.pendingProps;var r=Tp(e,Yr.current);up(e,t),r=IP(null,e,i,n,r,t);var s=DP();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Is(i)?(s=!0,V1(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,AP(e),r.updater=Ow,e.stateNode=r,r._reactInternals=e,nC(e,i,n,t),e=sC(null,e,i,!0,s,t)):(e.tag=0,oi&&s&&bP(e),os(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(u1(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=SW(i),n=uo(i,n),r){case 0:e=rC(null,e,i,n,t);break e;case 1:e=FI(null,e,i,n,t);break e;case 11:e=LI(null,e,i,n,t);break e;case 14:e=OI(null,e,i,uo(i.type,n),t);break e}throw Error(rt(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:uo(i,r),rC(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:uo(i,r),FI(n,e,i,r,t);case 3:e:{if(ej(e),n===null)throw Error(rt(387));i=e.pendingProps,s=e.memoizedState,r=s.element,CU(n,e),X1(e,i,null,t);var a=e.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Rp(Error(rt(423)),e),e=UI(n,e,i,t,r);break e}else if(i!==r){r=Rp(Error(rt(424)),e),e=UI(n,e,i,t,r);break e}else for(ra=fu(e.stateNode.containerInfo.firstChild),aa=e,oi=!0,go=null,t=EU(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Cp(),i===r){e=ec(n,e,t);break e}os(n,e,i,t)}e=e.child}return e;case 5:return AU(e),n===null&&Q2(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,a=r.children,X2(i,r)?a=null:s!==null&&X2(i,s)&&(e.flags|=32),QU(n,e),os(n,e,a,t),e.child;case 6:return n===null&&Q2(e),null;case 13:return tj(n,e,t);case 4:return PP(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Ap(e,null,i,t):os(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:uo(i,r),LI(n,e,i,r,t);case 7:return os(n,e,e.pendingProps,t),e.child;case 8:return os(n,e,e.pendingProps.children,t),e.child;case 12:return os(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,a=r.value,Kn(G1,i._currentValue),i._currentValue=a,s!==null)if(Mo(s.value,a)){if(s.children===r.children&&!Ns.current){e=ec(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Gl(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),eC(s.return,t,e),o.lanes|=t;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(rt(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),eC(a,t,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}os(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,up(e,t),r=qa(r),i=i(r),e.flags|=1,os(n,e,i,t),e.child;case 14:return i=e.type,r=uo(i,e.pendingProps),r=uo(i.type,r),OI(n,e,i,r,t);case 15:return ZU(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:uo(i,r),u1(n,e),e.tag=1,Is(i)?(n=!0,V1(e)):n=!1,up(e,t),XU(e,i,r),nC(e,i,r,t),sC(null,e,i,!0,n,t);case 19:return nj(n,e,t);case 22:return JU(n,e,t)}throw Error(rt(156,e.tag))};function vj(n,e){return W5(n,e)}function wW(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oa(n,e,t,i){return new wW(n,e,t,i)}function $P(n){return n=n.prototype,!(!n||!n.isReactComponent)}function SW(n){if(typeof n=="function")return $P(n)?1:0;if(n!=null){if(n=n.$$typeof,n===cP)return 11;if(n===uP)return 14}return 2}function yu(n,e){var t=n.alternate;return t===null?(t=Oa(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function f1(n,e,t,i,r,s){var a=2;if(i=n,typeof n=="function")$P(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case zf:return Zd(t.children,r,s,e);case lP:a=8,r|=8;break;case T2:return n=Oa(12,t,e,r|2),n.elementType=T2,n.lanes=s,n;case C2:return n=Oa(13,t,e,r),n.elementType=C2,n.lanes=s,n;case A2:return n=Oa(19,t,e,r),n.elementType=A2,n.lanes=s,n;case A5:return jw(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case T5:a=10;break e;case C5:a=9;break e;case cP:a=11;break e;case uP:a=14;break e;case Fc:a=16,i=null;break e}throw Error(rt(130,n==null?n:typeof n,""))}return e=Oa(a,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Zd(n,e,t,i){return n=Oa(7,n,i,e),n.lanes=t,n}function jw(n,e,t,i){return n=Oa(22,n,i,e),n.elementType=A5,n.lanes=t,n.stateNode={isHidden:!1},n}function RE(n,e,t){return n=Oa(6,n,null,e),n.lanes=t,n}function kE(n,e,t){return e=Oa(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function MW(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dE(0),this.expirationTimes=dE(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dE(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function WP(n,e,t,i,r,s,a,o,l){return n=new MW(n,e,t,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Oa(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},AP(s),n}function EW(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jf,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function xj(n){if(!n)return Cu;n=n._reactInternals;e:{if(Ih(n)!==n||n.tag!==1)throw Error(rt(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Is(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(rt(171))}if(n.tag===1){var t=n.type;if(Is(t))return xU(n,t,e)}return e}function _j(n,e,t,i,r,s,a,o,l){return n=WP(t,i,!0,n,r,s,a,o,l),n.context=xj(null),t=n.current,i=ps(),r=gu(t),s=Gl(i,r),s.callback=e??null,pu(t,s,r),n.current.lanes=r,Iy(n,r,i),Ds(n,i),n}function zw(n,e,t,i){var r=e.current,s=ps(),a=gu(r);return t=xj(t),e.context===null?e.context=t:e.pendingContext=t,e=Gl(s,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=pu(r,e,a),n!==null&&(wo(n,r,a,s),o1(n,r,a)),a}function nb(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function XI(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function GP(n,e){XI(n,e),(n=n.alternate)&&XI(n,e)}function TW(){return null}var bj=typeof reportError=="function"?reportError:function(n){console.error(n)};function qP(n){this._internalRoot=n}Bw.prototype.render=qP.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(rt(409));zw(n,e,null,null)};Bw.prototype.unmount=qP.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;yh(function(){zw(null,n,null,null)}),e[Jl]=null}};function Bw(n){this._internalRoot=n}Bw.prototype.unstable_scheduleHydration=function(n){if(n){var e=J5();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Hc.length&&e!==0&&e<Hc[t].priority;t++);Hc.splice(t,0,n),t===0&&eU(n)}};function XP(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Hw(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function YI(){}function CW(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=nb(a);s.call(c)}}var a=_j(e,i,n,0,null,!1,!1,"",YI);return n._reactRootContainer=a,n[Jl]=a.current,N0(n.nodeType===8?n.parentNode:n),yh(),a}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var o=i;i=function(){var c=nb(l);o.call(c)}}var l=WP(n,0,!1,null,null,!1,!1,"",YI);return n._reactRootContainer=l,n[Jl]=l.current,N0(n.nodeType===8?n.parentNode:n),yh(function(){zw(e,l,t,i)}),l}function Vw(n,e,t,i,r){var s=t._reactRootContainer;if(s){var a=s;if(typeof r=="function"){var o=r;r=function(){var l=nb(a);o.call(l)}}zw(e,a,n,r)}else a=CW(t,e,n,r,i);return nb(a)}K5=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=yg(e.pendingLanes);t!==0&&(fP(e,t|1),Ds(e,Li()),!(En&6)&&(kp=Li()+500,Uu()))}break;case 13:yh(function(){var i=Ql(n,1);if(i!==null){var r=ps();wo(i,n,1,r)}}),GP(n,1)}};pP=function(n){if(n.tag===13){var e=Ql(n,134217728);if(e!==null){var t=ps();wo(e,n,134217728,t)}GP(n,134217728)}};Z5=function(n){if(n.tag===13){var e=gu(n),t=Ql(n,e);if(t!==null){var i=ps();wo(t,n,e,i)}GP(n,e)}};J5=function(){return Un};Q5=function(n,e){var t=Un;try{return Un=n,e()}finally{Un=t}};U2=function(n,e,t){switch(e){case"input":if(k2(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=Iw(i);if(!r)throw Error(rt(90));R5(i),k2(i,r)}}}break;case"textarea":N5(n,t);break;case"select":e=t.value,e!=null&&ap(n,!!t.multiple,e,!1)}};j5=BP;z5=yh;var AW={usingClientEntryPoint:!1,Events:[Ly,$f,Iw,F5,U5,BP]},jm={findFiberByHostInstance:Fd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PW={bundleType:jm.bundleType,version:jm.version,rendererPackageName:jm.rendererPackageName,rendererConfig:jm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lc.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=V5(n),n===null?null:n.stateNode},findFiberByHostInstance:jm.findFiberByHostInstance||TW,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wx.isDisabled&&wx.supportsFiber)try{Pw=wx.inject(PW),Qo=wx}catch{}}fa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AW;fa.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!XP(e))throw Error(rt(200));return EW(n,e,null,t)};fa.createRoot=function(n,e){if(!XP(n))throw Error(rt(299));var t=!1,i="",r=bj;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=WP(n,1,!1,null,null,t,!1,i,r),n[Jl]=e.current,N0(n.nodeType===8?n.parentNode:n),new qP(e)};fa.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(rt(188)):(n=Object.keys(n).join(","),Error(rt(268,n)));return n=V5(e),n=n===null?null:n.stateNode,n};fa.flushSync=function(n){return yh(n)};fa.hydrate=function(n,e,t){if(!Hw(e))throw Error(rt(200));return Vw(null,n,e,!0,t)};fa.hydrateRoot=function(n,e,t){if(!XP(n))throw Error(rt(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",a=bj;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=_j(e,null,n,1,t??null,r,!1,s,a),n[Jl]=e.current,N0(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new Bw(e)};fa.render=function(n,e,t){if(!Hw(e))throw Error(rt(200));return Vw(null,n,e,!1,t)};fa.unmountComponentAtNode=function(n){if(!Hw(n))throw Error(rt(40));return n._reactRootContainer?(yh(function(){Vw(null,null,n,!1,function(){n._reactRootContainer=null,n[Jl]=null})}),!0):!1};fa.unstable_batchedUpdates=BP;fa.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Hw(t))throw Error(rt(200));if(n==null||n._reactInternals===void 0)throw Error(rt(38));return Vw(n,e,t,!1,i)};fa.version="18.3.1-next-f1338f8080-20240426";function wj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wj)}catch(n){console.error(n)}}wj(),w5.exports=fa;var RW=w5.exports,KI=RW;M2.createRoot=KI.createRoot,M2.hydrateRoot=KI.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function B0(){return B0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},B0.apply(this,arguments)}var Yc;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Yc||(Yc={}));const ZI="popstate";function kW(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:a,hash:o}=i.location;return yC("",{pathname:s,search:a,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:ib(r)}return IW(e,t,null,n)}function ji(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Sj(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function NW(){return Math.random().toString(36).substr(2,8)}function JI(n,e){return{usr:n.state,key:n.key,idx:e}}function yC(n,e,t,i){return t===void 0&&(t=null),B0({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?sm(e):e,{state:t,key:e&&e.key||i||NW()})}function ib(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function sm(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function IW(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,o=Yc.Pop,l=null,c=u();c==null&&(c=0,a.replaceState(B0({},a.state,{idx:c}),""));function u(){return(a.state||{idx:null}).idx}function d(){o=Yc.Pop;let _=u(),v=_==null?null:_-c;c=_,l&&l({action:o,location:x.location,delta:v})}function h(_,v){o=Yc.Push;let b=yC(x.location,_,v);t&&t(b,_),c=u()+1;let w=JI(b,c),S=x.createHref(b);try{a.pushState(w,"",S)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;r.location.assign(S)}s&&l&&l({action:o,location:x.location,delta:1})}function p(_,v){o=Yc.Replace;let b=yC(x.location,_,v);t&&t(b,_),c=u();let w=JI(b,c),S=x.createHref(b);a.replaceState(w,"",S),s&&l&&l({action:o,location:x.location,delta:0})}function y(_){let v=r.location.origin!=="null"?r.location.origin:r.location.href,b=typeof _=="string"?_:ib(_);return b=b.replace(/ $/,"%20"),ji(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let x={get action(){return o},get location(){return n(r,a)},listen(_){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(ZI,d),l=_,()=>{r.removeEventListener(ZI,d),l=null}},createHref(_){return e(r,_)},createURL:y,encodeLocation(_){let v=y(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:p,go(_){return a.go(_)}};return x}var QI;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(QI||(QI={}));function DW(n,e,t){return t===void 0&&(t="/"),LW(n,e,t,!1)}function LW(n,e,t,i){let r=typeof e=="string"?sm(e):e,s=YP(r.pathname||"/",t);if(s==null)return null;let a=Mj(n);OW(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=qW(s);o=WW(a[l],c,i)}return o}function Mj(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(ji(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=vu([i,l.relativePath]),u=t.concat(l);s.children&&s.children.length>0&&(ji(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Mj(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:VW(c,s.index),routesMeta:u})};return n.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))r(s,a);else for(let l of Ej(s.path))r(s,a,l)}),e}function Ej(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=Ej(i.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),r&&o.push(...a),o.map(l=>n.startsWith("/")&&l===""?"/":l)}function OW(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:$W(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const FW=/^:[\w-]+$/,UW=3,jW=2,zW=1,BW=10,HW=-2,eD=n=>n==="*";function VW(n,e){let t=n.split("/"),i=t.length;return t.some(eD)&&(i+=HW),e&&(i+=jW),t.filter(r=>!eD(r)).reduce((r,s)=>r+(FW.test(s)?UW:s===""?zW:BW),i)}function $W(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function WW(n,e,t){t===void 0&&(t=!1);let{routesMeta:i}=n,r={},s="/",a=[];for(let o=0;o<i.length;++o){let l=i[o],c=o===i.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=tD({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d&&c&&t&&!i[i.length-1].route.index&&(d=tD({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(r,d.params),a.push({params:r,pathname:vu([s,d.pathname]),pathnameBase:ZW(vu([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=vu([s,d.pathnameBase]))}return a}function tD(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=GW(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((c,u,d)=>{let{paramName:h,isOptional:p}=u;if(h==="*"){let x=o[d]||"";a=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const y=o[d];return p&&!y?c[h]=void 0:c[h]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:n}}function GW(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Sj(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(i.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function qW(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Sj(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function YP(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function XW(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?sm(n):n;return{pathname:t?t.startsWith("/")?t:YW(t,e):e,search:JW(i),hash:QW(r)}}function YW(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function NE(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function KW(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function KP(n,e){let t=KW(n);return e?t.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function ZP(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=sm(n):(r=B0({},n),ji(!r.pathname||!r.pathname.includes("?"),NE("?","pathname","search",r)),ji(!r.pathname||!r.pathname.includes("#"),NE("#","pathname","hash",r)),ji(!r.search||!r.search.includes("#"),NE("#","search","hash",r)));let s=n===""||r.pathname==="",a=s?"/":r.pathname,o;if(a==null)o=t;else{let d=e.length-1;if(!i&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),d-=1;r.pathname=h.join("/")}o=d>=0?e[d]:"/"}let l=XW(r,o),c=a&&a!=="/"&&a.endsWith("/"),u=(s||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const vu=n=>n.join("/").replace(/\/\/+/g,"/"),ZW=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),JW=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,QW=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function eG(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Tj=["post","put","patch","delete"];new Set(Tj);const tG=["get",...Tj];new Set(tG);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function H0(){return H0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},H0.apply(this,arguments)}const JP=F.createContext(null),nG=F.createContext(null),ju=F.createContext(null),$w=F.createContext(null),cc=F.createContext({outlet:null,matches:[],isDataRoute:!1}),Cj=F.createContext(null);function iG(n,e){let{relative:t}=e===void 0?{}:e;am()||ji(!1);let{basename:i,navigator:r}=F.useContext(ju),{hash:s,pathname:a,search:o}=Pj(n,{relative:t}),l=a;return i!=="/"&&(l=a==="/"?i:vu([i,a])),r.createHref({pathname:l,search:o,hash:s})}function am(){return F.useContext($w)!=null}function Bs(){return am()||ji(!1),F.useContext($w).location}function Aj(n){F.useContext(ju).static||F.useLayoutEffect(n)}function Ki(){let{isDataRoute:n}=F.useContext(cc);return n?gG():rG()}function rG(){am()||ji(!1);let n=F.useContext(JP),{basename:e,future:t,navigator:i}=F.useContext(ju),{matches:r}=F.useContext(cc),{pathname:s}=Bs(),a=JSON.stringify(KP(r,t.v7_relativeSplatPath)),o=F.useRef(!1);return Aj(()=>{o.current=!0}),F.useCallback(function(c,u){if(u===void 0&&(u={}),!o.current)return;if(typeof c=="number"){i.go(c);return}let d=ZP(c,JSON.parse(a),s,u.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:vu([e,d.pathname])),(u.replace?i.replace:i.push)(d,u.state,u)},[e,i,a,s,n])}function QP(){let{matches:n}=F.useContext(cc),e=n[n.length-1];return e?e.params:{}}function Pj(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=F.useContext(ju),{matches:r}=F.useContext(cc),{pathname:s}=Bs(),a=JSON.stringify(KP(r,i.v7_relativeSplatPath));return F.useMemo(()=>ZP(n,JSON.parse(a),s,t==="path"),[n,a,s,t])}function sG(n,e){return aG(n,e)}function aG(n,e,t,i){am()||ji(!1);let{navigator:r}=F.useContext(ju),{matches:s}=F.useContext(cc),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=Bs(),u;if(e){var d;let _=typeof e=="string"?sm(e):e;l==="/"||(d=_.pathname)!=null&&d.startsWith(l)||ji(!1),u=_}else u=c;let h=u.pathname||"/",p=h;if(l!=="/"){let _=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(_.length).join("/")}let y=DW(n,{pathname:p}),x=dG(y&&y.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:vu([l,r.encodeLocation?r.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:vu([l,r.encodeLocation?r.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,t,i);return e&&x?F.createElement($w.Provider,{value:{location:H0({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Yc.Pop}},x):x}function oG(){let n=mG(),e=eG(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),t?F.createElement("pre",{style:r},t):null,s)}const lG=F.createElement(oG,null);class cG extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?F.createElement(cc.Provider,{value:this.props.routeContext},F.createElement(Cj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uG(n){let{routeContext:e,match:t,children:i}=n,r=F.useContext(JP);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),F.createElement(cc.Provider,{value:e},i)}function dG(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=(r=t)==null?void 0:r.errors;if(o!=null){let u=a.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);u>=0||ji(!1),a=a.slice(0,Math.min(a.length,u+1))}let l=!1,c=-1;if(t&&i&&i.v7_partialHydration)for(let u=0;u<a.length;u++){let d=a[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:p}=t,y=d.route.loader&&h[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((u,d,h)=>{let p,y=!1,x=null,_=null;t&&(p=o&&d.route.id?o[d.route.id]:void 0,x=d.route.errorElement||lG,l&&(c<0&&h===0?(yG("route-fallback",!1),y=!0,_=null):c===h&&(y=!0,_=d.route.hydrateFallbackElement||null)));let v=e.concat(a.slice(0,h+1)),b=()=>{let w;return p?w=x:y?w=_:d.route.Component?w=F.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=u,F.createElement(uG,{match:d,routeContext:{outlet:u,matches:v,isDataRoute:t!=null},children:w})};return t&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?F.createElement(cG,{location:t.location,revalidation:t.revalidation,component:x,error:p,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}var Rj=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(Rj||{}),rb=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(rb||{});function hG(n){let e=F.useContext(JP);return e||ji(!1),e}function fG(n){let e=F.useContext(nG);return e||ji(!1),e}function pG(n){let e=F.useContext(cc);return e||ji(!1),e}function kj(n){let e=pG(),t=e.matches[e.matches.length-1];return t.route.id||ji(!1),t.route.id}function mG(){var n;let e=F.useContext(Cj),t=fG(rb.UseRouteError),i=kj(rb.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function gG(){let{router:n}=hG(Rj.UseNavigateStable),e=kj(rb.UseNavigateStable),t=F.useRef(!1);return Aj(()=>{t.current=!0}),F.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,H0({fromRouteId:e},s)))},[n,e])}const nD={};function yG(n,e,t){!e&&!nD[n]&&(nD[n]=!0)}function vG(n,e){n==null||n.v7_startTransition,(n==null?void 0:n.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function sb(n){let{to:e,replace:t,state:i,relative:r}=n;am()||ji(!1);let{future:s,static:a}=F.useContext(ju),{matches:o}=F.useContext(cc),{pathname:l}=Bs(),c=Ki(),u=ZP(e,KP(o,s.v7_relativeSplatPath),l,r==="path"),d=JSON.stringify(u);return F.useEffect(()=>c(JSON.parse(d),{replace:t,state:i,relative:r}),[c,d,r,t,i]),null}function hi(n){ji(!1)}function xG(n){let{basename:e="/",children:t=null,location:i,navigationType:r=Yc.Pop,navigator:s,static:a=!1,future:o}=n;am()&&ji(!1);let l=e.replace(/^\/*/,"/"),c=F.useMemo(()=>({basename:l,navigator:s,static:a,future:H0({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof i=="string"&&(i=sm(i));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:y="default"}=i,x=F.useMemo(()=>{let _=YP(u,l);return _==null?null:{location:{pathname:_,search:d,hash:h,state:p,key:y},navigationType:r}},[l,u,d,h,p,y,r]);return x==null?null:F.createElement(ju.Provider,{value:c},F.createElement($w.Provider,{children:t,value:x}))}function _G(n){let{children:e,location:t}=n;return sG(vC(e),t)}new Promise(()=>{});function vC(n,e){e===void 0&&(e=[]);let t=[];return F.Children.forEach(n,(i,r)=>{if(!F.isValidElement(i))return;let s=[...e,r];if(i.type===F.Fragment){t.push.apply(t,vC(i.props.children,s));return}i.type!==hi&&ji(!1),!i.props.index||!i.props.children||ji(!1);let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=vC(i.props.children,s)),t.push(a)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xC(){return xC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},xC.apply(this,arguments)}function bG(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function wG(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function SG(n,e){return n.button===0&&(!e||e==="_self")&&!wG(n)}const MG=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],EG="6";try{window.__reactRouterVersion=EG}catch{}const TG="startTransition",iD=x7[TG];function CG(n){let{basename:e,children:t,future:i,window:r}=n,s=F.useRef();s.current==null&&(s.current=kW({window:r,v5Compat:!0}));let a=s.current,[o,l]=F.useState({action:a.action,location:a.location}),{v7_startTransition:c}=i||{},u=F.useCallback(d=>{c&&iD?iD(()=>l(d)):l(d)},[l,c]);return F.useLayoutEffect(()=>a.listen(u),[a,u]),F.useEffect(()=>vG(i),[i]),F.createElement(xG,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,future:i})}const AG=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PG=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ql=F.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,h=bG(e,MG),{basename:p}=F.useContext(ju),y,x=!1;if(typeof c=="string"&&PG.test(c)&&(y=c,AG))try{let w=new URL(window.location.href),S=c.startsWith("//")?new URL(w.protocol+c):new URL(c),A=YP(S.pathname,p);S.origin===w.origin&&A!=null?c=A+S.search+S.hash:x=!0}catch{}let _=iG(c,{relative:r}),v=RG(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:r,viewTransition:d});function b(w){i&&i(w),w.defaultPrevented||v(w)}return F.createElement("a",xC({},h,{href:y||_,onClick:x||s?i:b,ref:t,target:l}))});var rD;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(rD||(rD={}));var sD;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(sD||(sD={}));function RG(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:a,viewTransition:o}=e===void 0?{}:e,l=Ki(),c=Bs(),u=Pj(n,{relative:a});return F.useCallback(d=>{if(SG(d,t)){d.preventDefault();let h=i!==void 0?i:ib(c)===ib(u);l(n,{replace:h,state:r,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,u,i,r,t,n,s,a,o])}const kG="modulepreload",NG=function(n){return"/"+n},aD={},Fy=function(e,t,i){if(!t||t.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=NG(s),s in aD)return;aD[s]=!0;const a=s.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!i)for(let u=r.length-1;u>=0;u--){const d=r[u];if(d.href===s&&(!a||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${o}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":kG,a||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),a)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s})},IG=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Fy(()=>Promise.resolve().then(()=>om),void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)};class eR extends Error{constructor(e,t="FunctionsError",i){super(e),this.name=t,this.context=i}}class DG extends eR{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class LG extends eR{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class OG extends eR{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var _C;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(_C||(_C={}));var FG=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(i.next(u))}catch(d){a(d)}}function l(u){try{c(i.throw(u))}catch(d){a(d)}}function c(u){u.done?s(u.value):r(u.value).then(o,l)}c((i=i.apply(n,e||[])).next())})};class UG{constructor(e,{headers:t={},customFetch:i,region:r=_C.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=IG(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var i;return FG(this,void 0,void 0,function*(){try{const{headers:r,method:s,body:a}=t;let o={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(o["x-region"]=l);let c;a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",c=a):typeof a=="string"?(o["Content-Type"]="text/plain",c=a):typeof FormData<"u"&&a instanceof FormData?c=a:(o["Content-Type"]="application/json",c=JSON.stringify(a)));const u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),r),body:c}).catch(y=>{throw new DG(y)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new LG(u);if(!u.ok)throw new OG(u);let h=((i=u.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),p;return h==="application/json"?p=yield u.json():h==="application/octet-stream"?p=yield u.blob():h==="text/event-stream"?p=u:h==="multipart/form-data"?p=yield u.formData():p=yield u.text(),{data:p,error:null}}catch(r){return{data:null,error:r}}})}}var As={},tR={},Ww={},Uy={},Gw={},qw={},jG=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Np=jG();const zG=Np.fetch,Nj=Np.fetch.bind(Np),Ij=Np.Headers,BG=Np.Request,HG=Np.Response,om=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ij,Request:BG,Response:HG,default:Nj,fetch:zG},Symbol.toStringTag,{value:"Module"})),VG=i7(om);var Xw={};Object.defineProperty(Xw,"__esModule",{value:!0});let $G=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Xw.default=$G;var Dj=ca&&ca.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(qw,"__esModule",{value:!0});const WG=Dj(VG),GG=Dj(Xw);let qG=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=WG.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const i=this.fetch;let r=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,o,l;let c=null,u=null,d=null,h=s.status,p=s.statusText;if(s.ok){if(this.method!=="HEAD"){const v=await s.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=v:u=JSON.parse(v))}const x=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),_=(o=s.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");x&&_&&_.length>1&&(d=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const x=await s.text();try{c=JSON.parse(x),Array.isArray(c)&&s.status===404&&(u=[],c=null,h=200,p="OK")}catch{s.status===404&&x===""?(h=204,p="No Content"):c={message:x}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,h=200,p="OK"),c&&this.shouldThrowOnError)throw new GG.default(c)}return{error:c,data:u,count:d,status:h,statusText:p}});return this.shouldThrowOnError||(r=r.catch(s=>{var a,o,l;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(o=s==null?void 0:s.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}};qw.default=qG;var XG=ca&&ca.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Gw,"__esModule",{value:!0});const YG=XG(qw);let KG=class extends YG.default{select(e){let t=!1;const i=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:i,foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:i=t}={}){const r=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:i,referencedTable:r=i}={}){const s=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:i=!1,buffers:r=!1,wal:s=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,i?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${c}"; options=${l};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Gw.default=KG;var ZG=ca&&ca.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Uy,"__esModule",{value:!0});const JG=ZG(Gw);let QG=class extends JG.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const i=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${i})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:i,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const a=i===void 0?"":`(${i})`;return this.url.searchParams.append(e,`${s}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,i])=>{this.url.searchParams.append(t,`eq.${i}`)}),this}not(e,t,i){return this.url.searchParams.append(e,`not.${t}.${i}`),this}or(e,{foreignTable:t,referencedTable:i=t}={}){const r=i?`${i}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,i){return this.url.searchParams.append(e,`${t}.${i}`),this}};Uy.default=QG;var eq=ca&&ca.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ww,"__esModule",{value:!0});const zm=eq(Uy);let tq=class{constructor(e,{headers:t={},schema:i,fetch:r}){this.url=e,this.headers=t,this.schema=i,this.fetch=r}select(e,{head:t=!1,count:i}={}){const r=t?"HEAD":"GET";let s=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),i&&(this.headers.Prefer=`count=${i}`),new zm.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:i=!0}={}){const r="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),i||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new zm.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:i=!1,count:r,defaultToNull:s=!0}={}){const a="POST",o=[`resolution=${i?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),r&&o.push(`count=${r}`),s||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new zm.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const i="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new zm.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",i=[];return e&&i.push(`count=${e}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new zm.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ww.default=tq;var Yw={},Kw={};Object.defineProperty(Kw,"__esModule",{value:!0});Kw.version=void 0;Kw.version="0.0.0-automated";Object.defineProperty(Yw,"__esModule",{value:!0});Yw.DEFAULT_HEADERS=void 0;const nq=Kw;Yw.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${nq.version}`};var Lj=ca&&ca.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(tR,"__esModule",{value:!0});const iq=Lj(Ww),rq=Lj(Uy),sq=Yw;let aq=class Oj{constructor(e,{headers:t={},schema:i,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},sq.DEFAULT_HEADERS),t),this.schemaName=i,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new iq.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Oj(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:i=!1,get:r=!1,count:s}={}){let a;const o=new URL(`${this.url}/rpc/${e}`);let l;i||r?(a=i?"HEAD":"GET",Object.entries(t).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{o.searchParams.append(u,d)})):(a="POST",l=t);const c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new rq.default({method:a,url:o,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};tR.default=aq;var lm=ca&&ca.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(As,"__esModule",{value:!0});As.PostgrestError=As.PostgrestBuilder=As.PostgrestTransformBuilder=As.PostgrestFilterBuilder=As.PostgrestQueryBuilder=As.PostgrestClient=void 0;const Fj=lm(tR);As.PostgrestClient=Fj.default;const Uj=lm(Ww);As.PostgrestQueryBuilder=Uj.default;const jj=lm(Uy);As.PostgrestFilterBuilder=jj.default;const zj=lm(Gw);As.PostgrestTransformBuilder=zj.default;const Bj=lm(qw);As.PostgrestBuilder=Bj.default;const Hj=lm(Xw);As.PostgrestError=Hj.default;var oq=As.default={PostgrestClient:Fj.default,PostgrestQueryBuilder:Uj.default,PostgrestFilterBuilder:jj.default,PostgrestTransformBuilder:zj.default,PostgrestBuilder:Bj.default,PostgrestError:Hj.default};const{PostgrestClient:lq,PostgrestQueryBuilder:jge,PostgrestFilterBuilder:zge,PostgrestTransformBuilder:Bge,PostgrestBuilder:Hge,PostgrestError:Vge}=oq;let bC;typeof window>"u"?bC=require("ws"):bC=window.WebSocket;const cq=bC,uq="2.11.10",dq={"X-Client-Info":`realtime-js/${uq}`},hq="1.0.0",Vj=1e4,fq=1e3;var hp;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(hp||(hp={}));var is;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(is||(is={}));var mo;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(mo||(mo={}));var wC;(function(n){n.websocket="websocket"})(wC||(wC={}));var Dd;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Dd||(Dd={}));class pq{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,t,i)}_decodeBroadcast(e,t,i){const r=t.getUint8(1),s=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=i.decode(e.slice(a,a+r));a=a+r;const l=i.decode(e.slice(a,a+s));a=a+s;const c=JSON.parse(i.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:c}}}class $j{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Gn;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Gn||(Gn={}));const oD=(n,e,t={})=>{var i;const r=(i=t.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((s,a)=>(s[a]=mq(a,n,e,r),s),{})},mq=(n,e,t,i)=>{const r=e.find(o=>o.name===n),s=r==null?void 0:r.type,a=t[n];return s&&!i.includes(s)?Wj(s,a):SC(a)},Wj=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return xq(e,t)}switch(n){case Gn.bool:return gq(e);case Gn.float4:case Gn.float8:case Gn.int2:case Gn.int4:case Gn.int8:case Gn.numeric:case Gn.oid:return yq(e);case Gn.json:case Gn.jsonb:return vq(e);case Gn.timestamp:return _q(e);case Gn.abstime:case Gn.date:case Gn.daterange:case Gn.int4range:case Gn.int8range:case Gn.money:case Gn.reltime:case Gn.text:case Gn.time:case Gn.timestamptz:case Gn.timetz:case Gn.tsrange:case Gn.tstzrange:return SC(e);default:return SC(e)}},SC=n=>n,gq=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},yq=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},vq=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},xq=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,i=n[t];if(n[0]==="{"&&i==="}"){let s;const a=n.slice(1,t);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>Wj(e,o))}return n},_q=n=>typeof n=="string"?n.replace(" ","T"):n,Gj=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class IE{constructor(e,t,i={},r=Vj){this.channel=e,this.event=t,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var i;return this._hasReceived(e)&&t((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var lD;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(lD||(lD={}));class Vg{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Vg.syncState(this.state,r,s,a),this.pendingDiffs.forEach(l=>{this.state=Vg.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(i.diff,{},r=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Vg.syncDiff(this.state,r,s,a),o())}),this.onJoin((r,s,a)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:s,newPresences:a})}),this.onLeave((r,s,a)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,i,r){const s=this.cloneDeep(e),a=this.transformState(t),o={},l={};return this.map(s,(c,u)=>{a[c]||(l[c]=u)}),this.map(a,(c,u)=>{const d=s[c];if(d){const h=u.map(_=>_.presence_ref),p=d.map(_=>_.presence_ref),y=u.filter(_=>p.indexOf(_.presence_ref)<0),x=d.filter(_=>h.indexOf(_.presence_ref)<0);y.length>0&&(o[c]=y),x.length>0&&(l[c]=x)}else o[c]=u}),this.syncDiff(s,{joins:o,leaves:l},i,r)}static syncDiff(e,t,i,r){const{joins:s,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(s,(o,l)=>{var c;const u=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(l),u.length>0){const d=e[o].map(p=>p.presence_ref),h=u.filter(p=>d.indexOf(p.presence_ref)<0);e[o].unshift(...h)}i(o,u,l)}),this.map(a,(o,l)=>{let c=e[o];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[o]=c,r(o,c,l),c.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(i=>t(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,i)=>{const r=e[i];return"metas"in r?t[i]=r.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[i]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var cD;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(cD||(cD={}));var uD;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(uD||(uD={}));var Pl;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Pl||(Pl={}));class nR{constructor(e,t={config:{}},i){this.topic=e,this.params=t,this.socket=i,this.bindings={},this.state=is.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new IE(this,mo.join,this.params,this.timeout),this.rejoinTimer=new $j(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=is.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=is.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=is.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=is.errored,this.rejoinTimer.scheduleTimeout())}),this._on(mo.reply,{},(r,s)=>{this._trigger(this._replyEventName(s),r)}),this.presence=new Vg(this),this.broadcastEndpointURL=Gj(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var i,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:a,private:o}}=this.params;this._onError(u=>e==null?void 0:e(Pl.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Pl.CLOSED));const l={},c={broadcast:s,presence:a,postgres_changes:(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(u=>u.filter))!==null&&r!==void 0?r:[],private:o};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(Pl.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,p=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,y=[];for(let x=0;x<p;x++){const _=h[x],{filter:{event:v,schema:b,table:w,filter:S}}=_,A=u&&u[x];if(A&&A.event===v&&A.schema===b&&A.table===w&&A.filter===S)y.push(Object.assign(Object.assign({},_),{id:A.id}));else{this.unsubscribe(),this.state=is.errored,e==null||e(Pl.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(Pl.SUBSCRIBED);return}}).receive("error",u=>{this.state=is.errored,e==null||e(Pl.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Pl.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,i){return this._on(e,t,i)}async send(e,t={}){var i,r;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=t.timeout)!==null&&i!==void 0?i:this.timeout);return await((r=c.body)===null||r===void 0?void 0:r.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=is.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(mo.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(i=>{const r=new IE(this,mo.leave,{},e);r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,i){const r=new AbortController,s=setTimeout(()=>r.abort(),i),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(s),a}_push(e,t,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new IE(this,e,t,i);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,i){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,i){var r,s;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:c,join:u}=mo;if(i&&[o,l,c,u].indexOf(a)>=0&&i!==this._joinRef())return;let h=this._onMessage(a,t,i);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(p=>{var y,x,_;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((_=(x=p.filter)===null||x===void 0?void 0:x.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===a}).map(p=>p.callback(h,i)):(s=this.bindings[a])===null||s===void 0||s.filter(p=>{var y,x,_,v,b,w;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const S=p.id,A=(y=p.filter)===null||y===void 0?void 0:y.event;return S&&((x=t.ids)===null||x===void 0?void 0:x.includes(S))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((_=t.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const S=(b=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return S==="*"||S===((w=t==null?void 0:t.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof h=="object"&&"ids"in h){const y=h.data,{schema:x,table:_,commit_timestamp:v,type:b,errors:w}=y;h=Object.assign(Object.assign({},{schema:x,table:_,commit_timestamp:v,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(y))}p.callback(h,i)})}_isClosed(){return this.state===is.closed}_isJoined(){return this.state===is.joined}_isJoining(){return this.state===is.joining}_isLeaving(){return this.state===is.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,i){const r=e.toLocaleLowerCase(),s={type:r,filter:t,callback:i};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(e,t){const i=e.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(r=>{var s;return!(((s=r.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===i&&nR.isEqual(r.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(mo.close,{},e)}_onError(e){this._on(mo.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=is.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=oD(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=oD(e.columns,e.old_record)),t}}const dD=()=>{},bq=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class wq{constructor(e,t){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=dq,this.params={},this.timeout=Vj,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=dD,this.ref=0,this.logger=dD,this.conn=null,this.sendBuffer=[],this.serializer=new pq,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...o)=>Fy(()=>Promise.resolve().then(()=>om),void 0).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${wC.websocket}`,this.httpEndpoint=Gj(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=(i=t==null?void 0:t.params)===null||i===void 0?void 0:i.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,a)=>a(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new $j(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=cq),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new Sq(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:hq}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(i=>i.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels=this.channels.filter(i=>i._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,i){this.logger(e,t,i)}connectionState(){switch(this.conn&&this.conn.readyState){case hp.connecting:return Dd.Connecting;case hp.open:return Dd.Open;case hp.closing:return Dd.Closing;default:return Dd.Closed}}isConnected(){return this.connectionState()===Dd.Open}channel(e,t={config:{}}){const i=`realtime:${e}`,r=this.getChannels().find(s=>s.topic===i);if(r)return r;{const s=new nR(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:i,payload:r,ref:s}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${t} ${i} (${s})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(i=>{t&&i.updateJoinPayload({access_token:t,version:this.headers&&this.headers["X-Client-Info"]}),i.joinedOnce&&i._isJoined()&&i._push(mo.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(fq,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:i,event:r,payload:s,ref:a}=t;i==="phoenix"&&r==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${i} ${r} ${a&&"("+a+")"||""}`,s),Array.from(this.channels).filter(o=>o._isMember(i)).forEach(o=>o._trigger(r,s,a)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(mo.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const i=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${i}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const i=new Blob([bq],{type:"application/javascript"});t=URL.createObjectURL(i)}return t}}class Sq{constructor(e,t,i){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=hp.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=i.close}}class iR extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function pr(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Mq extends iR{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class MC extends iR{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Eq=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(i.next(u))}catch(d){a(d)}}function l(u){try{c(i.throw(u))}catch(d){a(d)}}function c(u){u.done?s(u.value):r(u.value).then(o,l)}c((i=i.apply(n,e||[])).next())})};const qj=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Fy(()=>Promise.resolve().then(()=>om),void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},Tq=()=>Eq(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Fy(()=>Promise.resolve().then(()=>om),void 0)).Response:Response}),EC=n=>{if(Array.isArray(n))return n.map(t=>EC(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,i])=>{const r=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[r]=EC(i)}),e};var Dh=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(i.next(u))}catch(d){a(d)}}function l(u){try{c(i.throw(u))}catch(d){a(d)}}function c(u){u.done?s(u.value):r(u.value).then(o,l)}c((i=i.apply(n,e||[])).next())})};const DE=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Cq=(n,e,t)=>Dh(void 0,void 0,void 0,function*(){const i=yield Tq();n instanceof i&&!(t!=null&&t.noResolveJson)?n.json().then(r=>{e(new Mq(DE(r),n.status||500))}).catch(r=>{e(new MC(DE(r),r))}):e(new MC(DE(n),n))}),Aq=(n,e,t,i)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i&&(r.body=JSON.stringify(i)),Object.assign(Object.assign({},r),t))};function jy(n,e,t,i,r,s){return Dh(this,void 0,void 0,function*(){return new Promise((a,o)=>{n(t,Aq(e,i,r,s)).then(l=>{if(!l.ok)throw l;return i!=null&&i.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>Cq(l,o,i))})})}function ab(n,e,t,i){return Dh(this,void 0,void 0,function*(){return jy(n,"GET",e,t,i)})}function jc(n,e,t,i,r){return Dh(this,void 0,void 0,function*(){return jy(n,"POST",e,i,r,t)})}function Pq(n,e,t,i,r){return Dh(this,void 0,void 0,function*(){return jy(n,"PUT",e,i,r,t)})}function Rq(n,e,t,i){return Dh(this,void 0,void 0,function*(){return jy(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),i)})}function Xj(n,e,t,i,r){return Dh(this,void 0,void 0,function*(){return jy(n,"DELETE",e,i,r,t)})}var ws=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(i.next(u))}catch(d){a(d)}}function l(u){try{c(i.throw(u))}catch(d){a(d)}}function c(u){u.done?s(u.value):r(u.value).then(o,l)}c((i=i.apply(n,e||[])).next())})};const kq={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},hD={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Nq{constructor(e,t={},i,r){this.url=e,this.headers=t,this.bucketId=i,this.fetch=qj(r)}uploadOrUpdate(e,t,i,r){return ws(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},hD),r);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&i instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",i)):typeof FormData<"u"&&i instanceof FormData?(s=i,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=i,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),r!=null&&r.headers&&(o=Object.assign(Object.assign({},o),r.headers));const c=this._removeEmptyFolders(t),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:s,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),h=yield d.json();return d.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(s){if(pr(s))return{data:null,error:s};throw s}})}upload(e,t,i){return ws(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,i)})}uploadToSignedUrl(e,t,i,r){return ws(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:hD.upsert},r),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",c.cacheControl)):(l=i,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:u}),h=yield d.json();return d.ok?{data:{path:s,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(pr(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return ws(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const s=yield jc(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:r}),a=new URL(this.url+s.url),o=a.searchParams.get("token");if(!o)throw new iR("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(i){if(pr(i))return{data:null,error:i};throw i}})}update(e,t,i){return ws(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,i)})}move(e,t,i){return ws(this,void 0,void 0,function*(){try{return{data:yield jc(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(pr(r))return{data:null,error:r};throw r}})}copy(e,t,i){return ws(this,void 0,void 0,function*(){try{return{data:{path:(yield jc(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(pr(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,i){return ws(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),s=yield jc(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const a=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(r){if(pr(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,i){return ws(this,void 0,void 0,function*(){try{const r=yield jc(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:r.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(r){if(pr(r))return{data:null,error:r};throw r}})}download(e,t){return ws(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=s?`?${s}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield ab(this.fetch,`${this.url}/${r}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(pr(o))return{data:null,error:o};throw o}})}info(e){return ws(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const i=yield ab(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:EC(i),error:null}}catch(i){if(pr(i))return{data:null,error:i};throw i}})}exists(e){return ws(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Rq(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(pr(i)&&i instanceof MC){const r=i.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,t){const i=this._getFinalPath(e),r=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&r.push(s);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&r.push(l);let c=r.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${i}${c}`)}}}remove(e){return ws(this,void 0,void 0,function*(){try{return{data:yield Xj(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(pr(t))return{data:null,error:t};throw t}})}list(e,t,i){return ws(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},kq),t),{prefix:e||""});return{data:yield jc(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},i),error:null}}catch(r){if(pr(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Iq="2.7.1",Dq={"X-Client-Info":`storage-js/${Iq}`};var tf=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(i.next(u))}catch(d){a(d)}}function l(u){try{c(i.throw(u))}catch(d){a(d)}}function c(u){u.done?s(u.value):r(u.value).then(o,l)}c((i=i.apply(n,e||[])).next())})};class Lq{constructor(e,t={},i){this.url=e,this.headers=Object.assign(Object.assign({},Dq),t),this.fetch=qj(i)}listBuckets(){return tf(this,void 0,void 0,function*(){try{return{data:yield ab(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(pr(e))return{data:null,error:e};throw e}})}getBucket(e){return tf(this,void 0,void 0,function*(){try{return{data:yield ab(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(pr(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return tf(this,void 0,void 0,function*(){try{return{data:yield jc(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(pr(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return tf(this,void 0,void 0,function*(){try{return{data:yield Pq(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(pr(i))return{data:null,error:i};throw i}})}emptyBucket(e){return tf(this,void 0,void 0,function*(){try{return{data:yield jc(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(pr(t))return{data:null,error:t};throw t}})}deleteBucket(e){return tf(this,void 0,void 0,function*(){try{return{data:yield Xj(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(pr(t))return{data:null,error:t};throw t}})}}class Oq extends Lq{constructor(e,t={},i){super(e,t,i)}from(e){return new Nq(this.url,this.headers,e,this.fetch)}}const Fq="2.50.0";let xg="";typeof Deno<"u"?xg="deno":typeof document<"u"?xg="web":typeof navigator<"u"&&navigator.product==="ReactNative"?xg="react-native":xg="node";const Uq={"X-Client-Info":`supabase-js-${xg}/${Fq}`},jq={headers:Uq},zq={schema:"public"},Bq={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Hq={};var Vq=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(i.next(u))}catch(d){a(d)}}function l(u){try{c(i.throw(u))}catch(d){a(d)}}function c(u){u.done?s(u.value):r(u.value).then(o,l)}c((i=i.apply(n,e||[])).next())})};const $q=n=>{let e;return n?e=n:typeof fetch>"u"?e=Nj:e=fetch,(...t)=>e(...t)},Wq=()=>typeof Headers>"u"?Ij:Headers,Gq=(n,e,t)=>{const i=$q(t),r=Wq();return(s,a)=>Vq(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:n;let c=new r(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),i(s,Object.assign(Object.assign({},a),{headers:c}))})};var qq=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(i.next(u))}catch(d){a(d)}}function l(u){try{c(i.throw(u))}catch(d){a(d)}}function c(u){u.done?s(u.value):r(u.value).then(o,l)}c((i=i.apply(n,e||[])).next())})};function Xq(n){return n.endsWith("/")?n:n+"/"}function Yq(n,e){var t,i;const{db:r,auth:s,realtime:a,global:o}=n,{db:l,auth:c,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},l),r),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},u),a),global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},(t=d==null?void 0:d.headers)!==null&&t!==void 0?t:{}),(i=o==null?void 0:o.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>qq(this,void 0,void 0,function*(){return""})};return n.accessToken?h.accessToken=n.accessToken:delete h.accessToken,h}const Yj="2.70.0",Df=30*1e3,TC=3,LE=TC*Df,Kq="http://localhost:9999",Zq="supabase.auth.token",Jq={"X-Client-Info":`gotrue-js/${Yj}`},CC="X-Supabase-Api-Version",Kj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Qq=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,eX=6e5;class rR extends Error{constructor(e,t,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=i}}function tn(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class tX extends rR{constructor(e,t,i){super(e,t,i),this.name="AuthApiError",this.status=t,this.code=i}}function nX(n){return tn(n)&&n.name==="AuthApiError"}class Zj extends rR{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class zu extends rR{constructor(e,t,i,r){super(e,i,r),this.name=t,this.status=i}}class Lc extends zu{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function iX(n){return tn(n)&&n.name==="AuthSessionMissingError"}class Sx extends zu{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Mx extends zu{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ex extends zu{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function rX(n){return tn(n)&&n.name==="AuthImplicitGrantRedirectError"}class fD extends zu{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AC extends zu{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function OE(n){return tn(n)&&n.name==="AuthRetryableFetchError"}class pD extends zu{constructor(e,t,i){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=i}}class $g extends zu{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ob="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),mD=` 	
\r=`.split(""),sX=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<mD.length;e+=1)n[mD[e].charCodeAt(0)]=-2;for(let e=0;e<ob.length;e+=1)n[ob[e].charCodeAt(0)]=e;return n})();function gD(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(ob[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(ob[i]),e.queuedBits-=6}}function Jj(n,e,t){const i=sX[n];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function yD(n){const e=[],t=a=>{e.push(String.fromCodePoint(a))},i={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},s=a=>{lX(a,i,t)};for(let a=0;a<n.length;a+=1)Jj(n.charCodeAt(a),r,s);return e.join("")}function aX(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function oX(n,e){for(let t=0;t<n.length;t+=1){let i=n.charCodeAt(t);if(i>55295&&i<=56319){const r=(i-55296)*1024&65535;i=(n.charCodeAt(t+1)-56320&65535|r)+65536,t+=1}aX(i,e)}}function lX(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let i=1;i<6;i+=1)if(!(n>>7-i&1)){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function cX(n){const e=[],t={queue:0,queuedBits:0},i=r=>{e.push(r)};for(let r=0;r<n.length;r+=1)Jj(n.charCodeAt(r),t,i);return new Uint8Array(e)}function uX(n){const e=[];return oX(n,t=>e.push(t)),new Uint8Array(e)}function dX(n){const e=[],t={queue:0,queuedBits:0},i=r=>{e.push(r)};return n.forEach(r=>gD(r,t,i)),gD(null,t,i),e.join("")}function hX(n){return Math.round(Date.now()/1e3)+n}function fX(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const lo=()=>typeof window<"u"&&typeof document<"u",id={tested:!1,writable:!1},Wg=()=>{if(!lo())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(id.tested)return id.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),id.tested=!0,id.writable=!0}catch{id.tested=!0,id.writable=!1}return id.writable};function pX(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,s)=>{e[s]=r})}catch{}return t.searchParams.forEach((i,r)=>{e[r]=i}),e}const Qj=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Fy(()=>Promise.resolve().then(()=>om),void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},mX=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",ez=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Tx=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Cx=async(n,e)=>{await n.removeItem(e)};class Zw{constructor(){this.promise=new Zw.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Zw.promiseConstructor=Promise;function FE(n){const e=n.split(".");if(e.length!==3)throw new $g("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!Qq.test(e[i]))throw new $g("JWT not in base64url format");return{header:JSON.parse(yD(e[0])),payload:JSON.parse(yD(e[1])),signature:cX(e[2]),raw:{header:e[0],payload:e[1]}}}async function gX(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function yX(n,e){return new Promise((i,r)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await n(s);if(!e(s,null,a)){i(a);return}}catch(a){if(!e(s,a)){r(a);return}}})()})}function vX(n){return("0"+n.toString(16)).substr(-2)}function xX(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=t.length;let r="";for(let s=0;s<56;s++)r+=t.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(e),Array.from(e,vX).join("")}async function _X(n){const t=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(i);return Array.from(r).map(s=>String.fromCharCode(s)).join("")}async function bX(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await _X(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function nf(n,e,t=!1){const i=xX();let r=i;t&&(r+="/PASSWORD_RECOVERY"),await ez(n,`${e}-code-verifier`,r);const s=await bX(i);return[s,i===s?"plain":"s256"]}const wX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function SX(n){const e=n.headers.get(CC);if(!e||!e.match(wX))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function MX(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function EX(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const TX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function rf(n){if(!TX.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var CX=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const Td=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),AX=[502,503,504];async function vD(n){var e;if(!mX(n))throw new AC(Td(n),0);if(AX.includes(n.status))throw new AC(Td(n),n.status);let t;try{t=await n.json()}catch(s){throw new Zj(Td(s),s)}let i;const r=SX(n);if(r&&r.getTime()>=Kj["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?i=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(i=t.error_code),i){if(i==="weak_password")throw new pD(Td(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new Lc}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new pD(Td(t),n.status,t.weak_password.reasons);throw new tX(Td(t),n.status||500,i)}const PX=(n,e,t,i)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),t))};async function yn(n,e,t,i){var r;const s=Object.assign({},i==null?void 0:i.headers);s[CC]||(s[CC]=Kj["2024-01-01"].name),i!=null&&i.jwt&&(s.Authorization=`Bearer ${i.jwt}`);const a=(r=i==null?void 0:i.query)!==null&&r!==void 0?r:{};i!=null&&i.redirectTo&&(a.redirect_to=i.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await RX(n,e,t+o,{headers:s,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(l):{data:Object.assign({},l),error:null}}async function RX(n,e,t,i,r,s){const a=PX(e,i,r,s);let o;try{o=await n(t,Object.assign({},a))}catch(l){throw console.error(l),new AC(Td(l),0)}if(o.ok||await vD(o),i!=null&&i.noResolveJson)return o;try{return await o.json()}catch(l){await vD(l)}}function El(n){var e;let t=null;DX(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=hX(n.expires_in)));const i=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:i},error:null}}function xD(n){const e=El(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,i)=>t&&typeof i=="string",!0)&&(e.data.weak_password=n.weak_password),e}function $c(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function kX(n){return{data:n,error:null}}function NX(n){const{action_link:e,email_otp:t,hashed_token:i,redirect_to:r,verification_type:s}=n,a=CX(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:i,redirect_to:r,verification_type:s},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function IX(n){return n}function DX(n){return n.access_token&&n.refresh_token&&n.expires_in}const UE=["global","local","others"];var LX=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};class OX{constructor({url:e="",headers:t={},fetch:i}){this.url=e,this.headers=t,this.fetch=Qj(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=UE[0]){if(UE.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${UE.join(", ")}`);try{return await yn(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(tn(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,t={}){try{return await yn(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:$c})}catch(i){if(tn(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:t}=e,i=LX(e,["options"]),r=Object.assign(Object.assign({},i),t);return"newEmail"in i&&(r.new_email=i==null?void 0:i.newEmail,delete r.newEmail),await yn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:NX,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(tn(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await yn(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:$c})}catch(t){if(tn(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,i,r,s,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},u=await yn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(s=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""},xform:IX});if(u.error)throw u.error;const d=await u.json(),h=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(y=>{const x=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(y.split(";")[1].split("=")[1]);c[`${_}Page`]=x}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(tn(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){rf(e);try{return await yn(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:$c})}catch(t){if(tn(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){rf(e);try{return await yn(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:$c})}catch(i){if(tn(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,t=!1){rf(e);try{return await yn(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:$c})}catch(i){if(tn(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){rf(e.userId);try{const{data:t,error:i}=await yn(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:i}}catch(t){if(tn(t))return{data:null,error:t};throw t}}async _deleteFactor(e){rf(e.userId),rf(e.id);try{return{data:await yn(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(tn(t))return{data:null,error:t};throw t}}}const FX={getItem:n=>Wg()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{Wg()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{Wg()&&globalThis.localStorage.removeItem(n)}};function _D(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function UX(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const sf={debug:!!(globalThis&&Wg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class tz extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class jX extends tz{}async function zX(n,e,t){sf.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),sf.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async r=>{if(r){sf.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,r.name);try{return await t()}finally{sf.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,r.name)}}else{if(e===0)throw sf.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new jX(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(sf.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}UX();const BX={url:Kq,storageKey:Zq,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Jq,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function bD(n,e,t){return await t()}class V0{constructor(e){var t,i;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=V0.nextInstanceID,V0.nextInstanceID+=1,this.instanceID>0&&lo()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},BX),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new OX({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Qj(r.fetch),this.lock=r.lock||bD,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:lo()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=zX:this.lock=bD,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:Wg()?this.storage=FX:(this.memoryStorage={},this.storage=_D(this.memoryStorage)):(this.memoryStorage={},this.storage=_D(this.memoryStorage)),lo()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Yj}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=pX(window.location.href);let i="none";if(this._isImplicitGrantCallback(t)?i="implicit":await this._isPKCECallback(t)&&(i="pkce"),lo()&&this.detectSessionInUrl&&i!=="none"){const{data:r,error:s}=await this._getSessionFromURL(t,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),rX(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:o}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return tn(t)?{error:t}:{error:new Zj("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,i,r;try{const s=await yn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:El}),{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(tn(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,i,r;try{let s;if("email"in e){const{email:u,password:d,options:h}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await nf(this.storage,this.storageKey)),s=await yn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:y},xform:El})}else if("phone"in e){const{phone:u,password:d,options:h}=e;s=await yn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(i=h==null?void 0:h.data)!==null&&i!==void 0?i:{},channel:(r=h==null?void 0:h.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:El})}else throw new Mx("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(tn(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:a,options:o}=e;t=await yn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:xD})}else if("phone"in e){const{phone:s,password:a,options:o}=e;t=await yn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:xD})}else throw new Mx("You must provide either an email or phone number and a password");const{data:i,error:r}=t;return r?{data:{user:null,session:null},error:r}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Sx}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:r})}catch(t){if(tn(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,i,r,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,i,r,s,a,o,l,c,u,d,h,p;let y,x;if("message"in e)y=e.message,x=e.signature;else{const{chain:_,wallet:v,statement:b,options:w}=e;let S;if(lo())if(typeof v=="object")S=v;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))S=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=v}const A=new URL((t=w==null?void 0:w.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in S&&S.signIn){const P=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),b?{statement:b}:null));let k;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")k=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)k=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)y=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),x=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${A.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(r=(i=w==null?void 0:w.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((s=w==null?void 0:w.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((d=(u=w==null?void 0:w.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...w.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const P=await S.signMessage(new TextEncoder().encode(y),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=P}}try{const{data:_,error:v}=await yn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:dX(x)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:El});if(v)throw v;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new Sx}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:v})}catch(_){if(tn(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const t=await Tx(this.storage,`${this.storageKey}-code-verifier`),[i,r]=(t??"").split("/");try{const{data:s,error:a}=await yn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:El});if(await Cx(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Sx}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:r??null}),error:a})}catch(s){if(tn(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:i,token:r,access_token:s,nonce:a}=e,o=await yn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:r,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:El}),{data:l,error:c}=o;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Sx}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(tn(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,i,r,s,a;try{if("email"in e){const{email:o,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await nf(this.storage,this.storageKey));const{error:d}=await yn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:o,options:l}=e,{data:c,error:u}=await yn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Mx("You must provide either an email or phone number.")}catch(o){if(tn(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,i;try{let r,s;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:a,error:o}=await yn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:El});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(r){if(tn(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,i,r;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await nf(this.storage,this.storageKey)),await yn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&i!==void 0?i:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:kX})}catch(s){if(tn(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;if(i)throw i;if(!t)throw new Lc;const{error:r}=await yn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(tn(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:i,type:r,options:s}=e,{error:a}=await yn(this.fetch,"POST",t,{headers:this.headers,body:{email:i,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:i,type:r,options:s}=e,{data:a,error:o}=await yn(this.fetch,"POST",t,{headers:this.headers,body:{phone:i,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new Mx("You must provide either an email or phone number and a type")}catch(t){if(tn(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await i,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=t();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Tx(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<LE:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!a&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await yn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:$c}):await this._useSession(async t=>{var i,r,s;const{data:a,error:o}=t;if(o)throw o;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Lc}:await yn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0,xform:$c})})}catch(t){if(tn(t))return iX(t)&&(await this._removeSession(),await Cx(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async i=>{const{data:r,error:s}=i;if(s)throw s;if(!r.session)throw new Lc;const a=r.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await nf(this.storage,this.storageKey));const{data:c,error:u}=await yn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:$c});if(u)throw u;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(i){if(tn(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Lc;const t=Date.now()/1e3;let i=t,r=!0,s=null;const{payload:a}=FE(e.access_token);if(a.exp&&(i=a.exp,r=i<=t),r){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:i-t,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(tn(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var i;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(i=a.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new Lc;const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(tn(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!lo())throw new Ex("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ex(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new fD("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ex("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new fD("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:r,access_token:s,refresh_token:a,expires_in:o,expires_at:l,token_type:c}=e;if(!s||!o||!a||!c)throw new Ex("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(o);let h=u+d;l&&(h=parseInt(l));const p=h-u;p*1e3<=Df&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const y=h-d;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,h,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,h,u);const{data:x,error:_}=await this._getUser(s);if(_)throw _;const v={provider_token:i,provider_refresh_token:r,access_token:s,expires_in:d,expires_at:h,refresh_token:a,token_type:c,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(i){if(tn(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Tx(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var i;const{data:r,error:s}=t;if(s)return{error:s};const a=(i=r.session)===null||i===void 0?void 0:i.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(nX(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Cx(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=fX(),i={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async t=>{var i,r;try{const{data:{session:s},error:a}=t;if(a)throw a;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let i=null,r=null;this.flowType==="pkce"&&([i,r]=await nf(this.storage,this.storageKey,!0));try{return await yn(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(tn(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(tn(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:i,error:r}=await this._useSession(async s=>{var a,o,l,c,u;const{data:d,error:h}=s;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await yn(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(r)throw r;return lo()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:e.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(tn(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var i,r;const{data:s,error:a}=t;if(a)throw a;return await yn(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(tn(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await yX(async r=>(r>0&&await gX(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await yn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:El})),(r,s)=>{const a=200*Math.pow(2,r);return s&&OE(s)&&Date.now()+a-i<Df})}catch(i){if(this._debug(t,"error",i),tn(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",i),lo()&&!t.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const i=await Tx(this.storage,this.storageKey);if(this._debug(t,"session from storage",i),!this._isValidSession(i)){this._debug(t,"session is not valid"),i!==null&&await this._removeSession();return}const r=((e=i.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<LE;if(this._debug(t,`session has${r?"":" not"} expired with margin of ${LE}s`),r){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),OE(s)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(t,"error",i),console.error(i);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,i;if(!e)throw new Lc;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Zw;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new Lc;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={session:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(r,"error",s),tn(s)){const a={session:null,error:s};return OE(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,i=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await ez(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Cx(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&lo()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Df);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:i}}=t;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((i.expires_at*1e3-e)/Df);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Df}ms, refresh threshold is ${TC} ticks`),r<=TC&&await this._callRefreshToken(i.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof tz)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!lo()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,i){const r=[`provider=${encodeURIComponent(t)}`];if(i!=null&&i.redirectTo&&r.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&r.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[s,a]=await nf(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(o.toString())}if(i!=null&&i.queryParams){const s=new URLSearchParams(i.queryParams);r.push(s.toString())}return i!=null&&i.skipBrowserRedirect&&r.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var i;const{data:r,error:s}=t;return s?{data:null,error:s}:await yn(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(tn(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var i,r;const{data:s,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await yn(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((r=l==null?void 0:l.totp)===null||r===void 0)&&r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(tn(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:r,error:s}=t;if(s)return{data:null,error:s};const{data:a,error:o}=await yn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(tn(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:r,error:s}=t;return s?{data:null,error:s}:await yn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(tn(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const i=(e==null?void 0:e.factors)||[],r=i.filter(a=>a.factor_type==="totp"&&a.status==="verified"),s=i.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:i,totp:r,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,i;const{data:{session:r},error:s}=e;if(s)return{data:null,error:s};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=FE(r.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((i=(t=r.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(l="aal2");const u=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let i=t.keys.find(a=>a.kid===e);if(i||(i=this.jwks.keys.find(a=>a.kid===e),i&&this.jwks_cached_at+eX>Date.now()))return i;const{data:r,error:s}=await yn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!r.keys||r.keys.length===0)throw new $g("JWKS is empty");if(this.jwks=r,this.jwks_cached_at=Date.now(),i=r.keys.find(a=>a.kid===e),!i)throw new $g("No matching signing key found in JWKS");return i}async getClaims(e,t={keys:[]}){try{let i=e;if(!i){const{data:p,error:y}=await this.getSession();if(y||!p.session)return{data:null,error:y};i=p.session.access_token}const{header:r,payload:s,signature:a,raw:{header:o,payload:l}}=FE(i);if(MX(s.exp),!r.kid||r.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(i);if(p)throw p;return{data:{claims:s,header:r,signature:a},error:null}}const c=EX(r.alg),u=await this.fetchJwk(r.kid,t),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,a,uX(`${o}.${l}`)))throw new $g("Invalid JWT signature");return{data:{claims:s,header:r,signature:a},error:null}}catch(i){if(tn(i))return{data:null,error:i};throw i}}}V0.nextInstanceID=0;const HX=V0;class VX extends HX{constructor(e){super(e)}}var $X=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(i.next(u))}catch(d){a(d)}}function l(u){try{c(i.throw(u))}catch(d){a(d)}}function c(u){u.done?s(u.value):r(u.value).then(o,l)}c((i=i.apply(n,e||[])).next())})};class WX{constructor(e,t,i){var r,s,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=Xq(e),l=new URL(o);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:zq,realtime:Hq,auth:Object.assign(Object.assign({},Bq),{storageKey:c}),global:jq},d=Yq(i??{},u);this.storageKey=(r=d.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=Gq(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new lq(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new UG(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Oq(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},i={}){return this.rest.rpc(e,t,i)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return $X(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(t=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:r,storageKey:s,flowType:a,lock:o,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new VX({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),c),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:r,flowType:a,lock:o,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new wq(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,i)=>{this._handleTokenChanged(t,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,t,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const GX=(n,e,t)=>new WX(n,e,t),nz="https://wmzhpbtaulvpneqejrlj.supabase.co",iz="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndtemhwYnRhdWx2cG5lcWVqcmxqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDMzNzIxNDAsImV4cCI6MjA1ODk0ODE0MH0.cYjFKGn6I9y83R8xeSE90thAhN5qGUe72eRGr-AuM-8";console.log("Environment check:",{hasUrl:!!nz,hasKey:!!iz});const tt=GX(nz,iz),rz=F.createContext(),qX=({children:n})=>{const[e,t]=F.useState(()=>localStorage.getItem("theme")==="dark");F.useEffect(()=>{e?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[e]);const i=()=>{t(!e)};return g.jsx(rz.Provider,{value:{isDarkMode:e,toggleTheme:i},children:n})},Zi=()=>{const n=F.useContext(rz);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},XX=()=>{const[n,e]=F.useState(""),[t,i]=F.useState(""),[r,s]=F.useState(""),[a,o]=F.useState(!1),{isDarkMode:l}=Zi(),c=async u=>{u.preventDefault(),o(!0),s(""),i("");const{error:d}=await tt.auth.resetPasswordForEmail(n,{redirectTo:`${window.location.origin}/reset-password`});d?s(d.message):i("Password reset link sent! Check your email."),o(!1)};return g.jsxs("div",{className:`min-h-screen flex flex-col justify-center py-12 sm:px-6 lg:px-8 ${l?"bg-gray-900":"bg-gray-50"}`,children:[g.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[g.jsx("div",{className:"absolute top-4 left-4",children:g.jsxs(ql,{to:"/login",className:`flex items-center ${l?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:[g.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{d:"M15 19l-7-7 7-7"})}),"Back to Login"]})}),g.jsx("h2",{className:`mt-6 text-center text-3xl font-extrabold ${l?"text-white":"text-gray-900"}`,children:"Reset your password"}),g.jsx("p",{className:`mt-2 text-center text-sm ${l?"text-gray-400":"text-gray-600"}`,children:"Enter your email address and we'll send you a link to reset your password."})]}),g.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:g.jsxs("div",{className:`py-8 px-4 shadow sm:rounded-lg sm:px-10 ${l?"bg-gray-800":"bg-white"}`,children:[t&&g.jsx("div",{className:"mb-4 bg-green-50 border border-green-200 text-green-600 px-4 py-3 rounded-md text-sm",children:t}),r&&g.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md text-sm",children:r}),g.jsxs("form",{onSubmit:c,className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"email",className:`block text-sm font-medium ${l?"text-gray-300":"text-gray-700"}`,children:"Email address"}),g.jsx("div",{className:"mt-1",children:g.jsx("input",{id:"email",type:"email",required:!0,value:n,onChange:u=>e(u.target.value),className:`appearance-none block w-full px-3 py-2 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${l?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500"}`,placeholder:"Enter your email"})})]}),g.jsx("div",{children:g.jsx("button",{type:"submit",disabled:a,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Sending...":"Send Reset Link"})})]})]})})]})};var sz={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},wD=sn.createContext&&sn.createContext(sz),YX=["attr","size","title"];function KX(n,e){if(n==null)return{};var t=ZX(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function ZX(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function lb(){return lb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},lb.apply(this,arguments)}function SD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function cb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?SD(Object(t),!0).forEach(function(i){JX(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):SD(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function JX(n,e,t){return e=QX(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function QX(n){var e=eY(n,"string");return typeof e=="symbol"?e:e+""}function eY(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function az(n){return n&&n.map((e,t)=>sn.createElement(e.tag,cb({key:t},e.attr),az(e.child)))}function oz(n){return e=>sn.createElement(tY,lb({attr:cb({},n.attr)},e),az(n.child))}function tY(n){var e=t=>{var{attr:i,size:r,title:s}=n,a=KX(n,YX),o=r||t.size||"1em",l;return t.className&&(l=t.className),n.className&&(l=(l?l+" ":"")+n.className),sn.createElement("svg",lb({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,a,{className:l,style:cb(cb({color:n.color||t.color},t.style),n.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&sn.createElement("title",null,s),n.children)};return wD!==void 0?sn.createElement(wD.Consumer,null,t=>e(t)):e(sz)}function nY(n){return oz({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(n)}function iY(n){return oz({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(n)}const ub=({value:n,onChange:e,placeholder:t,id:i,name:r,className:s=""})=>{const[a,o]=F.useState(!1);return g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:a?"text":"password",id:i,name:r,placeholder:t,value:n,onChange:e,className:`${s} pr-10 text-gray-900`,required:!0}),g.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600",onClick:()=>o(!a),"aria-label":a?"Hide password":"Show password",children:a?g.jsx(nY,{className:"w-5 h-5"}):g.jsx(iY,{className:"w-5 h-5"})})]})},rY=()=>{const[n,e]=F.useState(""),[t,i]=F.useState(""),[r,s]=F.useState(""),[a,o]=F.useState(!1),l=Ki(),c=async u=>{u.preventDefault(),o(!0),s(""),i("");const{error:d}=await tt.auth.updateUser({password:n});d?(s(d.message),alert(`Error: ${d.message}`)):(i("Password updated successfully! Redirecting to login..."),alert("Success! Your password has been updated. Redirecting to login..."),setTimeout(()=>l("/login"),3e3)),o(!1)};return g.jsxs("div",{className:"login-container",children:[g.jsx("h1",{className:"login-title",children:"Reset Password"}),t&&g.jsx("div",{className:"success-message",children:t}),r&&g.jsx("div",{className:"error-message",children:r}),g.jsxs("form",{onSubmit:c,className:"login-form",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"password",children:"Enter your new password"}),g.jsx(ub,{id:"password",value:n,onChange:u=>e(u.target.value),placeholder:"Enter new password",required:!0})]}),g.jsx("button",{type:"submit",className:"login-button",disabled:a,children:a?"Updating...":"Reset Password"})]}),g.jsx("div",{className:"register-link",children:g.jsx("a",{href:"/login",children:"Back to Login"})})]})},lz=F.createContext(),cz=({children:n})=>{const[e,t]=F.useState(null),i=async()=>{const{error:r}=await tt.auth.signOut();if(r)throw console.error("Error signing out:",r.message),r;t(null)};return F.useEffect(()=>{const r=async()=>{var l;const{data:a}=await tt.auth.getSession(),o=(l=a==null?void 0:a.session)==null?void 0:l.user;if(o){const{data:c,error:u}=await tt.from("users").select("*").eq("id",o.id).single();!u&&c&&t({...o,...c,fullName:`${c.first_name} ${c.last_name}`})}};r();const{data:s}=tt.auth.onAuthStateChange((a,o)=>{o!=null&&o.user?r():t(null)});return()=>s==null?void 0:s.subscription.unsubscribe()},[]),g.jsxs(lz.Provider,{value:{user:e,setUser:t,signOut:i},children:[n,"  "]})},Po=()=>F.useContext(lz),sY=()=>{const[n,e]=F.useState(""),[t,i]=F.useState(""),[r,s]=F.useState(!1),[a,o]=F.useState(null),l=Ki(),{setUser:c}=Po(),{isDarkMode:u,toggleTheme:d}=Zi(),h=async p=>{p.preventDefault(),s(!0),o(null);try{const{data:y,error:x}=await tt.auth.signInWithPassword({email:n,password:t});if(x)throw x;const _=y==null?void 0:y.user,{data:v,error:b}=await tt.from("users").select("*").eq("id",_.id).single();if(b)throw new Error("User data not found in database.");c({..._,...v,fullName:`${v.first_name} ${v.last_name}`}),v.role,l("/dashboard")}catch(y){o(y.message)}finally{s(!1)}};return g.jsxs("div",{className:`min-h-screen flex flex-col justify-center py-12 sm:px-6 lg:px-8 ${u?"bg-gray-900":"bg-gray-50"}`,children:[g.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[g.jsx("div",{className:"absolute top-4 left-4",children:g.jsxs(ql,{to:"/",className:`flex items-center ${u?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:[g.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{d:"M15 19l-7-7 7-7"})}),"Back to Home"]})}),g.jsx("div",{className:"absolute top-4 right-4",children:g.jsx("button",{onClick:d,className:`p-2 rounded-md ${u?"text-yellow-400 hover:bg-gray-700":"text-gray-500 hover:bg-gray-100"}`,"aria-label":"Toggle theme",children:u?g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})}),g.jsx("h2",{className:`mt-6 text-center text-3xl font-extrabold ${u?"text-white":"text-gray-900"}`,children:"Sign in to your account"})]}),g.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:g.jsxs("div",{className:`py-8 px-4 shadow sm:rounded-lg sm:px-10 ${u?"bg-gray-800":"bg-white"}`,children:[a&&g.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md text-sm",children:a}),g.jsxs("form",{onSubmit:h,className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"email",className:`block text-sm font-medium ${u?"text-gray-300":"text-gray-700"}`,children:"Email address"}),g.jsx("div",{className:"mt-1",children:g.jsx("input",{id:"email",type:"email",required:!0,value:n,onChange:p=>e(p.target.value),className:`appearance-none block w-full px-3 py-2 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${u?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500"}`,placeholder:"Enter your email"})})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"password",className:`block text-sm font-medium ${u?"text-gray-300":"text-gray-700"}`,children:"Password"}),g.jsx("div",{className:"mt-1",children:g.jsx(ub,{id:"password",name:"password",value:t,onChange:p=>i(p.target.value),className:`appearance-none block w-full px-3 py-2 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${u?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500"}`,placeholder:"Enter your password"})})]}),g.jsx("div",{className:"flex items-center justify-between",children:g.jsx("div",{className:"text-sm",children:g.jsx(ql,{to:"/forgot-password",className:`font-medium ${u?"text-indigo-400 hover:text-indigo-300":"text-indigo-600 hover:text-indigo-500"}`,children:"Forgot your password?"})})}),g.jsx("div",{children:g.jsx("button",{type:"submit",disabled:r,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Signing in...":"Sign in"})})]}),g.jsxs("div",{className:"mt-6",children:[g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"absolute inset-0 flex items-center",children:g.jsx("div",{className:`w-full border-t ${u?"border-gray-700":"border-gray-300"}`})}),g.jsx("div",{className:"relative flex justify-center text-sm",children:g.jsx("span",{className:`px-2 ${u?"bg-gray-800 text-gray-400":"bg-white text-gray-500"}`,children:"Don't have an account?"})})]}),g.jsx("div",{className:"mt-6",children:g.jsx(ql,{to:"/register",className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${u?"text-indigo-400 bg-gray-700 hover:bg-gray-600":"text-indigo-600 bg-white hover:bg-gray-50"}`,children:"Register"})})]})]})})]})},aY=()=>{const[n,e]=F.useState({firstName:"",middleName:"",lastName:"",email:"",password:"",confirmPassword:""}),[t,i]=F.useState(!1),[r,s]=F.useState(null),a=Ki(),{isDarkMode:o,toggleTheme:l}=Zi();F.useEffect(()=>{async function d(){const{data:h,error:p}=await tt.from("users").select("*");p?console.error("Error fetching users table:",p):console.log("Users table data:",h)}d()},[]);const c=d=>{const{name:h,value:p}=d.target;e(y=>({...y,[h]:p}))},u=async d=>{var h,p,y;if(d.preventDefault(),n.password!==n.confirmPassword){s("Passwords don't match!");return}i(!0),s(null);try{const{data:x,error:_}=await tt.auth.signUp({email:n.email,password:n.password});if(_)throw _;let v=(h=x==null?void 0:x.user)==null?void 0:h.id,b=5;for(;!v&&b>0;){await new Promise(A=>setTimeout(A,1e3));const{data:S}=await tt.auth.getSession();v=(y=(p=S==null?void 0:S.session)==null?void 0:p.user)==null?void 0:y.id,b--}if(!v)throw new Error("User ID not available.");const{error:w}=await tt.from("users").insert([{id:v,first_name:n.firstName,middle_name:n.middleName||null,last_name:n.lastName,email:n.email,role:"farmer",created_at:new Date().toISOString()}]);if(w)throw w;alert("Registration successful! Please check your email."),a("/login")}catch(x){s(x.message||"An error occurred.")}finally{i(!1)}};return g.jsxs("div",{className:`min-h-screen flex flex-col justify-center py-12 sm:px-6 lg:px-8 ${o?"bg-gray-900":"bg-gray-50"}`,children:[g.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[g.jsx("div",{className:"absolute top-4 left-4",children:g.jsxs(ql,{to:"/",className:`flex items-center ${o?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:[g.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{d:"M15 19l-7-7 7-7"})}),"Back to Home"]})}),g.jsx("div",{className:"absolute top-4 right-4",children:g.jsx("button",{onClick:l,className:`p-2 rounded-md ${o?"text-yellow-400 hover:bg-gray-700":"text-gray-500 hover:bg-gray-100"}`,"aria-label":"Toggle theme",children:o?g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})}),g.jsx("h2",{className:`mt-6 text-center text-3xl font-extrabold ${o?"text-white":"text-gray-900"}`,children:"Farmer Registration"})]}),g.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:g.jsxs("div",{className:`py-8 px-4 shadow sm:rounded-lg sm:px-10 ${o?"bg-gray-800":"bg-white"}`,children:[r&&g.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md text-sm",children:r}),g.jsxs("form",{onSubmit:u,className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"firstName",className:`block text-sm font-medium ${o?"text-gray-300":"text-gray-700"}`,children:"First Name"}),g.jsx("div",{className:"mt-1",children:g.jsx("input",{type:"text",id:"firstName",name:"firstName",placeholder:"Enter your first name",value:n.firstName,onChange:c,required:!0,className:`appearance-none block w-full px-3 py-2 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${o?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500"}`})})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"middleName",className:`block text-sm font-medium ${o?"text-gray-300":"text-gray-700"}`,children:"Middle Name"}),g.jsx("div",{className:"mt-1",children:g.jsx("input",{type:"text",id:"middleName",name:"middleName",placeholder:"Enter your middle name",value:n.middleName,onChange:c,className:`appearance-none block w-full px-3 py-2 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${o?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500"}`})})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"lastName",className:`block text-sm font-medium ${o?"text-gray-300":"text-gray-700"}`,children:"Last Name"}),g.jsx("div",{className:"mt-1",children:g.jsx("input",{type:"text",id:"lastName",name:"lastName",placeholder:"Enter your last name",value:n.lastName,onChange:c,required:!0,className:`appearance-none block w-full px-3 py-2 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${o?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500"}`})})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"email",className:`block text-sm font-medium ${o?"text-gray-300":"text-gray-700"}`,children:"Email address"}),g.jsx("div",{className:"mt-1",children:g.jsx("input",{type:"email",id:"email",name:"email",placeholder:"Enter your email",value:n.email,onChange:c,required:!0,className:`appearance-none block w-full px-3 py-2 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${o?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500"}`})})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"password",className:`block text-sm font-medium ${o?"text-gray-300":"text-gray-700"}`,children:"Password"}),g.jsx("div",{className:"mt-1",children:g.jsx(ub,{id:"password",name:"password",placeholder:"Enter your password",value:n.password,onChange:c,required:!0,className:`appearance-none block w-full px-3 py-2 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${o?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500"}`})})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"confirmPassword",className:`block text-sm font-medium ${o?"text-gray-300":"text-gray-700"}`,children:"Confirm Password"}),g.jsx("div",{className:"mt-1",children:g.jsx(ub,{id:"confirmPassword",name:"confirmPassword",placeholder:"Confirm your password",value:n.confirmPassword,onChange:c,required:!0,className:`appearance-none block w-full px-3 py-2 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${o?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500"}`})})]}),g.jsx("div",{children:g.jsx("button",{type:"submit",disabled:t,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed ${o?"focus:ring-offset-gray-900":""}`,children:t?"Registering...":"Register"})})]}),g.jsxs("div",{className:"mt-6",children:[g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"absolute inset-0 flex items-center",children:g.jsx("div",{className:`w-full border-t ${o?"border-gray-700":"border-gray-300"}`})}),g.jsx("div",{className:"relative flex justify-center text-sm",children:g.jsx("span",{className:`px-2 ${o?"bg-gray-800 text-gray-400":"bg-white text-gray-500"}`,children:"Already have an account?"})})]}),g.jsx("div",{className:"mt-6",children:g.jsx(ql,{to:"/login",className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${o?"text-indigo-400 bg-gray-700 hover:bg-gray-600":"text-indigo-600 bg-white hover:bg-gray-50"}`,children:"Sign in"})})]})]})})]})};const oY=()=>{const n=Ki(),e=Bs(),{user:t,signOut:i}=Po(),{isDarkMode:r,toggleTheme:s}=Zi(),a=[{name:"Dashboard",path:"/dashboard"},{name:"Farmer Management",path:"/user-management"},{name:"Analytics",path:"/admin-analytics"},{name:"DSS Insights",path:"/farmer-recommendations"},{name:"Farmer Report",path:"/farmer-reports"},{name:"Price Management",path:"/price-management"}],o=[{name:"Dashboard",path:"/farmer-dashboard"},{name:"User Profile",path:"/user-profile"},{name:"Predictive Analytics",path:"/predictive-analytics"},{name:"DSS Recommendations",path:"/dss-recommendations"},{name:"Land & Plant Declaration",path:"/land-declaration"},{name:"Harvest Reporting",path:"/harvest-reporting"}],l=(t==null?void 0:t.role)==="admin"?a:o,c=async()=>{try{await i(),n("/login")}catch(u){console.error("Error during logout:",u)}};return g.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 ${r?"bg-gray-800":"bg-white"} shadow-lg flex flex-col`,children:[g.jsx("div",{className:`p-4 border-b ${r?"border-gray-700":"border-gray-200"}`,children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx("div",{className:"text-2xl",children:""}),g.jsx("h1",{className:`text-lg font-bold ${r?"text-white":"text-gray-900"}`,children:(t==null?void 0:t.role)==="admin"?"Admin Panel":"Farmer Panel"})]}),g.jsx("button",{onClick:s,className:`p-2 rounded-md ${r?"text-yellow-400 hover:bg-gray-700":"text-gray-500 hover:bg-gray-100"}`,children:r?g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})]})}),g.jsx("nav",{className:"flex-1 p-4 overflow-y-auto",children:g.jsx("ul",{className:"space-y-2",children:l.map(u=>g.jsx("li",{children:g.jsx("button",{onClick:()=>n(u.path),className:`w-full text-left px-4 py-2 text-sm font-medium rounded-md transition-colors ${e.pathname===u.path?r?"bg-gray-700 text-indigo-400":"bg-indigo-50 text-indigo-500":r?"bg-gray-800 text-gray-300 hover:bg-gray-700 hover:text-indigo-400":"bg-white text-gray-500 hover:bg-gray-50 hover:text-indigo-400"}`,children:u.name})},u.path))})}),g.jsx("div",{className:`w-full p-4 border-t ${r?"border-gray-700 bg-gray-800":"border-gray-200 bg-white"}`,children:g.jsx("button",{onClick:c,className:`w-full px-4 py-2 text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 ${r?"text-indigo-400 bg-gray-700 hover:bg-gray-600 focus:ring-indigo-500":"text-indigo-600 bg-indigo-50 hover:bg-indigo-100 focus:ring-indigo-500"}`,children:"Logout"})})]})};function uz(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=uz(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function Jd(){for(var n,e,t=0,i="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=uz(n))&&(i&&(i+=" "),i+=e);return i}function lY(n){if(!n||typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}lY(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var zy=n=>typeof n=="number"&&!isNaN(n),vh=n=>typeof n=="string",tc=n=>typeof n=="function",cY=n=>vh(n)||zy(n),PC=n=>vh(n)||tc(n)?n:null,uY=(n,e)=>n===!1||zy(n)&&n>0?n:e,RC=n=>F.isValidElement(n)||vh(n)||tc(n)||zy(n);function dY(n,e,t=300){let{scrollHeight:i,style:r}=n;requestAnimationFrame(()=>{r.minHeight="initial",r.height=i+"px",r.transition=`all ${t}ms`,requestAnimationFrame(()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(e,t)})})}function hY({enter:n,exit:e,appendPosition:t=!1,collapse:i=!0,collapseDuration:r=300}){return function({children:s,position:a,preventExitTransition:o,done:l,nodeRef:c,isIn:u,playToast:d}){let h=t?`${n}--${a}`:n,p=t?`${e}--${a}`:e,y=F.useRef(0);return F.useLayoutEffect(()=>{let x=c.current,_=h.split(" "),v=b=>{b.target===c.current&&(d(),x.removeEventListener("animationend",v),x.removeEventListener("animationcancel",v),y.current===0&&b.type!=="animationcancel"&&x.classList.remove(..._))};x.classList.add(..._),x.addEventListener("animationend",v),x.addEventListener("animationcancel",v)},[]),F.useEffect(()=>{let x=c.current,_=()=>{x.removeEventListener("animationend",_),i?dY(x,l,r):l()};u||(o?_():(y.current=1,x.className+=` ${p}`,x.addEventListener("animationend",_)))},[u]),sn.createElement(sn.Fragment,null,s)}}function MD(n,e){return{content:dz(n.content,n.props),containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,reason:n.removalReason,status:e}}function dz(n,e,t=!1){return F.isValidElement(n)&&!vh(n.type)?F.cloneElement(n,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):tc(n)?n({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):n}function fY({closeToast:n,theme:e,ariaLabel:t="close"}){return sn.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:i=>{i.stopPropagation(),n(!0)},"aria-label":t},sn.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},sn.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function pY({delay:n,isRunning:e,closeToast:t,type:i="default",hide:r,className:s,controlledProgress:a,progress:o,rtl:l,isIn:c,theme:u}){let d=r||a&&o===0,h={animationDuration:`${n}ms`,animationPlayState:e?"running":"paused"};a&&(h.transform=`scaleX(${o})`);let p=Jd("Toastify__progress-bar",a?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${u}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":l}),y=tc(s)?s({rtl:l,type:i,defaultClassName:p}):Jd(p,s),x={[a&&o>=1?"onTransitionEnd":"onAnimationEnd"]:a&&o<1?null:()=>{c&&t()}};return sn.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":d},sn.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${u} Toastify__progress-bar--${i}`}),sn.createElement("div",{role:"progressbar","aria-hidden":d?"true":"false","aria-label":"notification timer",className:y,style:h,...x}))}var mY=1,hz=()=>`${mY++}`;function gY(n,e,t){let i=1,r=0,s=[],a=[],o=e,l=new Map,c=new Set,u=b=>(c.add(b),()=>c.delete(b)),d=()=>{a=Array.from(l.values()),c.forEach(b=>b())},h=({containerId:b,toastId:w,updateId:S})=>{let A=b?b!==n:n!==1,P=l.has(w)&&S==null;return A||P},p=(b,w)=>{l.forEach(S=>{var A;(w==null||w===S.props.toastId)&&((A=S.toggle)==null||A.call(S,b))})},y=b=>{var w,S;(S=(w=b.props)==null?void 0:w.onClose)==null||S.call(w,b.removalReason),b.isActive=!1},x=b=>{if(b==null)l.forEach(y);else{let w=l.get(b);w&&y(w)}d()},_=()=>{r-=s.length,s=[]},v=b=>{var w,S;let{toastId:A,updateId:P}=b.props,k=P==null;b.staleId&&l.delete(b.staleId),b.isActive=!0,l.set(A,b),d(),t(MD(b,k?"added":"updated")),k&&((S=(w=b.props).onOpen)==null||S.call(w))};return{id:n,props:o,observe:u,toggle:p,removeToast:x,toasts:l,clearQueue:_,buildToast:(b,w)=>{if(h(w))return;let{toastId:S,updateId:A,data:P,staleId:k,delay:T}=w,E=A==null;E&&r++;let R={...o,style:o.toastStyle,key:i++,...Object.fromEntries(Object.entries(w).filter(([D,B])=>B!=null)),toastId:S,updateId:A,data:P,isIn:!1,className:PC(w.className||o.toastClassName),progressClassName:PC(w.progressClassName||o.progressClassName),autoClose:w.isLoading?!1:uY(w.autoClose,o.autoClose),closeToast(D){l.get(S).removalReason=D,x(S)},deleteToast(){let D=l.get(S);if(D!=null){if(t(MD(D,"removed")),l.delete(S),r--,r<0&&(r=0),s.length>0){v(s.shift());return}d()}}};R.closeButton=o.closeButton,w.closeButton===!1||RC(w.closeButton)?R.closeButton=w.closeButton:w.closeButton===!0&&(R.closeButton=RC(o.closeButton)?o.closeButton:!0);let I={content:b,props:R,staleId:k};o.limit&&o.limit>0&&r>o.limit&&E?s.push(I):zy(T)?setTimeout(()=>{v(I)},T):v(I)},setProps(b){o=b},setToggle:(b,w)=>{let S=l.get(b);S&&(S.toggle=w)},isToastActive:b=>{var w;return(w=l.get(b))==null?void 0:w.isActive},getSnapshot:()=>a}}var fs=new Map,$0=[],kC=new Set,yY=n=>kC.forEach(e=>e(n)),fz=()=>fs.size>0;function vY(){$0.forEach(n=>mz(n.content,n.options)),$0=[]}var xY=(n,{containerId:e})=>{var t;return(t=fs.get(e||1))==null?void 0:t.toasts.get(n)};function pz(n,e){var t;if(e)return!!((t=fs.get(e))!=null&&t.isToastActive(n));let i=!1;return fs.forEach(r=>{r.isToastActive(n)&&(i=!0)}),i}function _Y(n){if(!fz()){$0=$0.filter(e=>n!=null&&e.options.toastId!==n);return}if(n==null||cY(n))fs.forEach(e=>{e.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let e=fs.get(n.containerId);e?e.removeToast(n.id):fs.forEach(t=>{t.removeToast(n.id)})}}var bY=(n={})=>{fs.forEach(e=>{e.props.limit&&(!n.containerId||e.id===n.containerId)&&e.clearQueue()})};function mz(n,e){RC(n)&&(fz()||$0.push({content:n,options:e}),fs.forEach(t=>{t.buildToast(n,e)}))}function wY(n){var e;(e=fs.get(n.containerId||1))==null||e.setToggle(n.id,n.fn)}function gz(n,e){fs.forEach(t=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===t.id)&&t.toggle(n,e==null?void 0:e.id)})}function SY(n){let e=n.containerId||1;return{subscribe(t){let i=gY(e,n,yY);fs.set(e,i);let r=i.observe(t);return vY(),()=>{r(),fs.delete(e)}},setProps(t){var i;(i=fs.get(e))==null||i.setProps(t)},getSnapshot(){var t;return(t=fs.get(e))==null?void 0:t.getSnapshot()}}}function MY(n){return kC.add(n),()=>{kC.delete(n)}}function EY(n){return n&&(vh(n.toastId)||zy(n.toastId))?n.toastId:hz()}function By(n,e){return mz(n,e),e.toastId}function Jw(n,e){return{...e,type:e&&e.type||n,toastId:EY(e)}}function Qw(n){return(e,t)=>By(e,Jw(n,t))}function bt(n,e){return By(n,Jw("default",e))}bt.loading=(n,e)=>By(n,Jw("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function TY(n,{pending:e,error:t,success:i},r){let s;e&&(s=vh(e)?bt.loading(e,r):bt.loading(e.render,{...r,...e}));let a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},o=(c,u,d)=>{if(u==null){bt.dismiss(s);return}let h={type:c,...a,...r,data:d},p=vh(u)?{render:u}:u;return s?bt.update(s,{...h,...p}):bt(p.render,{...h,...p}),d},l=tc(n)?n():n;return l.then(c=>o("success",i,c)).catch(c=>o("error",t,c)),l}bt.promise=TY;bt.success=Qw("success");bt.info=Qw("info");bt.error=Qw("error");bt.warning=Qw("warning");bt.warn=bt.warning;bt.dark=(n,e)=>By(n,Jw("default",{theme:"dark",...e}));function CY(n){_Y(n)}bt.dismiss=CY;bt.clearWaitingQueue=bY;bt.isActive=pz;bt.update=(n,e={})=>{let t=xY(n,e);if(t){let{props:i,content:r}=t,s={delay:100,...i,...e,toastId:e.toastId||n,updateId:hz()};s.toastId!==n&&(s.staleId=n);let a=s.render||r;delete s.render,By(a,s)}};bt.done=n=>{bt.update(n,{progress:1})};bt.onChange=MY;bt.play=n=>gz(!0,n);bt.pause=n=>gz(!1,n);function AY(n){var e;let{subscribe:t,getSnapshot:i,setProps:r}=F.useRef(SY(n)).current;r(n);let s=(e=F.useSyncExternalStore(t,i,i))==null?void 0:e.slice();function a(o){if(!s)return[];let l=new Map;return n.newestOnTop&&s.reverse(),s.forEach(c=>{let{position:u}=c.props;l.has(u)||l.set(u,[]),l.get(u).push(c)}),Array.from(l,c=>o(c[0],c[1]))}return{getToastToRender:a,isToastActive:pz,count:s==null?void 0:s.length}}function PY(n){let[e,t]=F.useState(!1),[i,r]=F.useState(!1),s=F.useRef(null),a=F.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:o,pauseOnHover:l,closeToast:c,onClick:u,closeOnClick:d}=n;wY({id:n.toastId,containerId:n.containerId,fn:t}),F.useEffect(()=>{if(n.pauseOnFocusLoss)return h(),()=>{p()}},[n.pauseOnFocusLoss]);function h(){document.hasFocus()||v(),window.addEventListener("focus",_),window.addEventListener("blur",v)}function p(){window.removeEventListener("focus",_),window.removeEventListener("blur",v)}function y(k){if(n.draggable===!0||n.draggable===k.pointerType){b();let T=s.current;a.canCloseOnClick=!0,a.canDrag=!0,T.style.transition="none",n.draggableDirection==="x"?(a.start=k.clientX,a.removalDistance=T.offsetWidth*(n.draggablePercent/100)):(a.start=k.clientY,a.removalDistance=T.offsetHeight*(n.draggablePercent===80?n.draggablePercent*1.5:n.draggablePercent)/100)}}function x(k){let{top:T,bottom:E,left:R,right:I}=s.current.getBoundingClientRect();k.nativeEvent.type!=="touchend"&&n.pauseOnHover&&k.clientX>=R&&k.clientX<=I&&k.clientY>=T&&k.clientY<=E?v():_()}function _(){t(!0)}function v(){t(!1)}function b(){a.didMove=!1,document.addEventListener("pointermove",S),document.addEventListener("pointerup",A)}function w(){document.removeEventListener("pointermove",S),document.removeEventListener("pointerup",A)}function S(k){let T=s.current;if(a.canDrag&&T){a.didMove=!0,e&&v(),n.draggableDirection==="x"?a.delta=k.clientX-a.start:a.delta=k.clientY-a.start,a.start!==k.clientX&&(a.canCloseOnClick=!1);let E=n.draggableDirection==="x"?`${a.delta}px, var(--y)`:`0, calc(${a.delta}px + var(--y))`;T.style.transform=`translate3d(${E},0)`,T.style.opacity=`${1-Math.abs(a.delta/a.removalDistance)}`}}function A(){w();let k=s.current;if(a.canDrag&&a.didMove&&k){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance){r(!0),n.closeToast(!0),n.collapseAll();return}k.style.transition="transform 0.2s, opacity 0.2s",k.style.removeProperty("transform"),k.style.removeProperty("opacity")}}let P={onPointerDown:y,onPointerUp:x};return o&&l&&(P.onMouseEnter=v,n.stacked||(P.onMouseLeave=_)),d&&(P.onClick=k=>{u&&u(k),a.canCloseOnClick&&c(!0)}),{playToast:_,pauseToast:v,isRunning:e,preventExitTransition:i,toastRef:s,eventHandlers:P}}var RY=typeof window<"u"?F.useLayoutEffect:F.useEffect,eS=({theme:n,type:e,isLoading:t,...i})=>sn.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...i});function kY(n){return sn.createElement(eS,{...n},sn.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function NY(n){return sn.createElement(eS,{...n},sn.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function IY(n){return sn.createElement(eS,{...n},sn.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function DY(n){return sn.createElement(eS,{...n},sn.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function LY(){return sn.createElement("div",{className:"Toastify__spinner"})}var NC={info:NY,warning:kY,success:IY,error:DY,spinner:LY},OY=n=>n in NC;function FY({theme:n,type:e,isLoading:t,icon:i}){let r=null,s={theme:n,type:e};return i===!1||(tc(i)?r=i({...s,isLoading:t}):F.isValidElement(i)?r=F.cloneElement(i,s):t?r=NC.spinner():OY(e)&&(r=NC[e](s))),r}var UY=n=>{let{isRunning:e,preventExitTransition:t,toastRef:i,eventHandlers:r,playToast:s}=PY(n),{closeButton:a,children:o,autoClose:l,onClick:c,type:u,hideProgressBar:d,closeToast:h,transition:p,position:y,className:x,style:_,progressClassName:v,updateId:b,role:w,progress:S,rtl:A,toastId:P,deleteToast:k,isIn:T,isLoading:E,closeOnClick:R,theme:I,ariaLabel:D}=n,B=Jd("Toastify__toast",`Toastify__toast-theme--${I}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":A},{"Toastify__toast--close-on-click":R}),G=tc(x)?x({rtl:A,position:y,type:u,defaultClassName:B}):Jd(B,x),Y=FY(n),X=!!S||!l,Q={closeToast:h,type:u,theme:I},L=null;return a===!1||(tc(a)?L=a(Q):F.isValidElement(a)?L=F.cloneElement(a,Q):L=fY(Q)),sn.createElement(p,{isIn:T,done:k,position:y,preventExitTransition:t,nodeRef:i,playToast:s},sn.createElement("div",{id:P,tabIndex:0,onClick:c,"data-in":T,className:G,...r,style:_,ref:i,...T&&{role:w,"aria-label":D}},Y!=null&&sn.createElement("div",{className:Jd("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!E})},Y),dz(o,n,!e),L,!n.customProgressBar&&sn.createElement(pY,{...b&&!X?{key:`p-${b}`}:{},rtl:A,theme:I,delay:l,isRunning:e,isIn:T,closeToast:h,hide:d,type:u,className:v,controlledProgress:X,progress:S||0})))},jY=(n,e=!1)=>({enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:e}),zY=hY(jY("bounce",!0)),BY={position:"top-right",transition:zY,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:n=>n.altKey&&n.code==="KeyT"};function HY(n){let e={...BY,...n},t=n.stacked,[i,r]=F.useState(!0),s=F.useRef(null),{getToastToRender:a,isToastActive:o,count:l}=AY(e),{className:c,style:u,rtl:d,containerId:h,hotKeys:p}=e;function y(_){let v=Jd("Toastify__toast-container",`Toastify__toast-container--${_}`,{"Toastify__toast-container--rtl":d});return tc(c)?c({position:_,rtl:d,defaultClassName:v}):Jd(v,PC(c))}function x(){t&&(r(!0),bt.play())}return RY(()=>{var _;if(t){let v=s.current.querySelectorAll('[data-in="true"]'),b=12,w=(_=e.position)==null?void 0:_.includes("top"),S=0,A=0;Array.from(v).reverse().forEach((P,k)=>{let T=P;T.classList.add("Toastify__toast--stacked"),k>0&&(T.dataset.collapsed=`${i}`),T.dataset.pos||(T.dataset.pos=w?"top":"bot");let E=S*(i?.2:1)+(i?0:b*k);T.style.setProperty("--y",`${w?E:E*-1}px`),T.style.setProperty("--g",`${b}`),T.style.setProperty("--s",`${1-(i?A:0)}`),S+=T.offsetHeight,A+=.025})}},[i,l,t]),F.useEffect(()=>{function _(v){var b;let w=s.current;p(v)&&((b=w.querySelector('[tabIndex="0"]'))==null||b.focus(),r(!1),bt.pause()),v.key==="Escape"&&(document.activeElement===w||w!=null&&w.contains(document.activeElement))&&(r(!0),bt.play())}return document.addEventListener("keydown",_),()=>{document.removeEventListener("keydown",_)}},[p]),sn.createElement("section",{ref:s,className:"Toastify",id:h,onMouseEnter:()=>{t&&(r(!1),bt.pause())},onMouseLeave:x,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},a((_,v)=>{let b=v.length?{...u}:{...u,pointerEvents:"none"};return sn.createElement("div",{tabIndex:-1,className:y(_),"data-stacked":t,style:b,key:`c-${_}`},v.map(({content:w,props:S})=>sn.createElement(UY,{...S,stacked:t,collapseAll:x,isIn:o(S.toastId,S.containerId),key:`t-${S.key}`},w)))}))}const ci=({children:n})=>{const{isDarkMode:e}=Zi();return g.jsxs("div",{className:`min-h-screen ${e?"bg-gray-900":"bg-gray-50"} flex`,children:[g.jsx(oY,{}),g.jsx("div",{className:"flex-1 p-8 ml-64",children:n}),g.jsx(HY,{position:"bottom-right",theme:e?"dark":"light"})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Hy(n){return n+.5|0}const Kc=(n,e,t)=>Math.max(Math.min(n,t),e);function _g(n){return Kc(Hy(n*2.55),0,255)}function xu(n){return Kc(Hy(n*255),0,255)}function Il(n){return Kc(Hy(n/2.55)/100,0,1)}function ED(n){return Kc(Hy(n*100),0,100)}const Sa={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},IC=[..."0123456789ABCDEF"],VY=n=>IC[n&15],$Y=n=>IC[(n&240)>>4]+IC[n&15],Ax=n=>(n&240)>>4===(n&15),WY=n=>Ax(n.r)&&Ax(n.g)&&Ax(n.b)&&Ax(n.a);function GY(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Sa[n[1]]*17,g:255&Sa[n[2]]*17,b:255&Sa[n[3]]*17,a:e===5?Sa[n[4]]*17:255}:(e===7||e===9)&&(t={r:Sa[n[1]]<<4|Sa[n[2]],g:Sa[n[3]]<<4|Sa[n[4]],b:Sa[n[5]]<<4|Sa[n[6]],a:e===9?Sa[n[7]]<<4|Sa[n[8]]:255})),t}const qY=(n,e)=>n<255?e(n):"";function XY(n){var e=WY(n)?VY:$Y;return n?"#"+e(n.r)+e(n.g)+e(n.b)+qY(n.a,e):void 0}const YY=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function yz(n,e,t){const i=e*Math.min(t,1-t),r=(s,a=(s+n/30)%12)=>t-i*Math.max(Math.min(a-3,9-a,1),-1);return[r(0),r(8),r(4)]}function KY(n,e,t){const i=(r,s=(r+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function ZY(n,e,t){const i=yz(n,1,.5);let r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)i[r]*=1-e-t,i[r]+=e;return i}function JY(n,e,t,i,r){return n===r?(e-t)/i+(e<t?6:0):e===r?(t-n)/i+2:(n-e)/i+4}function sR(n){const t=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(t,i,r),a=Math.min(t,i,r),o=(s+a)/2;let l,c,u;return s!==a&&(u=s-a,c=o>.5?u/(2-s-a):u/(s+a),l=JY(t,i,r,u,s),l=l*60+.5),[l|0,c||0,o]}function aR(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(xu)}function oR(n,e,t){return aR(yz,n,e,t)}function QY(n,e,t){return aR(ZY,n,e,t)}function eK(n,e,t){return aR(KY,n,e,t)}function vz(n){return(n%360+360)%360}function tK(n){const e=YY.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?_g(+e[5]):xu(+e[5]));const r=vz(+e[2]),s=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?i=QY(r,s,a):e[1]==="hsv"?i=eK(r,s,a):i=oR(r,s,a),{r:i[0],g:i[1],b:i[2],a:t}}function nK(n,e){var t=sR(n);t[0]=vz(t[0]+e),t=oR(t),n.r=t[0],n.g=t[1],n.b=t[2]}function iK(n){if(!n)return;const e=sR(n),t=e[0],i=ED(e[1]),r=ED(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${r}%, ${Il(n.a)})`:`hsl(${t}, ${i}%, ${r}%)`}const TD={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},CD={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function rK(){const n={},e=Object.keys(CD),t=Object.keys(TD);let i,r,s,a,o;for(i=0;i<e.length;i++){for(a=o=e[i],r=0;r<t.length;r++)s=t[r],o=o.replace(s,TD[s]);s=parseInt(CD[a],16),n[o]=[s>>16&255,s>>8&255,s&255]}return n}let Px;function sK(n){Px||(Px=rK(),Px.transparent=[0,0,0,0]);const e=Px[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const aK=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function oK(n){const e=aK.exec(n);let t=255,i,r,s;if(e){if(e[7]!==i){const a=+e[7];t=e[8]?_g(a):Kc(a*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?_g(i):Kc(i,0,255)),r=255&(e[4]?_g(r):Kc(r,0,255)),s=255&(e[6]?_g(s):Kc(s,0,255)),{r:i,g:r,b:s,a:t}}}function lK(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Il(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const jE=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,af=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function cK(n,e,t){const i=af(Il(n.r)),r=af(Il(n.g)),s=af(Il(n.b));return{r:xu(jE(i+t*(af(Il(e.r))-i))),g:xu(jE(r+t*(af(Il(e.g))-r))),b:xu(jE(s+t*(af(Il(e.b))-s))),a:n.a+t*(e.a-n.a)}}function Rx(n,e,t){if(n){let i=sR(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=oR(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function xz(n,e){return n&&Object.assign(e||{},n)}function AD(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=xu(n[3]))):(e=xz(n,{r:0,g:0,b:0,a:1}),e.a=xu(e.a)),e}function uK(n){return n.charAt(0)==="r"?oK(n):tK(n)}let _z=class DC{constructor(e){if(e instanceof DC)return e;const t=typeof e;let i;t==="object"?i=AD(e):t==="string"&&(i=GY(e)||sK(e)||uK(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=xz(this._rgb);return e&&(e.a=Il(e.a)),e}set rgb(e){this._rgb=AD(e)}rgbString(){return this._valid?lK(this._rgb):void 0}hexString(){return this._valid?XY(this._rgb):void 0}hslString(){return this._valid?iK(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,r=e.rgb;let s;const a=t===s?.5:t,o=2*a-1,l=i.a-r.a,c=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=a*i.a+(1-a)*r.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=cK(this._rgb,e._rgb,t)),this}clone(){return new DC(this.rgb)}alpha(e){return this._rgb.a=xu(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Hy(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Rx(this._rgb,2,e),this}darken(e){return Rx(this._rgb,2,-e),this}saturate(e){return Rx(this._rgb,1,e),this}desaturate(e){return Rx(this._rgb,1,-e),this}rotate(e){return nK(this._rgb,e),this}};/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function yl(){}const dK=(()=>{let n=0;return()=>n++})();function Tn(n){return n==null}function Qn(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function wn(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Ti(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Ys(n,e){return Ti(n)?n:e}function un(n,e){return typeof n>"u"?e:n}const hK=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,bz=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function Xn(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Ln(n,e,t,i){let r,s,a;if(Qn(n))if(s=n.length,i)for(r=s-1;r>=0;r--)e.call(t,n[r],r);else for(r=0;r<s;r++)e.call(t,n[r],r);else if(wn(n))for(a=Object.keys(n),s=a.length,r=0;r<s;r++)e.call(t,n[a[r]],a[r])}function db(n,e){let t,i,r,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(r=n[t],s=e[t],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function hb(n){if(Qn(n))return n.map(hb);if(wn(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let r=0;for(;r<i;++r)e[t[r]]=hb(n[t[r]]);return e}return n}function wz(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function fK(n,e,t,i){if(!wz(n))return;const r=e[n],s=t[n];wn(r)&&wn(s)?W0(r,s,i):e[n]=hb(s)}function W0(n,e,t){const i=Qn(e)?e:[e],r=i.length;if(!wn(n))return n;t=t||{};const s=t.merger||fK;let a;for(let o=0;o<r;++o){if(a=i[o],!wn(a))continue;const l=Object.keys(a);for(let c=0,u=l.length;c<u;++c)s(l[c],n,a,t)}return n}function Gg(n,e){return W0(n,e,{merger:pK})}function pK(n,e,t){if(!wz(n))return;const i=e[n],r=t[n];wn(i)&&wn(r)?Gg(i,r):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=hb(r))}const PD={"":n=>n,x:n=>n.x,y:n=>n.y};function mK(n){const e=n.split("."),t=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function gK(n){const e=mK(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function xh(n,e){return(PD[e]||(PD[e]=gK(e)))(n)}function lR(n){return n.charAt(0).toUpperCase()+n.slice(1)}const G0=n=>typeof n<"u",Au=n=>typeof n=="function",RD=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function yK(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const ui=Math.PI,ii=2*ui,vK=ii+ui,fb=Number.POSITIVE_INFINITY,xK=ui/180,Oi=ui/2,rd=ui/4,kD=ui*2/3,Zc=Math.log10,tl=Math.sign;function qg(n,e,t){return Math.abs(n-e)<t}function ND(n){const e=Math.round(n);n=qg(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(Zc(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function _K(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((r,s)=>r-s).pop(),e}function bK(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function q0(n){return!bK(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function wK(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function Sz(n,e,t){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Yo(n){return n*(ui/180)}function cR(n){return n*(180/ui)}function ID(n){if(!Ti(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function Mz(n,e){const t=e.x-n.x,i=e.y-n.y,r=Math.sqrt(t*t+i*i);let s=Math.atan2(i,t);return s<-.5*ui&&(s+=ii),{angle:s,distance:r}}function LC(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function SK(n,e){return(n-e+vK)%ii-ui}function Qs(n){return(n%ii+ii)%ii}function X0(n,e,t,i){const r=Qs(n),s=Qs(e),a=Qs(t),o=Qs(s-r),l=Qs(a-r),c=Qs(r-s),u=Qs(r-a);return r===s||r===a||i&&s===a||o>l&&c<u}function Wr(n,e,t){return Math.max(e,Math.min(t,n))}function MK(n){return Wr(n,-32768,32767)}function Bl(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function uR(n,e,t){t=t||(a=>n[a]<e);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,t(s)?r=s:i=s;return{lo:r,hi:i}}const zd=(n,e,t,i)=>uR(n,t,i?r=>{const s=n[r][e];return s<t||s===t&&n[r+1][e]===t}:r=>n[r][e]<t),EK=(n,e,t)=>uR(n,t,i=>n[i][e]>=t);function TK(n,e,t){let i=0,r=n.length;for(;i<r&&n[i]<e;)i++;for(;r>i&&n[r-1]>t;)r--;return i>0||r<n.length?n.slice(i,r):n}const Ez=["push","pop","shift","splice","unshift"];function CK(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Ez.forEach(t=>{const i="_onData"+lR(t),r=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){const a=r.apply(this,s);return n._chartjs.listeners.forEach(o=>{typeof o[i]=="function"&&o[i](...s)}),a}})})}function DD(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(Ez.forEach(s=>{delete n[s]}),delete n._chartjs)}function Tz(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const Cz=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function Az(n,e){let t=[],i=!1;return function(...r){t=r,i||(i=!0,Cz.call(window,()=>{i=!1,n.apply(e,t)}))}}function AK(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const dR=n=>n==="start"?"left":n==="end"?"right":"center",zr=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,PK=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function RK(n,e,t){const i=e.length;let r=0,s=i;if(n._sorted){const{iScale:a,vScale:o,_parsed:l}=n,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=a.axis,{min:d,max:h,minDefined:p,maxDefined:y}=a.getUserBounds();if(p){if(r=Math.min(zd(l,u,d).lo,t?i:zd(e,u,a.getPixelForValue(d)).lo),c){const x=l.slice(0,r+1).reverse().findIndex(_=>!Tn(_[o.axis]));r-=Math.max(0,x)}r=Wr(r,0,i-1)}if(y){let x=Math.max(zd(l,a.axis,h,!0).hi+1,t?0:zd(e,u,a.getPixelForValue(h),!0).hi+1);if(c){const _=l.slice(x-1).findIndex(v=>!Tn(v[o.axis]));x+=Math.max(0,_)}s=Wr(x,r,i)-r}else s=i-r}return{start:r,count:s}}function kK(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,r),s}const kx=n=>n===0||n===1,LD=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*ii/t)),OD=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*ii/t)+1,Xg={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Oi)+1,easeOutSine:n=>Math.sin(n*Oi),easeInOutSine:n=>-.5*(Math.cos(ui*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>kx(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>kx(n)?n:LD(n,.075,.3),easeOutElastic:n=>kx(n)?n:OD(n,.075,.3),easeInOutElastic(n){return kx(n)?n:n<.5?.5*LD(n*2,.1125,.45):.5+.5*OD(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Xg.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Xg.easeInBounce(n*2)*.5:Xg.easeOutBounce(n*2-1)*.5+.5};function hR(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function FD(n){return hR(n)?n:new _z(n)}function zE(n){return hR(n)?n:new _z(n).saturate(.5).darken(.1).hexString()}const NK=["x","y","borderWidth","radius","tension"],IK=["color","borderColor","backgroundColor"];function DK(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:IK},numbers:{type:"number",properties:NK}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function LK(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const UD=new Map;function OK(n,e){e=e||{};const t=n+JSON.stringify(e);let i=UD.get(t);return i||(i=new Intl.NumberFormat(n,e),UD.set(t,i)),i}function tS(n,e,t){return OK(e,t).format(n)}const Pz={values(n){return Qn(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let r,s=n;if(t.length>1){const c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=FK(n,t)}const a=Zc(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:r,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),tS(n,i,l)},logarithmic(n,e,t){if(n===0)return"0";const i=t[e].significand||n/Math.pow(10,Math.floor(Zc(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?Pz.numeric.call(this,n,e,t):""}};function FK(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var nS={formatters:Pz};function UK(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:nS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const _h=Object.create(null),OC=Object.create(null);function Yg(n,e){if(!e)return n;const t=e.split(".");for(let i=0,r=t.length;i<r;++i){const s=t[i];n=n[s]||(n[s]=Object.create(null))}return n}function BE(n,e,t){return typeof e=="string"?W0(Yg(n,e),t):W0(Yg(n,""),e)}class jK{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>zE(r.backgroundColor),this.hoverBorderColor=(i,r)=>zE(r.borderColor),this.hoverColor=(i,r)=>zE(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return BE(this,e,t)}get(e){return Yg(this,e)}describe(e,t){return BE(OC,e,t)}override(e,t){return BE(_h,e,t)}route(e,t,i,r){const s=Yg(this,e),a=Yg(this,i),o="_"+t;Object.defineProperties(s,{[o]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[o],c=a[r];return wn(l)?Object.assign({},c,l):un(l,c)},set(l){this[o]=l}}})}apply(e){e.forEach(t=>t(this))}}var Ci=new jK({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[DK,LK,UK]);function zK(n){return!n||Tn(n.size)||Tn(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function pb(n,e,t,i,r){let s=e[r];return s||(s=e[r]=n.measureText(r).width,t.push(r)),s>i&&(i=s),i}function BK(n,e,t,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let a=0;const o=t.length;let l,c,u,d,h;for(l=0;l<o;l++)if(d=t[l],d!=null&&!Qn(d))a=pb(n,r,s,a,d);else if(Qn(d))for(c=0,u=d.length;c<u;c++)h=d[c],h!=null&&!Qn(h)&&(a=pb(n,r,s,a,h));n.restore();const p=s.length/2;if(p>t.length){for(l=0;l<p;l++)delete r[s[l]];s.splice(0,p)}return a}function sd(n,e,t){const i=n.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*i)/i+r}function jD(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function FC(n,e,t,i){Rz(n,e,t,i,null)}function Rz(n,e,t,i,r){let s,a,o,l,c,u,d,h;const p=e.pointStyle,y=e.rotation,x=e.radius;let _=(y||0)*xK;if(p&&typeof p=="object"&&(s=p.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(_),n.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),n.restore();return}if(!(isNaN(x)||x<=0)){switch(n.beginPath(),p){default:r?n.ellipse(t,i,r/2,x,0,0,ii):n.arc(t,i,x,0,ii),n.closePath();break;case"triangle":u=r?r/2:x,n.moveTo(t+Math.sin(_)*u,i-Math.cos(_)*x),_+=kD,n.lineTo(t+Math.sin(_)*u,i-Math.cos(_)*x),_+=kD,n.lineTo(t+Math.sin(_)*u,i-Math.cos(_)*x),n.closePath();break;case"rectRounded":c=x*.516,l=x-c,a=Math.cos(_+rd)*l,d=Math.cos(_+rd)*(r?r/2-c:l),o=Math.sin(_+rd)*l,h=Math.sin(_+rd)*(r?r/2-c:l),n.arc(t-d,i-o,c,_-ui,_-Oi),n.arc(t+h,i-a,c,_-Oi,_),n.arc(t+d,i+o,c,_,_+Oi),n.arc(t-h,i+a,c,_+Oi,_+ui),n.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*x,u=r?r/2:l,n.rect(t-u,i-l,2*u,2*l);break}_+=rd;case"rectRot":d=Math.cos(_)*(r?r/2:x),a=Math.cos(_)*x,o=Math.sin(_)*x,h=Math.sin(_)*(r?r/2:x),n.moveTo(t-d,i-o),n.lineTo(t+h,i-a),n.lineTo(t+d,i+o),n.lineTo(t-h,i+a),n.closePath();break;case"crossRot":_+=rd;case"cross":d=Math.cos(_)*(r?r/2:x),a=Math.cos(_)*x,o=Math.sin(_)*x,h=Math.sin(_)*(r?r/2:x),n.moveTo(t-d,i-o),n.lineTo(t+d,i+o),n.moveTo(t+h,i-a),n.lineTo(t-h,i+a);break;case"star":d=Math.cos(_)*(r?r/2:x),a=Math.cos(_)*x,o=Math.sin(_)*x,h=Math.sin(_)*(r?r/2:x),n.moveTo(t-d,i-o),n.lineTo(t+d,i+o),n.moveTo(t+h,i-a),n.lineTo(t-h,i+a),_+=rd,d=Math.cos(_)*(r?r/2:x),a=Math.cos(_)*x,o=Math.sin(_)*x,h=Math.sin(_)*(r?r/2:x),n.moveTo(t-d,i-o),n.lineTo(t+d,i+o),n.moveTo(t+h,i-a),n.lineTo(t-h,i+a);break;case"line":a=r?r/2:Math.cos(_)*x,o=Math.sin(_)*x,n.moveTo(t-a,i-o),n.lineTo(t+a,i+o);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(_)*(r?r/2:x),i+Math.sin(_)*x);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Hl(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function iS(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function rS(n){n.restore()}function HK(n,e,t,i,r){if(!e)return n.lineTo(t.x,t.y);if(r==="middle"){const s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else r==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function VK(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function $K(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Tn(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function WK(n,e,t,i,r){if(r.strikethrough||r.underline){const s=n.measureText(i),a=e-s.actualBoundingBoxLeft,o=e+s.actualBoundingBoxRight,l=t-s.actualBoundingBoxAscent,c=t+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(a,u),n.lineTo(o,u),n.stroke()}}function GK(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function bh(n,e,t,i,r,s={}){const a=Qn(e)?e:[e],o=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(n.save(),n.font=r.string,$K(n,s),l=0;l<a.length;++l)c=a[l],s.backdrop&&GK(n,s.backdrop),o&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Tn(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(c,t,i,s.maxWidth)),n.fillText(c,t,i,s.maxWidth),WK(n,t,i,c,s),i+=Number(r.lineHeight);n.restore()}function Y0(n,e){const{x:t,y:i,w:r,h:s,radius:a}=e;n.arc(t+a.topLeft,i+a.topLeft,a.topLeft,1.5*ui,ui,!0),n.lineTo(t,i+s-a.bottomLeft),n.arc(t+a.bottomLeft,i+s-a.bottomLeft,a.bottomLeft,ui,Oi,!0),n.lineTo(t+r-a.bottomRight,i+s),n.arc(t+r-a.bottomRight,i+s-a.bottomRight,a.bottomRight,Oi,0,!0),n.lineTo(t+r,i+a.topRight),n.arc(t+r-a.topRight,i+a.topRight,a.topRight,0,-Oi,!0),n.lineTo(t+a.topLeft,i)}const qK=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,XK=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function YK(n,e){const t=(""+n).match(qK);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const KK=n=>+n||0;function fR(n,e){const t={},i=wn(e),r=i?Object.keys(e):e,s=wn(n)?i?a=>un(n[a],n[e[a]]):a=>n[a]:()=>n;for(const a of r)t[a]=KK(s(a));return t}function kz(n){return fR(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Qd(n){return fR(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Kr(n){const e=kz(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function sr(n,e){n=n||{},e=e||Ci.font;let t=un(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=un(n.style,e.style);i&&!(""+i).match(XK)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:un(n.family,e.family),lineHeight:YK(un(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:un(n.weight,e.weight),string:""};return r.string=zK(r),r}function Nx(n,e,t,i){let r=!0,s,a,o;for(s=0,a=n.length;s<a;++s)if(o=n[s],o!==void 0&&(e!==void 0&&typeof o=="function"&&(o=o(e),r=!1),t!==void 0&&Qn(o)&&(o=o[t%o.length],r=!1),o!==void 0))return i&&!r&&(i.cacheable=!1),o}function ZK(n,e,t){const{min:i,max:r}=n,s=bz(e,(r-i)/2),a=(o,l)=>t&&o===0?0:o+l;return{min:a(i,-Math.abs(s)),max:a(r,s)}}function Bu(n,e){return Object.assign(Object.create(n),e)}function pR(n,e=[""],t,i,r=()=>n[0]){const s=t||n;typeof i>"u"&&(i=Lz("_fallback",n));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:o=>pR([o,...n],e,s,i)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete o._keys,delete n[0][l],!0},get(o,l){return Iz(o,l,()=>sZ(l,e,n,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(o,l){return BD(o).includes(l)},ownKeys(o){return BD(o)},set(o,l,c){const u=o._storage||(o._storage=r());return o[l]=u[l]=c,delete o._keys,!0}})}function Ip(n,e,t,i){const r={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:Nz(n,i),setContext:s=>Ip(n,s,t,i),override:s=>Ip(n.override(s),e,t,i)};return new Proxy(r,{deleteProperty(s,a){return delete s[a],delete n[a],!0},get(s,a,o){return Iz(s,a,()=>QK(s,a,o))},getOwnPropertyDescriptor(s,a){return s._descriptors.allKeys?Reflect.has(n,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,a)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,a){return Reflect.has(n,a)},ownKeys(){return Reflect.ownKeys(n)},set(s,a,o){return n[a]=o,delete s[a],!0}})}function Nz(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=n;return{allKeys:r,scriptable:t,indexable:i,isScriptable:Au(t)?t:()=>t,isIndexable:Au(i)?i:()=>i}}const JK=(n,e)=>n?n+lR(e):e,mR=(n,e)=>wn(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Iz(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function QK(n,e,t){const{_proxy:i,_context:r,_subProxy:s,_descriptors:a}=n;let o=i[e];return Au(o)&&a.isScriptable(e)&&(o=eZ(e,o,n,t)),Qn(o)&&o.length&&(o=tZ(e,o,n,a.isIndexable)),mR(e,o)&&(o=Ip(o,r,s&&s[e],a)),o}function eZ(n,e,t,i){const{_proxy:r,_context:s,_subProxy:a,_stack:o}=t;if(o.has(n))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+n);o.add(n);let l=e(s,a||i);return o.delete(n),mR(n,l)&&(l=gR(r._scopes,r,n,l)),l}function tZ(n,e,t,i){const{_proxy:r,_context:s,_subProxy:a,_descriptors:o}=t;if(typeof s.index<"u"&&i(n))return e[s.index%e.length];if(wn(e[0])){const l=e,c=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=gR(c,r,n,u);e.push(Ip(d,s,a&&a[n],o))}}return e}function Dz(n,e,t){return Au(n)?n(e,t):n}const nZ=(n,e)=>n===!0?e:typeof n=="string"?xh(e,n):void 0;function iZ(n,e,t,i,r){for(const s of e){const a=nZ(t,s);if(a){n.add(a);const o=Dz(a._fallback,t,r);if(typeof o<"u"&&o!==t&&o!==i)return o}else if(a===!1&&typeof i<"u"&&t!==i)return null}return!1}function gR(n,e,t,i){const r=e._rootScopes,s=Dz(e._fallback,t,i),a=[...n,...r],o=new Set;o.add(i);let l=zD(o,a,t,s||t,i);return l===null||typeof s<"u"&&s!==t&&(l=zD(o,a,s,l,i),l===null)?!1:pR(Array.from(o),[""],r,s,()=>rZ(e,t,i))}function zD(n,e,t,i,r){for(;t;)t=iZ(n,e,t,i,r);return t}function rZ(n,e,t){const i=n._getTarget();e in i||(i[e]={});const r=i[e];return Qn(r)&&wn(t)?t:r||{}}function sZ(n,e,t,i){let r;for(const s of e)if(r=Lz(JK(s,n),t),typeof r<"u")return mR(n,r)?gR(t,i,n,r):r}function Lz(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function BD(n){let e=n._keys;return e||(e=n._keys=aZ(n._scopes)),e}function aZ(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}const oZ=Number.EPSILON||1e-14,Dp=(n,e)=>e<n.length&&!n[e].skip&&n[e],Oz=n=>n==="x"?"y":"x";function lZ(n,e,t,i){const r=n.skip?e:n,s=e,a=t.skip?e:t,o=LC(s,r),l=LC(a,s);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=i*c,h=i*u;return{previous:{x:s.x-d*(a.x-r.x),y:s.y-d*(a.y-r.y)},next:{x:s.x+h*(a.x-r.x),y:s.y+h*(a.y-r.y)}}}function cZ(n,e,t){const i=n.length;let r,s,a,o,l,c=Dp(n,0);for(let u=0;u<i-1;++u)if(l=c,c=Dp(n,u+1),!(!l||!c)){if(qg(e[u],0,oZ)){t[u]=t[u+1]=0;continue}r=t[u]/e[u],s=t[u+1]/e[u],o=Math.pow(r,2)+Math.pow(s,2),!(o<=9)&&(a=3/Math.sqrt(o),t[u]=r*a*e[u],t[u+1]=s*a*e[u])}}function uZ(n,e,t="x"){const i=Oz(t),r=n.length;let s,a,o,l=Dp(n,0);for(let c=0;c<r;++c){if(a=o,o=l,l=Dp(n,c+1),!o)continue;const u=o[t],d=o[i];a&&(s=(u-a[t])/3,o[`cp1${t}`]=u-s,o[`cp1${i}`]=d-s*e[c]),l&&(s=(l[t]-u)/3,o[`cp2${t}`]=u+s,o[`cp2${i}`]=d+s*e[c])}}function dZ(n,e="x"){const t=Oz(e),i=n.length,r=Array(i).fill(0),s=Array(i);let a,o,l,c=Dp(n,0);for(a=0;a<i;++a)if(o=l,l=c,c=Dp(n,a+1),!!l){if(c){const u=c[e]-l[e];r[a]=u!==0?(c[t]-l[t])/u:0}s[a]=o?c?tl(r[a-1])!==tl(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}cZ(n,r,s),uZ(n,s,e)}function Ix(n,e,t){return Math.max(Math.min(n,t),e)}function hZ(n,e){let t,i,r,s,a,o=Hl(n[0],e);for(t=0,i=n.length;t<i;++t)a=s,s=o,o=t<i-1&&Hl(n[t+1],e),s&&(r=n[t],a&&(r.cp1x=Ix(r.cp1x,e.left,e.right),r.cp1y=Ix(r.cp1y,e.top,e.bottom)),o&&(r.cp2x=Ix(r.cp2x,e.left,e.right),r.cp2y=Ix(r.cp2y,e.top,e.bottom)))}function fZ(n,e,t,i,r){let s,a,o,l;if(e.spanGaps&&(n=n.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")dZ(n,r);else{let c=i?n[n.length-1]:n[0];for(s=0,a=n.length;s<a;++s)o=n[s],l=lZ(c,o,n[Math.min(s+1,a-(i?0:1))%a],e.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,c=o}e.capBezierPoints&&hZ(n,t)}function yR(){return typeof window<"u"&&typeof document<"u"}function vR(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function mb(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const sS=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function pZ(n,e){return sS(n).getPropertyValue(e)}const mZ=["top","right","bottom","left"];function eh(n,e,t){const i={};t=t?"-"+t:"";for(let r=0;r<4;r++){const s=mZ[r];i[s]=parseFloat(n[e+"-"+s+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const gZ=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function yZ(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:r,offsetY:s}=i;let a=!1,o,l;if(gZ(r,s,n.target))o=r,l=s;else{const c=e.getBoundingClientRect();o=i.clientX-c.left,l=i.clientY-c.top,a=!0}return{x:o,y:l,box:a}}function Cd(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,r=sS(t),s=r.boxSizing==="border-box",a=eh(r,"padding"),o=eh(r,"border","width"),{x:l,y:c,box:u}=yZ(n,t),d=a.left+(u&&o.left),h=a.top+(u&&o.top);let{width:p,height:y}=e;return s&&(p-=a.width+o.width,y-=a.height+o.height),{x:Math.round((l-d)/p*t.width/i),y:Math.round((c-h)/y*t.height/i)}}function vZ(n,e,t){let i,r;if(e===void 0||t===void 0){const s=n&&vR(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{const a=s.getBoundingClientRect(),o=sS(s),l=eh(o,"border","width"),c=eh(o,"padding");e=a.width-c.width-l.width,t=a.height-c.height-l.height,i=mb(o.maxWidth,s,"clientWidth"),r=mb(o.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:i||fb,maxHeight:r||fb}}const Dx=n=>Math.round(n*10)/10;function xZ(n,e,t,i){const r=sS(n),s=eh(r,"margin"),a=mb(r.maxWidth,n,"clientWidth")||fb,o=mb(r.maxHeight,n,"clientHeight")||fb,l=vZ(n,e,t);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const h=eh(r,"border","width"),p=eh(r,"padding");c-=p.width+h.width,u-=p.height+h.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=Dx(Math.min(c,a,l.maxWidth)),u=Dx(Math.min(u,o,l.maxHeight)),c&&!u&&(u=Dx(c/2)),(e!==void 0||t!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=Dx(Math.floor(u*i))),{width:c,height:u}}function HD(n,e,t){const i=e||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const a=n.canvas;return a.style&&(t||!a.style.height&&!a.style.width)&&(a.style.height=`${n.height}px`,a.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||a.height!==r||a.width!==s?(n.currentDevicePixelRatio=i,a.height=r,a.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const _Z=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};yR()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function VD(n,e){const t=pZ(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Ad(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function bZ(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function wZ(n,e,t,i){const r={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},a=Ad(n,r,t),o=Ad(r,s,t),l=Ad(s,e,t),c=Ad(a,o,t),u=Ad(o,l,t);return Ad(c,u,t)}const SZ=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},MZ=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function fp(n,e,t){return n?SZ(e,t):MZ()}function Fz(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function Uz(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function jz(n){return n==="angle"?{between:X0,compare:SK,normalize:Qs}:{between:Bl,compare:(e,t)=>e-t,normalize:e=>e}}function $D({start:n,end:e,count:t,loop:i,style:r}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:r}}function EZ(n,e,t){const{property:i,start:r,end:s}=t,{between:a,normalize:o}=jz(i),l=e.length;let{start:c,end:u,loop:d}=n,h,p;if(d){for(c+=l,u+=l,h=0,p=l;h<p&&a(o(e[c%l][i]),r,s);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:n.style}}function zz(n,e,t){if(!t)return[n];const{property:i,start:r,end:s}=t,a=e.length,{compare:o,between:l,normalize:c}=jz(i),{start:u,end:d,loop:h,style:p}=EZ(n,e,t),y=[];let x=!1,_=null,v,b,w;const S=()=>l(r,w,v)&&o(r,w)!==0,A=()=>o(s,v)===0||l(s,w,v),P=()=>x||S(),k=()=>!x||A();for(let T=u,E=u;T<=d;++T)b=e[T%a],!b.skip&&(v=c(b[i]),v!==w&&(x=l(v,r,s),_===null&&P()&&(_=o(v,r)===0?T:E),_!==null&&k()&&(y.push($D({start:_,end:T,loop:h,count:a,style:p})),_=null),E=T,w=v));return _!==null&&y.push($D({start:_,end:d,loop:h,count:a,style:p})),y}function Bz(n,e){const t=[],i=n.segments;for(let r=0;r<i.length;r++){const s=zz(i[r],n.points,e);s.length&&t.push(...s)}return t}function TZ(n,e,t,i){let r=0,s=e-1;if(t&&!i)for(;r<e&&!n[r].skip;)r++;for(;r<e&&n[r].skip;)r++;for(r%=e,t&&(s+=r);s>r&&n[s%e].skip;)s--;return s%=e,{start:r,end:s}}function CZ(n,e,t,i){const r=n.length,s=[];let a=e,o=n[e],l;for(l=e+1;l<=t;++l){const c=n[l%r];c.skip||c.stop?o.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=a=c.stop?l:null):(a=l,o.skip&&(e=l)),o=c}return a!==null&&s.push({start:e%r,end:a%r,loop:i}),s}function AZ(n,e){const t=n.points,i=n.options.spanGaps,r=t.length;if(!r)return[];const s=!!n._loop,{start:a,end:o}=TZ(t,r,s,i);if(i===!0)return WD(n,[{start:a,end:o,loop:s}],t,e);const l=o<a?o+r:o,c=!!n._fullLoop&&a===0&&o===r-1;return WD(n,CZ(t,a,l,c),t,e)}function WD(n,e,t,i){return!i||!i.setContext||!t?e:PZ(n,e,t,i)}function PZ(n,e,t,i){const r=n._chart.getContext(),s=GD(n.options),{_datasetIndex:a,options:{spanGaps:o}}=n,l=t.length,c=[];let u=s,d=e[0].start,h=d;function p(y,x,_,v){const b=o?-1:1;if(y!==x){for(y+=l;t[y%l].skip;)y-=b;for(;t[x%l].skip;)x+=b;y%l!==x%l&&(c.push({start:y%l,end:x%l,loop:_,style:v}),u=v,d=x%l)}}for(const y of e){d=o?d:y.start;let x=t[d%l],_;for(h=d+1;h<=y.end;h++){const v=t[h%l];_=GD(i.setContext(Bu(r,{type:"segment",p0:x,p1:v,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:a}))),RZ(_,u)&&p(d,h-1,y.loop,u),x=v,u=_}d<h-1&&p(d,h-1,y.loop,u)}return c}function GD(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function RZ(n,e){if(!e)return!1;const t=[],i=function(r,s){return hR(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(e,i)}function Lx(n,e,t){return n.options.clip?n[t]:e[t]}function kZ(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:Lx(t,e,"left"),right:Lx(t,e,"right"),top:Lx(i,e,"top"),bottom:Lx(i,e,"bottom")}:e}function Hz(n,e){const t=e._clip;if(t.disabled)return!1;const i=kZ(e,n.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:i.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class NZ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){const s=t.listeners[r],a=t.duration;s.forEach(o=>o({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(i-t.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=Cz.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let a=s.length-1,o=!1,l;for(;a>=0;--a)l=s[a],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),o=!0):(s[a]=s[s.length-1],s.pop());o&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Tl=new NZ;const qD="transparent",IZ={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=FD(n||qD),r=i.valid&&FD(e||qD);return r&&r.valid?r.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};let DZ=class{constructor(e,t,i,r){const s=t[i];r=Nx([e.to,r,s,e.from]);const a=Nx([e.from,s,r]);this._active=!0,this._fn=e.fn||IZ[e.type||typeof a],this._easing=Xg[e.easing]||Xg.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=a,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,a=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Nx([e.to,t,r,e.from]),this._from=Nx([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,r=this._prop,s=this._from,a=this._loop,o=this._to;let l;if(this._active=s!==o&&(a||t<i),!this._active){this._target[r]=o,this._notify(!0);return}if(t<0){this._target[r]=s;return}l=t/i%2,l=a&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,o,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][t]()}};class Vz{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!wn(e))return;const t=Object.keys(Ci.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!wn(s))return;const a={};for(const o of t)a[o]=s[o];(Qn(s.properties)&&s.properties||[r]).forEach(o=>{(o===r||!i.has(o))&&i.set(o,a)})})}_animateOptions(e,t){const i=t.options,r=OZ(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&LZ(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,t){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),a=Object.keys(t),o=Date.now();let l;for(l=a.length-1;l>=0;--l){const c=a[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,t));continue}const u=t[c];let d=s[c];const h=i.get(c);if(d)if(h&&d.active()){d.update(h,u,o);continue}else d.cancel();if(!h||!h.duration){e[c]=u;continue}s[c]=d=new DZ(h,e,c,u),r.push(d)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return Tl.add(this._chart,i),!0}}function LZ(n,e){const t=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=n[i[r]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function OZ(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function XD(n,e){const t=n&&n.options||{},i=t.reverse,r=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function FZ(n,e,t){if(t===!1)return!1;const i=XD(n,t),r=XD(e,t);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function UZ(n){let e,t,i,r;return wn(n)?(e=n.top,t=n.right,i=n.bottom,r=n.left):e=t=i=r=n,{top:e,right:t,bottom:i,left:r,disabled:n===!1}}function $z(n,e){const t=[],i=n._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)t.push(i[r].index);return t}function YD(n,e,t,i={}){const r=n.keys,s=i.mode==="single";let a,o,l,c;if(e===null)return;let u=!1;for(a=0,o=r.length;a<o;++a){if(l=+r[a],l===t){if(u=!0,i.all)continue;break}c=n.values[l],Ti(c)&&(s||e===0||tl(e)===tl(c))&&(e+=c)}return!u&&!i.all?0:e}function jZ(n,e){const{iScale:t,vScale:i}=e,r=t.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",a=Object.keys(n),o=new Array(a.length);let l,c,u;for(l=0,c=a.length;l<c;++l)u=a[l],o[l]={[r]:u,[s]:n[u]};return o}function HE(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function zZ(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function BZ(n){const{min:e,max:t,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function HZ(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function KD(n,e,t,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=n[r.index];if(t&&s>0||!t&&s<0)return r.index}return null}function ZD(n,e){const{chart:t,_cachedMeta:i}=n,r=t._stacks||(t._stacks={}),{iScale:s,vScale:a,index:o}=i,l=s.axis,c=a.axis,u=zZ(s,a,i),d=e.length;let h;for(let p=0;p<d;++p){const y=e[p],{[l]:x,[c]:_}=y,v=y._stacks||(y._stacks={});h=v[c]=HZ(r,u,x),h[o]=_,h._top=KD(h,a,!0,i.type),h._bottom=KD(h,a,!1,i.type);const b=h._visualValues||(h._visualValues={});b[o]=_}}function VE(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function VZ(n,e){return Bu(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function $Z(n,e,t){return Bu(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Bm(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][t]===void 0)return;delete s[i][t],s[i]._visualValues!==void 0&&s[i]._visualValues[t]!==void 0&&delete s[i]._visualValues[t]}}}const $E=n=>n==="reset"||n==="none",JD=(n,e)=>e?n:Object.assign({},n),WZ=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:$z(t,!0),values:null};class th{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=HE(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Bm(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),r=(d,h,p,y)=>d==="x"?h:d==="r"?y:p,s=t.xAxisID=un(i.xAxisID,VE(e,"x")),a=t.yAxisID=un(i.yAxisID,VE(e,"y")),o=t.rAxisID=un(i.rAxisID,VE(e,"r")),l=t.indexAxis,c=t.iAxisID=r(l,s,a,o),u=t.vAxisID=r(l,a,s,o);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(a),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&DD(this._data,this),e._stacked&&Bm(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(wn(t)){const r=this._cachedMeta;this._data=jZ(t,r)}else if(i!==t){if(i){DD(i,this);const r=this._cachedMeta;Bm(r),r._parsed=[]}t&&Object.isExtensible(t)&&CK(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=t._stacked;t._stacked=HE(t.vScale,t),t.stack!==i.stack&&(r=!0,Bm(t),t.stack=i.stack),this._resyncElements(e),(r||s!==t._stacked)&&(ZD(this,t._parsed),t._stacked=HE(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:a}=i,o=s.axis;let l=e===0&&t===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,d,h;if(this._parsing===!1)i._parsed=r,i._sorted=!0,h=r;else{Qn(r[e])?h=this.parseArrayData(i,r,e,t):wn(r[e])?h=this.parseObjectData(i,r,e,t):h=this.parsePrimitiveData(i,r,e,t);const p=()=>d[o]===null||c&&d[o]<c[o];for(u=0;u<t;++u)i._parsed[u+e]=d=h[u],l&&(p()&&(l=!1),c=d);i._sorted=l}a&&ZD(this,h)}parsePrimitiveData(e,t,i,r){const{iScale:s,vScale:a}=e,o=s.axis,l=a.axis,c=s.getLabels(),u=s===a,d=new Array(r);let h,p,y;for(h=0,p=r;h<p;++h)y=h+i,d[h]={[o]:u||s.parse(c[y],y),[l]:a.parse(t[y],y)};return d}parseArrayData(e,t,i,r){const{xScale:s,yScale:a}=e,o=new Array(r);let l,c,u,d;for(l=0,c=r;l<c;++l)u=l+i,d=t[u],o[l]={x:s.parse(d[0],u),y:a.parse(d[1],u)};return o}parseObjectData(e,t,i,r){const{xScale:s,yScale:a}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,d,h,p;for(u=0,d=r;u<d;++u)h=u+i,p=t[h],c[u]={x:s.parse(xh(p,o),h),y:a.parse(xh(p,l),h)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const r=this.chart,s=this._cachedMeta,a=t[e.axis],o={keys:$z(r,!0),values:t._stacks[e.axis]._visualValues};return YD(o,a,s.index,{mode:i})}updateRangeFromParsed(e,t,i,r){const s=i[t.axis];let a=s===null?NaN:s;const o=r&&i._stacks[t.axis];r&&o&&(r.values=o,a=YD(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,t){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,a=r.length,o=this._getOtherScale(e),l=WZ(t,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=BZ(o);let h,p;function y(){p=r[h];const x=p[o.axis];return!Ti(p[e.axis])||u>x||d<x}for(h=0;h<a&&!(!y()&&(this.updateRangeFromParsed(c,e,p,l),s));++h);if(s){for(h=a-1;h>=0;--h)if(!y()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let r,s,a;for(r=0,s=t.length;r<s;++r)a=t[r][e.axis],Ti(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,r=t.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=UZ(un(this.options.clip,FZ(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,r=i.data||[],s=t.chartArea,a=[],o=this._drawStart||0,l=this._drawCount||r.length-o,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,s,o,l),u=o;u<o+l;++u){const d=r[u];d.hidden||(d.active&&c?a.push(d):d.draw(e,s))}for(u=0;u<a.length;++u)a[u].draw(e,s)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];s=a.$context||(a.$context=$Z(this.getContext(),e,a)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=VZ(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const r=t==="active",s=this._cachedDataOpts,a=e+"-"+t,o=s[a],l=this.enableOptionSharing&&G0(i);if(o)return JD(o,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],h=c.getOptionScopes(this.getDataset(),u),p=Object.keys(Ci.elements[e]),y=()=>this.getContext(i,r,t),x=c.resolveNamedOptions(h,p,y,d);return x.$shared&&(x.$shared=l,s[a]=Object.freeze(JD(x,l))),x}_resolveAnimations(e,t,i){const r=this.chart,s=this._cachedDataOpts,a=`animation-${t}`,o=s[a];if(o)return o;let l;if(r.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,t),h=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(h,this.getContext(e,i,t))}const c=new Vz(r,l&&l.animations);return l&&l._cacheable&&(s[a]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||$E(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),r=this._sharedOptions,s=this.getSharedOptions(i),a=this.includeOptions(t,s)||s!==r;return this.updateSharedOptions(s,t,i),{sharedOptions:s,includeOptions:a}}updateElement(e,t,i,r){$E(r)?Object.assign(e,i):this._resolveAnimations(t,r).update(e,i)}updateSharedOptions(e,t,i){e&&!$E(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,r){e.active=r;const s=this.getStyle(t,r);this._resolveAnimations(t,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[o,l,c]of this._syncList)this[o](l,c);this._syncList=[];const r=i.length,s=t.length,a=Math.min(s,r);a&&this.parse(0,a),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,t,i=!0){const r=this._cachedMeta,s=r.data,a=e+t;let o;const l=c=>{for(c.length+=t,o=c.length-1;o>=a;o--)c[o]=c[o-t]};for(l(s),o=e;o<a;++o)s[o]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,t),i&&this.updateElements(s,e,t,"reset")}updateElements(e,t,i,r){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,t);i._stacked&&Bm(i,r)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,r]=e;this[t](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}St(th,"defaults",{}),St(th,"datasetElementType",null),St(th,"dataElementType",null);function GZ(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let i=[];for(let r=0,s=t.length;r<s;r++)i=i.concat(t[r].controller.getAllParsedValues(n));n._cache.$bar=Tz(i.sort((r,s)=>r-s))}return n._cache.$bar}function qZ(n){const e=n.iScale,t=GZ(e,n.type);let i=e._length,r,s,a,o;const l=()=>{a===32767||a===-32768||(G0(o)&&(i=Math.min(i,Math.abs(a-o)||i)),o=a)};for(r=0,s=t.length;r<s;++r)a=e.getPixelForValue(t[r]),l();for(o=void 0,r=0,s=e.ticks.length;r<s;++r)a=e.getPixelForTick(r),l();return i}function XZ(n,e,t,i){const r=t.barThickness;let s,a;return Tn(r)?(s=e.min*t.categoryPercentage,a=t.barPercentage):(s=r*i,a=1),{chunk:s/i,ratio:a,start:e.pixels[n]-s/2}}function YZ(n,e,t,i){const r=e.pixels,s=r[n];let a=n>0?r[n-1]:null,o=n<r.length-1?r[n+1]:null;const l=t.categoryPercentage;a===null&&(a=s-(o===null?e.end-e.start:o-s)),o===null&&(o=s+s-a);const c=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/i,ratio:t.barPercentage,start:c}}function KZ(n,e,t,i){const r=t.parse(n[0],i),s=t.parse(n[1],i),a=Math.min(r,s),o=Math.max(r,s);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),e[t.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:a,max:o}}function Wz(n,e,t,i){return Qn(n)?KZ(n,e,t,i):e[t.axis]=t.parse(n,i),e}function QD(n,e,t,i){const r=n.iScale,s=n.vScale,a=r.getLabels(),o=r===s,l=[];let c,u,d,h;for(c=t,u=t+i;c<u;++c)h=e[c],d={},d[r.axis]=o||r.parse(a[c],c),l.push(Wz(h,d,s,c));return l}function WE(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function ZZ(n,e,t){return n!==0?tl(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function JZ(n){let e,t,i,r,s;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:t,end:i,reverse:e,top:r,bottom:s}}function QZ(n,e,t,i){let r=e.borderSkipped;const s={};if(!r){n.borderSkipped=s;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:o,reverse:l,top:c,bottom:u}=JZ(n);r==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?r=c:(t._bottom||0)===i?r=u:(s[eL(u,a,o,l)]=!0,r=c)),s[eL(r,a,o,l)]=!0,n.borderSkipped=s}function eL(n,e,t,i){return i?(n=eJ(n,e,t),n=tL(n,t,e)):n=tL(n,e,t),n}function eJ(n,e,t){return n===e?t:n===t?e:n}function tL(n,e,t){return n==="start"?e:n==="end"?t:n}function tJ(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class p1 extends th{parsePrimitiveData(e,t,i,r){return QD(e,t,i,r)}parseArrayData(e,t,i,r){return QD(e,t,i,r)}parseObjectData(e,t,i,r){const{iScale:s,vScale:a}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?o:l,u=a.axis==="x"?o:l,d=[];let h,p,y,x;for(h=i,p=i+r;h<p;++h)x=t[h],y={},y[s.axis]=s.parse(xh(x,c),h),d.push(Wz(xh(x,u),y,a,h));return d}updateRangeFromParsed(e,t,i,r){super.updateRangeFromParsed(e,t,i,r);const s=i._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:r}=t,s=this.getParsed(e),a=s._custom,o=WE(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,r){const s=r==="reset",{index:a,_cachedMeta:{vScale:o}}=this,l=o.getBasePixel(),c=o.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:h}=this._getSharedOptions(t,r);for(let p=t;p<t+i;p++){const y=this.getParsed(p),x=s||Tn(y[o.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),_=this._calculateBarIndexPixels(p,u),v=(y._stacks||{})[o.axis],b={horizontal:c,base:x.base,enableBorderRadius:!v||WE(y._custom)||a===v._top||a===v._bottom,x:c?x.head:_.center,y:c?_.center:x.head,height:c?_.size:Math.abs(x.size),width:c?Math.abs(x.size):_.size};h&&(b.options=d||this.resolveDataElementOptions(p,e[p].active?"active":r));const w=b.options||e[p].options;QZ(b,w,v,a),tJ(b,w,u.ratio),this.updateElement(e[p],p,b,r)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=i.options.stacked,a=[],o=this._cachedMeta.controller.getParsed(t),l=o&&o[i.axis],c=u=>{const d=u._parsed.find(p=>p[i.axis]===l),h=d&&d[u.vScale.axis];if(Tn(h)||isNaN(h))return!0};for(const u of r)if(!(t!==void 0&&c(u))&&((s===!1||a.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&a.push(u.stack),u.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,i){const r=this._getStacks(e,i),s=t!==void 0?r.indexOf(t):-1;return s===-1?r.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,r=[];let s,a;for(s=0,a=t.data.length;s<a;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const o=e.barThickness;return{min:o||qZ(t),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:r},options:{base:s,minBarLength:a}}=this,o=s||0,l=this.getParsed(e),c=l._custom,u=WE(c);let d=l[t.axis],h=0,p=i?this.applyStack(t,l,i):d,y,x;p!==d&&(h=p-d,p=d),u&&(d=c.barStart,p=c.barEnd-c.barStart,d!==0&&tl(d)!==tl(c.barEnd)&&(h=0),h+=d);const _=!Tn(s)&&!u?s:h;let v=t.getPixelForValue(_);if(this.chart.getDataVisibility(e)?y=t.getPixelForValue(h+p):y=v,x=y-v,Math.abs(x)<a){x=ZZ(x,t,o)*a,d===o&&(v-=x/2);const b=t.getPixelForDecimal(0),w=t.getPixelForDecimal(1),S=Math.min(b,w),A=Math.max(b,w);v=Math.max(Math.min(v,A),S),y=v+x,i&&!u&&(l._stacks[t.axis]._visualValues[r]=t.getValueForPixel(y)-t.getValueForPixel(v))}if(v===t.getPixelForValue(o)){const b=tl(x)*t.getLineWidthForValue(o)/2;v+=b,x-=b}return{size:x,base:v,head:y,center:y+x/2}}_calculateBarIndexPixels(e,t){const i=t.scale,r=this.options,s=r.skipNull,a=un(r.maxBarThickness,1/0);let o,l;if(t.grouped){const c=s?this._getStackCount(e):t.stackCount,u=r.barThickness==="flex"?YZ(e,t,r,c):XZ(e,t,r,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);o=u.start+u.chunk*d+u.chunk/2,l=Math.min(a,u.chunk*u.ratio)}else o=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(a,t.min*t.ratio);return{base:o-l/2,head:o+l/2,center:o,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[t.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}}St(p1,"id","bar"),St(p1,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),St(p1,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function nJ(n,e,t){let i=1,r=1,s=0,a=0;if(e<ii){const o=n,l=o+e,c=Math.cos(o),u=Math.sin(o),d=Math.cos(l),h=Math.sin(l),p=(w,S,A)=>X0(w,o,l,!0)?1:Math.max(S,S*t,A,A*t),y=(w,S,A)=>X0(w,o,l,!0)?-1:Math.min(S,S*t,A,A*t),x=p(0,c,d),_=p(Oi,u,h),v=y(ui,c,d),b=y(ui+Oi,u,h);i=(x-v)/2,r=(_-b)/2,s=-(x+v)/2,a=-(_+b)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:a}}class Zf extends th{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let s=l=>+i[l];if(wn(i[e])){const{key:l="value"}=this._parsing;s=c=>+xh(i[c],l)}let a,o;for(a=e,o=e+t;a<o;++a)r._parsed[a]=s(a)}}_getRotation(){return Yo(this.options.rotation-90)}_getCircumference(){return Yo(this.options.circumference)}_getRotationExtents(){let e=ii,t=-ii;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,s=r._getRotation(),a=r._getCircumference();e=Math.min(e,s),t=Math.max(t,s+a)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,r=this._cachedMeta,s=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,o=Math.max((Math.min(i.width,i.height)-a)/2,0),l=Math.min(hK(this.options.cutout,o),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:h,ratioY:p,offsetX:y,offsetY:x}=nJ(d,u,l),_=(i.width-a)/h,v=(i.height-a)/p,b=Math.max(Math.min(_,v)/2,0),w=bz(this.options.radius,b),S=Math.max(w*l,0),A=(w-S)/this._getVisibleDatasetWeightTotal();this.offsetX=y*w,this.offsetY=x*w,r.total=this.calculateTotal(),this.outerRadius=w-A*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-A*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const i=this.options,r=this._cachedMeta,s=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*s/ii)}updateElements(e,t,i,r){const s=r==="reset",a=this.chart,o=a.chartArea,c=a.options.animation,u=(o.left+o.right)/2,d=(o.top+o.bottom)/2,h=s&&c.animateScale,p=h?0:this.innerRadius,y=h?0:this.outerRadius,{sharedOptions:x,includeOptions:_}=this._getSharedOptions(t,r);let v=this._getRotation(),b;for(b=0;b<t;++b)v+=this._circumference(b,s);for(b=t;b<t+i;++b){const w=this._circumference(b,s),S=e[b],A={x:u+this.offsetX,y:d+this.offsetY,startAngle:v,endAngle:v+w,circumference:w,outerRadius:y,innerRadius:p};_&&(A.options=x||this.resolveDataElementOptions(b,S.active?"active":r)),v+=w,this.updateElement(S,b,A,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i=0,r;for(r=0;r<t.length;r++){const s=e._parsed[r];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(r)&&!t[r].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?ii*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=tS(t._parsed[e],i.options.locale);return{label:r[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const i=this.chart;let r,s,a,o,l;if(!e){for(r=0,s=i.data.datasets.length;r<s;++r)if(i.isDatasetVisible(r)){a=i.getDatasetMeta(r),e=a.data,o=a.controller;break}}if(!e)return 0;for(r=0,s=e.length;r<s;++r)l=o.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,r=e.length;i<r;++i){const s=this.resolveDataElementOptions(i);t=Math.max(t,s.offset||0,s.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(un(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}St(Zf,"id","doughnut"),St(Zf,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),St(Zf,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),St(Zf,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:r}}=e.legend.options;return t.labels.map((s,a)=>{const l=e.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}});class m1 extends th{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=t,a=this.chart._animationsDisabled;let{start:o,count:l}=RK(t,r,a);this._drawStart=o,this._drawCount=l,kK(t)&&(o=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:c},e),this.updateElements(r,o,l,e)}updateElements(e,t,i,r){const s=r==="reset",{iScale:a,vScale:o,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,r),h=a.axis,p=o.axis,{spanGaps:y,segment:x}=this.options,_=q0(y)?y:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||s||r==="none",b=t+i,w=e.length;let S=t>0&&this.getParsed(t-1);for(let A=0;A<w;++A){const P=e[A],k=v?P:{};if(A<t||A>=b){k.skip=!0;continue}const T=this.getParsed(A),E=Tn(T[p]),R=k[h]=a.getPixelForValue(T[h],A),I=k[p]=s||E?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,T,l):T[p],A);k.skip=isNaN(R)||isNaN(I)||E,k.stop=A>0&&Math.abs(T[h]-S[h])>_,x&&(k.parsed=T,k.raw=c.data[A]),d&&(k.options=u||this.resolveDataElementOptions(A,P.active?"active":r)),v||this.updateElement(P,A,k,r),S=T}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}St(m1,"id","line"),St(m1,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),St(m1,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class UC extends Zf{}St(UC,"id","pie"),St(UC,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function ad(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class xR{constructor(e){St(this,"options");this.options=e||{}}static override(e){Object.assign(xR.prototype,e)}init(){}formats(){return ad()}parse(){return ad()}format(){return ad()}add(){return ad()}diff(){return ad()}startOf(){return ad()}endOf(){return ad()}}var iJ={_date:xR};function rJ(n,e,t,i){const{controller:r,data:s,_sorted:a}=n,o=r._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(o&&e===o.axis&&e!=="r"&&a&&s.length){const c=o._reversePixels?EK:zd;if(i){if(r._sharedOptions){const u=s[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const h=c(s,e,t-d),p=c(s,e,t+d);return{lo:h.lo,hi:p.hi}}}}else{const u=c(s,e,t);if(l){const{vScale:d}=r._cachedMeta,{_parsed:h}=n,p=h.slice(0,u.lo+1).reverse().findIndex(x=>!Tn(x[d.axis]));u.lo-=Math.max(0,p);const y=h.slice(u.hi).findIndex(x=>!Tn(x[d.axis]));u.hi+=Math.max(0,y)}return u}}return{lo:0,hi:s.length-1}}function Vy(n,e,t,i,r){const s=n.getSortedVisibleDatasetMetas(),a=t[e];for(let o=0,l=s.length;o<l;++o){const{index:c,data:u}=s[o],{lo:d,hi:h}=rJ(s[o],e,a,r);for(let p=d;p<=h;++p){const y=u[p];y.skip||i(y,c,p)}}}function sJ(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,a=t?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}function GE(n,e,t,i,r){const s=[];return!r&&!n.isPointInArea(e)||Vy(n,t,e,function(o,l,c){!r&&!Hl(o,n.chartArea,0)||o.inRange(e.x,e.y,i)&&s.push({element:o,datasetIndex:l,index:c})},!0),s}function aJ(n,e,t,i){let r=[];function s(a,o,l){const{startAngle:c,endAngle:u}=a.getProps(["startAngle","endAngle"],i),{angle:d}=Mz(a,{x:e.x,y:e.y});X0(d,c,u)&&r.push({element:a,datasetIndex:o,index:l})}return Vy(n,t,e,s),r}function oJ(n,e,t,i,r,s){let a=[];const o=sJ(t);let l=Number.POSITIVE_INFINITY;function c(u,d,h){const p=u.inRange(e.x,e.y,r);if(i&&!p)return;const y=u.getCenterPoint(r);if(!(!!s||n.isPointInArea(y))&&!p)return;const _=o(e,y);_<l?(a=[{element:u,datasetIndex:d,index:h}],l=_):_===l&&a.push({element:u,datasetIndex:d,index:h})}return Vy(n,t,e,c),a}function qE(n,e,t,i,r,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!i?aJ(n,e,t,r):oJ(n,e,t,i,r,s)}function nL(n,e,t,i,r){const s=[],a=t==="x"?"inXRange":"inYRange";let o=!1;return Vy(n,t,e,(l,c,u)=>{l[a]&&l[a](e[t],r)&&(s.push({element:l,datasetIndex:c,index:u}),o=o||l.inRange(e.x,e.y,r))}),i&&!o?[]:s}var lJ={evaluateInteractionItems:Vy,modes:{index(n,e,t,i){const r=Cd(e,n),s=t.axis||"x",a=t.includeInvisible||!1,o=t.intersect?GE(n,r,s,i,a):qE(n,r,s,!1,i,a),l=[];return o.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const u=o[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(n,e,t,i){const r=Cd(e,n),s=t.axis||"xy",a=t.includeInvisible||!1;let o=t.intersect?GE(n,r,s,i,a):qE(n,r,s,!1,i,a);if(o.length>0){const l=o[0].datasetIndex,c=n.getDatasetMeta(l).data;o=[];for(let u=0;u<c.length;++u)o.push({element:c[u],datasetIndex:l,index:u})}return o},point(n,e,t,i){const r=Cd(e,n),s=t.axis||"xy",a=t.includeInvisible||!1;return GE(n,r,s,i,a)},nearest(n,e,t,i){const r=Cd(e,n),s=t.axis||"xy",a=t.includeInvisible||!1;return qE(n,r,s,t.intersect,i,a)},x(n,e,t,i){const r=Cd(e,n);return nL(n,r,"x",t.intersect,i)},y(n,e,t,i){const r=Cd(e,n);return nL(n,r,"y",t.intersect,i)}}};const Gz=["left","top","right","bottom"];function Hm(n,e){return n.filter(t=>t.pos===e)}function iL(n,e){return n.filter(t=>Gz.indexOf(t.pos)===-1&&t.box.axis===e)}function Vm(n,e){return n.sort((t,i)=>{const r=e?i:t,s=e?t:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function cJ(n){const e=[];let t,i,r,s,a,o;for(t=0,i=(n||[]).length;t<i;++t)r=n[t],{position:s,options:{stack:a,stackWeight:o=1}}=r,e.push({index:t,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&s+a,stackWeight:o});return e}function uJ(n){const e={};for(const t of n){const{stack:i,pos:r,stackWeight:s}=t;if(!i||!Gz.includes(r))continue;const a=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return e}function dJ(n,e){const t=uJ(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,a,o;for(s=0,a=n.length;s<a;++s){o=n[s];const{fullSize:l}=o.box,c=t[o.stack],u=c&&o.stackWeight/c.weight;o.horizontal?(o.width=u?u*i:l&&e.availableWidth,o.height=r):(o.width=i,o.height=u?u*r:l&&e.availableHeight)}return t}function hJ(n){const e=cJ(n),t=Vm(e.filter(c=>c.box.fullSize),!0),i=Vm(Hm(e,"left"),!0),r=Vm(Hm(e,"right")),s=Vm(Hm(e,"top"),!0),a=Vm(Hm(e,"bottom")),o=iL(e,"x"),l=iL(e,"y");return{fullSize:t,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(a).concat(o),chartArea:Hm(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(a).concat(o)}}function rL(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function qz(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function fJ(n,e,t,i){const{pos:r,box:s}=t,a=n.maxPadding;if(!wn(r)){t.size&&(n[r]-=t.size);const d=i[t.stack]||{size:0,count:1};d.size=Math.max(d.size,t.horizontal?s.height:s.width),t.size=d.size/d.count,n[r]+=t.size}s.getPadding&&qz(a,s.getPadding());const o=Math.max(0,e.outerWidth-rL(a,n,"left","right")),l=Math.max(0,e.outerHeight-rL(a,n,"top","bottom")),c=o!==n.w,u=l!==n.h;return n.w=o,n.h=l,t.horizontal?{same:c,other:u}:{same:u,other:c}}function pJ(n){const e=n.maxPadding;function t(i){const r=Math.max(e[i]-n[i],0);return n[i]+=r,r}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function mJ(n,e){const t=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(a=>{s[a]=Math.max(e[a],t[a])}),s}return i(n?["left","right"]:["top","bottom"])}function bg(n,e,t,i){const r=[];let s,a,o,l,c,u;for(s=0,a=n.length,c=0;s<a;++s){o=n[s],l=o.box,l.update(o.width||e.w,o.height||e.h,mJ(o.horizontal,e));const{same:d,other:h}=fJ(e,t,o,i);c|=d&&r.length,u=u||h,l.fullSize||r.push(o)}return c&&bg(r,e,t,i)||u}function Ox(n,e,t,i,r){n.top=t,n.left=e,n.right=e+i,n.bottom=t+r,n.width=i,n.height=r}function sL(n,e,t,i){const r=t.padding;let{x:s,y:a}=e;for(const o of n){const l=o.box,c=i[o.stack]||{count:1,placed:0,weight:1},u=o.stackWeight/c.weight||1;if(o.horizontal){const d=e.w*u,h=c.size||l.height;G0(c.start)&&(a=c.start),l.fullSize?Ox(l,r.left,a,t.outerWidth-r.right-r.left,h):Ox(l,e.left+c.placed,a,d,h),c.start=a,c.placed+=d,a=l.bottom}else{const d=e.h*u,h=c.size||l.width;G0(c.start)&&(s=c.start),l.fullSize?Ox(l,s,r.top,h,t.outerHeight-r.bottom-r.top):Ox(l,s,e.top+c.placed,h,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=a}var Fa={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const r=Kr(n.options.layout.padding),s=Math.max(e-r.width,0),a=Math.max(t-r.height,0),o=hJ(n.boxes),l=o.vertical,c=o.horizontal;Ln(n.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const u=l.reduce((x,_)=>_.box.options&&_.box.options.display===!1?x:x+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/u,hBoxMaxHeight:a/2}),h=Object.assign({},r);qz(h,Kr(i));const p=Object.assign({maxPadding:h,w:s,h:a,x:r.left,y:r.top},r),y=dJ(l.concat(c),d);bg(o.fullSize,p,d,y),bg(l,p,d,y),bg(c,p,d,y)&&bg(l,p,d,y),pJ(p),sL(o.leftAndTop,p,d,y),p.x+=p.w,p.y+=p.h,sL(o.rightAndBottom,p,d,y),n.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Ln(o.chartArea,x=>{const _=x.box;Object.assign(_,n.chartArea),_.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class Xz{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}}class gJ extends Xz{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const g1="$chartjs",yJ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},aL=n=>n===null||n==="";function vJ(n,e){const t=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[g1]={initial:{height:i,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",aL(r)){const s=VD(n,"width");s!==void 0&&(n.width=s)}if(aL(i))if(n.style.height==="")n.height=n.width/(e||2);else{const s=VD(n,"height");s!==void 0&&(n.height=s)}return n}const Yz=_Z?{passive:!0}:!1;function xJ(n,e,t){n&&n.addEventListener(e,t,Yz)}function _J(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,Yz)}function bJ(n,e){const t=yJ[n.type]||n.type,{x:i,y:r}=Cd(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function gb(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function wJ(n,e,t){const i=n.canvas,r=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||gb(o.addedNodes,i),a=a&&!gb(o.removedNodes,i);a&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function SJ(n,e,t){const i=n.canvas,r=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||gb(o.removedNodes,i),a=a&&!gb(o.addedNodes,i);a&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}const K0=new Map;let oL=0;function Kz(){const n=window.devicePixelRatio;n!==oL&&(oL=n,K0.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function MJ(n,e){K0.size||window.addEventListener("resize",Kz),K0.set(n,e)}function EJ(n){K0.delete(n),K0.size||window.removeEventListener("resize",Kz)}function TJ(n,e,t){const i=n.canvas,r=i&&vR(i);if(!r)return;const s=Az((o,l)=>{const c=r.clientWidth;t(o,l),c<r.clientWidth&&t()},window),a=new ResizeObserver(o=>{const l=o[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return a.observe(r),MJ(n,s),a}function XE(n,e,t){t&&t.disconnect(),e==="resize"&&EJ(n)}function CJ(n,e,t){const i=n.canvas,r=Az(s=>{n.ctx!==null&&t(bJ(s,n))},n);return xJ(i,e,r),r}class AJ extends Xz{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(vJ(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[g1])return!1;const i=t[g1].initial;["height","width"].forEach(s=>{const a=i[s];Tn(a)?t.removeAttribute(s):t.setAttribute(s,a)});const r=i.style||{};return Object.keys(r).forEach(s=>{t.style[s]=r[s]}),t.width=t.width,delete t[g1],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),a={attach:wJ,detach:SJ,resize:TJ}[t]||CJ;r[t]=a(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),r=i[t];if(!r)return;({attach:XE,detach:XE,resize:XE}[t]||_J)(e,t,r),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return xZ(e,t,i,r)}isAttached(e){const t=e&&vR(e);return!!(t&&t.isConnected)}}function PJ(n){return!yR()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?gJ:AJ}class Eo{constructor(){St(this,"x");St(this,"y");St(this,"active",!1);St(this,"options");St(this,"$animations")}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return q0(this.x)&&q0(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}St(Eo,"defaults",{}),St(Eo,"defaultRoutes");function RJ(n,e){const t=n.options.ticks,i=kJ(n),r=Math.min(t.maxTicksLimit||i,i),s=t.major.enabled?IJ(e):[],a=s.length,o=s[0],l=s[a-1],c=[];if(a>r)return DJ(e,c,s,a/r),c;const u=NJ(s,e,r);if(a>0){let d,h;const p=a>1?Math.round((l-o)/(a-1)):null;for(Fx(e,c,u,Tn(p)?0:o-p,o),d=0,h=a-1;d<h;d++)Fx(e,c,u,s[d],s[d+1]);return Fx(e,c,u,l,Tn(p)?e.length:l+p),c}return Fx(e,c,u),c}function kJ(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),r=n._maxLength/t;return Math.floor(Math.min(i,r))}function NJ(n,e,t){const i=LJ(n),r=e.length/t;if(!i)return Math.max(r,1);const s=_K(i);for(let a=0,o=s.length-1;a<o;a++){const l=s[a];if(l>r)return l}return Math.max(r,1)}function IJ(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function DJ(n,e,t,i){let r=0,s=t[0],a;for(i=Math.ceil(i),a=0;a<n.length;a++)a===s&&(e.push(n[a]),r++,s=t[r*i])}function Fx(n,e,t,i,r){const s=un(i,0),a=Math.min(un(r,n.length),n.length);let o=0,l,c,u;for(t=Math.ceil(t),r&&(l=r-i,t=l/Math.floor(l/t)),u=s;u<0;)o++,u=Math.round(s+o*t);for(c=Math.max(s,0);c<a;c++)c===u&&(e.push(n[c]),o++,u=Math.round(s+o*t))}function LJ(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const OJ=n=>n==="left"?"right":n==="right"?"left":n,lL=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,cL=(n,e)=>Math.min(e||n,n);function uL(n,e){const t=[],i=n.length/e,r=n.length;let s=0;for(;s<r;s+=i)t.push(n[Math.floor(s)]);return t}function FJ(n,e,t){const i=n.ticks.length,r=Math.min(e,i-1),s=n._startPixel,a=n._endPixel,o=1e-6;let l=n.getPixelForTick(r),c;if(!(t&&(i===1?c=Math.max(l-s,a-l):e===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-o||l>a+o)))return l}function UJ(n,e){Ln(n,t=>{const i=t.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete t.data[i[s]];i.splice(0,r)}})}function $m(n){return n.drawTicks?n.tickLength:0}function dL(n,e){if(!n.display)return 0;const t=sr(n.font,e),i=Kr(n.padding);return(Qn(n.text)?n.text.length:1)*t.lineHeight+i.height}function jJ(n,e){return Bu(n,{scale:e,type:"scale"})}function zJ(n,e,t){return Bu(n,{tick:t,index:e,type:"tick"})}function BJ(n,e,t){let i=dR(n);return(t&&e!=="right"||!t&&e==="right")&&(i=OJ(i)),i}function HJ(n,e,t,i){const{top:r,left:s,bottom:a,right:o,chart:l}=n,{chartArea:c,scales:u}=l;let d=0,h,p,y;const x=a-r,_=o-s;if(n.isHorizontal()){if(p=zr(i,s,o),wn(t)){const v=Object.keys(t)[0],b=t[v];y=u[v].getPixelForValue(b)+x-e}else t==="center"?y=(c.bottom+c.top)/2+x-e:y=lL(n,t,e);h=o-s}else{if(wn(t)){const v=Object.keys(t)[0],b=t[v];p=u[v].getPixelForValue(b)-_+e}else t==="center"?p=(c.left+c.right)/2-_+e:p=lL(n,t,e);y=zr(i,a,r),d=t==="left"?-Oi:Oi}return{titleX:p,titleY:y,maxWidth:h,rotation:d}}class Lh extends Eo{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=Ys(e,Number.POSITIVE_INFINITY),t=Ys(t,Number.NEGATIVE_INFINITY),i=Ys(i,Number.POSITIVE_INFINITY),r=Ys(r,Number.NEGATIVE_INFINITY),{min:Ys(e,i),max:Ys(t,r),minDefined:Ti(e),maxDefined:Ti(t)}}getMinMax(e){let{min:t,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),a;if(r&&s)return{min:t,max:i};const o=this.getMatchingVisibleMetas();for(let l=0,c=o.length;l<c;++l)a=o[l].controller.getMinMax(this,e),r||(t=Math.min(t,a.min)),s||(i=Math.max(i,a.max));return t=s&&t>i?i:t,i=r&&t>i?t:i,{min:Ys(t,Ys(i,t)),max:Ys(i,Ys(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Xn(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:r,grace:s,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=ZK(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=o<this.ticks.length;this._convertTicksToLabels(l?uL(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=RJ(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Xn(this.options.afterUpdate,[this])}beforeSetDimensions(){Xn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Xn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Xn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Xn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=Xn(t.callback,[s.value,i,e],this)}afterTickToLabelConversion(){Xn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Xn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=cL(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation;let a=r,o,l,c;if(!this._isVisible()||!t.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,p=Wr(this.chart.width-d,0,this.maxWidth);o=e.offset?this.maxWidth/i:p/(i-1),d+6>o&&(o=p/(i-(e.offset?.5:1)),l=this.maxHeight-$m(e.grid)-t.padding-dL(e.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),a=cR(Math.min(Math.asin(Wr((u.highest.height+6)/o,-1,1)),Math.asin(Wr(l/c,-1,1))-Math.asin(Wr(h/c,-1,1)))),a=Math.max(r,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){Xn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Xn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:s}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const l=dL(r,t.options.font);if(o?(e.width=this.maxWidth,e.height=$m(s)+l):(e.height=this.maxHeight,e.width=$m(s)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),p=i.padding*2,y=Yo(this.labelRotation),x=Math.cos(y),_=Math.sin(y);if(o){const v=i.mirror?0:_*d.width+x*h.height;e.height=Math.min(this.maxHeight,e.height+v+p)}else{const v=i.mirror?0:x*d.width+_*h.height;e.width=Math.min(this.maxWidth,e.width+v+p)}this._calculatePadding(c,u,_,x)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){const{ticks:{align:s,padding:a},position:o}=this.options,l=this.labelRotation!==0,c=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,p=0;l?c?(h=r*e.width,p=i*t.height):(h=i*e.height,p=r*t.width):s==="start"?p=t.width:s==="end"?h=e.width:s!=="inner"&&(h=e.width/2,p=t.width/2),this.paddingLeft=Math.max((h-u+a)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+a)*this.width/(this.width-d),0)}else{let u=t.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=t.height,d=0),this.paddingTop=u+a,this.paddingBottom=d+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Xn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)Tn(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=uL(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:r,_longestTextCache:s}=this,a=[],o=[],l=Math.floor(t/cL(t,i));let c=0,u=0,d,h,p,y,x,_,v,b,w,S,A;for(d=0;d<t;d+=l){if(y=e[d].label,x=this._resolveTickFontOptions(d),r.font=_=x.string,v=s[_]=s[_]||{data:{},gc:[]},b=x.lineHeight,w=S=0,!Tn(y)&&!Qn(y))w=pb(r,v.data,v.gc,w,y),S=b;else if(Qn(y))for(h=0,p=y.length;h<p;++h)A=y[h],!Tn(A)&&!Qn(A)&&(w=pb(r,v.data,v.gc,w,A),S+=b);a.push(w),o.push(S),c=Math.max(w,c),u=Math.max(S,u)}UJ(s,t);const P=a.indexOf(c),k=o.indexOf(u),T=E=>({width:a[E]||0,height:o[E]||0});return{first:T(0),last:T(t-1),widest:T(P),highest:T(k),widths:a,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return MK(this._alignToPixels?sd(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=zJ(this.getContext(),e,i))}return this.$context||(this.$context=jJ(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Yo(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),a=e.autoSkipPadding||0,o=s?s.widest.width+a:0,l=s?s.highest.height+a:0;return this.isHorizontal()?l*i>o*r?o/i:l/r:l*r<o*i?l/i:o/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,r=this.options,{grid:s,position:a,border:o}=r,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=$m(s),p=[],y=o.setContext(this.getContext()),x=y.display?y.width:0,_=x/2,v=function(X){return sd(i,X,x)};let b,w,S,A,P,k,T,E,R,I,D,B;if(a==="top")b=v(this.bottom),k=this.bottom-h,E=b-_,I=v(e.top)+_,B=e.bottom;else if(a==="bottom")b=v(this.top),I=e.top,B=v(e.bottom)-_,k=b+_,E=this.top+h;else if(a==="left")b=v(this.right),P=this.right-h,T=b-_,R=v(e.left)+_,D=e.right;else if(a==="right")b=v(this.left),R=e.left,D=v(e.right)-_,P=b+_,T=this.left+h;else if(t==="x"){if(a==="center")b=v((e.top+e.bottom)/2+.5);else if(wn(a)){const X=Object.keys(a)[0],Q=a[X];b=v(this.chart.scales[X].getPixelForValue(Q))}I=e.top,B=e.bottom,k=b+_,E=k+h}else if(t==="y"){if(a==="center")b=v((e.left+e.right)/2);else if(wn(a)){const X=Object.keys(a)[0],Q=a[X];b=v(this.chart.scales[X].getPixelForValue(Q))}P=b-_,T=P-h,R=e.left,D=e.right}const G=un(r.ticks.maxTicksLimit,d),Y=Math.max(1,Math.ceil(d/G));for(w=0;w<d;w+=Y){const X=this.getContext(w),Q=s.setContext(X),L=o.setContext(X),W=Q.lineWidth,j=Q.color,te=L.dash||[],ae=L.dashOffset,me=Q.tickWidth,K=Q.tickColor,re=Q.tickBorderDash||[],oe=Q.tickBorderDashOffset;S=FJ(this,w,l),S!==void 0&&(A=sd(i,S,W),c?P=T=R=D=A:k=E=I=B=A,p.push({tx1:P,ty1:k,tx2:T,ty2:E,x1:R,y1:I,x2:D,y2:B,width:W,color:j,borderDash:te,borderDashOffset:ae,tickWidth:me,tickColor:K,tickBorderDash:re,tickBorderDashOffset:oe}))}return this._ticksLength=d,this._borderValue=b,p}_computeLabelItems(e){const t=this.axis,i=this.options,{position:r,ticks:s}=i,a=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=s,h=$m(i.grid),p=h+u,y=d?-u:p,x=-Yo(this.labelRotation),_=[];let v,b,w,S,A,P,k,T,E,R,I,D,B="middle";if(r==="top")P=this.bottom-y,k=this._getXAxisLabelAlignment();else if(r==="bottom")P=this.top+y,k=this._getXAxisLabelAlignment();else if(r==="left"){const Y=this._getYAxisLabelAlignment(h);k=Y.textAlign,A=Y.x}else if(r==="right"){const Y=this._getYAxisLabelAlignment(h);k=Y.textAlign,A=Y.x}else if(t==="x"){if(r==="center")P=(e.top+e.bottom)/2+p;else if(wn(r)){const Y=Object.keys(r)[0],X=r[Y];P=this.chart.scales[Y].getPixelForValue(X)+p}k=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")A=(e.left+e.right)/2-p;else if(wn(r)){const Y=Object.keys(r)[0],X=r[Y];A=this.chart.scales[Y].getPixelForValue(X)}k=this._getYAxisLabelAlignment(h).textAlign}t==="y"&&(l==="start"?B="top":l==="end"&&(B="bottom"));const G=this._getLabelSizes();for(v=0,b=o.length;v<b;++v){w=o[v],S=w.label;const Y=s.setContext(this.getContext(v));T=this.getPixelForTick(v)+s.labelOffset,E=this._resolveTickFontOptions(v),R=E.lineHeight,I=Qn(S)?S.length:1;const X=I/2,Q=Y.color,L=Y.textStrokeColor,W=Y.textStrokeWidth;let j=k;a?(A=T,k==="inner"&&(v===b-1?j=this.options.reverse?"left":"right":v===0?j=this.options.reverse?"right":"left":j="center"),r==="top"?c==="near"||x!==0?D=-I*R+R/2:c==="center"?D=-G.highest.height/2-X*R+R:D=-G.highest.height+R/2:c==="near"||x!==0?D=R/2:c==="center"?D=G.highest.height/2-X*R:D=G.highest.height-I*R,d&&(D*=-1),x!==0&&!Y.showLabelBackdrop&&(A+=R/2*Math.sin(x))):(P=T,D=(1-I)*R/2);let te;if(Y.showLabelBackdrop){const ae=Kr(Y.backdropPadding),me=G.heights[v],K=G.widths[v];let re=D-ae.top,oe=0-ae.left;switch(B){case"middle":re-=me/2;break;case"bottom":re-=me;break}switch(k){case"center":oe-=K/2;break;case"right":oe-=K;break;case"inner":v===b-1?oe-=K:v>0&&(oe-=K/2);break}te={left:oe,top:re,width:K+ae.width,height:me+ae.height,color:Y.backdropColor}}_.push({label:S,font:E,textOffset:D,options:{rotation:x,color:Q,strokeColor:L,strokeWidth:W,textAlign:j,textBaseline:B,translation:[A,P],backdrop:te}})}return _}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Yo(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,a=this._getLabelSizes(),o=e+s,l=a.widest.width;let c,u;return t==="left"?r?(u=this.right+s,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-o,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):t==="right"?r?(u=this.left+s,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+o,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:r,width:s,height:a}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,s,a),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,a;const o=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(t.display)for(s=0,a=r.length;s<a;++s){const l=r[s];t.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),a=i.display?s.width:0;if(!a)return;const o=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,h;this.isHorizontal()?(c=sd(e,this.left,a)-a/2,u=sd(e,this.right,o)+o/2,d=h=l):(d=sd(e,this.top,a)-a/2,h=sd(e,this.bottom,o)+o/2,c=u=l),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(c,d),t.lineTo(u,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&iS(i,r);const s=this.getLabelItems(e);for(const a of s){const o=a.options,l=a.font,c=a.label,u=a.textOffset;bh(i,c,0,u,l,o)}r&&rS(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:r}}=this;if(!i.display)return;const s=sr(i.font),a=Kr(i.padding),o=i.align;let l=s.lineHeight/2;t==="bottom"||t==="center"||wn(t)?(l+=a.bottom,Qn(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=a.top;const{titleX:c,titleY:u,maxWidth:d,rotation:h}=HJ(this,l,t,o);bh(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:h,textAlign:BJ(o,t,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=un(e.grid&&e.grid.z,-1),r=un(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Lh.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,a;for(s=0,a=t.length;s<a;++s){const o=t[s];o[i]===this.id&&(!e||o.type===e)&&r.push(o)}return r}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return sr(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ux{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;WJ(t)&&(i=this.register(t));const r=this.items,s=e.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,VJ(e,a,i),this.override&&Ci.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in Ci[r]&&(delete Ci[r][i],this.override&&delete _h[i])}}function VJ(n,e,t){const i=W0(Object.create(null),[t?Ci.get(t):{},Ci.get(e),n.defaults]);Ci.set(e,i),n.defaultRoutes&&$J(e,n.defaultRoutes),n.descriptors&&Ci.describe(e,n.descriptors)}function $J(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),r=i.pop(),s=[n].concat(i).join("."),a=e[t].split("."),o=a.pop(),l=a.join(".");Ci.route(s,r,l,o)})}function WJ(n){return"id"in n&&"defaults"in n}class GJ{constructor(){this.controllers=new Ux(th,"datasets",!0),this.elements=new Ux(Eo,"elements"),this.plugins=new Ux(Object,"plugins"),this.scales=new Ux(Lh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):Ln(r,a=>{const o=i||this._getRegistryForType(a);this._exec(e,o,a)})})}_exec(e,t,i){const r=lR(e);Xn(i["before"+r],[],i),t[e](i),Xn(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var Ho=new GJ;class qJ{constructor(){this._init=[]}notify(e,t,i,r){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),a=this._notify(s,e,t,i);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,t,i,r){r=r||{};for(const s of e){const a=s.plugin,o=a[i],l=[t,r,s.options];if(Xn(o,l,a)===!1&&r.cancelable)return!1}return!0}invalidate(){Tn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,r=un(i.options&&i.options.plugins,{}),s=XJ(i);return r===!1&&!t?[]:KJ(e,s,r,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,r=(s,a)=>s.filter(o=>!a.some(l=>o.plugin.id===l.plugin.id));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}}function XJ(n){const e={},t=[],i=Object.keys(Ho.plugins.items);for(let s=0;s<i.length;s++)t.push(Ho.getPlugin(i[s]));const r=n.plugins||[];for(let s=0;s<r.length;s++){const a=r[s];t.indexOf(a)===-1&&(t.push(a),e[a.id]=!0)}return{plugins:t,localIds:e}}function YJ(n,e){return!e&&n===!1?null:n===!0?{}:n}function KJ(n,{plugins:e,localIds:t},i,r){const s=[],a=n.getContext();for(const o of e){const l=o.id,c=YJ(i[l],r);c!==null&&s.push({plugin:o,options:ZJ(n.config,{plugin:o,local:t[l]},c,a)})}return s}function ZJ(n,{plugin:e,local:t},i,r){const s=n.pluginScopeKeys(e),a=n.getOptionScopes(i,s);return t&&e.defaults&&a.push(e.defaults),n.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function jC(n,e){const t=Ci.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function JJ(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function QJ(n,e){return n===e?"_index_":"_value_"}function hL(n){if(n==="x"||n==="y"||n==="r")return n}function eQ(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function zC(n,...e){if(hL(n))return n;for(const t of e){const i=t.axis||eQ(t.position)||n.length>1&&hL(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function fL(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function tQ(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return fL(n,"x",t[0])||fL(n,"y",t[0])}return{}}function nQ(n,e){const t=_h[n.type]||{scales:{}},i=e.scales||{},r=jC(n.type,e),s=Object.create(null);return Object.keys(i).forEach(a=>{const o=i[a];if(!wn(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const l=zC(a,o,tQ(a,n),Ci.scales[o.type]),c=QJ(l,r),u=t.scales||{};s[a]=Gg(Object.create(null),[{axis:l},o,u[l],u[c]])}),n.data.datasets.forEach(a=>{const o=a.type||n.type,l=a.indexAxis||jC(o,e),u=(_h[o]||{}).scales||{};Object.keys(u).forEach(d=>{const h=JJ(d,l),p=a[h+"AxisID"]||h;s[p]=s[p]||Object.create(null),Gg(s[p],[{axis:h},i[p],u[d]])})}),Object.keys(s).forEach(a=>{const o=s[a];Gg(o,[Ci.scales[o.type],Ci.scale])}),s}function Zz(n){const e=n.options||(n.options={});e.plugins=un(e.plugins,{}),e.scales=nQ(n,e)}function Jz(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function iQ(n){return n=n||{},n.data=Jz(n.data),Zz(n),n}const pL=new Map,Qz=new Set;function jx(n,e){let t=pL.get(n);return t||(t=e(),pL.set(n,t),Qz.add(t)),t}const Wm=(n,e,t)=>{const i=xh(e,t);i!==void 0&&n.add(i)};class rQ{constructor(e){this._config=iQ(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Jz(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Zz(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return jx(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return jx(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return jx(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return jx(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let r=i.get(e);return(!r||t)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){const{options:r,type:s}=this,a=this._cachedScopes(e,i),o=a.get(t);if(o)return o;const l=new Set;t.forEach(u=>{e&&(l.add(e),u.forEach(d=>Wm(l,e,d))),u.forEach(d=>Wm(l,r,d)),u.forEach(d=>Wm(l,_h[s]||{},d)),u.forEach(d=>Wm(l,Ci,d)),u.forEach(d=>Wm(l,OC,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Qz.has(t)&&a.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,_h[t]||{},Ci.datasets[t]||{},{type:t},Ci,OC]}resolveNamedOptions(e,t,i,r=[""]){const s={$shared:!0},{resolver:a,subPrefixes:o}=mL(this._resolverCache,e,r);let l=a;if(aQ(a,t)){s.$shared=!1,i=Au(i)?i():i;const c=this.createResolver(e,i,o);l=Ip(a,i,c)}for(const c of t)s[c]=l[c];return s}createResolver(e,t,i=[""],r){const{resolver:s}=mL(this._resolverCache,e,i);return wn(t)?Ip(s,t,void 0,r):s}}function mL(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const r=t.join();let s=i.get(r);return s||(s={resolver:pR(e,t),subPrefixes:t.filter(o=>!o.toLowerCase().includes("hover"))},i.set(r,s)),s}const sQ=n=>wn(n)&&Object.getOwnPropertyNames(n).some(e=>Au(n[e]));function aQ(n,e){const{isScriptable:t,isIndexable:i}=Nz(n);for(const r of e){const s=t(r),a=i(r),o=(a||s)&&n[r];if(s&&(Au(o)||sQ(o))||a&&Qn(o))return!0}return!1}var oQ="4.4.9";const lQ=["top","bottom","left","right","chartArea"];function gL(n,e){return n==="top"||n==="bottom"||lQ.indexOf(n)===-1&&e==="x"}function yL(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function vL(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Xn(t&&t.onComplete,[n],e)}function cQ(n){const e=n.chart,t=e.options.animation;Xn(t&&t.onProgress,[n],e)}function eB(n){return yR()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const y1={},xL=n=>{const e=eB(n);return Object.values(y1).filter(t=>t.canvas===e).pop()};function uQ(n,e,t){const i=Object.keys(n);for(const r of i){const s=+r;if(s>=e){const a=n[r];delete n[r],(t>0||s>e)&&(n[s+t]=a)}}}function dQ(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}var Dc;let Za=(Dc=class{static register(...e){Ho.add(...e),_L()}static unregister(...e){Ho.remove(...e),_L()}constructor(e,t){const i=this.config=new rQ(t),r=eB(e),s=xL(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||PJ(r)),this.platform.updateConfig(i);const o=this.platform.acquireContext(r,a.aspectRatio),l=o&&o.canvas,c=l&&l.height,u=l&&l.width;if(this.id=dK(),this.ctx=o,this.canvas=l,this.width=u,this.height=c,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new qJ,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=AK(d=>this.update(d),a.resizeDelay||0),this._dataChanges=[],y1[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Tl.listen(this,"complete",vL),Tl.listen(this,"progress",cQ),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:r,_aspectRatio:s}=this;return Tn(e)?t&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ho}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():HD(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return jD(this.canvas,this.ctx),this}stop(){return Tl.stop(this),this}resize(e,t){Tl.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,e,t,s),o=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,HD(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),Xn(i.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Ln(t,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,r=Object.keys(i).reduce((a,o)=>(a[o]=!1,a),{});let s=[];t&&(s=s.concat(Object.keys(t).map(a=>{const o=t[a],l=zC(a,o),c=l==="r",u=l==="x";return{options:o,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Ln(s,a=>{const o=a.options,l=o.id,c=zC(l,o),u=un(o.type,a.dtype);(o.position===void 0||gL(o.position,c)!==gL(a.dposition))&&(o.position=a.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===u)d=i[l];else{const h=Ho.getScale(u);d=new h({id:l,type:u,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(o,e)}),Ln(r,(a,o)=>{a||delete i[o]}),Ln(i,a=>{Fa.configure(this,a,a.options),Fa.addBox(this,a)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>t){for(let r=t;r<i;++r)this._destroyDatasetMeta(r);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(yL("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,r)=>{t.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=t.length;i<r;i++){const s=t[i];let a=this.getDatasetMeta(i);const o=s.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=o,a.indexAxis=s.indexAxis||jC(o,this.options),a.order=s.order||0,a.index=i,a.label=""+s.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{const l=Ho.getController(o),{datasetElementType:c,dataElementType:u}=Ci.datasets[o];Object.assign(l,{dataElementType:Ho.getElement(u),datasetElementType:c&&Ho.getElement(c)}),a.controller=new l(this,i),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){Ln(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),h=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(h),a=Math.max(+d.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),r||Ln(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(yL("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){Ln(this.scales,e=>{Fa.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!RD(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of t){const a=i==="_removeElements"?-s:s;uQ(e,r,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=s=>new Set(e.filter(a=>a[0]===s).map((a,o)=>o+","+a.splice(1).join(","))),r=i(0);for(let s=1;s<t;s++)if(!RD(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Fa.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],Ln(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,Au(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Tl.has(this)?this.attached&&!Tl.running(this)&&Tl.start(this):(this.draw(),vL({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let r,s;for(r=0,s=t.length;r<s;++r){const a=t[r];(!e||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=Hz(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&iS(t,r),e.controller.draw(),r&&rS(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Hl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,r){const s=lJ.modes[t];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Bu(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),a=s.controller._resolveAnimations(void 0,r);G0(t)?(s.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),a.update(s,{visible:i}),this.update(o=>o.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Tl.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),jD(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete y1[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(s,a)=>{t.addEventListener(this,s,a),e[s]=a},r=(s,a,o)=>{s.offsetX=a,s.offsetY=o,this._eventHandler(s)};Ln(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(l,c)=>{t.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(t.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let a;const o=()=>{r("attach",o),this.attached=!0,this.resize(),i("resize",s),i("detach",a)};a=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",o)},t.isAttached(this.canvas)?o():a()}unbindEvents(){Ln(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Ln(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const r=i?"set":"remove";let s,a,o,l;for(t==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),o=0,l=e.length;o<l;++o){a=e[o];const c=a&&this.getDatasetMeta(a.datasetIndex).controller;c&&c[r+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:s,index:a})=>{const o=this.getDatasetMeta(s);if(!o)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:o.data[a],index:a}});!db(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const r=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),a=s(t,e),o=i?e:s(e,t);a.length&&this.updateHoverStyle(a,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:r=[],options:s}=this,a=t,o=this._getActiveElements(e,r,i,a),l=yK(e),c=dQ(e,this._lastEvent,i,l);i&&(this._lastEvent=null,Xn(s.onHover,[e,o,this],this),l&&Xn(s.onClick,[e,o,this],this));const u=!db(o,r);return(u||t)&&(this._active=o,this._updateHoverStyles(o,r,t)),this._lastEvent=c,u}_getActiveElements(e,t,i,r){if(e.type==="mouseout")return[];if(!i)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},St(Dc,"defaults",Ci),St(Dc,"instances",y1),St(Dc,"overrides",_h),St(Dc,"registry",Ho),St(Dc,"version",oQ),St(Dc,"getChart",xL),Dc);function _L(){return Ln(Za.instances,n=>n._plugins.invalidate())}function hQ(n,e,t){const{startAngle:i,pixelMargin:r,x:s,y:a,outerRadius:o,innerRadius:l}=e;let c=r/o;n.beginPath(),n.arc(s,a,o,i-c,t+c),l>r?(c=r/l,n.arc(s,a,l,t+c,i-c,!0)):n.arc(s,a,r,t+Oi,i-Oi),n.closePath(),n.clip()}function fQ(n){return fR(n,["outerStart","outerEnd","innerStart","innerEnd"])}function pQ(n,e,t,i){const r=fQ(n.options.borderRadius),s=(t-e)/2,a=Math.min(s,i*e/2),o=l=>{const c=(t-Math.min(s,l))*i/2;return Wr(l,0,Math.min(s,c))};return{outerStart:o(r.outerStart),outerEnd:o(r.outerEnd),innerStart:Wr(r.innerStart,0,a),innerEnd:Wr(r.innerEnd,0,a)}}function of(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function yb(n,e,t,i,r,s){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+i+t-c,0),h=u>0?u+i+t+c:0;let p=0;const y=r-l;if(i){const Y=u>0?u-i:0,X=d>0?d-i:0,Q=(Y+X)/2,L=Q!==0?y*Q/(Q+i):y;p=(y-L)/2}const x=Math.max(.001,y*d-t/ui)/d,_=(y-x)/2,v=l+_+p,b=r-_-p,{outerStart:w,outerEnd:S,innerStart:A,innerEnd:P}=pQ(e,h,d,b-v),k=d-w,T=d-S,E=v+w/k,R=b-S/T,I=h+A,D=h+P,B=v+A/I,G=b-P/D;if(n.beginPath(),s){const Y=(E+R)/2;if(n.arc(a,o,d,E,Y),n.arc(a,o,d,Y,R),S>0){const W=of(T,R,a,o);n.arc(W.x,W.y,S,R,b+Oi)}const X=of(D,b,a,o);if(n.lineTo(X.x,X.y),P>0){const W=of(D,G,a,o);n.arc(W.x,W.y,P,b+Oi,G+Math.PI)}const Q=(b-P/h+(v+A/h))/2;if(n.arc(a,o,h,b-P/h,Q,!0),n.arc(a,o,h,Q,v+A/h,!0),A>0){const W=of(I,B,a,o);n.arc(W.x,W.y,A,B+Math.PI,v-Oi)}const L=of(k,v,a,o);if(n.lineTo(L.x,L.y),w>0){const W=of(k,E,a,o);n.arc(W.x,W.y,w,v-Oi,E)}}else{n.moveTo(a,o);const Y=Math.cos(E)*d+a,X=Math.sin(E)*d+o;n.lineTo(Y,X);const Q=Math.cos(R)*d+a,L=Math.sin(R)*d+o;n.lineTo(Q,L)}n.closePath()}function mQ(n,e,t,i,r){const{fullCircles:s,startAngle:a,circumference:o}=e;let l=e.endAngle;if(s){yb(n,e,t,i,l,r);for(let c=0;c<s;++c)n.fill();isNaN(o)||(l=a+(o%ii||ii))}return yb(n,e,t,i,l,r),n.fill(),l}function gQ(n,e,t,i,r){const{fullCircles:s,startAngle:a,circumference:o,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h}=l,p=l.borderAlign==="inner";if(!c)return;n.setLineDash(d||[]),n.lineDashOffset=h,p?(n.lineWidth=c*2,n.lineJoin=u||"round"):(n.lineWidth=c,n.lineJoin=u||"bevel");let y=e.endAngle;if(s){yb(n,e,t,i,y,r);for(let x=0;x<s;++x)n.stroke();isNaN(o)||(y=a+(o%ii||ii))}p&&hQ(n,e,y),s||(yb(n,e,t,i,y,r),n.stroke())}class Jc extends Eo{constructor(t){super();St(this,"circumference");St(this,"endAngle");St(this,"fullCircles");St(this,"innerRadius");St(this,"outerRadius");St(this,"pixelMargin");St(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,i,r){const s=this.getProps(["x","y"],r),{angle:a,distance:o}=Mz(s,{x:t,y:i}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:d,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),p=(this.options.spacing+this.options.borderWidth)/2,y=un(h,c-l),x=X0(a,l,c)&&l!==c,_=y>=ii||x,v=Bl(o,u+p,d+p);return _&&v}getCenterPoint(t){const{x:i,y:r,startAngle:s,endAngle:a,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:u}=this.options,d=(s+a)/2,h=(o+l+u+c)/2;return{x:i+Math.cos(d)*h,y:r+Math.sin(d)*h}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:i,circumference:r}=this,s=(i.offset||0)/4,a=(i.spacing||0)/2,o=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>ii?Math.floor(r/ii):0,r===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(ui,r||0)),u=s*c;t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,mQ(t,this,u,a,o),gQ(t,this,u,a,o),t.restore()}}St(Jc,"id","arc"),St(Jc,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),St(Jc,"defaultRoutes",{backgroundColor:"backgroundColor"}),St(Jc,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function tB(n,e,t=e){n.lineCap=un(t.borderCapStyle,e.borderCapStyle),n.setLineDash(un(t.borderDash,e.borderDash)),n.lineDashOffset=un(t.borderDashOffset,e.borderDashOffset),n.lineJoin=un(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=un(t.borderWidth,e.borderWidth),n.strokeStyle=un(t.borderColor,e.borderColor)}function yQ(n,e,t){n.lineTo(t.x,t.y)}function vQ(n){return n.stepped?HK:n.tension||n.cubicInterpolationMode==="monotone"?VK:yQ}function nB(n,e,t={}){const i=n.length,{start:r=0,end:s=i-1}=t,{start:a,end:o}=e,l=Math.max(r,a),c=Math.min(s,o),u=r<a&&s<a||r>o&&s>o;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function xQ(n,e,t,i){const{points:r,options:s}=e,{count:a,start:o,loop:l,ilen:c}=nB(r,t,i),u=vQ(s);let{move:d=!0,reverse:h}=i||{},p,y,x;for(p=0;p<=c;++p)y=r[(o+(h?c-p:p))%a],!y.skip&&(d?(n.moveTo(y.x,y.y),d=!1):u(n,x,y,h,s.stepped),x=y);return l&&(y=r[(o+(h?c:0))%a],u(n,x,y,h,s.stepped)),!!l}function _Q(n,e,t,i){const r=e.points,{count:s,start:a,ilen:o}=nB(r,t,i),{move:l=!0,reverse:c}=i||{};let u=0,d=0,h,p,y,x,_,v;const b=S=>(a+(c?o-S:S))%s,w=()=>{x!==_&&(n.lineTo(u,_),n.lineTo(u,x),n.lineTo(u,v))};for(l&&(p=r[b(0)],n.moveTo(p.x,p.y)),h=0;h<=o;++h){if(p=r[b(h)],p.skip)continue;const S=p.x,A=p.y,P=S|0;P===y?(A<x?x=A:A>_&&(_=A),u=(d*u+S)/++d):(w(),n.lineTo(S,A),y=P,d=0,x=_=A),v=A}w()}function BC(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?_Q:xQ}function bQ(n){return n.stepped?bZ:n.tension||n.cubicInterpolationMode==="monotone"?wZ:Ad}function wQ(n,e,t,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,i)&&r.closePath()),tB(n,e.options),n.stroke(r)}function SQ(n,e,t,i){const{segments:r,options:s}=e,a=BC(e);for(const o of r)tB(n,s,o.style),n.beginPath(),a(n,e,o,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const MQ=typeof Path2D=="function";function EQ(n,e,t,i){MQ&&!e.options.segment?wQ(n,e,t,i):SQ(n,e,t,i)}class Ua extends Eo{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;fZ(this._points,i,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=AZ(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,r=e[t],s=this.points,a=Bz(this,{property:t,start:r,end:r});if(!a.length)return;const o=[],l=bQ(i);let c,u;for(c=0,u=a.length;c<u;++c){const{start:d,end:h}=a[c],p=s[d],y=s[h];if(p===y){o.push(p);continue}const x=Math.abs((r-p[t])/(y[t]-p[t])),_=l(p,y,x,i.stepped);_[t]=e[t],o.push(_)}return o.length===1?o[0]:o}pathSegment(e,t,i){return BC(this)(e,this,t,i)}path(e,t,i){const r=this.segments,s=BC(this);let a=this._loop;t=t||0,i=i||this.points.length-t;for(const o of r)a&=s(e,this,o,{start:t,end:t+i-1});return!!a}draw(e,t,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),EQ(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}St(Ua,"id","line"),St(Ua,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),St(Ua,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),St(Ua,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function bL(n,e,t,i){const r=n.options,{[t]:s}=n.getProps([t],i);return Math.abs(e-s)<r.radius+r.hitRadius}class _u extends Eo{constructor(t){super();St(this,"parsed");St(this,"skip");St(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,r){const s=this.options,{x:a,y:o}=this.getProps(["x","y"],r);return Math.pow(t-a,2)+Math.pow(i-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,i){return bL(this,t,"x",i)}inYRange(t,i){return bL(this,t,"y",i)}getCenterPoint(t){const{x:i,y:r}=this.getProps(["x","y"],t);return{x:i,y:r}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);const r=i&&t.borderWidth||0;return(i+r)*2}draw(t,i){const r=this.options;this.skip||r.radius<.1||!Hl(this,i,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,FC(t,r,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}St(_u,"id","point"),St(_u,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),St(_u,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function iB(n,e){const{x:t,y:i,base:r,width:s,height:a}=n.getProps(["x","y","base","width","height"],e);let o,l,c,u,d;return n.horizontal?(d=a/2,o=Math.min(t,r),l=Math.max(t,r),c=i-d,u=i+d):(d=s/2,o=t-d,l=t+d,c=Math.min(i,r),u=Math.max(i,r)),{left:o,top:c,right:l,bottom:u}}function Qc(n,e,t,i){return n?0:Wr(e,t,i)}function TQ(n,e,t){const i=n.options.borderWidth,r=n.borderSkipped,s=kz(i);return{t:Qc(r.top,s.top,0,t),r:Qc(r.right,s.right,0,e),b:Qc(r.bottom,s.bottom,0,t),l:Qc(r.left,s.left,0,e)}}function CQ(n,e,t){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=Qd(r),a=Math.min(e,t),o=n.borderSkipped,l=i||wn(r);return{topLeft:Qc(!l||o.top||o.left,s.topLeft,0,a),topRight:Qc(!l||o.top||o.right,s.topRight,0,a),bottomLeft:Qc(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:Qc(!l||o.bottom||o.right,s.bottomRight,0,a)}}function AQ(n){const e=iB(n),t=e.right-e.left,i=e.bottom-e.top,r=TQ(n,t/2,i/2),s=CQ(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function YE(n,e,t,i){const r=e===null,s=t===null,o=n&&!(r&&s)&&iB(n,i);return o&&(r||Bl(e,o.left,o.right))&&(s||Bl(t,o.top,o.bottom))}function PQ(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function RQ(n,e){n.rect(e.x,e.y,e.w,e.h)}function KE(n,e,t={}){const i=n.x!==t.x?-e:0,r=n.y!==t.y?-e:0,s=(n.x+n.w!==t.x+t.w?e:0)-i,a=(n.y+n.h!==t.y+t.h?e:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+s,h:n.h+a,radius:n.radius}}class Xl extends Eo{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:a}=AQ(this),o=PQ(a.radius)?Y0:RQ;e.save(),(a.w!==s.w||a.h!==s.h)&&(e.beginPath(),o(e,KE(a,t,s)),e.clip(),o(e,KE(s,-t,a)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),o(e,KE(s,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,i){return YE(this,e,t,i)}inXRange(e,t){return YE(this,e,null,t)}inYRange(e,t){return YE(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+r)/2:t,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}St(Xl,"id","bar"),St(Xl,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),St(Xl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function kQ(n,e,t){const i=n.segments,r=n.points,s=e.points,a=[];for(const o of i){let{start:l,end:c}=o;c=_R(l,c,r);const u=HC(t,r[l],r[c],o.loop);if(!e.segments){a.push({source:o,target:u,start:r[l],end:r[c]});continue}const d=Bz(e,u);for(const h of d){const p=HC(t,s[h.start],s[h.end],h.loop),y=zz(o,r,p);for(const x of y)a.push({source:x,target:h,start:{[t]:wL(u,p,"start",Math.max)},end:{[t]:wL(u,p,"end",Math.min)}})}}return a}function HC(n,e,t,i){if(i)return;let r=e[n],s=t[n];return n==="angle"&&(r=Qs(r),s=Qs(s)),{property:n,start:r,end:s}}function NQ(n,e){const{x:t=null,y:i=null}=n||{},r=e.points,s=[];return e.segments.forEach(({start:a,end:o})=>{o=_R(a,o,r);const l=r[a],c=r[o];i!==null?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):t!==null&&(s.push({x:t,y:l.y}),s.push({x:t,y:c.y}))}),s}function _R(n,e,t){for(;e>n;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function wL(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function rB(n,e){let t=[],i=!1;return Qn(n)?(i=!0,t=n):t=NQ(n,e),t.length?new Ua({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function SL(n){return n&&n.fill!==!1}function IQ(n,e,t){let r=n[e].fill;const s=[e];let a;if(!t)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!Ti(r))return r;if(a=n[r],!a)return!1;if(a.visible)return r;s.push(r),r=a.fill}return!1}function DQ(n,e,t){const i=UQ(n);if(wn(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Ti(r)&&Math.floor(r)===r?LQ(i[0],e,r,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function LQ(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function OQ(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:wn(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function FQ(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:wn(n)?i=n.value:i=e.getBaseValue(),i}function UQ(n){const e=n.options,t=e.fill;let i=un(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function jQ(n){const{scale:e,index:t,line:i}=n,r=[],s=i.segments,a=i.points,o=zQ(e,t);o.push(rB({x:null,y:e.bottom},i));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)BQ(r,a[u],o)}return new Ua({points:r,options:{}})}function zQ(n,e){const t=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const s=i[r];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function BQ(n,e,t){const i=[];for(let r=0;r<t.length;r++){const s=t[r],{first:a,last:o,point:l}=HQ(s,e,"x");if(!(!l||a&&o)){if(a)i.unshift(l);else if(n.push(l),!o)break}}n.push(...i)}function HQ(n,e,t){const i=n.interpolate(e,t);if(!i)return{};const r=i[t],s=n.segments,a=n.points;let o=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],d=a[u.start][t],h=a[u.end][t];if(Bl(r,d,h)){o=r===d,l=r===h;break}}return{first:o,last:l,point:i}}class sB{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:r,y:s,radius:a}=this;return t=t||{start:0,end:ii},e.arc(r,s,a,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:r}=this,s=e.angle;return{x:t+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}}function VQ(n){const{chart:e,fill:t,line:i}=n;if(Ti(t))return $Q(e,t);if(t==="stack")return jQ(n);if(t==="shape")return!0;const r=WQ(n);return r instanceof sB?r:rB(r,i)}function $Q(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function WQ(n){return(n.scale||{}).getPointPositionForValue?qQ(n):GQ(n)}function GQ(n){const{scale:e={},fill:t}=n,i=OQ(t,e);if(Ti(i)){const r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function qQ(n){const{scale:e,fill:t}=n,i=e.options,r=e.getLabels().length,s=i.reverse?e.max:e.min,a=FQ(t,e,s),o=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,s);return new sB({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(a)})}for(let l=0;l<r;++l)o.push(e.getPointPositionForValue(l,a));return o}function ZE(n,e,t){const i=VQ(e),{chart:r,index:s,line:a,scale:o,axis:l}=e,c=a.options,u=c.fill,d=c.backgroundColor,{above:h=d,below:p=d}=u||{},y=r.getDatasetMeta(s),x=Hz(r,y);i&&a.points.length&&(iS(n,t),XQ(n,{line:a,target:i,above:h,below:p,area:t,scale:o,axis:l,clip:x}),rS(n))}function XQ(n,e){const{line:t,target:i,above:r,below:s,area:a,scale:o,clip:l}=e,c=t._loop?"angle":e.axis;n.save(),c==="x"&&s!==r&&(ML(n,i,a.top),EL(n,{line:t,target:i,color:r,scale:o,property:c,clip:l}),n.restore(),n.save(),ML(n,i,a.bottom)),EL(n,{line:t,target:i,color:s,scale:o,property:c,clip:l}),n.restore()}function ML(n,e,t){const{segments:i,points:r}=e;let s=!0,a=!1;n.beginPath();for(const o of i){const{start:l,end:c}=o,u=r[l],d=r[_R(l,c,r)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),a=!!e.pathSegment(n,o,{move:a}),a?n.closePath():n.lineTo(d.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function EL(n,e){const{line:t,target:i,property:r,color:s,scale:a,clip:o}=e,l=kQ(t,i,r);for(const{source:c,target:u,start:d,end:h}of l){const{style:{backgroundColor:p=s}={}}=c,y=i!==!0;n.save(),n.fillStyle=p,YQ(n,a,o,y&&HC(r,d,h)),n.beginPath();const x=!!t.pathSegment(n,c);let _;if(y){x?n.closePath():TL(n,i,h,r);const v=!!i.pathSegment(n,u,{move:x,reverse:!0});_=x&&v,_||TL(n,i,d,r)}n.closePath(),n.fill(_?"evenodd":"nonzero"),n.restore()}}function YQ(n,e,t,i){const r=e.chart.chartArea,{property:s,start:a,end:o}=i||{};if(s==="x"||s==="y"){let l,c,u,d;s==="x"?(l=a,c=r.top,u=o,d=r.bottom):(l=r.left,c=a,u=r.right,d=o),n.beginPath(),t&&(l=Math.max(l,t.left),u=Math.min(u,t.right),c=Math.max(c,t.top),d=Math.min(d,t.bottom)),n.rect(l,c,u-l,d-c),n.clip()}}function TL(n,e,t,i){const r=e.interpolate(t,i);r&&n.lineTo(r.x,r.y)}var KQ={id:"filler",afterDatasetsUpdate(n,e,t){const i=(n.data.datasets||[]).length,r=[];let s,a,o,l;for(a=0;a<i;++a)s=n.getDatasetMeta(a),o=s.dataset,l=null,o&&o.options&&o instanceof Ua&&(l={visible:n.isDatasetVisible(a),index:a,fill:DQ(o,a,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:o}),s.$filler=l,r.push(l);for(a=0;a<i;++a)l=r[a],!(!l||l.fill===!1)&&(l.fill=IQ(r,a,t.propagate))},beforeDraw(n,e,t){const i=t.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let a=r.length-1;a>=0;--a){const o=r[a].$filler;o&&(o.line.updateControlPoints(s,o.axis),i&&o.fill&&ZE(n.ctx,o,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const s=i[r].$filler;SL(s)&&ZE(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){const i=e.meta.$filler;!SL(i)||t.drawTime!=="beforeDatasetDraw"||ZE(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const CL=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},ZQ=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class AL extends Eo{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Xn(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=sr(i.font),s=r.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=CL(i,s);let c,u;t.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(a,s,o,l)+10):(u=this.maxHeight,c=this._fitCols(a,r,o,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,r){const{ctx:s,maxWidth:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+o;let d=e;s.textAlign="left",s.textBaseline="middle";let h=-1,p=-u;return this.legendItems.forEach((y,x)=>{const _=i+t/2+s.measureText(y.text).width;(x===0||c[c.length-1]+_+2*o>a)&&(d+=u,c[c.length-(x>0?0:1)]=0,p+=u,h++),l[x]={left:0,top:p,row:h,width:_,height:r},c[c.length-1]+=_+o}),d}_fitCols(e,t,i,r){const{ctx:s,maxHeight:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=a-e;let d=o,h=0,p=0,y=0,x=0;return this.legendItems.forEach((_,v)=>{const{itemWidth:b,itemHeight:w}=JQ(i,t,s,_,r);v>0&&p+w+2*o>u&&(d+=h+o,c.push({width:h,height:p}),y+=h+o,x++,h=p=0),l[v]={left:y,top:p,col:x,width:b,height:w},h=Math.max(h,b),p+=w+o}),d+=h,c.push({width:h,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:r},rtl:s}}=this,a=fp(s,this.left,this.width);if(this.isHorizontal()){let o=0,l=zr(i,this.left+r,this.right-this.lineWidths[o]);for(const c of t)o!==c.row&&(o=c.row,l=zr(i,this.left+r,this.right-this.lineWidths[o])),c.top+=this.top+e+r,c.left=a.leftForLtr(a.x(l),c.width),l+=c.width+r}else{let o=0,l=zr(i,this.top+e+r,this.bottom-this.columnSizes[o].height);for(const c of t)c.col!==o&&(o=c.col,l=zr(i,this.top+e+r,this.bottom-this.columnSizes[o].height)),c.top=l,c.left+=this.left+r,c.left=a.leftForLtr(a.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;iS(e,this),this._draw(),rS(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:r}=this,{align:s,labels:a}=e,o=Ci.color,l=fp(e.rtl,this.left,this.width),c=sr(a.font),{padding:u}=a,d=c.size,h=d/2;let p;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:y,boxHeight:x,itemHeight:_}=CL(a,d),v=function(P,k,T){if(isNaN(y)||y<=0||isNaN(x)||x<0)return;r.save();const E=un(T.lineWidth,1);if(r.fillStyle=un(T.fillStyle,o),r.lineCap=un(T.lineCap,"butt"),r.lineDashOffset=un(T.lineDashOffset,0),r.lineJoin=un(T.lineJoin,"miter"),r.lineWidth=E,r.strokeStyle=un(T.strokeStyle,o),r.setLineDash(un(T.lineDash,[])),a.usePointStyle){const R={radius:x*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:E},I=l.xPlus(P,y/2),D=k+h;Rz(r,R,I,D,a.pointStyleWidth&&y)}else{const R=k+Math.max((d-x)/2,0),I=l.leftForLtr(P,y),D=Qd(T.borderRadius);r.beginPath(),Object.values(D).some(B=>B!==0)?Y0(r,{x:I,y:R,w:y,h:x,radius:D}):r.rect(I,R,y,x),r.fill(),E!==0&&r.stroke()}r.restore()},b=function(P,k,T){bh(r,T.text,P,k+_/2,c,{strikethrough:T.hidden,textAlign:l.textAlign(T.textAlign)})},w=this.isHorizontal(),S=this._computeTitleHeight();w?p={x:zr(s,this.left+u,this.right-i[0]),y:this.top+u+S,line:0}:p={x:this.left+u,y:zr(s,this.top+S+u,this.bottom-t[0].height),line:0},Fz(this.ctx,e.textDirection);const A=_+u;this.legendItems.forEach((P,k)=>{r.strokeStyle=P.fontColor,r.fillStyle=P.fontColor;const T=r.measureText(P.text).width,E=l.textAlign(P.textAlign||(P.textAlign=a.textAlign)),R=y+h+T;let I=p.x,D=p.y;l.setWidth(this.width),w?k>0&&I+R+u>this.right&&(D=p.y+=A,p.line++,I=p.x=zr(s,this.left+u,this.right-i[p.line])):k>0&&D+A>this.bottom&&(I=p.x=I+t[p.line].width+u,p.line++,D=p.y=zr(s,this.top+S+u,this.bottom-t[p.line].height));const B=l.x(I);if(v(B,D,P),I=PK(E,I+y+h,w?I+R:this.right,e.rtl),b(l.x(I),D,P),w)p.x+=R+u;else if(typeof P.text!="string"){const G=c.lineHeight;p.y+=aB(P,G)+u}else p.y+=A}),Uz(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=sr(t.font),r=Kr(t.padding);if(!t.display)return;const s=fp(e.rtl,this.left,this.width),a=this.ctx,o=t.position,l=i.size/2,c=r.top+l;let u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=zr(e.align,d,this.right-h);else{const y=this.columnSizes.reduce((x,_)=>Math.max(x,_.height),0);u=c+zr(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const p=zr(o,d,d+h);a.textAlign=s.textAlign(dR(o)),a.textBaseline="middle",a.strokeStyle=t.color,a.fillStyle=t.color,a.font=i.string,bh(a,t.text,p,u,i)}_computeTitleHeight(){const e=this.options.title,t=sr(e.font),i=Kr(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,r,s;if(Bl(e,this.left,this.right)&&Bl(t,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Bl(e,r.left,r.left+r.width)&&Bl(t,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!tee(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=ZQ(r,i);r&&!s&&Xn(t.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&Xn(t.onHover,[e,i,this],this)}else i&&Xn(t.onClick,[e,i,this],this)}}function JQ(n,e,t,i,r){const s=QQ(i,n,e,t),a=eee(r,i,e.lineHeight);return{itemWidth:s,itemHeight:a}}function QQ(n,e,t,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,a)=>s.length>a.length?s:a)),e+t.size/2+i.measureText(r).width}function eee(n,e,t){let i=n;return typeof e.text!="string"&&(i=aB(e,t)),i}function aB(n,e){const t=n.text?n.text.length:0;return e*t}function tee(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var uc={id:"legend",_element:AL,start(n,e,t){const i=n.legend=new AL({ctx:n.ctx,options:t,chart:n});Fa.configure(n,i,t),Fa.addBox(n,i)},stop(n){Fa.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;Fa.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,r=t.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:r,color:s,useBorderRadius:a,borderRadius:o}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(t?0:void 0),u=Kr(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:a&&(o||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class oB extends Eo{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const r=Qn(i.text)?i.text.length:1;this._padding=Kr(i.padding);const s=r*sr(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:r,right:s,options:a}=this,o=a.align;let l=0,c,u,d;return this.isHorizontal()?(u=zr(o,i,s),d=t+e,c=s-i):(a.position==="left"?(u=i+e,d=zr(o,r,t),l=ui*-.5):(u=s-e,d=zr(o,t,r),l=ui*.5),c=r-t),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=sr(t.font),s=i.lineHeight/2+this._padding.top,{titleX:a,titleY:o,maxWidth:l,rotation:c}=this._drawArgs(s);bh(e,t.text,0,0,i,{color:t.color,maxWidth:l,rotation:c,textAlign:dR(t.align),textBaseline:"middle",translation:[a,o]})}}function nee(n,e){const t=new oB({ctx:n.ctx,options:e,chart:n});Fa.configure(n,t,e),Fa.addBox(n,t),n.titleBlock=t}var dc={id:"title",_element:oB,start(n,e,t){nee(n,t)},stop(n){const e=n.titleBlock;Fa.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;Fa.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const wg={average(n){if(!n.length)return!1;let e,t,i=new Set,r=0,s=0;for(e=0,t=n.length;e<t;++e){const o=n[e].element;if(o&&o.hasValue()){const l=o.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((o,l)=>o+l)/i.size,y:r/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,a,o;for(s=0,a=n.length;s<a;++s){const l=n[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=LC(e,c);u<r&&(r=u,o=l)}}if(o){const l=o.tooltipPosition();t=l.x,i=l.y}return{x:t,y:i}}};function zo(n,e){return e&&(Qn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Cl(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function iee(n,e){const{element:t,datasetIndex:i,index:r}=e,s=n.getDatasetMeta(i).controller,{label:a,value:o}=s.getLabelAndValue(r);return{chart:n,label:a,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:o,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:t}}function PL(n,e){const t=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:a,boxHeight:o}=e,l=sr(e.bodyFont),c=sr(e.titleFont),u=sr(e.footerFont),d=s.length,h=r.length,p=i.length,y=Kr(e.padding);let x=y.height,_=0,v=i.reduce((S,A)=>S+A.before.length+A.lines.length+A.after.length,0);if(v+=n.beforeBody.length+n.afterBody.length,d&&(x+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),v){const S=e.displayColors?Math.max(o,l.lineHeight):l.lineHeight;x+=p*S+(v-p)*l.lineHeight+(v-1)*e.bodySpacing}h&&(x+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let b=0;const w=function(S){_=Math.max(_,t.measureText(S).width+b)};return t.save(),t.font=c.string,Ln(n.title,w),t.font=l.string,Ln(n.beforeBody.concat(n.afterBody),w),b=e.displayColors?a+2+e.boxPadding:0,Ln(i,S=>{Ln(S.before,w),Ln(S.lines,w),Ln(S.after,w)}),b=0,t.font=u.string,Ln(n.footer,w),t.restore(),_+=y.width,{width:_,height:x}}function ree(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function see(n,e,t,i){const{x:r,width:s}=i,a=t.caretSize+t.caretPadding;if(n==="left"&&r+s+a>e.width||n==="right"&&r-s-a<0)return!0}function aee(n,e,t,i){const{x:r,width:s}=t,{width:a,chartArea:{left:o,right:l}}=n;let c="center";return i==="center"?c=r<=(o+l)/2?"left":"right":r<=s/2?c="left":r>=a-s/2&&(c="right"),see(c,n,e,t)&&(c="center"),c}function RL(n,e,t){const i=t.yAlign||e.yAlign||ree(n,t);return{xAlign:t.xAlign||e.xAlign||aee(n,e,t,i),yAlign:i}}function oee(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function lee(n,e,t){let{y:i,height:r}=n;return e==="top"?i+=t:e==="bottom"?i-=r+t:i-=r/2,i}function kL(n,e,t,i){const{caretSize:r,caretPadding:s,cornerRadius:a}=n,{xAlign:o,yAlign:l}=t,c=r+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:p}=Qd(a);let y=oee(e,o);const x=lee(e,l,c);return l==="center"?o==="left"?y+=c:o==="right"&&(y-=c):o==="left"?y-=Math.max(u,h)+r:o==="right"&&(y+=Math.max(d,p)+r),{x:Wr(y,0,i.width-e.width),y:Wr(x,0,i.height-e.height)}}function zx(n,e,t){const i=Kr(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function NL(n){return zo([],Cl(n))}function cee(n,e,t){return Bu(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function IL(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const lB={beforeTitle:yl,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:yl,beforeBody:yl,beforeLabel:yl,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return Tn(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:yl,afterBody:yl,beforeFooter:yl,footer:yl,afterFooter:yl};function Ss(n,e,t,i){const r=n[e].call(t,i);return typeof r>"u"?lB[e].call(t,i):r}class VC extends Eo{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&t.options.animation&&i.animations,s=new Vz(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=cee(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,r=Ss(i,"beforeTitle",this,e),s=Ss(i,"title",this,e),a=Ss(i,"afterTitle",this,e);let o=[];return o=zo(o,Cl(r)),o=zo(o,Cl(s)),o=zo(o,Cl(a)),o}getBeforeBody(e,t){return NL(Ss(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,r=[];return Ln(e,s=>{const a={before:[],lines:[],after:[]},o=IL(i,s);zo(a.before,Cl(Ss(o,"beforeLabel",this,s))),zo(a.lines,Ss(o,"label",this,s)),zo(a.after,Cl(Ss(o,"afterLabel",this,s))),r.push(a)}),r}getAfterBody(e,t){return NL(Ss(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,r=Ss(i,"beforeFooter",this,e),s=Ss(i,"footer",this,e),a=Ss(i,"afterFooter",this,e);let o=[];return o=zo(o,Cl(r)),o=zo(o,Cl(s)),o=zo(o,Cl(a)),o}_createItems(e){const t=this._active,i=this.chart.data,r=[],s=[],a=[];let o=[],l,c;for(l=0,c=t.length;l<c;++l)o.push(iee(this.chart,t[l]));return e.filter&&(o=o.filter((u,d,h)=>e.filter(u,d,h,i))),e.itemSort&&(o=o.sort((u,d)=>e.itemSort(u,d,i))),Ln(o,u=>{const d=IL(e.callbacks,u);r.push(Ss(d,"labelColor",this,u)),s.push(Ss(d,"labelPointStyle",this,u)),a.push(Ss(d,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=o,o}update(e,t){const i=this.options.setContext(this.getContext()),r=this._active;let s,a=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const o=wg[i.position].call(this,r,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);const l=this._size=PL(this,i),c=Object.assign({},o,l),u=RL(this.chart,i,c),d=kL(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,r){const s=this.getCaretPosition(e,i,r);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,i){const{xAlign:r,yAlign:s}=this,{caretSize:a,cornerRadius:o}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=Qd(o),{x:h,y:p}=e,{width:y,height:x}=t;let _,v,b,w,S,A;return s==="center"?(S=p+x/2,r==="left"?(_=h,v=_-a,w=S+a,A=S-a):(_=h+y,v=_+a,w=S-a,A=S+a),b=_):(r==="left"?v=h+Math.max(l,u)+a:r==="right"?v=h+y-Math.max(c,d)-a:v=this.caretX,s==="top"?(w=p,S=w-a,_=v-a,b=v+a):(w=p+x,S=w+a,_=v+a,b=v-a),A=w),{x1:_,x2:v,x3:b,y1:w,y2:S,y3:A}}drawTitle(e,t,i){const r=this.title,s=r.length;let a,o,l;if(s){const c=fp(i.rtl,this.x,this.width);for(e.x=zx(this,i.titleAlign,i),t.textAlign=c.textAlign(i.titleAlign),t.textBaseline="middle",a=sr(i.titleFont),o=i.titleSpacing,t.fillStyle=i.titleColor,t.font=a.string,l=0;l<s;++l)t.fillText(r[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+o,l+1===s&&(e.y+=i.titleMarginBottom-o)}}_drawColorBox(e,t,i,r,s){const a=this.labelColors[i],o=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,u=sr(s.bodyFont),d=zx(this,"left",s),h=r.x(d),p=l<u.lineHeight?(u.lineHeight-l)/2:0,y=t.y+p;if(s.usePointStyle){const x={radius:Math.min(c,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},_=r.leftForLtr(h,c)+c/2,v=y+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,FC(e,x,_,v),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,FC(e,x,_,v)}else{e.lineWidth=wn(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const x=r.leftForLtr(h,c),_=r.leftForLtr(r.xPlus(h,1),c-2),v=Qd(a.borderRadius);Object.values(v).some(b=>b!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Y0(e,{x,y,w:c,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),Y0(e,{x:_,y:y+1,w:c-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(x,y,c,l),e.strokeRect(x,y,c,l),e.fillStyle=a.backgroundColor,e.fillRect(_,y+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:r}=this,{bodySpacing:s,bodyAlign:a,displayColors:o,boxHeight:l,boxWidth:c,boxPadding:u}=i,d=sr(i.bodyFont);let h=d.lineHeight,p=0;const y=fp(i.rtl,this.x,this.width),x=function(T){t.fillText(T,y.x(e.x+p),e.y+h/2),e.y+=h+s},_=y.textAlign(a);let v,b,w,S,A,P,k;for(t.textAlign=a,t.textBaseline="middle",t.font=d.string,e.x=zx(this,_,i),t.fillStyle=i.bodyColor,Ln(this.beforeBody,x),p=o&&_!=="right"?a==="center"?c/2+u:c+2+u:0,S=0,P=r.length;S<P;++S){for(v=r[S],b=this.labelTextColors[S],t.fillStyle=b,Ln(v.before,x),w=v.lines,o&&w.length&&(this._drawColorBox(t,e,S,y,i),h=Math.max(d.lineHeight,l)),A=0,k=w.length;A<k;++A)x(w[A]),h=d.lineHeight;Ln(v.after,x)}p=0,h=d.lineHeight,Ln(this.afterBody,x),e.y-=s}drawFooter(e,t,i){const r=this.footer,s=r.length;let a,o;if(s){const l=fp(i.rtl,this.x,this.width);for(e.x=zx(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=l.textAlign(i.footerAlign),t.textBaseline="middle",a=sr(i.footerFont),t.fillStyle=i.footerColor,t.font=a.string,o=0;o<s;++o)t.fillText(r[o],l.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+i.footerSpacing}}drawBackground(e,t,i,r){const{xAlign:s,yAlign:a}=this,{x:o,y:l}=e,{width:c,height:u}=i,{topLeft:d,topRight:h,bottomLeft:p,bottomRight:y}=Qd(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(o+d,l),a==="top"&&this.drawCaret(e,t,i,r),t.lineTo(o+c-h,l),t.quadraticCurveTo(o+c,l,o+c,l+h),a==="center"&&s==="right"&&this.drawCaret(e,t,i,r),t.lineTo(o+c,l+u-y),t.quadraticCurveTo(o+c,l+u,o+c-y,l+u),a==="bottom"&&this.drawCaret(e,t,i,r),t.lineTo(o+p,l+u),t.quadraticCurveTo(o,l+u,o,l+u-p),a==="center"&&s==="left"&&this.drawCaret(e,t,i,r),t.lineTo(o,l+d),t.quadraticCurveTo(o,l,o+d,l),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const a=wg[e.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=PL(this,e),l=Object.assign({},a,this._size),c=RL(t,e,l),u=kL(e,l,c,t);(r._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const a=Kr(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,t),Fz(e,t.textDirection),s.y+=a.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),Uz(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,r=e.map(({datasetIndex:o,index:l})=>{const c=this.chart.getDatasetMeta(o);if(!c)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:c.data[l],index:l}}),s=!db(i,r),a=this._positionChanged(r,t);(s||a)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],a=this._getActiveElements(e,s,t,i),o=this._positionChanged(a,e),l=t||!db(a,s)||o;return l&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return t.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&a.reverse(),a}_positionChanged(e,t){const{caretX:i,caretY:r,options:s}=this,a=wg[s.position].call(this,e,t);return a!==!1&&(i!==a.x||r!==a.y)}}St(VC,"positioners",wg);var hc={id:"tooltip",_element:VC,positioners:wg,afterInit(n,e,t){t&&(n.tooltip=new VC({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:lB},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const uee=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function dee(n,e,t,i){const r=n.indexOf(e);if(r===-1)return uee(n,e,t,i);const s=n.lastIndexOf(e);return r!==s?t:r}const hee=(n,e)=>n===null?null:Wr(Math.round(n),0,e);function DL(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class To extends Lh{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:r,label:s}of t)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Tn(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:dee(i,e,un(t,e),this._addedLabels),hee(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=e;a<=t;a++)r.push({value:a});return r}getLabelForValue(e){return DL.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}St(To,"id","category"),St(To,"defaults",{ticks:{callback:DL}});function fee(n,e){const t=[],{bounds:r,step:s,min:a,max:o,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=n,p=s||1,y=u-1,{min:x,max:_}=e,v=!Tn(a),b=!Tn(o),w=!Tn(c),S=(_-x)/(d+1);let A=ND((_-x)/y/p)*p,P,k,T,E;if(A<1e-14&&!v&&!b)return[{value:x},{value:_}];E=Math.ceil(_/A)-Math.floor(x/A),E>y&&(A=ND(E*A/y/p)*p),Tn(l)||(P=Math.pow(10,l),A=Math.ceil(A*P)/P),r==="ticks"?(k=Math.floor(x/A)*A,T=Math.ceil(_/A)*A):(k=x,T=_),v&&b&&s&&wK((o-a)/s,A/1e3)?(E=Math.round(Math.min((o-a)/A,u)),A=(o-a)/E,k=a,T=o):w?(k=v?a:k,T=b?o:T,E=c-1,A=(T-k)/E):(E=(T-k)/A,qg(E,Math.round(E),A/1e3)?E=Math.round(E):E=Math.ceil(E));const R=Math.max(ID(A),ID(k));P=Math.pow(10,Tn(l)?R:l),k=Math.round(k*P)/P,T=Math.round(T*P)/P;let I=0;for(v&&(h&&k!==a?(t.push({value:a}),k<a&&I++,qg(Math.round((k+I*A)*P)/P,a,LL(a,S,n))&&I++):k<a&&I++);I<E;++I){const D=Math.round((k+I*A)*P)/P;if(b&&D>o)break;t.push({value:D})}return b&&h&&T!==o?t.length&&qg(t[t.length-1].value,o,LL(o,S,n))?t[t.length-1].value=o:t.push({value:o}):(!b||T===o)&&t.push({value:T}),t}function LL(n,e,{horizontal:t,minRotation:i}){const r=Yo(i),s=(t?Math.sin(r):Math.cos(r))||.001,a=.75*e*(""+n).length;return Math.min(e/s,a)}class vb extends Lh{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Tn(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const a=l=>r=t?r:l,o=l=>s=i?s:l;if(e){const l=tl(r),c=tl(s);l<0&&c<0?o(0):l>0&&c>0&&a(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);o(s+l),e||a(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,a=fee(r,s);return e.bounds==="ticks"&&Sz(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return tS(e,this.chart.options.locale,this.options.ticks.format)}}class Co extends vb{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Ti(e)?e:0,this.max=Ti(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=Yo(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}St(Co,"id","linear"),St(Co,"defaults",{ticks:{callback:nS.formatters.numeric}});const Z0=n=>Math.floor(Zc(n)),od=(n,e)=>Math.pow(10,Z0(n)+e);function OL(n){return n/Math.pow(10,Z0(n))===1}function FL(n,e,t){const i=Math.pow(10,t),r=Math.floor(n/i);return Math.ceil(e/i)-r}function pee(n,e){const t=e-n;let i=Z0(t);for(;FL(n,e,i)>10;)i++;for(;FL(n,e,i)<10;)i--;return Math.min(i,Z0(n))}function mee(n,{min:e,max:t}){e=Ys(n.min,e);const i=[],r=Z0(e);let s=pee(e,t),a=s<0?Math.pow(10,Math.abs(s)):1;const o=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((e-l)*a)/a,u=Math.floor((e-l)/o/10)*o*10;let d=Math.floor((c-u)/Math.pow(10,s)),h=Ys(n.min,Math.round((l+u+d*Math.pow(10,s))*a)/a);for(;h<t;)i.push({value:h,major:OL(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,a=s>=0?1:a),h=Math.round((l+u+d*Math.pow(10,s))*a)/a;const p=Ys(n.max,h);return i.push({value:p,major:OL(p),significand:d}),i}class UL extends Lh{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=vb.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return Ti(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Ti(e)?Math.max(0,e):null,this.max=Ti(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ti(this._userMin)&&(this.min=e===od(this.min,0)?od(this.min,-1):od(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let i=this.min,r=this.max;const s=o=>i=e?i:o,a=o=>r=t?r:o;i===r&&(i<=0?(s(1),a(10)):(s(od(i,-1)),a(od(r,1)))),i<=0&&s(od(r,-1)),r<=0&&a(od(i,1)),this.min=i,this.max=r}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},i=mee(t,this);return e.bounds==="ticks"&&Sz(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":tS(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Zc(e),this._valueRange=Zc(this.max)-Zc(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Zc(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}St(UL,"id","logarithmic"),St(UL,"defaults",{ticks:{callback:nS.formatters.logarithmic,major:{enabled:!0}}});function $C(n){const e=n.ticks;if(e.display&&n.display){const t=Kr(e.backdropPadding);return un(e.font&&e.font.size,Ci.font.size)+t.height}return 0}function gee(n,e,t){return t=Qn(t)?t:[t],{w:BK(n,e.string,t),h:t.length*e.lineHeight}}function jL(n,e,t,i,r){return n===i||n===r?{start:e-t/2,end:e+t/2}:n<i||n>r?{start:e-t,end:e}:{start:e,end:e+t}}function yee(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],r=[],s=n._pointLabels.length,a=n.options.pointLabels,o=a.centerPointLabels?ui/s:0;for(let l=0;l<s;l++){const c=a.setContext(n.getPointLabelContext(l));r[l]=c.padding;const u=n.getPointPosition(l,n.drawingArea+r[l],o),d=sr(c.font),h=gee(n.ctx,d,n._pointLabels[l]);i[l]=h;const p=Qs(n.getIndexAngle(l)+o),y=Math.round(cR(p)),x=jL(y,u.x,h.w,0,180),_=jL(y,u.y,h.h,90,270);vee(t,e,p,x,_)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=bee(n,i,r)}function vee(n,e,t,i,r){const s=Math.abs(Math.sin(t)),a=Math.abs(Math.cos(t));let o=0,l=0;i.start<e.l?(o=(e.l-i.start)/s,n.l=Math.min(n.l,e.l-o)):i.end>e.r&&(o=(i.end-e.r)/s,n.r=Math.max(n.r,e.r+o)),r.start<e.t?(l=(e.t-r.start)/a,n.t=Math.min(n.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/a,n.b=Math.max(n.b,e.b+l))}function xee(n,e,t){const i=n.drawingArea,{extra:r,additionalAngle:s,padding:a,size:o}=t,l=n.getPointPosition(e,i+r+a,s),c=Math.round(cR(Qs(l.angle+Oi))),u=Mee(l.y,o.h,c),d=wee(c),h=See(l.x,o.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+o.w,bottom:u+o.h}}function _ee(n,e){if(!e)return!0;const{left:t,top:i,right:r,bottom:s}=n;return!(Hl({x:t,y:i},e)||Hl({x:t,y:s},e)||Hl({x:r,y:i},e)||Hl({x:r,y:s},e))}function bee(n,e,t){const i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:a,display:o}=s.pointLabels,l={extra:$C(s)/2,additionalAngle:a?ui/r:0};let c;for(let u=0;u<r;u++){l.padding=t[u],l.size=e[u];const d=xee(n,u,l);i.push(d),o==="auto"&&(d.visible=_ee(d,c),d.visible&&(c=d))}return i}function wee(n){return n===0||n===180?"center":n<180?"left":"right"}function See(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function Mee(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function Eee(n,e,t){const{left:i,top:r,right:s,bottom:a}=t,{backdropColor:o}=e;if(!Tn(o)){const l=Qd(e.borderRadius),c=Kr(e.backdropPadding);n.fillStyle=o;const u=i-c.left,d=r-c.top,h=s-i+c.width,p=a-r+c.height;Object.values(l).some(y=>y!==0)?(n.beginPath(),Y0(n,{x:u,y:d,w:h,h:p,radius:l}),n.fill()):n.fillRect(u,d,h,p)}}function Tee(n,e){const{ctx:t,options:{pointLabels:i}}=n;for(let r=e-1;r>=0;r--){const s=n._pointLabelItems[r];if(!s.visible)continue;const a=i.setContext(n.getPointLabelContext(r));Eee(t,a,s);const o=sr(a.font),{x:l,y:c,textAlign:u}=s;bh(t,n._pointLabels[r],l,c+o.lineHeight/2,o,{color:a.color,textAlign:u,textBaseline:"middle"})}}function cB(n,e,t,i){const{ctx:r}=n;if(t)r.arc(n.xCenter,n.yCenter,e,0,ii);else{let s=n.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let a=1;a<i;a++)s=n.getPointPosition(a,e),r.lineTo(s.x,s.y)}}function Cee(n,e,t,i,r){const s=n.ctx,a=e.circular,{color:o,lineWidth:l}=e;!a&&!i||!o||!l||t<0||(s.save(),s.strokeStyle=o,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),cB(n,t,a,i),s.closePath(),s.stroke(),s.restore())}function Aee(n,e,t){return Bu(n,{label:t,index:e,type:"pointLabel"})}class Bx extends vb{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Kr($C(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Ti(e)&&!isNaN(e)?e:0,this.max=Ti(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/$C(this.options))}generateTickLabels(e){vb.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{const r=Xn(this.options.pointLabels.callback,[t,i],this);return r||r===0?r:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?yee(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,r))}getIndexAngle(e){const t=ii/(this._pointLabels.length||1),i=this.options.startAngle||0;return Qs(e*t+Yo(i))}getDistanceFromCenterForValue(e){if(Tn(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Tn(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const i=t[e];return Aee(this.getContext(),e,i)}}getPointPosition(e,t,i=0){const r=this.getIndexAngle(e)-Oi+i;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:t,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),cB(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:i,grid:r,border:s}=t,a=this._pointLabels.length;let o,l,c;if(t.pointLabels.display&&Tee(this,a),r.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const h=this.getContext(d),p=r.setContext(h),y=s.setContext(h);Cee(this,p,l,a,y)}}),i.display){for(e.save(),o=a-1;o>=0;o--){const u=i.setContext(this.getPointLabelContext(o)),{color:d,lineWidth:h}=u;!h||!d||(e.lineWidth=h,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),c=this.getPointPosition(o,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((o,l)=>{if(l===0&&this.min>=0&&!t.reverse)return;const c=i.setContext(this.getContext(l)),u=sr(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,a=e.measureText(o.label).width,e.fillStyle=c.backdropColor;const d=Kr(c.backdropPadding);e.fillRect(-a/2-d.left,-s-u.size/2-d.top,a+d.width,u.size+d.height)}bh(e,o.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}St(Bx,"id","radialLinear"),St(Bx,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:nS.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),St(Bx,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),St(Bx,"descriptors",{angleLines:{_fallback:"grid"}});const aS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ps=Object.keys(aS);function zL(n,e){return n-e}function BL(n,e){if(Tn(e))return null;const t=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts;let a=e;return typeof i=="function"&&(a=i(a)),Ti(a)||(a=typeof i=="string"?t.parse(a,i):t.parse(a)),a===null?null:(r&&(a=r==="week"&&(q0(s)||s===!0)?t.startOf(a,"isoWeek",s):t.startOf(a,r)),+a)}function HL(n,e,t,i){const r=Ps.length;for(let s=Ps.indexOf(n);s<r-1;++s){const a=aS[Ps[s]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((t-e)/(o*a.size))<=i)return Ps[s]}return Ps[r-1]}function Pee(n,e,t,i,r){for(let s=Ps.length-1;s>=Ps.indexOf(t);s--){const a=Ps[s];if(aS[a].common&&n._adapter.diff(r,i,a)>=e-1)return a}return Ps[t?Ps.indexOf(t):0]}function Ree(n){for(let e=Ps.indexOf(n)+1,t=Ps.length;e<t;++e)if(aS[Ps[e]].common)return Ps[e]}function VL(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:r}=uR(t,e),s=t[i]>=e?t[i]:t[r];n[s]=!0}}function kee(n,e,t,i){const r=n._adapter,s=+r.startOf(e[0].value,i),a=e[e.length-1].value;let o,l;for(o=s;o<=a;o=+r.add(o,1,i))l=t[o],l>=0&&(e[l].major=!0);return e}function $L(n,e,t){const i=[],r={},s=e.length;let a,o;for(a=0;a<s;++a)o=e[a],r[o]=a,i.push({value:o,major:!1});return s===0||!t?i:kee(n,i,r,t)}class xb extends Lh{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),r=this._adapter=new iJ._date(e.adapters.date);r.init(t),Gg(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:BL(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:a,maxDefined:o}=this.getUserBounds();function l(c){!a&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!o&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!a||!o)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Ti(r)&&!isNaN(r)?r:+t.startOf(Date.now(),i),s=Ti(s)&&!isNaN(s)?s:+t.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,a=this.max,o=TK(r,s,a);return this._unit=t.unit||(i.autoSkip?HL(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):Pee(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Ree(this._unit),this.initOffsets(r),e.reverse&&o.reverse(),$L(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?t=1-r:t=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;t=Wr(t,0,a),i=Wr(i,0,a),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,r=this.options,s=r.time,a=s.unit||HL(s.minUnit,t,i,this._getLabelCapacity(t)),o=un(r.ticks.stepSize,1),l=a==="week"?s.isoWeekday:!1,c=q0(l)||l===!0,u={};let d=t,h,p;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":a),e.diff(i,t,a)>1e5*o)throw new Error(t+" and "+i+" are too far apart with stepSize of "+o+" "+a);const y=r.ticks.source==="data"&&this.getDataTimestamps();for(h=d,p=0;h<i;h=+e.add(h,o,a),p++)VL(u,h,y);return(h===i||r.bounds==="ticks"||p===1)&&VL(u,h,y),Object.keys(u).sort(zL).map(x=>+x)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const r=this.options.time.displayFormats,s=this._unit,a=t||r[s];return this._adapter.format(e,a)}_tickFormatFunction(e,t,i,r){const s=this.options,a=s.ticks.callback;if(a)return Xn(a,[e,t,i],this);const o=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&o[l],d=c&&o[c],h=i[t],p=c&&d&&h&&h.major;return this._adapter.format(e,r||(p?d:u))}generateTickLabels(e){let t,i,r;for(t=0,i=e.length;t<i;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,r=Yo(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(r),a=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:i*s+o*a,h:i*a+o*s}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,r=i[t.unit]||i.millisecond,s=this._tickFormatFunction(e,0,$L(this,[e],this._majorUnit),r),a=this._getLabelSize(s),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,i=r.length;t<i;++t)e=e.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const r=this.getLabels();for(t=0,i=r.length;t<i;++t)e.push(BL(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Tz(e.sort(zL))}}St(xb,"id","time"),St(xb,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Hx(n,e,t){let i=0,r=n.length-1,s,a,o,l;t?(e>=n[i].pos&&e<=n[r].pos&&({lo:i,hi:r}=zd(n,"pos",e)),{pos:s,time:o}=n[i],{pos:a,time:l}=n[r]):(e>=n[i].time&&e<=n[r].time&&({lo:i,hi:r}=zd(n,"time",e)),{time:s,pos:o}=n[i],{time:a,pos:l}=n[r]);const c=a-s;return c?o+(l-o)*(e-s)/c:o}class WL extends xb{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Hx(t,this.min),this._tableRange=Hx(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,r=[],s=[];let a,o,l,c,u;for(a=0,o=e.length;a<o;++a)c=e[a],c>=t&&c<=i&&r.push(c);if(r.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(a=0,o=r.length;a<o;++a)u=r[a+1],l=r[a-1],c=r[a],Math.round((u+l)/2)!==c&&s.push({time:c,pos:a/(o-1)});return s}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Hx(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return Hx(this._table,i*this._tableRange+this._minPos,!0)}}St(WL,"id","timeseries"),St(WL,"defaults",xb.defaults);const uB="label";function GL(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function Nee(n,e){const t=n.options;t&&e&&Object.assign(t,e)}function dB(n,e){n.labels=e}function hB(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:uB;const i=[];n.datasets=e.map(r=>{const s=n.datasets.find(a=>a[t]===r[t]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function Iee(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:uB;const t={labels:[],datasets:[]};return dB(t,n.labels),hB(t,n.datasets,e),t}function Dee(n,e){const{height:t=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:a,data:o,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...h}=n,p=F.useRef(null),y=F.useRef(null),x=()=>{p.current&&(y.current=new Za(p.current,{type:a,data:Iee(o,s),options:l&&{...l},plugins:c}),GL(e,y.current))},_=()=>{GL(e,null),y.current&&(y.current.destroy(),y.current=null)};return F.useEffect(()=>{!r&&y.current&&l&&Nee(y.current,l)},[r,l]),F.useEffect(()=>{!r&&y.current&&dB(y.current.config.data,o.labels)},[r,o.labels]),F.useEffect(()=>{!r&&y.current&&o.datasets&&hB(y.current.config.data,o.datasets,s)},[r,o.datasets]),F.useEffect(()=>{y.current&&(r?(_(),setTimeout(x)):y.current.update(d))},[r,l,o.labels,o.datasets,d]),F.useEffect(()=>{y.current&&(_(),setTimeout(x))},[a]),F.useEffect(()=>(x(),()=>_()),[]),sn.createElement("canvas",{ref:p,role:"img",height:t,width:i,...h},u)}const Lee=F.forwardRef(Dee);function oS(n,e){return Za.register(e),F.forwardRef((t,i)=>sn.createElement(Lee,{...t,ref:i,type:n}))}const Pu=oS("line",m1),lS=oS("bar",p1),Oee=oS("doughnut",Zf),J0=oS("pie",UC);Za.register(Jc,hc,uc,To,Co,_u,Ua,dc);const Fee=()=>{var T,E,R,I;const n=Ki();Bs();const{isDarkMode:e,toggleTheme:t}=Zi(),{user:i}=Po(),[r,s]=F.useState(0),[a,o]=F.useState(0),[l,c]=F.useState(0),[u,d]=F.useState([]),[h,p]=F.useState(!0),[y,x]=F.useState(""),[_,v]=F.useState({labels:[],datasets:[]}),[b,w]=F.useState({labels:[],datasets:[]});F.useState(null),F.useEffect(()=>{(async()=>{if(!i){n("/login");return}if(i.role!=="admin"){n("/farmer-dashboard",{replace:!0});return}p(!0),x("");try{const[B,G,Y,X,Q]=await Promise.all([tt.from("users").select("id",{count:"exact"}).eq("role","farmer"),tt.from("harvest_data").select(`
            coffee_raw_quantity,
            coffee_fine_grade,
            coffee_premium_grade,
            coffee_commercial_grade,
            harvest_date
          `),tt.from("plant_data").select("number_of_tree_planted"),tt.from("users").select("id, created_at, first_name, last_name").eq("role","farmer").order("created_at",{ascending:!1}),tt.from("harvest_data").select("harvest_date, farmer_id, farmer_detail(users(first_name, last_name))").order("harvest_date",{ascending:!1})]),L=[B.error,G.error,Y.error,X.error,Q.error].filter(Boolean);if(L.length>0)throw new Error(L[0].message);s(B.count);const W=G.data,j=W.reduce((Pe,De)=>Pe+(De.coffee_raw_quantity||0),0);o(j);const ae=Y.data.reduce((Pe,De)=>Pe+(De.number_of_tree_planted||0),0);c(ae);const me=W.reduce((Pe,De)=>Pe+(De.coffee_fine_grade||0),0),K=W.reduce((Pe,De)=>Pe+(De.coffee_premium_grade||0),0),re=W.reduce((Pe,De)=>Pe+(De.coffee_commercial_grade||0),0),oe=me+K+re;v({labels:[`Fine Grade
${(me/oe*100).toFixed(1)}%
(${me.toFixed(1)} kg)`,`Premium Grade
${(K/oe*100).toFixed(1)}%
(${K.toFixed(1)} kg)`,`Commercial Grade
${(re/oe*100).toFixed(1)}%
(${re.toFixed(1)} kg)`],datasets:[{data:[(me/oe*100).toFixed(1),(K/oe*100).toFixed(1),(re/oe*100).toFixed(1)],backgroundColor:["#6b4226","#d2a679","#f8d3ac"],hoverBackgroundColor:["#8c5c3e","#e0b58e","#fae2bb"]}]});const _e=W.reduce((Pe,De)=>{if(De.harvest_date&&De.coffee_raw_quantity){const xe=new Date(De.harvest_date),we=`${xe.getFullYear()}-${(xe.getMonth()+1).toString().padStart(2,"0")}`;Pe[we]=(Pe[we]||0)+De.coffee_raw_quantity}return Pe},{}),Ce=Object.keys(_e).sort();w({labels:Ce.map(Pe=>{const[De,xe]=Pe.split("-");return new Date(De,parseInt(xe)-1).toLocaleDateString("en-US",{month:"short",year:"numeric"})}),datasets:[{label:"Total Raw Coffee Harvest (kg)",data:Ce.map(Pe=>_e[Pe]),fill:!1,borderColor:"#6b4226",tension:.1,pointBackgroundColor:"#d2a679",pointBorderColor:"#6b4226"}]});const Ee={registrations:(X.data||[]).map(Pe=>({date:new Date(Pe.created_at).toLocaleDateString(),activity:"New Farmer Registration",farmer:`${Pe.first_name||"N/A"} ${Pe.last_name||""}`,status:"Completed"})),harvests:(Q.data||[]).map(Pe=>{var De,xe,we,$;return{date:new Date(Pe.harvest_date).toLocaleDateString(),activity:"Harvest Recorded",farmer:`${((xe=(De=Pe.farmer_detail)==null?void 0:De.users)==null?void 0:xe.first_name)||"N/A"} ${(($=(we=Pe.farmer_detail)==null?void 0:we.users)==null?void 0:$.last_name)||""}`,status:"Completed"}})};Object.keys(Ee).forEach(Pe=>{Ee[Pe].sort((De,xe)=>new Date(xe.date)-new Date(De.date))}),d(Ee)}catch(B){console.error("Failed to fetch dashboard data:",B),x(`Failed to load dashboard data: ${B.message}`)}finally{p(!1)}})()},[n,i]);const S=async()=>{await tt.auth.signOut(),n("/login")},A=[{name:"Dashboard",path:"/dashboard"},{name:"Farmer Management",path:"/user-management"},{name:"Predictive Analytics",path:"/predictive-analytics"},{name:"DSS Recommendations",path:"/dss-recommendations"},{name:"Farmer Report",path:"/farmer-reports"},{name:"Coffee Grade Predictor",path:"/coffee-grader"}],P=[{name:"Dashboard",path:"/farmer-dashboard"},{name:"User Profile",path:"/user-profile"},{name:"Predictive Analytics",path:"/predictive-analytics"},{name:"DSS Recommendations",path:"/dss-recommendations"},{name:"Coffee Grade Predictor",path:"/coffee-grader"},{name:"Land & Plant Declaration",path:"/land-declaration"},{name:"Harvest Reporting",path:"/harvest-reporting"}],k=(i==null?void 0:i.role)==="admin"?A:P;return h?g.jsx("div",{className:"min-h-screen bg-gray-50",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:g.jsxs("div",{className:"animate-pulse",children:[g.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8"}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(D=>g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[g.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),g.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4"})]},D))})]})})}):y?g.jsx("div",{className:"min-h-screen bg-gray-50",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsxs("div",{className:"flex justify-between items-center mb-8",children:[g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsx("div",{className:"text-4xl",children:""}),g.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"})]}),g.jsx("button",{onClick:S,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Logout"})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[g.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Total Farmers"}),g.jsx("p",{className:"mt-2 text-3xl font-bold text-indigo-600",children:r})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[g.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Total Harvests (kg)"}),g.jsx("p",{className:"mt-2 text-3xl font-bold text-indigo-600",children:a})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[g.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Total Plants"}),g.jsx("p",{className:"mt-2 text-3xl font-bold text-indigo-600",children:l})]})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[g.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Grade Distribution"}),g.jsx("div",{className:"h-64",children:g.jsx(J0,{data:_,options:{maintainAspectRatio:!1}})})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[g.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Seasonal Harvest"}),g.jsx("div",{className:"h-64",children:g.jsx(Pu,{data:b,options:{maintainAspectRatio:!1}})})]})]}),g.jsxs("div",{className:`rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"} p-6`,children:[g.jsx("h2",{className:`text-xl font-bold mb-6 ${e?"text-white":"text-gray-900"}`,children:"Recent Activities"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("h3",{className:`text-lg font-semibold mb-4 ${e?"text-gray-200":"text-gray-700"}`,children:"New Farmer Registrations"}),g.jsx("div",{className:`space-y-4 max-h-[400px] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-transparent hover:scrollbar-thumb-gray-500 ${e?"scrollbar-thumb-gray-600 hover:scrollbar-thumb-gray-500":""}`,children:((T=u.registrations)==null?void 0:T.length)>0?u.registrations.map((D,B)=>g.jsx("div",{className:`p-4 rounded-lg ${e?"bg-gray-700":"bg-gray-50"} hover:shadow-md transition-shadow duration-200`,children:g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{children:[g.jsx("p",{className:`font-medium ${e?"text-white":"text-gray-900"}`,children:D.farmer}),g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:D.activity})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:D.date}),g.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded-full ${D.status==="Completed"?e?"bg-green-900 text-green-200":"bg-green-100 text-green-800":e?"bg-yellow-900 text-yellow-200":"bg-yellow-100 text-yellow-800"}`,children:D.status})]})]})},`registration-${B}`)):g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"No recent farmer registrations"})})]}),g.jsxs("div",{children:[g.jsx("h3",{className:`text-lg font-semibold mb-4 ${e?"text-gray-200":"text-gray-700"}`,children:"Recent Harvest Records"}),g.jsx("div",{className:`space-y-4 max-h-[400px] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-transparent hover:scrollbar-thumb-gray-500 ${e?"scrollbar-thumb-gray-600 hover:scrollbar-thumb-gray-500":""}`,children:((E=u.harvests)==null?void 0:E.length)>0?u.harvests.map((D,B)=>g.jsx("div",{className:`p-4 rounded-lg ${e?"bg-gray-700":"bg-gray-50"} hover:shadow-md transition-shadow duration-200`,children:g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{children:[g.jsx("p",{className:`font-medium ${e?"text-white":"text-gray-900"}`,children:D.farmer}),g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:D.activity})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:D.date}),g.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded-full ${D.status==="Completed"?e?"bg-green-900 text-green-200":"bg-green-100 text-green-800":e?"bg-yellow-900 text-yellow-200":"bg-yellow-100 text-yellow-800"}`,children:D.status})]})]})},`harvest-${B}`)):g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"No recent harvest records"})})]})]})]}),g.jsx("div",{className:"mt-8 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:k.map(D=>g.jsx("button",{onClick:()=>n(D.path),className:"px-4 py-2 text-sm font-medium text-indigo-600 bg-white border border-indigo-600 rounded-md hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:D.name},D.path))})]})}):(i==null?void 0:i.role)!=="admin"?null:g.jsx(ci,{children:g.jsx("div",{className:"max-w-7xl mx-auto",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsxs("div",{className:`mb-8 ${e?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6`,children:[g.jsx("h1",{className:`text-2xl font-bold ${e?"text-white":"text-gray-900"}`,children:"Dashboard Overview"}),i&&g.jsxs("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:["Welcome back, ",i.first_name," ",i.last_name]})]}),g.jsxs("div",{className:"flex flex-row gap-6 mb-8",children:[g.jsxs("div",{className:`flex-1 p-6 rounded-lg shadow ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-lg font-medium ${e?"text-white":"text-gray-900"}`,children:"Total Farmers"}),g.jsx("p",{className:`mt-2 text-3xl font-bold ${e?"text-indigo-400":"text-indigo-600"}`,children:r})]}),g.jsxs("div",{className:`flex-1 p-6 rounded-lg shadow ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-lg font-medium ${e?"text-white":"text-gray-900"}`,children:"Total Harvests (kg)"}),g.jsx("p",{className:`mt-2 text-3xl font-bold ${e?"text-indigo-400":"text-indigo-600"}`,children:a})]}),g.jsxs("div",{className:`flex-1 p-6 rounded-lg shadow ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-lg font-medium ${e?"text-white":"text-gray-900"}`,children:"Total Plants"}),g.jsx("p",{className:`mt-2 text-3xl font-bold ${e?"text-indigo-400":"text-indigo-600"}`,children:l})]})]}),g.jsxs("div",{className:"flex flex-row gap-6 mb-8",children:[g.jsxs("div",{className:`flex-1 p-6 rounded-lg shadow ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-lg font-medium mb-4 ${e?"text-white":"text-gray-900"}`,children:"Grade Distribution"}),g.jsx("div",{className:"h-64",children:g.jsx(J0,{data:_,options:{maintainAspectRatio:!1}})})]}),g.jsxs("div",{className:`flex-1 p-6 rounded-lg shadow ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-lg font-medium mb-4 ${e?"text-white":"text-gray-900"}`,children:"Seasonal Harvest"}),g.jsx("div",{className:"h-64",children:g.jsx(Pu,{data:b,options:{maintainAspectRatio:!1}})})]})]}),g.jsxs("div",{className:`rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"} p-6`,children:[g.jsx("h2",{className:`text-xl font-bold mb-6 ${e?"text-white":"text-gray-900"}`,children:"Recent Activities"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("h3",{className:`text-lg font-semibold mb-4 ${e?"text-gray-200":"text-gray-700"}`,children:"New Farmer Registrations"}),g.jsx("div",{className:`space-y-4 max-h-[400px] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-transparent hover:scrollbar-thumb-gray-500 ${e?"scrollbar-thumb-gray-600 hover:scrollbar-thumb-gray-500":""}`,children:((R=u.registrations)==null?void 0:R.length)>0?u.registrations.map((D,B)=>g.jsx("div",{className:`p-4 rounded-lg ${e?"bg-gray-700":"bg-gray-50"} hover:shadow-md transition-shadow duration-200`,children:g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{children:[g.jsx("p",{className:`font-medium ${e?"text-white":"text-gray-900"}`,children:D.farmer}),g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:D.activity})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:D.date}),g.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded-full ${D.status==="Completed"?e?"bg-green-900 text-green-200":"bg-green-100 text-green-800":e?"bg-yellow-900 text-yellow-200":"bg-yellow-100 text-yellow-800"}`,children:D.status})]})]})},`registration-${B}`)):g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"No recent farmer registrations"})})]}),g.jsxs("div",{children:[g.jsx("h3",{className:`text-lg font-semibold mb-4 ${e?"text-gray-200":"text-gray-700"}`,children:"Recent Harvest Records"}),g.jsx("div",{className:`space-y-4 max-h-[400px] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-transparent hover:scrollbar-thumb-gray-500 ${e?"scrollbar-thumb-gray-600 hover:scrollbar-thumb-gray-500":""}`,children:((I=u.harvests)==null?void 0:I.length)>0?u.harvests.map((D,B)=>g.jsx("div",{className:`p-4 rounded-lg ${e?"bg-gray-700":"bg-gray-50"} hover:shadow-md transition-shadow duration-200`,children:g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{children:[g.jsx("p",{className:`font-medium ${e?"text-white":"text-gray-900"}`,children:D.farmer}),g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:D.activity})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:D.date}),g.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded-full ${D.status==="Completed"?e?"bg-green-900 text-green-200":"bg-green-100 text-green-800":e?"bg-yellow-900 text-yellow-200":"bg-yellow-100 text-yellow-800"}`,children:D.status})]})]})},`harvest-${B}`)):g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"No recent harvest records"})})]})]})]})]})})})};Za.register(To,Co,Xl,dc,hc,uc,Jc);const Uee=()=>{const n=Ki();Bs();const{isDarkMode:e,toggleTheme:t}=Zi(),[i,r]=F.useState(null),[s,a]=F.useState(null),[o,l]=F.useState([]),[c,u]=F.useState({}),[d,h]=F.useState(0),[p,y]=F.useState(0),[x,_]=F.useState(0),[v,b]=F.useState(0),[w,S]=F.useState(0),[A,P]=F.useState(0),[k,T]=F.useState([]),[E,R]=F.useState(!0),[I,D]=F.useState(""),[B,G]=F.useState({labels:["Raw Harvest","Dry Harvest"],datasets:[{label:"Coffee Quantity (kg)",data:[0,0],backgroundColor:["rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)"],borderColor:["rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)"],borderWidth:1}]}),[Y,X]=F.useState({labels:["Premium","Fine","Commercial"],datasets:[{label:"Grade Distribution (%)",data:[0,0,0],backgroundColor:["rgba(255, 99, 132, 0.6)","rgba(54, 162, 235, 0.6)","rgba(255, 206, 86, 0.6)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)"],borderWidth:1}]}),[Q,L]=F.useState([{label:"Premium",percentage:0,value:0,color:"rgba(255, 99, 132, 0.6)"},{label:"Fine",percentage:0,value:0,color:"rgba(54, 162, 235, 0.6)"},{label:"Commercial",percentage:0,value:0,color:"rgba(255, 206, 86, 0.6)"}]),W=K=>{switch(K==null?void 0:K.toLowerCase()){case"healthy":return e?"bg-green-900 text-green-200":"bg-green-100 text-green-800";case"diseased":return e?"bg-red-900 text-red-200":"bg-red-100 text-red-800";case"pest-affected":return e?"bg-yellow-900 text-yellow-200":"bg-yellow-100 text-yellow-800";default:return e?"bg-gray-700 text-gray-200":"bg-gray-100 text-gray-800"}},j=K=>{n(`/plant-status/${K.plant_id}`)};F.useEffect(()=>{(async()=>{R(!0),D("");const{data:{user:re}}=await tt.auth.getUser();if(!re){n("/login");return}r(re);const{data:oe,error:_e}=await tt.from("users").select("first_name, last_name, email, role").eq("email",re.email).single();if(_e){console.error("Error fetching user details:",_e.message),D("Failed to fetch your user profile. Please try again."),R(!1);return}if(r(Ce=>({...Ce,...oe})),(oe==null?void 0:oe.role)!=="farmer"){D("Access Denied: Only farmers can view this dashboard."),R(!1);return}try{const{data:Ce,error:Ee}=await tt.from("farmer_detail").select("id, farm_location, farm_size, farm_elevation").eq("id",re.id).single();if(Ee&&Ee.code!=="PGRST116")throw Ee;a(Ce);const{data:Pe,error:De}=await tt.from("plant_data").select("*").eq("farmer_id",re.id);if(De)throw De;l(Pe);const xe={};for(const Oe of Pe){const{data:Te,error:ze}=await tt.from("plant_status").select("*").eq("plant_id",Oe.plant_id).order("created_at",{ascending:!1}).limit(1).single();!ze&&Te&&(xe[Oe.plant_id]=Te)}u(xe);const we=Pe.reduce((Oe,Te)=>Oe+(Te.number_of_tree_planted||0),0);h(we);const{data:$,error:Se}=await tt.from("harvest_data").select("coffee_raw_quantity, coffee_dry_quantity, coffee_premium_grade, coffee_fine_grade, coffee_commercial_grade, harvest_date").eq("farmer_id",re.id);if(Se)throw Se;const de=$.reduce((Oe,Te)=>Oe+(Te.coffee_raw_quantity||0),0);y(de);const J=$.reduce((Oe,Te)=>Oe+(Te.coffee_dry_quantity||0),0);_(J);const ue=$.reduce((Oe,Te)=>{const ze=Te.coffee_dry_quantity||0,Je=Te.coffee_premium_grade||0;return Oe+ze*(Je/100)},0);b(Math.round(ue*100)/100);const je=$.reduce((Oe,Te)=>{const ze=Te.coffee_dry_quantity||0,Je=Te.coffee_fine_grade||0;return Oe+ze*(Je/100)},0);S(Math.round(je*100)/100);const Le=$.reduce((Oe,Te)=>{const ze=Te.coffee_dry_quantity||0,Je=Te.coffee_commercial_grade||0;return Oe+ze*(Je/100)},0);P(Math.round(Le*100)/100),G({labels:["Raw Harvest","Dry Harvest"],datasets:[{label:"Coffee Quantity (kg)",data:[de,J],backgroundColor:["rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)"],borderColor:["rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)"],borderWidth:1}]});const Xe=ue+je+Le,gt=Xe>0?ue/Xe*100:0,V=Xe>0?je/Xe*100:0,O=Xe>0?Le/Xe*100:0;X({labels:["Premium","Fine","Commercial"],datasets:[{label:"Grade Distribution (%)",data:[Math.round(gt*10)/10,Math.round(V*10)/10,Math.round(O*10)/10],backgroundColor:["rgba(255, 99, 132, 0.6)","rgba(54, 162, 235, 0.6)","rgba(255, 206, 86, 0.6)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)"],borderWidth:1}]}),L([{label:"Premium",percentage:Math.round(gt*10)/10,value:Math.round(ue*100)/100,color:"rgba(255, 99, 132, 0.6)"},{label:"Fine",percentage:Math.round(V*10)/10,value:Math.round(je*100)/100,color:"rgba(54, 162, 235, 0.6)"},{label:"Commercial",percentage:Math.round(O*10)/10,value:Math.round(Le*100)/100,color:"rgba(255, 206, 86, 0.6)"}]);const{data:ee,error:le}=await tt.from("plant_data").select("planting_date, coffee_variety").eq("farmer_id",re.id).order("planting_date",{ascending:!1}).limit(3),ge=[...$].sort((Oe,Te)=>new Date(Te.harvest_date)-new Date(Oe.harvest_date)).slice(0,3);let ye=[];!le&&ee?ye=ye.concat(ee.map(Oe=>({date:new Date(Oe.planting_date).toLocaleDateString(),activity:`New Plant Declaration: ${Oe.coffee_variety}`,status:"Completed"}))):le&&console.error("Error fetching recent plants:",le),ge&&(ye=ye.concat(ge.map(Oe=>({date:new Date(Oe.harvest_date).toLocaleDateString(),activity:"Harvest Recorded",status:"Completed"})))),ye.sort((Oe,Te)=>new Date(Te.date)-new Date(Oe.date)),T(ye.slice(0,5))}catch(Ce){console.error("Failed to fetch farmer dashboard data:",Ce),D(`Failed to load your dashboard data: ${Ce.message}`)}finally{R(!1)}})()},[n]);const te={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Raw vs. Dry Coffee Harvest (kg)"},tooltip:{callbacks:{label:function(K){let re=K.dataset.label||"";return re&&(re+=": "),K.parsed.y!==null&&(re+=K.parsed.y.toFixed(2)+" kg"),re}}}},scales:{x:{title:{display:!0,text:"Harvest Type"}},y:{title:{display:!0,text:"Quantity (kg)"},beginAtZero:!0}}},ae={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Distribution of Graded Yield (kg)"},tooltip:{callbacks:{label:function(K){let re=K.label||"";return re&&(re+=": "),K.parsed!==null&&(re+=K.parsed.toFixed(2)+" kg"),re}}}}},me=({data:K})=>g.jsx("div",{className:"flex flex-col gap-4 p-4",children:K.map((re,oe)=>g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:re.color}}),g.jsxs("div",{className:"flex flex-col",children:[g.jsx("span",{className:"font-medium",children:re.label}),g.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[g.jsxs("span",{children:[re.percentage,"%"]}),g.jsx("span",{className:"mx-1",children:""}),g.jsxs("span",{children:[re.value," kg"]})]})]})]},oe))});return E?g.jsx(ci,{children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:g.jsxs("div",{className:"animate-pulse",children:[g.jsx("div",{className:`h-8 ${e?"bg-gray-700":"bg-gray-200"} rounded w-1/4 mb-8`}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(K=>g.jsxs("div",{className:`${e?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow`,children:[g.jsx("div",{className:`h-4 ${e?"bg-gray-700":"bg-gray-200"} rounded w-1/2 mb-4`}),g.jsx("div",{className:`h-8 ${e?"bg-gray-700":"bg-gray-200"} rounded w-3/4`})]},K))})]})})}):I?g.jsx(ci,{children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:g.jsxs("div",{className:"text-center",children:[g.jsx("h1",{className:`text-2xl font-bold ${e?"text-white":"text-gray-900"}`,children:"Error"}),g.jsx("p",{className:`mt-2 ${e?"text-gray-400":"text-gray-500"}`,children:I})]})})}):g.jsx(ci,{children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsxs("div",{className:`mb-8 ${e?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6`,children:[g.jsx("h2",{className:`text-3xl font-bold ${e?"text-white":"text-gray-900"}`,children:"Farmer Dashboard"}),i&&g.jsxs("p",{className:`mt-2 text-lg ${e?"text-gray-300":"text-gray-600"}`,children:["Welcome back, ",g.jsxs("span",{className:"font-semibold",children:[i.first_name," ",i.last_name]})]}),g.jsx("p",{className:`mt-2 ${e?"text-gray-400":"text-gray-500"}`,children:"Monitor your farm's performance and activities"})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[g.jsx("div",{className:`p-6 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"} hover:shadow-xl transition-shadow duration-200`,children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("h3",{className:`text-lg font-medium ${e?"text-white":"text-gray-900"}`,children:"Total Plants"}),g.jsx("p",{className:`mt-2 text-3xl font-bold ${e?"text-indigo-400":"text-indigo-600"}`,children:d})]}),g.jsx("div",{className:`p-3 rounded-full ${e?"bg-indigo-900":"bg-indigo-100"}`,children:g.jsx("svg",{className:`w-6 h-6 ${e?"text-indigo-400":"text-indigo-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]})}),g.jsx("div",{className:`p-6 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"} hover:shadow-xl transition-shadow duration-200`,children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("h3",{className:`text-lg font-medium ${e?"text-white":"text-gray-900"}`,children:"Raw Harvest"}),g.jsxs("p",{className:`mt-2 text-3xl font-bold ${e?"text-green-400":"text-green-600"}`,children:[p," kg"]})]}),g.jsx("div",{className:`p-3 rounded-full ${e?"bg-green-900":"bg-green-100"}`,children:g.jsx("svg",{className:`w-6 h-6 ${e?"text-green-400":"text-green-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"})})})]})}),g.jsx("div",{className:`p-6 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"} hover:shadow-xl transition-shadow duration-200`,children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("h3",{className:`text-lg font-medium ${e?"text-white":"text-gray-900"}`,children:"Dry Harvest"}),g.jsxs("p",{className:`mt-2 text-3xl font-bold ${e?"text-amber-400":"text-amber-600"}`,children:[x," kg"]})]}),g.jsx("div",{className:`p-3 rounded-full ${e?"bg-amber-900":"bg-amber-100"}`,children:g.jsx("svg",{className:`w-6 h-6 ${e?"text-amber-400":"text-amber-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})]})})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[g.jsxs("div",{className:`p-6 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"} hover:shadow-xl transition-shadow duration-200`,children:[g.jsx("h3",{className:`text-lg font-medium mb-4 ${e?"text-white":"text-gray-900"}`,children:"Harvest Distribution"}),g.jsx("div",{className:"h-64",children:g.jsx(lS,{data:B,options:te})})]}),g.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-8 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[g.jsxs("div",{className:"w-full md:w-1/2 max-w-md",children:[g.jsx("h3",{className:"text-lg font-semibold mb-4 text-center",children:"Grade Distribution"}),g.jsx(J0,{data:Y,options:ae})]}),g.jsx("div",{className:"w-full md:w-1/2 max-w-md",children:g.jsx(me,{data:Q})})]})]}),g.jsxs("div",{className:`mt-8 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"} hover:shadow-xl transition-shadow duration-200`,children:[g.jsxs("div",{className:`px-6 py-4 border-b ${e?"border-gray-700":"border-gray-200"}`,children:[g.jsx("h3",{className:`text-lg font-medium ${e?"text-white":"text-gray-900"}`,children:"Your Current Plants"}),g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"}`,children:"Click on a plant to view its status and manage it."})]}),g.jsx("div",{className:"p-6",children:o.length===0?g.jsxs("div",{className:"text-center py-8",children:[g.jsx("p",{className:`mb-4 text-lg ${e?"text-gray-300":"text-gray-600"}`,children:"Please declare plant first."}),g.jsx("button",{className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",onClick:()=>n("/land-declaration"),children:"Declare Plant"})]}):g.jsx("div",{className:"space-y-4",children:o.map(K=>g.jsx("div",{className:`p-6 rounded-lg shadow-md ${e?"bg-gray-700":"bg-gray-50"} 
                      hover:shadow-lg transition-all duration-200 cursor-pointer`,onClick:()=>j(K),children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsx("h3",{className:`text-lg font-medium ${e?"text-white":"text-gray-900"}`,children:K.coffee_variety}),g.jsxs("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"}`,children:["Trees: ",K.number_of_tree_planted]}),g.jsxs("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"}`,children:["Planted: ",new Date(K.planting_date).toLocaleDateString()]})]}),c[K.plant_id]&&g.jsx("div",{className:`px-4 py-2 rounded-full text-sm font-medium
                          ${W(c[K.plant_id].status)}`,children:c[K.plant_id].status}),g.jsx("div",{className:`ml-4 p-2 rounded-full ${e?"bg-gray-600 text-indigo-400":"bg-gray-200 text-indigo-600"}`,children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]})},K.plant_id))})})]}),g.jsxs("div",{className:`mt-8 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"} hover:shadow-xl transition-shadow duration-200`,children:[g.jsx("div",{className:`px-6 py-4 border-b ${e?"border-gray-700":"border-gray-200"}`,children:g.jsx("h3",{className:`text-lg font-medium ${e?"text-white":"text-gray-900"}`,children:"Recent Activities"})}),g.jsx("div",{className:`divide-y ${e?"divide-gray-700":"divide-gray-200"}`,children:k.map((K,re)=>g.jsx("div",{className:"px-6 py-4",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:`font-medium ${e?"text-white":"text-gray-900"}`,children:K.activity}),g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:K.date})]}),g.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium
                    ${e?"bg-green-900 text-green-200":"bg-green-100 text-green-800"}`,children:K.status})]})},re))})]})]})})},WC=({value:n,onChange:e,options:t,placeholder:i,label:r,isDarkMode:s,icon:a})=>{const[o,l]=F.useState(!1),[c,u]=F.useState([]),d=F.useRef(null);F.useEffect(()=>{if(n){const y=t.filter(x=>x.toLowerCase().includes(n.toLowerCase()));u(y)}else u(t)},[n,t]),F.useEffect(()=>{const y=x=>{d.current&&!d.current.contains(x.target)&&l(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const h=y=>{e(y.target.value),l(!0)},p=y=>{e(y),l(!1)};return g.jsxs("div",{className:"relative",ref:d,children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-300":"text-gray-700"}`,children:r}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"text",value:n,onChange:h,onFocus:()=>l(!0),placeholder:i,className:`mt-1 block w-full rounded-lg border-2 px-4 py-2.5 
            placeholder-gray-400 shadow-sm focus:ring-2 focus:ring-blue-500 
            focus:ring-opacity-50 transition-colors duration-200
            ${s?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`}),g.jsx("div",{className:`absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none ${s?"text-gray-400":"text-gray-500"}`,children:a})]}),o&&c.length>0&&g.jsx("div",{className:`absolute z-10 w-full mt-1 rounded-md shadow-lg ${s?"bg-gray-700":"bg-white"} max-h-60 overflow-auto`,children:g.jsx("ul",{className:"py-1",children:c.map((y,x)=>g.jsx("li",{onClick:()=>p(y),className:`px-4 py-2 cursor-pointer ${s?"text-gray-200 hover:bg-gray-600":"text-gray-900 hover:bg-gray-100"}`,children:y},x))})})]})},jee=()=>{const n=Ki();Bs();const{isDarkMode:e,toggleTheme:t}=Zi(),[i,r]=F.useState([]),[s,a]=F.useState([]),[o,l]=F.useState(null),[c,u]=F.useState(!1),[d,h]=F.useState(null),[p,y]=F.useState(""),[x,_]=F.useState(!1),[v,b]=F.useState([]),[w,S]=F.useState({first_name:"",middle_name:"",last_name:"",email:"",password:"",role:"farmer"}),A=F.useCallback(async()=>{const{data:I,error:D}=await tt.from("users").select("*").order("last_name",{ascending:!0});if(D)console.error("Error fetching all users:",D.message);else{r(I),a(I);const B=I.map(G=>`${G.first_name} ${G.middle_name||""} ${G.last_name}`.trim());b([...new Set(B)])}},[]);F.useEffect(()=>{(async()=>{const{data:{user:D}}=await tt.auth.getUser();if(!D){n("/login");return}const{data:B,error:G}=await tt.from("users").select("first_name, last_name, role").eq("email",D.email).single();if(G){console.error("Error fetching logged-in user details:",G.message),n("/login");return}l(B),B.role==="admin"?A():n("/dashboard",{replace:!0})})()},[n,A]),F.useEffect(()=>{if(p){const I=i.filter(D=>`${D.first_name} ${D.middle_name||""} ${D.last_name}`.toLowerCase().includes(p.toLowerCase()));a(I)}else a(i)},[p,i]);const P=I=>{S({...w,[I.target.name]:I.target.value})},k=()=>{h(null),S({first_name:"",middle_name:"",last_name:"",email:"",password:"",role:"farmer"}),u(!0)},T=async()=>{if(d){const{id:I,email:D}=d,{first_name:B,middle_name:G,last_name:Y,role:X}=w,{error:Q}=await tt.from("users").update({first_name:B,middle_name:G,last_name:Y,role:X}).eq("id",I);Q?alert("Error updating user: "+Q.message):(alert("User updated successfully!"),u(!1),A())}else{const{first_name:I,middle_name:D,last_name:B,email:G,password:Y}=w,X="farmer";if(!Y){alert("Password is required for new user creation.");return}try{const{data:Q,error:L}=await tt.auth.signUp({email:G,password:Y,options:{data:{first_name:I,last_name:B,role:X}}});if(L)throw L;const{data:W,error:j}=await tt.from("users").select("id").eq("email",G).single();if(j&&j.code!=="PGRST116")throw j;if(!W){const{data:te,error:ae}=await tt.from("users").insert([{first_name:I,middle_name:D,last_name:B,email:G,role:X}]);if(ae)throw ae}alert("New user added successfully!"),u(!1),A()}catch(Q){alert("Error adding new user: "+Q.message),console.error("Error details:",Q)}}},E=async I=>{if(window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{const{error:D}=await tt.from("users").delete().eq("id",I);if(D)throw D;const{error:B}=await tt.auth.admin.deleteUser(I);B&&console.warn("Could not delete user from Supabase Auth:",B.message),alert("User deleted successfully!"),A()}catch(D){alert("Error deleting user: "+D.message),console.error("Delete error details:",D)}},R=I=>{n(`/farmer-profile/${I}`)};return g.jsx(ci,{children:g.jsxs("div",{className:"max-w-7xl mx-auto",children:[g.jsxs("div",{className:`mb-8 ${e?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6`,children:[g.jsx("h2",{className:`text-2xl font-bold ${e?"text-white":"text-gray-900"}`,children:"Farmer Management"}),o&&g.jsxs("p",{className:`mt-2 text-lg ${e?"text-gray-400":"text-gray-700"}`,children:["Welcome back, ",o.first_name," ",o.last_name]}),g.jsx("p",{className:`mt-2 text-sm ${e?"text-gray-400":"text-gray-700"}`,children:"Manage and monitor farmer accounts"})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[g.jsx("div",{className:`p-6 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"}`,children:g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:`p-3 rounded-full ${e?"bg-blue-900":"bg-blue-100"}`,children:g.jsx("svg",{className:`w-6 h-6 ${e?"text-blue-400":"text-blue-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),g.jsxs("div",{className:"ml-4",children:[g.jsx("p",{className:`text-sm font-medium ${e?"text-gray-400":"text-gray-600"}`,children:"Total Farmers"}),g.jsx("p",{className:`text-2xl font-semibold ${e?"text-white":"text-gray-900"}`,children:i.filter(I=>I.role==="farmer").length})]})]})}),g.jsx("div",{className:`p-6 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"}`,children:g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:`p-3 rounded-full ${e?"bg-green-900":"bg-green-100"}`,children:g.jsx("svg",{className:`w-6 h-6 ${e?"text-green-400":"text-green-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),g.jsxs("div",{className:"ml-4",children:[g.jsx("p",{className:`text-sm font-medium ${e?"text-gray-400":"text-gray-600"}`,children:"Active Farmers"}),g.jsx("p",{className:`text-2xl font-semibold ${e?"text-white":"text-gray-900"}`,children:i.filter(I=>I.role==="farmer").length})]})]})})]}),g.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[g.jsx("div",{className:"flex-1 max-w-md",children:g.jsx(WC,{value:p,onChange:y,options:v,placeholder:"Search users...",label:"",isDarkMode:e,icon:g.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 20 20",children:g.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})})}),g.jsxs("button",{onClick:k,className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center space-x-2
              bg-indigo-600 hover:bg-indigo-700 text-white`,children:[g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),g.jsx("span",{children:"Add New User"})]})]}),g.jsx("div",{className:`rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"} p-6`,children:x?g.jsx("div",{className:"space-y-4",children:[1,2,3].map(I=>g.jsx("div",{className:`rounded-lg ${e?"bg-gray-700":"bg-gray-50"} p-4 animate-pulse`,children:g.jsxs("div",{className:"flex-1",children:[g.jsx("div",{className:`h-4 ${e?"bg-gray-600":"bg-gray-200"} rounded w-3/4 mb-2`}),g.jsx("div",{className:`h-3 ${e?"bg-gray-600":"bg-gray-200"} rounded w-1/2`})]})},I))}):g.jsx("div",{className:"space-y-4",children:s.filter(I=>I.role!=="admin").map(I=>g.jsxs("div",{onClick:()=>R(I.id),className:`rounded-lg ${e?"bg-gray-700 hover:bg-gray-600":"bg-gray-50 hover:bg-gray-100"} p-4 transition-all duration-200 shadow-sm hover:shadow-md cursor-pointer`,children:[g.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0",children:[g.jsxs("div",{children:[g.jsxs("h3",{className:`font-medium ${e?"text-white":"text-gray-900"}`,children:[I.first_name," ",I.middle_name," ",I.last_name]}),g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:I.email})]}),g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium
                        ${e?"bg-green-900 text-green-200":"bg-green-100 text-green-800"}`,children:"Active"}),g.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium
                        ${e?"bg-blue-900 text-blue-200":"bg-blue-100 text-blue-800"}`,children:I.role})]})]}),g.jsx("div",{className:`pt-3 mt-3 border-t ${e?"border-gray-600":"border-gray-200"}`,children:g.jsx("div",{className:"flex justify-end space-x-3",children:g.jsxs("button",{onClick:D=>{D.stopPropagation(),E(I.id)},className:`flex items-center px-3 py-1.5 rounded-lg text-sm transition-colors
                          ${e?"bg-red-900 text-white hover:bg-red-800":"bg-red-50 text-red-700 hover:bg-red-100 border border-red-300"}`,children:[g.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})})})]},I.id))})}),c&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:`rounded-lg shadow-xl max-w-md w-full ${e?"bg-gray-800":"bg-white"} p-6`,children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h2",{className:`text-xl font-bold ${e?"text-white":"text-gray-900"}`,children:d?"Edit User":"Add New User"}),g.jsx("button",{onClick:()=>u(!1),className:`rounded-full p-1 hover:bg-opacity-80 transition-colors ${e?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"First Name"}),g.jsx("input",{type:"text",name:"first_name",value:w.first_name,onChange:P,className:`w-full px-3 py-2 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-indigo-500":"bg-white border-gray-300 text-gray-900 focus:border-indigo-500"} focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50 transition-colors`})]}),g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Middle Name"}),g.jsx("input",{type:"text",name:"middle_name",value:w.middle_name,onChange:P,className:`w-full px-3 py-2 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-indigo-500":"bg-white border-gray-300 text-gray-900 focus:border-indigo-500"} focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50 transition-colors`})]}),g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Last Name"}),g.jsx("input",{type:"text",name:"last_name",value:w.last_name,onChange:P,className:`w-full px-3 py-2 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-indigo-500":"bg-white border-gray-300 text-gray-900 focus:border-indigo-500"} focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50 transition-colors`})]}),g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Email"}),g.jsx("input",{type:"email",name:"email",value:w.email,onChange:P,className:`w-full px-3 py-2 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-indigo-500":"bg-white border-gray-300 text-gray-900 focus:border-indigo-500"} focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50 transition-colors`})]}),!d&&g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Password"}),g.jsx("input",{type:"password",name:"password",value:w.password,onChange:P,className:`w-full px-3 py-2 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-indigo-500":"bg-white border-gray-300 text-gray-900 focus:border-indigo-500"} focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50 transition-colors`})]}),d&&g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Role"}),g.jsxs("select",{name:"role",value:w.role,onChange:P,className:`w-full px-3 py-2 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-indigo-500":"bg-white border-gray-300 text-gray-900 focus:border-indigo-500"} focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50 transition-colors`,children:[g.jsx("option",{value:"farmer",children:"Farmer"}),g.jsx("option",{value:"admin",children:"Admin"})]})]}),g.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[g.jsx("button",{onClick:()=>u(!1),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Cancel"}),g.jsx("button",{onClick:T,className:"px-4 py-2 rounded-lg text-sm font-medium bg-indigo-600 text-white hover:bg-indigo-700 transition-colors",children:d?"Save Changes":"Add User"})]})]})]})})]})})},zee=()=>{const n=Ki();Bs();const{isDarkMode:e,toggleTheme:t}=Zi(),{user:i}=Po();F.useState(null);const[r,s]=F.useState(!0),[a,o]=F.useState(""),[l,c]=F.useState({firstName:"",middleName:"",lastName:""}),[u,d]=F.useState({newPassword:"",confirmNewPassword:""}),[h,p]=F.useState("");F.useEffect(()=>{(async()=>{if(!i){n("/login");return}try{const{data:A,error:P}=await tt.from("users").select("first_name, middle_name, last_name").eq("id",i.id).single();if(P)throw P;c({firstName:A.first_name||"",middleName:A.middle_name||"",lastName:A.last_name||""})}catch(A){console.error("Error fetching user profile:",A.message),o("Failed to load user profile. Please try again.")}finally{s(!1)}})()},[n,i]);const y=S=>{const{name:A,value:P}=S.target;c(k=>({...k,[A]:P}))},x=S=>{const{name:A,value:P}=S.target;d(k=>({...k,[A]:P}))},_=async S=>{S.preventDefault(),o(""),p("");try{const{error:A}=await tt.from("users").update({first_name:l.firstName,middle_name:l.middleName,last_name:l.lastName}).eq("id",i==null?void 0:i.id);if(A)throw A;o("Profile updated successfully!")}catch(A){console.error("Error updating profile:",A.message),o("Error updating profile: "+A.message)}},v=async S=>{S.preventDefault(),p(""),o("");const{newPassword:A,confirmNewPassword:P}=u;if(A!==P){p("Passwords do not match.");return}if(A.length<6){p("Password must be at least 6 characters long.");return}try{const{error:k}=await tt.auth.updateUser({password:A});if(k)throw k;p("Password changed successfully!"),d({newPassword:"",confirmNewPassword:""})}catch(k){console.error("Error changing password:",k),p("Error changing password: "+k.message)}},b=[{name:"Dashboard",path:"/dashboard"},{name:"User Management",path:"/user-management"},{name:"Predictive Analytics",path:"/predictive-analytics"},{name:"Data Entry",path:"/data-entry"},{name:"DSS Recommendations",path:"/dss-recommendations"},{name:"Land & Plant Declaration",path:"/land-declaration"}],w=[{name:"Dashboard",path:"/farmer-dashboard"},{name:"User Profile",path:"/user-profile"},{name:"Predictive Analytics",path:"/predictive-analytics"},{name:"DSS Recommendations",path:"/dss-recommendations"},{name:"Land & Plant Declaration",path:"/land-declaration"},{name:"Harvest Reporting",path:"/harvest-reporting"}];return i==null||i.role,r?g.jsx(ci,{children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:g.jsxs("div",{className:"animate-pulse",children:[g.jsx("div",{className:`h-8 ${e?"bg-gray-700":"bg-gray-200"} rounded w-1/4 mb-8`}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(S=>g.jsxs("div",{className:`${e?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow`,children:[g.jsx("div",{className:`h-4 ${e?"bg-gray-700":"bg-gray-200"} rounded w-1/2 mb-4`}),g.jsx("div",{className:`h-8 ${e?"bg-gray-700":"bg-gray-200"} rounded w-3/4`})]},S))})]})})}):g.jsx(ci,{children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsxs("div",{className:"mb-8",children:[g.jsx("h1",{className:`text-3xl font-bold ${e?"text-white":"text-gray-900"}`,children:"User Profile"}),g.jsx("p",{className:`mt-2 text-sm ${e?"text-gray-400":"text-gray-600"}`,children:"Manage your account settings and preferences"})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[g.jsxs("div",{className:`${e?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow`,children:[g.jsx("h2",{className:`text-xl font-semibold mb-4 ${e?"text-white":"text-gray-900"}`,children:"Personal Information"}),g.jsx("form",{onSubmit:_,children:g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"firstName",className:`block text-sm font-medium ${e?"text-gray-300":"text-gray-700"}`,children:"First Name"}),g.jsx("input",{type:"text",id:"firstName",name:"firstName",value:l.firstName,onChange:y,className:`mt-1 block w-full rounded-md border-2 px-4 py-2 ${e?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"middleName",className:`block text-sm font-medium ${e?"text-gray-300":"text-gray-700"}`,children:"Middle Name"}),g.jsx("input",{type:"text",id:"middleName",name:"middleName",value:l.middleName,onChange:y,className:`mt-1 block w-full rounded-md border-2 px-4 py-2 ${e?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"lastName",className:`block text-sm font-medium ${e?"text-gray-300":"text-gray-700"}`,children:"Last Name"}),g.jsx("input",{type:"text",id:"lastName",name:"lastName",value:l.lastName,onChange:y,className:`mt-1 block w-full rounded-md border-2 px-4 py-2 ${e?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`})]}),g.jsx("div",{children:g.jsx("button",{type:"submit",className:"w-full px-4 py-2 text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 text-white bg-blue-600 hover:bg-blue-700 focus:ring-blue-500",children:"Save Changes"})})]})})]}),g.jsxs("div",{className:`${e?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow`,children:[g.jsx("h2",{className:`text-xl font-semibold mb-4 ${e?"text-white":"text-gray-900"}`,children:"Change Password"}),g.jsx("form",{onSubmit:v,children:g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"newPassword",className:`block text-sm font-medium ${e?"text-gray-300":"text-gray-700"}`,children:"New Password"}),g.jsx("input",{type:"password",id:"newPassword",name:"newPassword",value:u.newPassword,onChange:x,className:`mt-1 block w-full rounded-md border-2 px-4 py-2 ${e?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"confirmNewPassword",className:`block text-sm font-medium ${e?"text-gray-300":"text-gray-700"}`,children:"Confirm New Password"}),g.jsx("input",{type:"password",id:"confirmNewPassword",name:"confirmNewPassword",value:u.confirmNewPassword,onChange:x,className:`mt-1 block w-full rounded-md border-2 px-4 py-2 ${e?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`})]}),g.jsx("div",{children:g.jsx("button",{type:"submit",className:"w-full px-4 py-2 text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 text-white bg-blue-600 hover:bg-blue-700 focus:ring-blue-500",children:"Change Password"})})]})})]})]}),a&&g.jsx("div",{className:`mt-4 p-4 rounded-md ${a.includes("successfully")?e?"bg-green-900 text-green-200":"bg-green-100 text-green-800":e?"bg-red-900 text-red-200":"bg-red-100 text-red-800"}`,children:a}),h&&g.jsx("div",{className:`mt-4 p-4 rounded-md ${h.includes("successfully")?e?"bg-green-900 text-green-200":"bg-green-100 text-green-800":e?"bg-red-900 text-red-200":"bg-red-100 text-red-800"}`,children:h})]})})},fB="https://api.open-meteo.com/v1",Bee=async(n,e,t=30)=>{try{const i=`${fB}/forecast?latitude=${n}&longitude=${e}&past_days=${t}&daily=temperature_2m_mean,rain_sum&timezone=auto`,r=await fetch(i),s=await r.json();if(!r.ok)throw new Error("Failed to fetch weather data");const a=s.daily.temperature_2m_mean,o=s.daily.rain_sum,l=a.reduce((u,d)=>u+d,0)/a.length,c=o.reduce((u,d)=>u+d,0);return{temperature:l,rainfall:c}}catch(i){throw console.error("Error fetching weather data:",i),i}},Hee=async(n,e,t=7)=>{try{const i=`${fB}/forecast?latitude=${n}&longitude=${e}&daily=temperature_2m_mean,rain_sum&forecast_days=${t}&timezone=auto`,r=await fetch(i),s=await r.json();if(!r.ok)throw new Error("Failed to fetch weather forecast");const a=s.daily.temperature_2m_mean,o=s.daily.rain_sum,l=a.reduce((u,d)=>u+d,0)/a.length,c=o.reduce((u,d)=>u+d,0);return{temperature:l,rainfall:c}}catch(i){throw console.error("Error fetching weather forecast:",i),i}};class pB{constructor(){this.data=[],this.seasonalPatterns={wetSeason:{weight:1.2,optimal:{min:90,max:120}},drySeason:{weight:.8,optimal:{min:70,max:90}},transitional:{weight:1,optimal:{min:80,max:100}}}}addDataPoint(e,t){this.data.push({value:e,timestamp:new Date(t)}),this.data.sort((i,r)=>i.timestamp-r.timestamp)}getTropicalSeason(e){const t=e.getMonth();return t>=10||t<=1?"wetSeason":t>=5&&t<=8?"drySeason":"transitional"}calculateSeasonalWMA(e=7){if(this.data.length<e)return null;const t=this.data.slice(-e);let i=0,r=0;return t.forEach((s,a)=>{const o=this.getTropicalSeason(s.timestamp),l=this.seasonalPatterns[o].weight,c=(a+1)/e,u=l*c;i+=s.value*u,r+=u}),i/r}getSeasonalGrowthTrend(e=7){if(this.data.length<e)return"stable";const t=this.data.slice(-e),i={};t.forEach(o=>{const l=this.getTropicalSeason(o.timestamp);i[l]||(i[l]=[]),i[l].push(o.value)});let r=0,s=0;Object.values(i).forEach(o=>{if(o.length>1){const l=(o[o.length-1]-o[0])/o[0];r+=l,s++}});const a=s>0?r/s:0;return a>.05?"increasing":a<-.05?"decreasing":"stable"}getSeasonalForecast(e=90){const t=[],i=new Date;let s=this.calculateSeasonalWMA(7)||100;const a=this.calculateBaseGrowthRate();for(let o=0;o<e;o++){const l=new Date(i);l.setDate(l.getDate()+o);const c=this.getTropicalSeason(l),{weight:u,optimal:d}=this.seasonalPatterns[c],h=a*u,p=1+(Math.random()*.02-.01);s*=(1+h)*p,s=Math.max(d.min,Math.min(d.max,s)),t.push({day:o+1,date:l.toISOString(),season:c,predictedValue:s,optimal:d,growthRate:h})}return t}calculateBaseGrowthRate(){if(this.data.length<2)return .001;const e={};this.data.forEach(s=>{const a=this.getTropicalSeason(s.timestamp);e[a]||(e[a]=[]),e[a].push(s)});let t=0,i=0;Object.entries(e).forEach(([s,a])=>{if(a.length>1){a.sort((u,d)=>u.timestamp-d.timestamp);const o=a[0].value,l=a[a.length-1].value,c=(a[a.length-1].timestamp-a[0].timestamp)/(1e3*60*60*24);if(c>0){const u=Math.pow(l/o,1/c)-1;t+=u,i++}}});const r=i>0?t/i:.001;return Math.max(-.05,Math.min(.05,r))}getSeasonalYieldStats(){const e={wetSeason:{total:0,count:0,min:1/0,max:-1/0},drySeason:{total:0,count:0,min:1/0,max:-1/0},transitional:{total:0,count:0,min:1/0,max:-1/0}};return this.data.forEach(t=>{const i=this.getTropicalSeason(t.timestamp);e[i].total+=t.value,e[i].count++,e[i].min=Math.min(e[i].min,t.value),e[i].max=Math.max(e[i].max,t.value)}),Object.keys(e).forEach(t=>{e[t].count>0?(e[t].average=e[t].total/e[t].count,e[t].min===1/0&&(e[t].min=0),e[t].max===-1/0&&(e[t].max=0)):e[t]={average:0,min:0,max:0,count:0}}),e}predictNextValue(){if(this.data.length<2)return null;const e=this.data.slice(-7),t=e.map(s=>s.value),i=t.reduce((s,a)=>s+a,0)/t.length,r=this.calculateTrend(e);return Math.max(0,i*(1+r))}predictNextSeasonalValue(){if(this.data.length<2)return null;const e=this.getTropicalSeason(new Date),t=this.data.filter(s=>this.getTropicalSeason(s.timestamp)===e);if(t.length===0)return this.predictNextValue();const i=t.reduce((s,a)=>s+a.value,0)/t.length,r=this.seasonalPatterns[e];return Math.max(0,i*r.weight)}calculateTrend(e){if(e.length<2)return 0;const t=e.map(u=>u.value),i=t.length;let r=0,s=0,a=0,o=0;t.forEach((u,d)=>{r+=d,s+=u,a+=d*u,o+=d*d});const l=(i*a-r*s)/(i*o-r*r),c=s/i;return l/c}}class Vee{constructor(){this.growthAnalyzer=new pB,this.recommendations=[],this.seasonalYieldTargets={wetSeason:{min:600,target:750,max:900,description:"Main growing season with optimal rainfall"},drySeason:{min:400,target:500,max:650,description:"Reduced yield due to water stress"},transitional:{min:500,target:600,max:750,description:"Moderate growth with changing conditions"}}}addGrowthData(e,t){if(typeof e!="number"||e<0)throw new Error("Growth value must be a positive number");this.growthAnalyzer.addDataPoint(e,t)}validateEnvironmentalParams(e,t,i){if(typeof e!="number"||e<=0)throw new Error("Temperature must be a positive number");if(typeof t!="number"||t<=0)throw new Error("Humidity must be a positive number");if(typeof i!="number"||i<=0)throw new Error("pH must be a positive number");if(e<15||e>35)throw new Error("Temperature must be between 15C and 35C");if(t<30||t>100)throw new Error("Humidity must be between 30% and 100%");if(i<4||i>8)throw new Error("pH must be between 4 and 8")}analyzeConditions(e,t,i){try{this.validateEnvironmentalParams(e,t,i);const r=this.growthAnalyzer.getSeasonalGrowthTrend(),s=this.growthAnalyzer.predictNextSeasonalValue(),a=[];return e<20?a.push({type:"temperature",severity:"high",message:"Temperature is too low. Consider increasing greenhouse temperature."}):e>28&&a.push({type:"temperature",severity:"high",message:"Temperature is too high. Consider cooling measures."}),t<60?a.push({type:"humidity",severity:"medium",message:"Humidity is low. Consider increasing misting frequency."}):t>80&&a.push({type:"humidity",severity:"high",message:"Humidity is too high. Improve ventilation."}),i<6?a.push({type:"soil",severity:"medium",message:"Soil pH is too acidic. Consider pH adjustment."}):i>7&&a.push({type:"soil",severity:"medium",message:"Soil pH is too alkaline. Consider pH adjustment."}),r==="decreasing"&&a.push({type:"growth",severity:"high",message:"Growth rate is declining. Review recent environmental changes."}),this.recommendations=a,{growthTrend:r,predictedNextValue:s,recommendations:a}}catch(r){return console.error("Error in analyzeConditions:",r),{growthTrend:"stable",predictedNextValue:null,recommendations:[{type:"error",severity:"high",message:`Analysis error: ${r.message}`}]}}}getRecommendations(){return this.recommendations}getGrowthForecast(e=90){try{return this.growthAnalyzer.getSeasonalForecast(e)}catch(t){return console.error("Error in getGrowthForecast:",t),Array(e).fill().map((i,r)=>({day:r+1,date:new Date(Date.now()+r*24*60*60*1e3).toISOString(),season:this.growthAnalyzer.getSeason(new Date),predictedValue:0,optimal:{min:0,max:0}}))}}getSeasonalYieldForecast(){try{const e=this.growthAnalyzer.getSeasonalYieldStats(),t=this.growthAnalyzer.getTropicalSeason(new Date),i={};for(const r of Object.keys(this.seasonalYieldTargets)){const s=e[r]||{average:0,min:0,max:0,count:0},a=this.seasonalYieldTargets[r],o=Math.min(s.count/5,1)*100;let l=s.average;if(r===t){const c=this.calculateEnvironmentalFactor();l*=c}i[r]={predictedYield:Math.round(l),target:a.target,confidence:o,variance:{min:Math.round(l*.9),max:Math.round(l*1.1)},historical:{average:Math.round(s.average),min:Math.round(s.min),max:Math.round(s.max)},status:this.getYieldStatus(l,a)}}return i}catch(e){return console.error("Error in getSeasonalYieldForecast:",e),null}}calculateEnvironmentalFactor(){try{const e=this.growthAnalyzer.getTropicalSeason(new Date),t=this.getRecommendations(),i=this.growthAnalyzer.seasonalPatterns[e],r={high:.8,medium:.9,low:.95};let s=i.weight;return t.forEach(a=>{s*=r[a.severity]||1}),Math.max(.6,s)}catch(e){return console.error("Error calculating environmental factor:",e),1}}getYieldStatus(e,t){return e>=t.target?"optimal":e>=t.min?"acceptable":"below_target"}getSeasonalAnalysis(){try{const e=this.getGrowthForecast(),t=this.getSeasonalYieldForecast();return{currentSeason:this.growthAnalyzer.getTropicalSeason(new Date),growthForecast:e,yieldForecast:t,seasonalPatterns:this.growthAnalyzer.seasonalPatterns,recommendations:this.generateSeasonalRecommendations(t)}}catch(e){return console.error("Error in getSeasonalAnalysis:",e),null}}generateSeasonalRecommendations(e){try{const t=this.growthAnalyzer.getTropicalSeason(new Date),i=[...this.recommendations],r=e[t];if(!r)return i;r.status==="below_target"&&i.push({type:"yield",severity:"high",message:`Current yield trajectory is below target for ${this.getSeasonDisplayName(t)}. Consider implementing intensive care measures.`});const s={wetSeason:["Monitor for fungal diseases due to high humidity","Ensure proper drainage to prevent waterlogging","Implement disease prevention measures","Consider reducing irrigation frequency"],drySeason:["Increase irrigation frequency","Apply mulch to retain soil moisture","Provide shade protection during peak heat","Monitor for drought stress symptoms"],transitional:["Adjust irrigation based on rainfall patterns","Prepare for upcoming seasonal changes","Monitor temperature and humidity fluctuations","Balance nutrient applications"]};return i.push({type:"seasonal",severity:"medium",message:s[t][0]}),s[t].slice(1).forEach(a=>{i.push({type:"seasonal_tip",severity:"low",message:a})}),i}catch(t){return console.error("Error generating seasonal recommendations:",t),this.recommendations}}getSeasonDisplayName(e){return{wetSeason:"Wet Season",drySeason:"Dry Season",transitional:"Transitional Period"}[e]||e}calculateRiskScore(e,t,i){try{this.validateEnvironmentalParams(e,t,i);const r=this.growthAnalyzer.getSeasonalGrowthTrend();let s=0;return(e<20||e>28)&&(s+=25),(t<60||t>80)&&(s+=25),(i<6||i>7)&&(s+=25),r==="decreasing"?s+=25:r==="stable"&&(s+=12.5),Math.min(Math.round(s),100)}catch(r){return console.error("Error in calculateRiskScore:",r),50}}}class $ee{constructor(){this.timeSeriesAnalyzer=new pB,this.dss=new Vee,this.historicalData=[]}validateHarvestData(e){if(!Array.isArray(e))throw new Error("Harvest data must be an array");return e.filter(t=>{if(!t||typeof t!="object"||typeof t.coffee_raw_quantity!="number"||t.coffee_raw_quantity<0||!t.harvest_date)return!1;const i=new Date(t.harvest_date);return!isNaN(i.getTime())})}validateWeatherData(e){if(!Array.isArray(e))throw new Error("Weather data must be an array");return e.filter(t=>{if(!t||typeof t!="object"||typeof t.temperature!="number"||t.temperature<=0||typeof t.humidity!="number"||t.humidity<=0||!t.timestamp)return!1;const i=new Date(t.timestamp);return!isNaN(i.getTime())})}initializeWithHistoricalData(e,t){try{const i=this.validateHarvestData(e),r=this.validateWeatherData(t);if(i.length===0)throw new Error("No valid harvest data available");i.forEach(s=>{const a=Math.max(0,s.coffee_raw_quantity);this.timeSeriesAnalyzer.addDataPoint(a,new Date(s.harvest_date))}),this.historicalData=i.map(s=>({...s,coffee_raw_quantity:Math.max(0,s.coffee_raw_quantity),weather:r.find(a=>new Date(a.timestamp).toDateString()===new Date(s.harvest_date).toDateString())}))}catch(i){throw console.error("Error initializing with historical data:",i),i}}validateConditions(e){if(!e||typeof e!="object")throw new Error("Conditions must be an object");const{temperature:t,humidity:i,pH:r,rainfall:s,pestDiseaseIncidence:a,fertilizerApplication:o}=e;return{temperature:this.validateValue(t,15,35,25,"Temperature"),humidity:this.validateValue(i,30,100,70,"Humidity"),pH:this.validateValue(r,4,8,6.5,"pH"),rainfall:this.validateValue(s,0,5e3,1500,"Rainfall"),pestDiseaseIncidence:this.validateValue(a,0,1,0,"Pest/Disease Incidence"),fertilizerApplication:this.validateValue(o,0,1,0,"Fertilizer Application")}}validateValue(e,t,i,r,s){return typeof e!="number"||isNaN(e)?(console.warn(`Invalid ${s}: ${e}, using default: ${r}`),r):e<t||e>i?(console.warn(`${s} out of range [${t}-${i}]: ${e}, using default: ${r}`),r):e}async getComprehensiveAnalysis(e){try{const t=this.validateConditions(e),i=this.dss.analyzeConditions(t.temperature,t.humidity,t.pH),r=this.dss.calculateRiskScore(t.temperature,t.humidity,t.pH),s=this.dss.getGrowthForecast(7),a=this.predictYield(t),o=[...i.recommendations,...this.generateYieldRecommendations(a,t)];return{currentAnalysis:{riskScore:r,yieldPrediction:a,growthTrend:i.growthTrend},forecast:{growth:s,confidence:this.calculateConfidence(t)},recommendations:this.prioritizeRecommendations(o),environmentalStatus:{temperature:this.analyzeEnvironmentalFactor("temperature",t.temperature),humidity:this.analyzeEnvironmentalFactor("humidity",t.humidity),pH:this.analyzeEnvironmentalFactor("pH",t.pH),rainfall:this.analyzeEnvironmentalFactor("rainfall",t.rainfall)}}}catch(t){return console.error("Error in comprehensive analysis:",t),{currentAnalysis:{riskScore:50,yieldPrediction:null,growthTrend:"stable"},forecast:{growth:[],confidence:0},recommendations:[{type:"error",severity:"high",message:`Analysis error: ${t.message}`}],environmentalStatus:{temperature:this.getDefaultEnvironmentalStatus("temperature"),humidity:this.getDefaultEnvironmentalStatus("humidity"),pH:this.getDefaultEnvironmentalStatus("pH"),rainfall:this.getDefaultEnvironmentalStatus("rainfall")}}}}getDefaultEnvironmentalStatus(e){const i={temperature:{min:20,max:28,unit:"C",default:25},humidity:{min:60,max:80,unit:"%",default:70},pH:{min:6,max:7,unit:"",default:6.5},rainfall:{min:1200,max:1800,unit:"mm",default:1500}}[e];return{value:i.default,status:"unknown",unit:i.unit,optimal:{min:i.min,max:i.max}}}predictYield(e){try{const{temperature:t,rainfall:i,fertilizerApplication:r,pestDiseaseIncidence:s}=e,a=this.timeSeriesAnalyzer.predictNextValue()||0,o=this.calculateTemperatureImpact(t),l=this.calculateRainfallImpact(i),c=this.calculateFertilizerImpact(r),u=this.calculatePestImpact(s);return Math.max(0,a*o*l*c*u)}catch(t){return console.error("Error in yield prediction:",t),null}}calculateTemperatureImpact(e){const r=1-Math.abs(e-25)/10;return Math.max(.5,Math.min(1.2,r+1))}calculateRainfallImpact(e){const i=e/1500;return Math.max(.6,Math.min(1.3,i))}calculateFertilizerImpact(e){return Math.max(.7,Math.min(1.2,.7+e*.5))}calculatePestImpact(e){return Math.max(.4,Math.min(1,1-e*.6))}generateYieldRecommendations(e,t){var i;try{const r=[],s=((i=this.historicalData[this.historicalData.length-1])==null?void 0:i.coffee_raw_quantity)||0;return e&&e<s*.9&&r.push({type:"yield",severity:"high",message:"Predicted yield is significantly lower than last harvest. Review all growing conditions."}),(t.temperature<20||t.temperature>28)&&r.push({type:"temperature",severity:"medium",message:"Temperature is outside optimal range. Adjust greenhouse conditions to maintain 20-28C."}),r}catch(r){return console.error("Error generating yield recommendations:",r),[]}}prioritizeRecommendations(e){try{const t={high:3,medium:2,low:1};return e.sort((i,r)=>t[r.severity]-t[i.severity]).slice(0,5)}catch(t){return console.error("Error prioritizing recommendations:",t),e}}analyzeEnvironmentalFactor(e,t){try{const r={temperature:{min:20,max:28,unit:"C"},humidity:{min:60,max:80,unit:"%"},pH:{min:6,max:7,unit:""},rainfall:{min:1200,max:1800,unit:"mm"}}[e],s=t<r.min?"low":t>r.max?"high":"optimal";return{value:t,status:s,unit:r.unit,optimal:{min:r.min,max:r.max}}}catch(i){return console.error(`Error analyzing ${e}:`,i),this.getDefaultEnvironmentalStatus(e)}}calculateConfidence(e){try{const t=this.historicalData.length>=5?1:this.historicalData.length>=3?.8:.6,i=Object.values(e).filter(r=>r!=null).length/Object.keys(e).length;return Math.round((t*.6+i*.4)*100)}catch(t){return console.error("Error calculating confidence:",t),0}}}Za.register(To,Co,_u,Ua,dc,hc,uc);function Wee(n){const e=new Date(n),i=Math.abs(new Date().getTime()-e.getTime());return Math.ceil(i/(1e3*60*60*24))}class Bd{static predictQualityDistribution(e,t){if(!t||t.length===0)return{premium:0,fine:0,commercial:0};const i=this.calculateBaseDistribution(t),r=this.calculatePhFactor(e.pH),s=this.calculateMoistureFactor(e.moisture),a=this.calculateFertilizerFactor(e.lastFertilized),o=(r+s+a)/3;return{premium:Math.min(100,i.premium*o),fine:Math.min(100,i.fine*(2-o)),commercial:Math.min(100,i.commercial*(2-o))}}static predictSeasonalYield(e,t,i){if(!t||t.length===0)return 0;const r=this.calculateBaseYield(t),s=this.calculateSeasonalFactor(i),a=this.calculateEnvironmentalFactor(e);return r*s*a}static calculateBaseDistribution(e){const t=e.reduce((i,r)=>i+(r.coffee_raw_quantity||0),0);return{premium:e.reduce((i,r)=>i+(r.coffee_premium_grade||0),0)/t*100,fine:e.reduce((i,r)=>i+(r.coffee_fine_grade||0),0)/t*100,commercial:e.reduce((i,r)=>i+(r.coffee_commercial_grade||0),0)/t*100}}static calculatePhFactor(e){return e>=this.OPTIMAL_PH_RANGE.min&&e<=this.OPTIMAL_PH_RANGE.max?1.2:(e<this.OPTIMAL_PH_RANGE.min,.8)}static calculateMoistureFactor(e){return{very_dry:.6,dry:.8,moderate:1.2,moist:1,very_moist:.7}[e]||1}static calculateFertilizerFactor(e){const t=Wee(e);return t<=this.FERTILIZER_CYCLE_DAYS?1.2:t<=this.FERTILIZER_CYCLE_DAYS*1.5?1:.8}static calculateBaseYield(e){return e.reduce((t,i)=>t+(i.coffee_raw_quantity||0),0)/e.length}static calculateSeasonalFactor(e){return{wet:1.2,dry:.8,transition:1}[e]||1}static calculateEnvironmentalFactor(e){const t=this.calculatePhFactor(e.pH),i=this.calculateMoistureFactor(e.moisture),r=this.calculateFertilizerFactor(e.lastFertilized);return(t+i+r)/3}}Bd.OPTIMAL_PH_RANGE={min:6,max:6.5};Bd.OPTIMAL_MOISTURE="moderate";Bd.FERTILIZER_CYCLE_DAYS=90;Za.register(To,Co,_u,Ua,dc,hc,uc);const Gee=({plant:n,historicalHarvests:e,plantStatuses:t,weatherForecast:i,isDarkMode:r})=>{const s=e.filter(p=>p.plant_id===n.plant_id),a=t.find(p=>p.plant_id===n.plant_id),l=(()=>{if(!n.planting_date)return 0;const p=new Date(n.planting_date);return Math.floor((new Date-p)/(1e3*60*60*24*365))})(),u=(()=>{var w,S;const p=s.reduce((A,P)=>A+(P.coffee_raw_quantity||0),0),y=n.number_of_tree_planted?p/n.number_of_tree_planted:0,x=s.length>0?p/s.length:0,_=s.slice(-3),v=_.length>=2?(((w=_[_.length-1])==null?void 0:w.coffee_raw_quantity)||0)>(((S=_[_.length-2])==null?void 0:S.coffee_raw_quantity)||0)?"increasing":"decreasing":"stable",b={premium:s.reduce((A,P)=>A+(P.coffee_premium_grade||0),0),fine:s.reduce((A,P)=>A+(P.coffee_fine_grade||0),0),commercial:s.reduce((A,P)=>A+(P.coffee_commercial_grade||0),0)};return{totalYield:p,yieldPerTree:y,avgYield:x,yieldTrend:v,qualityMetrics:b}})(),h=(()=>{let p=100;if(a){a.status==="diseased"&&(p-=30),a.status==="pest-affected"&&(p-=20);const y=parseFloat(a.soil_ph);y&&(y<5.5||y>6.5)&&(p-=15),a.moisture_level==="dry"&&(p-=15)}return i&&(i.temperature>24&&(p-=10),i.rainfall*12<1500&&(p-=10)),Math.max(0,p)})();return g.jsxs("div",{className:`mt-6 p-6 rounded-lg shadow-lg ${r?"bg-gray-700":"bg-white"}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("div",{children:[g.jsx("h2",{className:`text-xl font-semibold mb-6 ${r?"text-white":"text-gray-900"}`,children:"Current Individual Plant Analytics"}),g.jsx("h3",{className:`text-lg font-semibold ${r?"text-white":"text-gray-900"}`,children:n.coffee_variety||"Unknown Variety"}),g.jsxs("p",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:[n.number_of_tree_planted," trees  ",l," years old"]})]}),g.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${h>80?r?"bg-green-900 text-green-200":"bg-green-100 text-green-800":h>60?r?"bg-yellow-900 text-yellow-200":"bg-yellow-100 text-yellow-800":r?"bg-red-900 text-red-200":"bg-red-100 text-red-800"}`,children:["Health Score: ",h,"%"]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[g.jsxs("div",{className:`p-4 rounded ${r?"bg-gray-800":"bg-gray-50"}`,children:[g.jsx("div",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:"Total Yield"}),g.jsxs("div",{className:`text-xl font-bold ${r?"text-white":"text-gray-900"}`,children:[u.totalYield.toFixed(2)," kg"]})]}),g.jsxs("div",{className:`p-4 rounded ${r?"bg-gray-800":"bg-gray-50"}`,children:[g.jsx("div",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:"Yield per Tree"}),g.jsxs("div",{className:`text-xl font-bold ${r?"text-white":"text-gray-900"}`,children:[u.yieldPerTree.toFixed(2)," kg/tree"]})]}),g.jsxs("div",{className:`p-4 rounded ${r?"bg-gray-800":"bg-gray-50"}`,children:[g.jsx("div",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:"Average Yield"}),g.jsxs("div",{className:`text-xl font-bold ${r?"text-white":"text-gray-900"}`,children:[u.avgYield.toFixed(2)," kg/harvest"]})]}),g.jsxs("div",{className:`p-4 rounded ${r?"bg-gray-800":"bg-gray-50"}`,children:[g.jsx("div",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:"Yield Trend"}),g.jsx("div",{className:`text-xl font-bold ${r?"text-white":"text-gray-900"} flex items-center`,children:u.yieldTrend==="increasing"?g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"text-green-500",children:""})," Increasing"]}):u.yieldTrend==="decreasing"?g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"text-red-500",children:""})," Decreasing"]}):g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"text-yellow-500",children:""})," Stable"]})})]})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("h4",{className:`text-sm font-medium mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:"Quality Distribution"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[g.jsx("div",{className:`p-3 rounded ${r?"bg-gray-800":"bg-gray-50"}`,children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:r?"text-gray-300":"text-gray-700",children:"Premium"}),g.jsxs("span",{className:`font-medium ${r?"text-green-400":"text-green-600"}`,children:[u.qualityMetrics.premium.toFixed(2)," kg"]})]})}),g.jsx("div",{className:`p-3 rounded ${r?"bg-gray-800":"bg-gray-50"}`,children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:r?"text-gray-300":"text-gray-700",children:"Fine"}),g.jsxs("span",{className:`font-medium ${r?"text-blue-400":"text-blue-600"}`,children:[u.qualityMetrics.fine.toFixed(2)," kg"]})]})}),g.jsx("div",{className:`p-3 rounded ${r?"bg-gray-800":"bg-gray-50"}`,children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:r?"text-gray-300":"text-gray-700",children:"Commercial"}),g.jsxs("span",{className:`font-medium ${r?"text-yellow-400":"text-yellow-600"}`,children:[u.qualityMetrics.commercial.toFixed(2)," kg"]})]})})]})]})]})},qee=()=>{Ki(),Bs();const{isDarkMode:n,toggleTheme:e}=Zi(),{user:t}=Po(),[i]=F.useState(()=>new $ee),[r,s]=F.useState(null),[a,o]=F.useState([]),[l,c]=F.useState(!0),[u,d]=F.useState(null),[h,p]=F.useState(null),[y,x]=F.useState(""),[_,v]=F.useState(""),b=(V,O="")=>{console.error(O||"An error occurred:",V),d(V.message),v("error"),x(O||V.message)},w=()=>{c(!1),d(null),x("")};F.useState(""),F.useState(""),F.useState(""),F.useState(""),F.useState(""),F.useState(""),F.useState([]),F.useState(0);const[S,A]=F.useState([]),[P,k]=F.useState([]),[T,E]=F.useState(null),[R,I]=F.useState(null);F.useState({latitude:"",longitude:""}),F.useState({temperature:"",rainfall:"",elevation:""}),F.useState(new Set);const[D,B]=F.useState({pH:6,moisture:"moderate",lastFertilized:new Date().toISOString().split("T")[0]}),[G,Y]=F.useState(null),[X,Q]=F.useState(null),[L,W]=F.useState({premium:0,fine:0,commercial:0,currency:"PHP"}),[j,te]=F.useState(null),[ae,me]=F.useState(null),[K,re]=F.useState(null),[oe,_e]=F.useState(null),Ce=async()=>{try{const{data:V,error:O}=await tt.from("coffee_prices").select("coffee_type, price_per_kg, currency").eq("is_active",!0);if(O)throw O;const ee={premium:0,fine:0,commercial:0,currency:"PHP"};V.forEach(le=>{le.coffee_type==="premium"&&(ee.premium=le.price_per_kg),le.coffee_type==="fine"&&(ee.fine=le.price_per_kg),le.coffee_type==="commercial"&&(ee.commercial=le.price_per_kg),le.currency&&(ee.currency=le.currency)}),W(ee)}catch(V){console.error("Error fetching coffee prices:",V)}};F.useEffect(()=>{Ce()},[]);const Ee=(V,O=0)=>{if(V==null||V==="")return O;const ee=parseFloat(V);return!isNaN(ee)&&isFinite(ee)&&ee>=0?ee:O},Pe=V=>{if(!V||!(V instanceof Date)&&isNaN(new Date(V)))return 30;const O=new Date,ee=new Date(V),le=Math.floor((O-ee)/(1e3*60*60*24));return Math.max(0,le)},De=V=>!V||typeof V!="string"?60:{very_dry:20,dry:40,moderate:60,moist:80,very_moist:90}[V.toLowerCase()]||60,xe=V=>Array.isArray(V)?V.filter(O=>O&&typeof O=="object"&&O.coffee_raw_quantity!=null&&O.harvest_date!=null).map(O=>({...O,coffee_raw_quantity:Ee(O.coffee_raw_quantity,0),harvest_date:new Date(O.harvest_date).toISOString()})).filter(O=>!isNaN(new Date(O.harvest_date).getTime())).sort((O,ee)=>new Date(O.harvest_date)-new Date(ee.harvest_date)):[];F.useEffect(()=>{let V=!0;return t&&(async()=>{try{if(!(t!=null&&t.id))throw new Error("User not authenticated");const{data:ee,error:le}=await tt.from("farmer_detail").select("*").eq("id",t.id).single();if(le)throw le;if(!V)return;s(ee);const{data:ge,error:ye}=await tt.from("plant_data").select("*").eq("farmer_id",t.id);if(ye)throw ye;if(!V)return;const Oe=(ge||[]).filter(st=>st&&st.plant_id!=null);if(o(Oe),Oe.length===0)throw new Error("No valid plants found");const{data:Te,error:ze}=await tt.from("harvest_data").select("*").eq("farmer_id",t.id).order("harvest_date",{ascending:!0});if(ze)throw ze;if(!V)return;const Je=xe(Te||[]);A(Je);const{data:He,error:nt}=await tt.from("plant_status").select("*").in("plant_id",Oe.map(st=>st.plant_id)).order("created_at",{ascending:!1});if(nt)throw nt;if(!V)return;const Tt=(He||[]).filter(st=>st!=null).map(st=>({...st,temperature:Ee(st.temperature,25),humidity:De(st.moisture_level),soil_ph:Ee(st.soil_ph,6.5),timestamp:st.created_at,fertilizer_level:Pe(st.last_fertilized)<30?1:0})).filter(st=>typeof st.temperature=="number"&&typeof st.humidity=="number"&&typeof st.soil_ph=="number");if(k(Tt),Tt.length>0){const st=Tt[0];V&&B(We=>({...We,temperature:Ee(st.temperature,25),humidity:Ee(st.humidity,70),pH:Ee(st.soil_ph,6.5),moisture:st.moisture_level||"moderate",lastFertilized:st.last_fertilized||new Date().toISOString().split("T")[0]}))}if(Je.length>0&&Tt.length>0){const st=Tt.map(We=>({temperature:Ee(We.temperature,25),humidity:Ee(We.humidity,70),soil_ph:Ee(We.soil_ph,6.5),timestamp:We.created_at,fertilizer_level:Pe(We.last_fertilized)<30?1:0}));if(V){i.initializeWithHistoricalData(Je,st);const We=Tt[0],vt={temperature:Math.max(0,Ee(We.temperature,25)),humidity:Math.max(0,Ee(We.humidity,70)),pH:Math.max(0,Ee(We.soil_ph,6.5)),rainfall:Math.max(0,Ee(We.rainfall,1500)),pestDiseaseIncidence:Math.max(0,Ee(We.pestDiseaseIncidence,0)),fertilizerApplication:Math.max(0,Ee(We.last_fertilized?1:0,0))};await we(vt)}}else console.warn("Insufficient data for analysis"),V&&await we({temperature:25,humidity:70,pH:6.5,rainfall:1500,pestDiseaseIncidence:0,fertilizerApplication:0})}catch(ee){V&&b(ee,"Error fetching data")}finally{V&&w()}})(),()=>{V=!1}},[t]);const we=async V=>{try{if(!V||typeof V!="object")throw new Error("Invalid conditions object");const O={temperature:Ee(V.temperature,25),humidity:Ee(V.humidity,70),pH:Ee(V.pH,6.5),rainfall:Ee(V.rainfall,1500),pestDiseaseIncidence:Ee(V.pestDiseaseIncidence,0),fertilizerApplication:Ee(V.fertilizerApplication,0)};Object.entries(O).forEach(([le,ge])=>{if(ge<0)throw new Error(`Invalid negative value for ${le}: ${ge}`)});const ee=await i.getComprehensiveAnalysis(O);if(!ee)throw new Error("Analysis returned null or undefined");p(ee)}catch(O){console.error("Error updating analysis:",O),d(O.message)}},$=V=>{if(!Array.isArray(V)||V.length===0){I(null);return}try{const O=V.filter(le=>le&&le.harvest_date&&typeof le.coffee_raw_quantity=="number").sort((le,ge)=>new Date(le.harvest_date)-new Date(ge.harvest_date));if(O.length===0){I(null);return}const ee={labels:O.map(le=>{const ge=new Date(le.harvest_date);return ge instanceof Date&&!isNaN(ge)?ge.toLocaleDateString():"Invalid Date"}).filter(le=>le!=="Invalid Date"),datasets:[{label:"Raw Coffee Yield (kg)",data:O.map(le=>Ee(le.coffee_raw_quantity,0)),borderColor:n?"rgba(147, 197, 253, 1)":"rgba(59, 130, 246, 1)",backgroundColor:n?"rgba(147, 197, 253, 0.5)":"rgba(59, 130, 246, 0.5)",fill:!0,tension:.4}]};ee.labels.length>0&&ee.datasets[0].data.length===ee.labels.length?I(ee):(console.warn("Invalid chart data structure"),I(null))}catch(O){console.error("Error updating yield chart:",O),I(null)}};F.useEffect(()=>{S.length>0&&$(S)},[S,n]),F.useEffect(()=>()=>{R&&I(null)},[]);const Se=[{name:"Dashboard",path:"/dashboard"},{name:"Farmer Management",path:"/user-management"},{name:"Predictive Analytics",path:"/predictive-analytics"},{name:"DSS Recommendations",path:"/dss-recommendations"},{name:"Farmer Report",path:"/farmer-reports"},{name:"Coffee Grade Predictor",path:"/coffee-grader"}],de=[{name:"Dashboard",path:"/farmer-dashboard"},{name:"User Profile",path:"/user-profile"},{name:"Predictive Analytics",path:"/predictive-analytics"},{name:"DSS Recommendations",path:"/dss-recommendations"},{name:"Coffee Grade Predictor",path:"/coffee-grader"},{name:"Land & Plant Declaration",path:"/land-declaration"},{name:"Harvest Reporting",path:"/harvest-reporting"}];t==null||t.role,F.useEffect(()=>{if(S.length>0){const V=Bd.predictQualityDistribution(D,S);Y(V);const O={wet:Bd.predictSeasonalYield(D,S,"wet"),dry:Bd.predictSeasonalYield(D,S,"dry"),transition:Bd.predictSeasonalYield(D,S,"transition")};Q(O)}},[D,S]);const J=(V,O)=>{if(!V||V.length===0)return null;const ee=V.slice(-6),le=ee.reduce((Te,ze)=>Te+ze.coffee_raw_quantity,0)/ee.length,ge=ee.length>=2?(ee[ee.length-1].coffee_raw_quantity-ee[0].coffee_raw_quantity)/ee.length:0,ye=[];let Oe=le;for(let Te=0;Te<3;Te++){Oe+=ge;const ze=ue(O);Oe*=ze,ye.push(Math.max(0,Oe))}return ye},ue=V=>{let O=1;const ee=parseFloat(V.temperature)||21;(ee<18||ee>24)&&(O*=.9);const le=parseFloat(V.pH)||6;return(le<5.5||le>6.5)&&(O*=.95),V.moisture==="dry"&&(O*=.9),O},je=(V,O)=>{if(!V||V.length===0||!O)return null;const ee=V.reduce((Oe,Te)=>Oe+Te.coffee_raw_quantity,0),le=V.reduce((Oe,Te)=>Oe+Te.coffee_premium_grade,0)/ee,ge=V.reduce((Oe,Te)=>Oe+Te.coffee_fine_grade,0)/ee,ye=V.reduce((Oe,Te)=>Oe+Te.coffee_commercial_grade,0)/ee;return{premium:O*le,fine:O*ge,commercial:O*ye}},Le=(V,O)=>{if(!V||V.length===0)return null;new Date().getMonth();const ee={peak:{months:[2,3,4],factor:1.2},mid:{months:[8,9,10],factor:.8},off:{months:[0,1,5,6,7,11],factor:.4}},le=V.reduce((ye,Oe)=>ye+Oe.coffee_raw_quantity,0)/V.length,ge=ue(O);return{peak:le*ee.peak.factor*ge,mid:le*ee.mid.factor*ge,off:le*ee.off.factor*ge}},Xe=V=>{if(!V||V.length===0)return null;const ee=[...V].sort((ye,Oe)=>new Date(ye.harvest_date)-new Date(Oe.harvest_date)).map((ye,Oe)=>({date:new Date(ye.harvest_date),yield:ye.coffee_raw_quantity,quality:{premium:ye.coffee_premium_grade,fine:ye.coffee_fine_grade,commercial:ye.coffee_commercial_grade}})),le=[],ge=3;for(let ye=ge-1;ye<ee.length;ye++){const Te=ee.slice(ye-ge+1,ye+1).reduce((ze,Je)=>ze+Je.yield,0)/ge;le.push({date:ee[ye].date,average:Te})}return{yieldTrends:ee,movingAverages:le,overallTrend:gt(ee)}},gt=V=>{if(V.length<2)return"stable";const O=V.slice(0,Math.floor(V.length/2)),ee=V.slice(Math.floor(V.length/2)),le=O.reduce((Oe,Te)=>Oe+Te.yield,0)/O.length,ye=(ee.reduce((Oe,Te)=>Oe+Te.yield,0)/ee.length-le)/le*100;return ye>5?"increasing":ye<-5?"decreasing":"stable"};return F.useEffect(()=>{if(S.length>0){const V=J(S,D);te(V);const O=je(S,V==null?void 0:V[0]);me(O);const ee=Le(S,D);re(ee);const le=Xe(S);_e(le)}},[S,D]),l?g.jsx(ci,{children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:g.jsxs("div",{className:"animate-pulse",children:[g.jsx("div",{className:`h-8 ${n?"bg-gray-700":"bg-gray-200"} rounded w-1/4 mb-8`}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(V=>g.jsxs("div",{className:`${n?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow`,children:[g.jsx("div",{className:`h-4 ${n?"bg-gray-700":"bg-gray-200"} rounded w-1/2 mb-4`}),g.jsx("div",{className:`h-8 ${n?"bg-gray-700":"bg-gray-200"} rounded w-3/4`})]},V))})]})})}):u?g.jsxs("div",{className:"text-red-600 p-4",children:["Error: ",u]}):g.jsx(ci,{children:g.jsxs("div",{className:`container mx-auto px-4 py-8 ${n?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"}`,children:[g.jsx("div",{className:`mb-8 ${n?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6`,children:g.jsx("h2",{className:`text-3xl font-bold ${n?"text-white":"text-gray-900"}`,children:"Predictive Analytics"})}),a.length>0&&g.jsx("div",{className:"mb-8",children:a.map(V=>g.jsx(Gee,{plant:V,historicalHarvests:S,plantStatuses:P,weatherForecast:T,isDarkMode:n},V.plant_id))}),g.jsxs("div",{className:`${n?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-lg mb-8`,children:[g.jsx("h2",{className:`text-2xl font-bold mb-6 ${n?"text-white":"text-gray-900"}`,children:"Coffee Quality Predictions"}),g.jsxs("div",{className:"mb-8",children:[g.jsx("h3",{className:`text-xl font-semibold mb-4 ${n?"text-gray-200":"text-gray-800"}`,children:"Predicted Coffee Bean Quality Distribution"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[g.jsxs("div",{className:`p-4 rounded-lg ${n?"bg-gray-700":"bg-gray-50"}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("span",{className:`font-medium ${n?"text-gray-200":"text-gray-800"}`,children:"Premium Grade"}),g.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${n?"bg-green-900 text-green-200":"bg-green-100 text-green-800"}`,children:(()=>{if(S.length===0)return"No data";const V=S.reduce((le,ge)=>le+(ge.coffee_premium_grade||0),0),O=S.reduce((le,ge)=>le+(ge.coffee_raw_quantity||0),0);return`${O>0?(V/O*100).toFixed(1):"0.0"}% (${V.toFixed(1)} kg)`})()})]}),g.jsx("div",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:(()=>{if(S.length===0)return"No revenue data available";const O=S.reduce((ee,le)=>ee+(le.coffee_premium_grade||0),0)*L.premium;return`Estimated Revenue: ${L.currency} ${O.toFixed(2)}`})()})]}),g.jsxs("div",{className:`p-4 rounded-lg ${n?"bg-gray-700":"bg-gray-50"}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("span",{className:`font-medium ${n?"text-gray-200":"text-gray-800"}`,children:"Fine Grade"}),g.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${n?"bg-blue-900 text-blue-200":"bg-blue-100 text-blue-800"}`,children:(()=>{if(S.length===0)return"No data";const V=S.reduce((le,ge)=>le+(ge.coffee_fine_grade||0),0),O=S.reduce((le,ge)=>le+(ge.coffee_raw_quantity||0),0);return`${O>0?(V/O*100).toFixed(1):"0.0"}% (${V.toFixed(1)} kg)`})()})]}),g.jsx("div",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:(()=>{if(S.length===0)return"No revenue data available";const O=S.reduce((ee,le)=>ee+(le.coffee_fine_grade||0),0)*L.fine;return`Estimated Revenue: ${L.currency} ${O.toFixed(2)}`})()})]}),g.jsxs("div",{className:`p-4 rounded-lg ${n?"bg-gray-700":"bg-gray-50"}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("span",{className:`font-medium ${n?"text-gray-200":"text-gray-800"}`,children:"Commercial Grade"}),g.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${n?"bg-yellow-900 text-yellow-200":"bg-yellow-100 text-yellow-800"}`,children:(()=>{if(S.length===0)return"No data";const V=S.reduce((le,ge)=>le+(ge.coffee_commercial_grade||0),0),O=S.reduce((le,ge)=>le+(ge.coffee_raw_quantity||0),0);return`${O>0?(V/O*100).toFixed(1):"0.0"}% (${V.toFixed(1)} kg)`})()})]}),g.jsx("div",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:(()=>{if(S.length===0)return"No revenue data available";const O=S.reduce((ee,le)=>ee+(le.coffee_commercial_grade||0),0)*L.commercial;return`Estimated Revenue: ${L.currency} ${O.toFixed(2)}`})()})]})]})]}),g.jsxs("div",{children:[g.jsx("h3",{className:`text-xl font-semibold mb-4 ${n?"text-gray-200":"text-gray-800"}`,children:"Seasonal Yield Forecast"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[g.jsxs("div",{className:`p-4 rounded-lg ${n?"bg-gray-700":"bg-gray-50"}`,children:[g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx("span",{className:"text-xl",children:""}),g.jsx("span",{className:`font-medium ${n?"text-gray-200":"text-gray-800"}`,children:"Peak Season"})]}),g.jsx("div",{className:`text-2xl font-bold mb-2 ${n?"text-blue-400":"text-blue-600"}`,children:(()=>S.length===0?"No data":`${(S.reduce((ee,le)=>ee+(le.coffee_raw_quantity||0),0)*1.2).toFixed(1)} kg`)()}),g.jsx("div",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:"March - May (Primary Harvest)"}),g.jsx("div",{className:`mt-2 text-sm ${n?"text-gray-400":"text-gray-600"}`,children:(()=>{if(S.length===0)return"";const O=S.reduce((Te,ze)=>Te+(ze.coffee_raw_quantity||0),0)*1.2,ee=S.reduce((Te,ze)=>Te+(ze.coffee_premium_grade||0)+(ze.coffee_fine_grade||0)+(ze.coffee_commercial_grade||0),0),le=S.reduce((Te,ze)=>Te+(ze.coffee_premium_grade||0),0)/(ee||1),ge=S.reduce((Te,ze)=>Te+(ze.coffee_fine_grade||0),0)/(ee||1),ye=S.reduce((Te,ze)=>Te+(ze.coffee_commercial_grade||0),0)/(ee||1),Oe=O*le*L.premium+O*ge*L.fine+O*ye*L.commercial;return`Expected Raw Coffee Revenue: 
${L.currency} ${Oe.toFixed(2)}`})()})]}),g.jsxs("div",{className:`p-4 rounded-lg ${n?"bg-gray-700":"bg-gray-50"}`,children:[g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx("span",{className:"text-xl",children:""}),g.jsx("span",{className:`font-medium ${n?"text-gray-200":"text-gray-800"}`,children:"Mid Season"})]}),g.jsx("div",{className:`text-2xl font-bold mb-2 ${n?"text-yellow-400":"text-yellow-600"}`,children:(()=>S.length===0?"No data":`${(S.reduce((ee,le)=>ee+(le.coffee_raw_quantity||0),0)*.8).toFixed(1)} kg`)()}),g.jsx("div",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:"September - November (Secondary Harvest)"}),g.jsx("div",{className:`mt-2 text-sm ${n?"text-gray-400":"text-gray-600"}`,children:(()=>{if(S.length===0)return"";const O=S.reduce((Te,ze)=>Te+(ze.coffee_raw_quantity||0),0)*.8,ee=S.reduce((Te,ze)=>Te+(ze.coffee_premium_grade||0)+(ze.coffee_fine_grade||0)+(ze.coffee_commercial_grade||0),0),le=S.reduce((Te,ze)=>Te+(ze.coffee_premium_grade||0),0)/(ee||1),ge=S.reduce((Te,ze)=>Te+(ze.coffee_fine_grade||0),0)/(ee||1),ye=S.reduce((Te,ze)=>Te+(ze.coffee_commercial_grade||0),0)/(ee||1),Oe=O*le*L.premium+O*ge*L.fine+O*ye*L.commercial;return`Expected Raw Coffee Revenue: 
${L.currency} ${Oe.toFixed(2)}`})()})]}),g.jsxs("div",{className:`p-4 rounded-lg ${n?"bg-gray-700":"bg-gray-50"}`,children:[g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx("span",{className:"text-xl",children:""}),g.jsx("span",{className:`font-medium ${n?"text-gray-200":"text-gray-800"}`,children:"Off Season"})]}),g.jsx("div",{className:`text-2xl font-bold mb-2 ${n?"text-green-400":"text-green-600"}`,children:(()=>S.length===0?"No data":`${(S.reduce((ee,le)=>ee+(le.coffee_raw_quantity||0),0)*.4).toFixed(1)} kg`)()}),g.jsx("div",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:"December - February & June - August"}),g.jsx("div",{className:`mt-2 text-sm ${n?"text-gray-400":"text-gray-600"}`,children:(()=>{if(S.length===0)return"";const O=S.reduce((Te,ze)=>Te+(ze.coffee_raw_quantity||0),0)*.4,ee=S.reduce((Te,ze)=>Te+(ze.coffee_premium_grade||0)+(ze.coffee_fine_grade||0)+(ze.coffee_commercial_grade||0),0),le=S.reduce((Te,ze)=>Te+(ze.coffee_premium_grade||0),0)/(ee||1),ge=S.reduce((Te,ze)=>Te+(ze.coffee_fine_grade||0),0)/(ee||1),ye=S.reduce((Te,ze)=>Te+(ze.coffee_commercial_grade||0),0)/(ee||1),Oe=O*le*L.premium+O*ge*L.fine+O*ye*L.commercial;return`Expected Raw Coffee Revenue: 
${L.currency} ${Oe.toFixed(2)}`})()})]})]})]})]}),g.jsxs("div",{className:`${n?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-lg mb-8`,children:[g.jsx("h2",{className:`text-2xl font-bold mb-6 ${n?"text-white":"text-gray-900"}`,children:"Future Yield Predictions"}),j&&g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:j.map((V,O)=>g.jsxs("div",{className:`p-4 rounded-lg ${n?"bg-gray-700":"bg-gray-50"}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsxs("span",{className:`font-medium ${n?"text-gray-200":"text-gray-800"}`,children:["Harvest ",O+1]}),g.jsxs("span",{className:`px-2 py-1 rounded-full text-sm ${n?"bg-blue-900 text-blue-200":"bg-blue-100 text-blue-800"}`,children:[V.toFixed(1)," kg"]})]}),ae&&g.jsxs("div",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:[g.jsxs("div",{children:["Premium: ",(V*(ae.premium/V)).toFixed(1)," kg"]}),g.jsxs("div",{children:["Fine: ",(V*(ae.fine/V)).toFixed(1)," kg"]}),g.jsxs("div",{children:["Commercial: ",(V*(ae.commercial/V)).toFixed(1)," kg"]})]})]},O))})]}),g.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-8",children:[g.jsxs("div",{className:`p-6 rounded-lg shadow-lg ${n?"bg-gray-800":"bg-white"}`,children:[g.jsx("h2",{className:`text-xl font-semibold mb-4 ${n?"text-white":"text-gray-900"}`,children:"Historical Trends"}),S.length>0&&g.jsx(Pu,{data:{labels:S.map(V=>new Date(V.harvest_date).toLocaleDateString()),datasets:[{label:"Raw Coffee Yield (kg)",data:S.map(V=>Ee(V.coffee_raw_quantity,0)),borderColor:n?"rgba(147, 197, 253, 1)":"rgba(59, 130, 246, 1)",backgroundColor:n?"rgba(147, 197, 253, 0.2)":"rgba(59, 130, 246, 0.2)"}]},options:{responsive:!0,plugins:{legend:{position:"top",labels:{color:n?"#fff":"#1f2937"}},title:{display:!0,text:"Historical Harvest Yields",color:n?"#fff":"#1f2937"}},scales:{x:{grid:{color:n?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:n?"#fff":"#1f2937"}},y:{grid:{color:n?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:n?"#fff":"#1f2937"}}}}})]}),g.jsxs("div",{className:`p-6 rounded-lg shadow-lg ${n?"bg-gray-800":"bg-white"}`,children:[g.jsx("h2",{className:`text-xl font-semibold mb-4 ${n?"text-white":"text-gray-900"}`,children:"Environmental Impact"}),(h==null?void 0:h.environmentalStatus)&&g.jsx("div",{className:"space-y-4",children:Object.entries(h.environmentalStatus).map(([V,O])=>g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:`capitalize ${n?"text-gray-200":"text-gray-700"}`,children:V}),g.jsx("div",{className:"flex items-center",children:g.jsxs("span",{className:`px-2 py-1 rounded ${O.status==="optimal"?n?"bg-green-900 text-green-100":"bg-green-100 text-green-800":O.status==="high"?n?"bg-red-900 text-red-100":"bg-red-100 text-red-800":n?"bg-yellow-900 text-yellow-100":"bg-yellow-100 text-yellow-800"}`,children:[Ee(O.value,0),O.unit," (",O.status,")"]})})]},V))})]})]}),oe&&g.jsxs("div",{className:`mt-8 ${n?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-lg mb-8`,children:[g.jsx("h2",{className:`text-2xl font-bold mb-6 ${n?"text-white":"text-gray-900"}`,children:"Historical Trend Analysis"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("h3",{className:`text-lg font-semibold mb-4 ${n?"text-gray-200":"text-gray-800"}`,children:"Yield Trends"}),g.jsx(Pu,{data:{labels:oe.yieldTrends.map(V=>V.date.toLocaleDateString()),datasets:[{label:"Actual Yield",data:oe.yieldTrends.map(V=>V.yield),borderColor:n?"rgba(147, 197, 253, 1)":"rgba(59, 130, 246, 1)",backgroundColor:n?"rgba(147, 197, 253, 0.2)":"rgba(59, 130, 246, 0.2)"},{label:"Moving Average",data:oe.movingAverages.map(V=>V.average),borderColor:n?"rgba(16, 185, 129, 1)":"rgba(5, 150, 105, 1)",backgroundColor:n?"rgba(16, 185, 129, 0.2)":"rgba(5, 150, 105, 0.2)"}]},options:{responsive:!0,plugins:{legend:{position:"top",labels:{color:n?"#fff":"#1f2937"}}},scales:{x:{grid:{color:n?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:n?"#fff":"#1f2937"}},y:{grid:{color:n?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:n?"#fff":"#1f2937"}}}}})]}),g.jsxs("div",{children:[g.jsx("h3",{className:`text-lg font-semibold mb-4 ${n?"text-gray-200":"text-gray-800"}`,children:"Overall Trend Analysis"}),g.jsxs("div",{className:`p-4 rounded-lg ${n?"bg-gray-700":"bg-gray-50"}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("span",{className:`font-medium ${n?"text-gray-200":"text-gray-800"}`,children:"Current Trend"}),g.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${oe.overallTrend==="increasing"?n?"bg-green-900 text-green-200":"bg-green-100 text-green-800":oe.overallTrend==="decreasing"?n?"bg-red-900 text-red-200":"bg-red-100 text-red-800":n?"bg-yellow-900 text-yellow-200":"bg-yellow-100 text-yellow-800"}`,children:oe.overallTrend.charAt(0).toUpperCase()+oe.overallTrend.slice(1)})]}),g.jsxs("div",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:[g.jsxs("p",{children:["Based on ",oe.yieldTrends.length," harvest records"]}),g.jsx("p",{children:"Moving average window: 3 harvests"})]})]})]})]})]})]})})},Xee=()=>{var j,te,ae,me;const{plantId:n}=QP(),e=Ki(),{isDarkMode:t}=Zi(),[i,r]=F.useState(null),[s,a]=F.useState(null),[o,l]=F.useState([]),[c,u]=F.useState(null),[d,h]=F.useState(null),[p,y]=F.useState(null),[x,_]=F.useState(null),[v,b]=F.useState([]),[w,S]=F.useState([]),[A,P]=F.useState(!0),[k,T]=F.useState(null);F.useState("1y");const[E,R]=F.useState(new Set),[I,D]=F.useState({soil_ph:"",moisture_level:"",status:""}),[B,G]=F.useState(null);F.useState(null);const Y=K=>{R(re=>{const oe=new Set(re);return oe.add(K),oe}),K==="status"&&D({soil_ph:(s==null?void 0:s.soil_ph)||"",moisture_level:(s==null?void 0:s.moisture_level)||"",status:(s==null?void 0:s.status)||""})},X=K=>{R(re=>{const oe=new Set(re);return oe.delete(K),oe})},Q=async K=>{K.preventDefault();try{const{data:re,error:oe}=await tt.from("plant_status").insert([{plant_id:n,soil_ph:parseFloat(I.soil_ph),moisture_level:I.moisture_level,status:I.status}]);if(oe)throw oe;a({...I,created_at:new Date().toISOString()}),W(i,I,o,c,d),X("status")}catch(re){console.error("Error updating status:",re),T(re.message)}};F.useEffect(()=>{n&&(async()=>{var re,oe;P(!0),T(null);try{const{data:_e,error:Ce}=await tt.from("plant_data").select("*, farmer_detail(*)").eq("plant_id",n).single();if(Ce)throw Ce;r(_e);const{data:Ee,error:Pe}=await tt.from("plant_status").select("*").eq("plant_id",n).order("created_at",{ascending:!1}).limit(1).single();Pe||a(Ee);const{data:De,error:xe}=await tt.from("harvest_data").select("*").eq("plant_id",n).order("harvest_date",{ascending:!0});if(xe)throw xe;l(De||[]);let we=null,$=null;(re=_e.farmer_detail)!=null&&re.farm_latitude&&((oe=_e.farmer_detail)!=null&&oe.farm_longitude)&&(we=await Bee(_e.farmer_detail.farm_latitude,_e.farmer_detail.farm_longitude),u(we),$=await Hee(_e.farmer_detail.farm_latitude,_e.farmer_detail.farm_longitude),h($)),L(De||[],Ee),W(_e,Ee,De||[],we,$)}catch(_e){console.error("Error fetching plant data:",_e),T(_e.message)}finally{P(!1)}})()},[n]);const L=(K,re)=>{K.length>0&&G({labels:K.map(oe=>new Date(oe.harvest_date).toLocaleDateString()),datasets:[{label:"Raw Coffee Yield (kg)",data:K.map(oe=>oe.coffee_raw_quantity),borderColor:t?"rgba(147, 197, 253, 1)":"rgba(59, 130, 246, 1)",backgroundColor:t?"rgba(147, 197, 253, 0.5)":"rgba(59, 130, 246, 0.5)"}]})},W=(K,re,oe,_e,Ce)=>{if(!K||!re)return;let Ee=100;const Pe=[],De=new Date(K.planting_date),xe=(new Date-De)/(1e3*60*60*24*365);if(xe<3?(Ee-=10,Pe.push("Young plant - requires careful nurturing")):xe>20&&(Ee-=20,Pe.push("Aging plant - may have reduced yield")),re.soil_ph){const $=parseFloat(re.soil_ph);($<5.5||$>6.5)&&(Ee-=15,Pe.push(`Suboptimal soil pH (${$}). Optimal range is 5.5-6.5`))}re.moisture_level==="dry"&&(Ee-=20,Pe.push("Low soil moisture - risk of drought stress")),re.status==="diseased"?(Ee-=25,Pe.push("Plant is currently diseased - requires immediate attention")):re.status==="pest-affected"&&(Ee-=20,Pe.push("Plant is affected by pests - requires treatment")),_e&&Ce&&(Ce.temperature>24&&(Ee-=10,Pe.push("High temperature forecast - risk of heat stress")),Ce.rainfall*12<1500&&(Ee-=10,Pe.push("Low rainfall forecast - irrigation may be needed")));const we=Pe.map($=>$.includes("soil pH")?"Apply appropriate soil amendments to adjust pH level":$.includes("moisture")?"Increase irrigation frequency and consider mulching":$.includes("diseased")?"Apply fungicide treatment and improve air circulation":$.includes("pest")?"Implement integrated pest management strategies":$.includes("temperature")?"Provide additional shade and increase irrigation":$.includes("rainfall")?"Set up irrigation system and apply mulch for water retention":"Monitor plant health and maintain regular care");if(oe.length>0){const $=oe.slice(-3),Se=$.reduce((je,Le)=>je+Le.coffee_raw_quantity,0)/$.length,de=Ee/100,J=_e&&Ce?Ce.temperature>24||Ce.rainfall*12<1500?.9:1.1:1,ue=Se*de*J;y({amount:ue,confidence:Math.min(Ee/100*(oe.length/10),1)})}_(Ee),S(Pe),b(we)};return A?g.jsx(ci,{children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:g.jsxs("div",{className:"animate-pulse",children:[g.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8"}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[1,2,3,4].map(K=>g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[g.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),g.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4"})]},K))})]})})}):k?g.jsx(ci,{children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:g.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:g.jsx("p",{className:"text-red-700",children:k})})})}):g.jsx(ci,{children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsx("div",{className:"mb-6",children:g.jsxs("button",{onClick:()=>e(-1),className:`flex items-center space-x-2 px-4 py-2 rounded-lg ${t?"bg-gray-700 text-gray-200 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),g.jsx("span",{children:"Back to Analytics"})]})}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{className:`p-6 rounded-lg shadow-lg ${t?"bg-gray-800":"bg-white"} cursor-pointer transition-colors hover:bg-opacity-90`,onClick:()=>!E.has("status")&&Y("status"),children:[g.jsxs("h3",{className:`text-lg font-semibold mb-4 flex justify-between items-center ${t?"text-white":"text-gray-900"}`,children:["Plant Status",E.has("status")&&g.jsx("button",{onClick:K=>{K.stopPropagation(),X("status")},className:`text-xs ${t?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-600"}`,children:"Cancel"})]}),E.has("status")?g.jsxs("form",{onSubmit:Q,className:"space-y-4",onClick:K=>K.stopPropagation(),children:[g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`,children:"Soil pH"}),g.jsx("input",{type:"number",step:"0.1",value:I.soil_ph,onChange:K=>D(re=>({...re,soil_ph:K.target.value})),className:`mt-1 block w-full rounded-md ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`,children:"Moisture Level"}),g.jsxs("select",{value:I.moisture_level,onChange:K=>D(re=>({...re,moisture_level:K.target.value})),className:`mt-1 block w-full rounded-md ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0,children:[g.jsx("option",{value:"",children:"Select moisture level"}),g.jsx("option",{value:"dry",children:"Dry"}),g.jsx("option",{value:"moderate",children:"Moderate"}),g.jsx("option",{value:"wet",children:"Wet"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`,children:"Plant Status"}),g.jsxs("select",{value:I.status,onChange:K=>D(re=>({...re,status:K.target.value})),className:`mt-1 block w-full rounded-md ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0,children:[g.jsx("option",{value:"",children:"Select status"}),g.jsx("option",{value:"healthy",children:"Healthy"}),g.jsx("option",{value:"diseased",children:"Diseased"}),g.jsx("option",{value:"pest-affected",children:"Pest Affected"})]})]}),g.jsx("button",{type:"submit",className:`w-full px-4 py-2 rounded-md ${t?"bg-blue-600 text-white hover:bg-blue-700":"bg-blue-100 text-blue-800 hover:bg-blue-200"}`,children:"Save Changes"})]}):g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Soil pH"}),g.jsx("p",{className:`text-lg font-semibold ${t?"text-white":"text-gray-900"}`,children:(s==null?void 0:s.soil_ph)||"Not measured"})]}),g.jsxs("div",{children:[g.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Moisture Level"}),g.jsx("p",{className:`text-lg font-semibold ${t?"text-white":"text-gray-900"}`,children:s!=null&&s.moisture_level?s.moisture_level.charAt(0).toUpperCase()+s.moisture_level.slice(1):"Not measured"})]}),g.jsxs("div",{children:[g.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Status"}),g.jsx("p",{className:`text-lg font-semibold ${t?"text-white":"text-gray-900"}`,children:s!=null&&s.status?s.status.charAt(0).toUpperCase()+s.status.slice(1):"Unknown"})]})]})]}),g.jsxs("div",{className:`p-6 rounded-lg shadow-lg ${t?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-lg font-semibold mb-4 ${t?"text-white":"text-gray-900"}`,children:"Plant Health Score"}),g.jsxs("div",{className:"flex items-center justify-center mb-4",children:[g.jsx("div",{className:`text-5xl font-bold ${x>80?t?"text-green-400":"text-green-600":x>60?t?"text-yellow-400":"text-yellow-600":t?"text-red-400":"text-red-600"}`,children:x}),g.jsx("div",{className:`ml-2 text-2xl ${t?"text-gray-400":"text-gray-500"}`,children:"/100"})]}),g.jsxs("div",{className:"mt-4",children:[g.jsx("h4",{className:`text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Risk Factors:"}),g.jsx("ul",{className:`list-disc pl-5 space-y-1 ${t?"text-red-300":"text-red-600"}`,children:w.map((K,re)=>g.jsx("li",{className:"text-sm",children:K},re))})]})]}),g.jsxs("div",{className:`p-6 rounded-lg shadow-lg ${t?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-lg font-semibold mb-4 ${t?"text-white":"text-gray-900"}`,children:"Next Harvest Prediction"}),p?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"text-center mb-4",children:[g.jsxs("div",{className:`text-4xl font-bold ${t?"text-green-400":"text-green-600"}`,children:[p.amount.toFixed(2)," kg"]}),g.jsxs("div",{className:`text-sm mt-1 ${t?"text-gray-400":"text-gray-500"}`,children:["Confidence: ",(p.confidence*100).toFixed(0),"%"]})]}),g.jsxs("div",{className:"mt-4",children:[g.jsx("h4",{className:`text-sm font-medium mb-2 ${t?"text-indigo-300":"text-indigo-700"}`,children:"Recommendations:"}),g.jsx("ul",{className:`list-disc pl-5 space-y-1 ${t?"text-green-300":"text-green-700"}`,children:v.map((K,re)=>g.jsx("li",{className:"text-sm",children:K},re))})]})]}):g.jsx("p",{className:`text-center ${t?"text-gray-400":"text-gray-500"}`,children:"Not enough harvest data for prediction"})]}),g.jsxs("div",{className:`p-6 rounded-lg shadow-lg ${t?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-lg font-semibold mb-4 ${t?"text-white":"text-gray-900"}`,children:"Yield History"}),B?g.jsx("div",{className:"h-64",children:g.jsx(Pu,{data:B,options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,grid:{color:t?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:t?"#e5e7eb":"#374151"}},x:{grid:{color:t?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:t?"#e5e7eb":"#374151"}}},plugins:{legend:{labels:{color:t?"#e5e7eb":"#374151"}}}}})}):g.jsx("p",{className:`text-center ${t?"text-gray-400":"text-gray-500"}`,children:"No yield history available"})]}),g.jsxs("div",{className:`p-6 rounded-lg shadow-lg ${t?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-lg font-semibold mb-4 ${t?"text-white":"text-gray-900"}`,children:"Weather Conditions"}),d?g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:`text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Average Temperature"}),g.jsxs("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:[d.temperature.toFixed(1),"C"]})]}),g.jsxs("div",{children:[g.jsx("p",{className:`text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Expected Rainfall (7-day)"}),g.jsxs("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:[d.rainfall.toFixed(1),"mm"]})]}),g.jsx("div",{className:"mt-4",children:g.jsxs("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:["Location: ",(te=(j=i==null?void 0:i.farmer_detail)==null?void 0:j.farm_latitude)==null?void 0:te.toFixed(4),", ",(me=(ae=i==null?void 0:i.farmer_detail)==null?void 0:ae.farm_longitude)==null?void 0:me.toFixed(4)]})})]}):g.jsx("p",{className:`text-center ${t?"text-gray-400":"text-gray-500"}`,children:"Weather data not available"})]})]})]})})};var mB={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(n,e){((t,i)=>{n.exports=i()})(ca,function t(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},r,s=!i.document&&!!i.postMessage,a=i.IS_PAPA_WORKER||!1,o={},l=0,c={};function u(T){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(E){var R=A(E);R.chunkSize=parseInt(R.chunkSize),E.step||E.chunk||(R.chunkSize=null),this._handle=new x(R),(this._handle.streamer=this)._config=R}).call(this,T),this.parseChunk=function(E,R){var I=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<I){let B=this._config.newline;B||(D=this._config.quoteChar||'"',B=this._handle.guessLineEndings(E,D)),E=[...E.split(B).slice(I)].join(B)}this.isFirstChunk&&k(this._config.beforeFirstChunk)&&(D=this._config.beforeFirstChunk(E))!==void 0&&(E=D),this.isFirstChunk=!1,this._halted=!1;var I=this._partialLine+E,D=(this._partialLine="",this._handle.parse(I,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(E=D.meta.cursor,I=(this._finished||(this._partialLine=I.substring(E-this._baseIndex),this._baseIndex=E),D&&D.data&&(this._rowCount+=D.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)i.postMessage({results:D,workerId:c.WORKER_ID,finished:I});else if(k(this._config.chunk)&&!R){if(this._config.chunk(D,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=D=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(D.data),this._completeResults.errors=this._completeResults.errors.concat(D.errors),this._completeResults.meta=D.meta),this._completed||!I||!k(this._config.complete)||D&&D.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),I||D&&D.meta.paused||this._nextChunk(),D}this._halted=!0},this._sendError=function(E){k(this._config.error)?this._config.error(E):a&&this._config.error&&i.postMessage({workerId:c.WORKER_ID,error:E,finished:!1})}}function d(T){var E;(T=T||{}).chunkSize||(T.chunkSize=c.RemoteChunkSize),u.call(this,T),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(R){this._input=R,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(E=new XMLHttpRequest,this._config.withCredentials&&(E.withCredentials=this._config.withCredentials),s||(E.onload=P(this._chunkLoaded,this),E.onerror=P(this._chunkError,this)),E.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var R,I=this._config.downloadRequestHeaders;for(R in I)E.setRequestHeader(R,I[R])}var D;this._config.chunkSize&&(D=this._start+this._config.chunkSize-1,E.setRequestHeader("Range","bytes="+this._start+"-"+D));try{E.send(this._config.downloadRequestBody)}catch(B){this._chunkError(B.message)}s&&E.status===0&&this._chunkError()}},this._chunkLoaded=function(){E.readyState===4&&(E.status<200||400<=E.status?this._chunkError():(this._start+=this._config.chunkSize||E.responseText.length,this._finished=!this._config.chunkSize||this._start>=(R=>(R=R.getResponseHeader("Content-Range"))!==null?parseInt(R.substring(R.lastIndexOf("/")+1)):-1)(E),this.parseChunk(E.responseText)))},this._chunkError=function(R){R=E.statusText||R,this._sendError(new Error(R))}}function h(T){(T=T||{}).chunkSize||(T.chunkSize=c.LocalChunkSize),u.call(this,T);var E,R,I=typeof FileReader<"u";this.stream=function(D){this._input=D,R=D.slice||D.webkitSlice||D.mozSlice,I?((E=new FileReader).onload=P(this._chunkLoaded,this),E.onerror=P(this._chunkError,this)):E=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var D=this._input,B=(this._config.chunkSize&&(B=Math.min(this._start+this._config.chunkSize,this._input.size),D=R.call(D,this._start,B)),E.readAsText(D,this._config.encoding));I||this._chunkLoaded({target:{result:B}})},this._chunkLoaded=function(D){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(D.target.result)},this._chunkError=function(){this._sendError(E.error)}}function p(T){var E;u.call(this,T=T||{}),this.stream=function(R){return E=R,this._nextChunk()},this._nextChunk=function(){var R,I;if(!this._finished)return R=this._config.chunkSize,E=R?(I=E.substring(0,R),E.substring(R)):(I=E,""),this._finished=!E,this.parseChunk(I)}}function y(T){u.call(this,T=T||{});var E=[],R=!0,I=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(D){this._input=D,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){I&&E.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),E.length?this.parseChunk(E.shift()):R=!0},this._streamData=P(function(D){try{E.push(typeof D=="string"?D:D.toString(this._config.encoding)),R&&(R=!1,this._checkIsFinished(),this.parseChunk(E.shift()))}catch(B){this._streamError(B)}},this),this._streamError=P(function(D){this._streamCleanUp(),this._sendError(D)},this),this._streamEnd=P(function(){this._streamCleanUp(),I=!0,this._streamData("")},this),this._streamCleanUp=P(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function x(T){var E,R,I,D,B=Math.pow(2,53),G=-B,Y=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,X=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Q=this,L=0,W=0,j=!1,te=!1,ae=[],me={data:[],errors:[],meta:{}};function K(Ce){return T.skipEmptyLines==="greedy"?Ce.join("").trim()==="":Ce.length===1&&Ce[0].length===0}function re(){if(me&&I&&(_e("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),I=!1),T.skipEmptyLines&&(me.data=me.data.filter(function(xe){return!K(xe)})),oe()){let xe=function(we,$){k(T.transformHeader)&&(we=T.transformHeader(we,$)),ae.push(we)};var De=xe;if(me)if(Array.isArray(me.data[0])){for(var Ce=0;oe()&&Ce<me.data.length;Ce++)me.data[Ce].forEach(xe);me.data.splice(0,1)}else me.data.forEach(xe)}function Ee(xe,we){for(var $=T.header?{}:[],Se=0;Se<xe.length;Se++){var de=Se,J=xe[Se],J=((ue,je)=>(Le=>(T.dynamicTypingFunction&&T.dynamicTyping[Le]===void 0&&(T.dynamicTyping[Le]=T.dynamicTypingFunction(Le)),(T.dynamicTyping[Le]||T.dynamicTyping)===!0))(ue)?je==="true"||je==="TRUE"||je!=="false"&&je!=="FALSE"&&((Le=>{if(Y.test(Le)&&(Le=parseFloat(Le),G<Le&&Le<B))return 1})(je)?parseFloat(je):X.test(je)?new Date(je):je===""?null:je):je)(de=T.header?Se>=ae.length?"__parsed_extra":ae[Se]:de,J=T.transform?T.transform(J,de):J);de==="__parsed_extra"?($[de]=$[de]||[],$[de].push(J)):$[de]=J}return T.header&&(Se>ae.length?_e("FieldMismatch","TooManyFields","Too many fields: expected "+ae.length+" fields but parsed "+Se,W+we):Se<ae.length&&_e("FieldMismatch","TooFewFields","Too few fields: expected "+ae.length+" fields but parsed "+Se,W+we)),$}var Pe;me&&(T.header||T.dynamicTyping||T.transform)&&(Pe=1,!me.data.length||Array.isArray(me.data[0])?(me.data=me.data.map(Ee),Pe=me.data.length):me.data=Ee(me.data,0),T.header&&me.meta&&(me.meta.fields=ae),W+=Pe)}function oe(){return T.header&&ae.length===0}function _e(Ce,Ee,Pe,De){Ce={type:Ce,code:Ee,message:Pe},De!==void 0&&(Ce.row=De),me.errors.push(Ce)}k(T.step)&&(D=T.step,T.step=function(Ce){me=Ce,oe()?re():(re(),me.data.length!==0&&(L+=Ce.data.length,T.preview&&L>T.preview?R.abort():(me.data=me.data[0],D(me,Q))))}),this.parse=function(Ce,Ee,Pe){var De=T.quoteChar||'"',De=(T.newline||(T.newline=this.guessLineEndings(Ce,De)),I=!1,T.delimiter?k(T.delimiter)&&(T.delimiter=T.delimiter(Ce),me.meta.delimiter=T.delimiter):((De=((xe,we,$,Se,de)=>{var J,ue,je,Le;de=de||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var Xe=0;Xe<de.length;Xe++){for(var gt,V=de[Xe],O=0,ee=0,le=0,ge=(je=void 0,new v({comments:Se,delimiter:V,newline:we,preview:10}).parse(xe)),ye=0;ye<ge.data.length;ye++)$&&K(ge.data[ye])?le++:(gt=ge.data[ye].length,ee+=gt,je===void 0?je=gt:0<gt&&(O+=Math.abs(gt-je),je=gt));0<ge.data.length&&(ee/=ge.data.length-le),(ue===void 0||O<=ue)&&(Le===void 0||Le<ee)&&1.99<ee&&(ue=O,J=V,Le=ee)}return{successful:!!(T.delimiter=J),bestDelimiter:J}})(Ce,T.newline,T.skipEmptyLines,T.comments,T.delimitersToGuess)).successful?T.delimiter=De.bestDelimiter:(I=!0,T.delimiter=c.DefaultDelimiter),me.meta.delimiter=T.delimiter),A(T));return T.preview&&T.header&&De.preview++,E=Ce,R=new v(De),me=R.parse(E,Ee,Pe),re(),j?{meta:{paused:!0}}:me||{meta:{paused:!1}}},this.paused=function(){return j},this.pause=function(){j=!0,R.abort(),E=k(T.chunk)?"":E.substring(R.getCharIndex())},this.resume=function(){Q.streamer._halted?(j=!1,Q.streamer.parseChunk(E,!0)):setTimeout(Q.resume,3)},this.aborted=function(){return te},this.abort=function(){te=!0,R.abort(),me.meta.aborted=!0,k(T.complete)&&T.complete(me),E=""},this.guessLineEndings=function(xe,De){xe=xe.substring(0,1048576);var De=new RegExp(_(De)+"([^]*?)"+_(De),"gm"),Pe=(xe=xe.replace(De,"")).split("\r"),De=xe.split(`
`),xe=1<De.length&&De[0].length<Pe[0].length;if(Pe.length===1||xe)return`
`;for(var we=0,$=0;$<Pe.length;$++)Pe[$][0]===`
`&&we++;return we>=Pe.length/2?`\r
`:"\r"}}function _(T){return T.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v(T){var E=(T=T||{}).delimiter,R=T.newline,I=T.comments,D=T.step,B=T.preview,G=T.fastMode,Y=null,X=!1,Q=T.quoteChar==null?'"':T.quoteChar,L=Q;if(T.escapeChar!==void 0&&(L=T.escapeChar),(typeof E!="string"||-1<c.BAD_DELIMITERS.indexOf(E))&&(E=","),I===E)throw new Error("Comment character same as delimiter");I===!0?I="#":(typeof I!="string"||-1<c.BAD_DELIMITERS.indexOf(I))&&(I=!1),R!==`
`&&R!=="\r"&&R!==`\r
`&&(R=`
`);var W=0,j=!1;this.parse=function(te,ae,me){if(typeof te!="string")throw new Error("Input must be a string");var K=te.length,re=E.length,oe=R.length,_e=I.length,Ce=k(D),Ee=[],Pe=[],De=[],xe=W=0;if(!te)return O();if(G||G!==!1&&te.indexOf(Q)===-1){for(var we=te.split(R),$=0;$<we.length;$++){if(De=we[$],W+=De.length,$!==we.length-1)W+=R.length;else if(me)return O();if(!I||De.substring(0,_e)!==I){if(Ce){if(Ee=[],Le(De.split(E)),ee(),j)return O()}else Le(De.split(E));if(B&&B<=$)return Ee=Ee.slice(0,B),O(!0)}}return O()}for(var Se=te.indexOf(E,W),de=te.indexOf(R,W),J=new RegExp(_(L)+_(Q),"g"),ue=te.indexOf(Q,W);;)if(te[W]===Q)for(ue=W,W++;;){if((ue=te.indexOf(Q,ue+1))===-1)return me||Pe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Ee.length,index:W}),gt();if(ue===K-1)return gt(te.substring(W,ue).replace(J,Q));if(Q===L&&te[ue+1]===L)ue++;else if(Q===L||ue===0||te[ue-1]!==L){Se!==-1&&Se<ue+1&&(Se=te.indexOf(E,ue+1));var je=Xe((de=de!==-1&&de<ue+1?te.indexOf(R,ue+1):de)===-1?Se:Math.min(Se,de));if(te.substr(ue+1+je,re)===E){De.push(te.substring(W,ue).replace(J,Q)),te[W=ue+1+je+re]!==Q&&(ue=te.indexOf(Q,W)),Se=te.indexOf(E,W),de=te.indexOf(R,W);break}if(je=Xe(de),te.substring(ue+1+je,ue+1+je+oe)===R){if(De.push(te.substring(W,ue).replace(J,Q)),V(ue+1+je+oe),Se=te.indexOf(E,W),ue=te.indexOf(Q,W),Ce&&(ee(),j))return O();if(B&&Ee.length>=B)return O(!0);break}Pe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Ee.length,index:W}),ue++}}else if(I&&De.length===0&&te.substring(W,W+_e)===I){if(de===-1)return O();W=de+oe,de=te.indexOf(R,W),Se=te.indexOf(E,W)}else if(Se!==-1&&(Se<de||de===-1))De.push(te.substring(W,Se)),W=Se+re,Se=te.indexOf(E,W);else{if(de===-1)break;if(De.push(te.substring(W,de)),V(de+oe),Ce&&(ee(),j))return O();if(B&&Ee.length>=B)return O(!0)}return gt();function Le(le){Ee.push(le),xe=W}function Xe(le){var ge=0;return ge=le!==-1&&(le=te.substring(ue+1,le))&&le.trim()===""?le.length:ge}function gt(le){return me||(le===void 0&&(le=te.substring(W)),De.push(le),W=K,Le(De),Ce&&ee()),O()}function V(le){W=le,Le(De),De=[],de=te.indexOf(R,W)}function O(le){if(T.header&&!ae&&Ee.length&&!X){var ge=Ee[0],ye=Object.create(null),Oe=new Set(ge);let Te=!1;for(let ze=0;ze<ge.length;ze++){let Je=ge[ze];if(ye[Je=k(T.transformHeader)?T.transformHeader(Je,ze):Je]){let He,nt=ye[Je];for(;He=Je+"_"+nt,nt++,Oe.has(He););Oe.add(He),ge[ze]=He,ye[Je]++,Te=!0,(Y=Y===null?{}:Y)[He]=Je}else ye[Je]=1,ge[ze]=Je;Oe.add(Je)}Te&&console.warn("Duplicate headers found and renamed."),X=!0}return{data:Ee,errors:Pe,meta:{delimiter:E,linebreak:R,aborted:j,truncated:!!le,cursor:xe+(ae||0),renamedHeaders:Y}}}function ee(){D(O()),Ee=[],Pe=[]}},this.abort=function(){j=!0},this.getCharIndex=function(){return W}}function b(T){var E=T.data,R=o[E.workerId],I=!1;if(E.error)R.userError(E.error,E.file);else if(E.results&&E.results.data){var D={abort:function(){I=!0,w(E.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:S,resume:S};if(k(R.userStep)){for(var B=0;B<E.results.data.length&&(R.userStep({data:E.results.data[B],errors:E.results.errors,meta:E.results.meta},D),!I);B++);delete E.results}else k(R.userChunk)&&(R.userChunk(E.results,D,E.file),delete E.results)}E.finished&&!I&&w(E.workerId,E.results)}function w(T,E){var R=o[T];k(R.userComplete)&&R.userComplete(E),R.terminate(),delete o[T]}function S(){throw new Error("Not implemented.")}function A(T){if(typeof T!="object"||T===null)return T;var E,R=Array.isArray(T)?[]:{};for(E in T)R[E]=A(T[E]);return R}function P(T,E){return function(){T.apply(E,arguments)}}function k(T){return typeof T=="function"}return c.parse=function(T,E){var R=(E=E||{}).dynamicTyping||!1;if(k(R)&&(E.dynamicTypingFunction=R,R={}),E.dynamicTyping=R,E.transform=!!k(E.transform)&&E.transform,!E.worker||!c.WORKERS_SUPPORTED)return R=null,c.NODE_STREAM_INPUT,typeof T=="string"?(T=(I=>I.charCodeAt(0)!==65279?I:I.slice(1))(T),R=new(E.download?d:p)(E)):T.readable===!0&&k(T.read)&&k(T.on)?R=new y(E):(i.File&&T instanceof File||T instanceof Object)&&(R=new h(E)),R.stream(T);(R=(()=>{var I;return!!c.WORKERS_SUPPORTED&&(I=(()=>{var D=i.URL||i.webkitURL||null,B=t.toString();return c.BLOB_URL||(c.BLOB_URL=D.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",B,")();"],{type:"text/javascript"})))})(),(I=new i.Worker(I)).onmessage=b,I.id=l++,o[I.id]=I)})()).userStep=E.step,R.userChunk=E.chunk,R.userComplete=E.complete,R.userError=E.error,E.step=k(E.step),E.chunk=k(E.chunk),E.complete=k(E.complete),E.error=k(E.error),delete E.worker,R.postMessage({input:T,config:E,workerId:R.id})},c.unparse=function(T,E){var R=!1,I=!0,D=",",B=`\r
`,G='"',Y=G+G,X=!1,Q=null,L=!1,W=((()=>{if(typeof E=="object"){if(typeof E.delimiter!="string"||c.BAD_DELIMITERS.filter(function(ae){return E.delimiter.indexOf(ae)!==-1}).length||(D=E.delimiter),typeof E.quotes!="boolean"&&typeof E.quotes!="function"&&!Array.isArray(E.quotes)||(R=E.quotes),typeof E.skipEmptyLines!="boolean"&&typeof E.skipEmptyLines!="string"||(X=E.skipEmptyLines),typeof E.newline=="string"&&(B=E.newline),typeof E.quoteChar=="string"&&(G=E.quoteChar),typeof E.header=="boolean"&&(I=E.header),Array.isArray(E.columns)){if(E.columns.length===0)throw new Error("Option columns is empty");Q=E.columns}E.escapeChar!==void 0&&(Y=E.escapeChar+G),E.escapeFormulae instanceof RegExp?L=E.escapeFormulae:typeof E.escapeFormulae=="boolean"&&E.escapeFormulae&&(L=/^[=+\-@\t\r].*$/)}})(),new RegExp(_(G),"g"));if(typeof T=="string"&&(T=JSON.parse(T)),Array.isArray(T)){if(!T.length||Array.isArray(T[0]))return j(null,T,X);if(typeof T[0]=="object")return j(Q||Object.keys(T[0]),T,X)}else if(typeof T=="object")return typeof T.data=="string"&&(T.data=JSON.parse(T.data)),Array.isArray(T.data)&&(T.fields||(T.fields=T.meta&&T.meta.fields||Q),T.fields||(T.fields=Array.isArray(T.data[0])?T.fields:typeof T.data[0]=="object"?Object.keys(T.data[0]):[]),Array.isArray(T.data[0])||typeof T.data[0]=="object"||(T.data=[T.data])),j(T.fields||[],T.data||[],X);throw new Error("Unable to serialize unrecognized input");function j(ae,me,K){var re="",oe=(typeof ae=="string"&&(ae=JSON.parse(ae)),typeof me=="string"&&(me=JSON.parse(me)),Array.isArray(ae)&&0<ae.length),_e=!Array.isArray(me[0]);if(oe&&I){for(var Ce=0;Ce<ae.length;Ce++)0<Ce&&(re+=D),re+=te(ae[Ce],Ce);0<me.length&&(re+=B)}for(var Ee=0;Ee<me.length;Ee++){var Pe=(oe?ae:me[Ee]).length,De=!1,xe=oe?Object.keys(me[Ee]).length===0:me[Ee].length===0;if(K&&!oe&&(De=K==="greedy"?me[Ee].join("").trim()==="":me[Ee].length===1&&me[Ee][0].length===0),K==="greedy"&&oe){for(var we=[],$=0;$<Pe;$++){var Se=_e?ae[$]:$;we.push(me[Ee][Se])}De=we.join("").trim()===""}if(!De){for(var de=0;de<Pe;de++){0<de&&!xe&&(re+=D);var J=oe&&_e?ae[de]:de;re+=te(me[Ee][J],de)}Ee<me.length-1&&(!K||0<Pe&&!xe)&&(re+=B)}}return re}function te(ae,me){var K,re;return ae==null?"":ae.constructor===Date?JSON.stringify(ae).slice(1,25):(re=!1,L&&typeof ae=="string"&&L.test(ae)&&(ae="'"+ae,re=!0),K=ae.toString().replace(W,Y),(re=re||R===!0||typeof R=="function"&&R(ae,me)||Array.isArray(R)&&R[me]||((oe,_e)=>{for(var Ce=0;Ce<_e.length;Ce++)if(-1<oe.indexOf(_e[Ce]))return!0;return!1})(K,c.BAD_DELIMITERS)||-1<K.indexOf(D)||K.charAt(0)===" "||K.charAt(K.length-1)===" ")?G+K+G:K)}},c.RECORD_SEP=String.fromCharCode(30),c.UNIT_SEP=String.fromCharCode(31),c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!s&&!!i.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=v,c.ParserHandle=x,c.NetworkStreamer=d,c.FileStreamer=h,c.StringStreamer=p,c.ReadableStreamStreamer=y,i.jQuery&&((r=i.jQuery).fn.parse=function(T){var E=T.config||{},R=[];return this.each(function(B){if(!(r(this).prop("tagName").toUpperCase()==="INPUT"&&r(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var G=0;G<this.files.length;G++)R.push({file:this.files[G],inputElem:this,instanceConfig:r.extend({},E)})}),I(),this;function I(){if(R.length===0)k(T.complete)&&T.complete();else{var B,G,Y,X,Q=R[0];if(k(T.before)){var L=T.before(Q.file,Q.inputElem);if(typeof L=="object"){if(L.action==="abort")return B="AbortError",G=Q.file,Y=Q.inputElem,X=L.reason,void(k(T.error)&&T.error({name:B},G,Y,X));if(L.action==="skip")return void D();typeof L.config=="object"&&(Q.instanceConfig=r.extend(Q.instanceConfig,L.config))}else if(L==="skip")return void D()}var W=Q.instanceConfig.complete;Q.instanceConfig.complete=function(j){k(W)&&W(j,Q.file,Q.inputElem),D()},c.parse(Q.file,Q.instanceConfig)}}function D(){R.splice(0,1),I()}}),a&&(i.onmessage=function(T){T=T.data,c.WORKER_ID===void 0&&T&&(c.WORKER_ID=T.workerId),typeof T.input=="string"?i.postMessage({workerId:c.WORKER_ID,results:c.parse(T.input,T.config),finished:!0}):(i.File&&T.input instanceof File||T.input instanceof Object)&&(T=c.parse(T.input,T.config))&&i.postMessage({workerId:c.WORKER_ID,results:T,finished:!0})}),(d.prototype=Object.create(u.prototype)).constructor=d,(h.prototype=Object.create(u.prototype)).constructor=h,(p.prototype=Object.create(p.prototype)).constructor=p,(y.prototype=Object.create(u.prototype)).constructor=y,c})})(mB);var Yee=mB.exports;const Kee=eP(Yee),Zee=()=>{const n=Ki(),e=Bs(),[t,i]=F.useState(null),[r,s]=F.useState([]),[a,o]=F.useState([]),[l,c]=F.useState(""),[u,d]=F.useState(!1),[h,p]=F.useState(!1),[y,x]=F.useState(null),[_,v]=F.useState(""),[b,w]=F.useState(!1);F.useEffect(()=>{(async()=>{const{data:Y,error:X}=await tt.from("coffee_data").select("*");X||s(Y)})()},[]),F.useEffect(()=>{(async()=>{const{data:{user:Y}}=await tt.auth.getUser();if(Y){const{data:X,error:Q}=await tt.from("users").select("first_name, last_name, role").eq("email",Y.email).single();Q||i(X)}else n("/login")})()},[n]);const S=G=>{const Y=G.target.files[0];Y&&(c(Y.name),Kee.parse(Y,{header:!0,skipEmptyLines:!0,complete:X=>{o(X.data),w(!0)}}))},A=()=>{c(""),o([]),document.getElementById("file-input").value=""},P=async()=>{if(!a.length)return alert("No data to upload!");d(!0);try{const{error:G}=await tt.from("coffee_data").insert(a);if(G)throw G;alert("Data uploaded successfully!"),o([]),c(""),w(!1)}catch(G){alert("Upload failed: "+G.message)}finally{d(!1)}},[k,T]=F.useState({season:"",month:"",ripe_percentage:"",unripe_percentage:"",ph_level:"",nitrogen:"",phosphorus:"",potassium:"",calcium:"",magnesium:"",organic_matter:"",avg_temperature:"",avg_rainfall:"",coffee_berry_borer:"",green_coffee_scale:"",coffee_leaf_rust:"",root_rot:"",coffee_berry_disease:"",mealybugs_aphids:""}),E=G=>{T({...k,[G.target.name]:G.target.value})},R=async()=>{if(!k.season||!k.month)return alert("Season and Month are required!");if(h){const{error:G}=await tt.from("coffee_data").update(k).eq("id",y);G?alert("Failed to update record!"):(s(Y=>Y.map(X=>X.id===y?{...X,...k}:X)),alert("Record updated successfully!")),p(!1),x(null)}else{const{data:G,error:Y}=await tt.from("coffee_data").insert([k]);Y?alert("Failed to add record!"):(s([...r,G[0]]),alert("Record added successfully!"))}T({season:"",month:"",ripe_percentage:"",unripe_percentage:"",ph_level:"",nitrogen:"",phosphorus:"",potassium:"",calcium:"",magnesium:"",organic_matter:"",avg_temperature:"",avg_rainfall:"",coffee_berry_borer:"",green_coffee_scale:"",coffee_leaf_rust:"",root_rot:"",coffee_berry_disease:"",mealybugs_aphids:""})},I=G=>{T(G),p(!0),x(G.id)},D=async G=>{const{error:Y}=await tt.from("coffee_data").delete().eq("id",G);Y?alert("Failed to delete record!"):(s(r.filter(X=>X.id!==G)),alert("Record deleted successfully!"))},B=r.filter(G=>Object.values(G).some(Y=>Y.toString().toLowerCase().includes(_.toLowerCase())));return g.jsxs("div",{className:"page-container",children:[b&&g.jsx("div",{className:"modal",children:g.jsxs("div",{className:"modal-content",style:{padding:"50px",maxWidth:"80%",margin:"0 auto"},children:[g.jsx("h3",{children:"Preview Uploaded CSV Data"}),g.jsxs("table",{children:[g.jsx("thead",{children:g.jsx("tr",{children:Object.keys(a[0]).map(G=>g.jsx("th",{children:G},G))})}),g.jsx("tbody",{children:a.map((G,Y)=>g.jsx("tr",{children:Object.values(G).map((X,Q)=>g.jsx("td",{children:X},Q))},Y))})]}),g.jsxs("div",{style:{textAlign:"right"},children:[g.jsx("button",{onClick:()=>w(!1),children:"Close"}),g.jsx("button",{onClick:P,disabled:u,children:u?"Uploading...":"Upload Data"})]})]})}),g.jsxs("header",{className:"page-header",children:[g.jsx("div",{className:"logo",children:""}),g.jsx("b",{children:g.jsx("p",{children:"Data Entry"})}),g.jsxs("div",{className:"user-info",children:[t&&g.jsxs("span",{children:[t.role," | ",t.first_name," ",t.last_name]}),t&&g.jsx("button",{onClick:()=>tt.auth.signOut(),className:"logout-btn",children:"Logout"})]})]}),g.jsxs("div",{className:"page-main",children:[g.jsx("nav",{className:"sidebar",children:g.jsxs("ul",{children:[g.jsx("li",{onClick:()=>n("/dashboard"),className:e.pathname==="/dashboard"?"active":"",children:"Dashboard"}),g.jsx("li",{onClick:()=>n("/user-management"),className:e.pathname==="/user-management"?"active":"",children:"Farmer Management"}),g.jsx("li",{onClick:()=>n("/predictive-analytics"),className:e.pathname==="/predictive-analytics"?"active":"",children:"Predictive Analytics"}),g.jsx("li",{onClick:()=>n("/data-entry"),className:e.pathname==="/data-entry"?"active":"",children:"Data Entry"}),g.jsx("li",{onClick:()=>n("/dss-recommendations"),className:e.pathname==="/dss-recommendations"?"active":"",children:"DSS Recommendations"})]})}),g.jsxs("main",{className:"content",children:[g.jsx("h2",{children:"Manage Coffee Data"}),g.jsx("input",{type:"file",id:"file-input",accept:".csv",onChange:S}),l&&g.jsxs("div",{className:"file-info",children:[g.jsxs("p",{children:["File: ",l]}),g.jsx("button",{onClick:A,children:"Remove File"})]}),g.jsxs("div",{className:"form-container",children:[g.jsx("h3",{children:h?"Edit Record":"Add New Record"}),g.jsxs("form",{children:[Object.keys(k).map(G=>g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:G.replace(/_/g," ").toUpperCase()}),g.jsx("input",{type:"text",name:G,value:k[G],onChange:E,placeholder:`Enter ${G.replace(/_/g," ")}`})]},G)),g.jsx("button",{type:"button",onClick:R,children:h?"Update Record":"Add Record"})]})]}),g.jsx("input",{type:"text",placeholder:"Search...",value:_,onChange:G=>v(G.target.value),className:"search-input"}),g.jsx("div",{className:"table-container",children:g.jsxs("table",{children:[g.jsx("thead",{children:g.jsxs("tr",{children:[r.length>0&&Object.keys(r[0]).map(G=>g.jsx("th",{children:G},G)),g.jsx("th",{className:"sticky",children:"Actions"})]})}),g.jsx("tbody",{children:B.map(G=>g.jsxs("tr",{children:[Object.values(G).map((Y,X)=>g.jsx("td",{children:Y},X)),g.jsxs("td",{className:"sticky",children:[g.jsx("button",{onClick:()=>I(G),children:"Edit"}),g.jsx("button",{onClick:()=>D(G.id),children:"Delete"})]})]},G.id))})]})})]})]})]})};Za.register(To,Co,Xl,dc,hc,uc);const Jee=()=>{const n=Ki();Bs();const{isDarkMode:e,toggleTheme:t}=Zi(),[i,r]=F.useState(null),[s,a]=F.useState(null),[o,l]=F.useState([]),[c,u]=F.useState({}),[d,h]=F.useState(!0),[p,y]=F.useState(!1),[x,_]=F.useState(null),[v,b]=F.useState(null),[w,S]=F.useState([]);F.useState(null);const[A,P]=F.useState([]);F.useState(""),F.useState(""),F.useState(""),F.useState(""),F.useState(""),F.useState({season:new Date().getMonth()<6?"dry":"wet",marketTrend:"stable",sustainabilityFocus:!0,elevation:"",lastHarvest:null,soilPH:null,previousYieldRate:null,diseaseHistory:[],weatherForecast:null});const[k,T]=F.useState([]),[E,R]=F.useState([]);F.useEffect(()=>{(async()=>{h(!0);const{data:{user:W}}=await tt.auth.getUser();if(!W){n("/login");return}const{data:j,error:te}=await tt.from("users").select("*").eq("id",W.id).single();!te&&j&&a(j),r(W);const{data:ae,error:me}=await tt.from("plant_data").select("*").eq("farmer_id",W.id);!me&&ae&&l(ae);const{data:K,error:re}=await tt.from("harvest_data").select("*").eq("farmer_id",W.id);if(!re&&K){P(K);const oe=ae.reduce((J,ue)=>J+(ue.number_of_tree_planted||0),0);K.reduce((J,ue)=>J+(ue.coffee_raw_quantity||0),0);const _e=K.reduce((J,ue)=>J+(ue.coffee_dry_quantity||0),0),Ce=K.reduce((J,ue)=>J+(ue.coffee_premium_grade||0),0),Ee=K.reduce((J,ue)=>J+(ue.coffee_fine_grade||0),0),Pe=K.reduce((J,ue)=>J+(ue.coffee_commercial_grade||0),0),De=oe>0?_e/oe:0,xe=_e>0?Ce/_e*100:0,we=_e>0?Ee/_e*100:0,$=_e>0?Pe/_e*100:0;_({totalTrees:oe,yieldPerTree:De,premiumPercentage:xe,harvestCount:K.length,totalDryYield:_e}),b({premiumGrade:Ce,fineGrade:Ee,commercialGrade:Pe,premiumPercentage:xe,finePercentage:we,commercialPercentage:$});const{data:Se}=await tt.from("farmer_detail").select("*").eq("id",W.id).single(),de=G({yieldPerTree:De,premiumPercentage:xe,totalTrees:oe,farmSize:Se==null?void 0:Se.farm_size,elevation:Se==null?void 0:Se.farm_elevation,harvestCount:K.length,totalDryYield:_e});S(de)}h(!1)})()},[n]),F.useEffect(()=>{const L=async()=>{const W={};for(const j of o){const{data:te,error:ae}=await tt.from("plant_status").select("*").eq("plant_id",j.plant_id).order("created_at",{ascending:!1}).limit(1).single();!ae&&te&&(W[j.plant_id]=te)}u(W)};o.length>0&&L()},[o]),F.useEffect(()=>{const L=()=>{y(!0),console.warn("WebGL context lost - attempting to restore...")},W=()=>{y(!1),console.log("WebGL context restored successfully")},j=document.querySelector("canvas");return j&&(j.addEventListener("webglcontextlost",L),j.addEventListener("webglcontextrestored",W)),()=>{j&&(j.removeEventListener("webglcontextlost",L),j.removeEventListener("webglcontextrestored",W))}},[]);const I=[{name:"Dashboard",path:"/dashboard"},{name:"Farmer Management",path:"/user-management"},{name:"Predictive Analytics",path:"/predictive-analytics"},{name:"DSS Recommendations",path:"/dss-recommendations"},{name:"Farmer Report",path:"/farmer-reports"},{name:"Coffee Grade Predictor",path:"/coffee-grader"}],D=[{name:"Dashboard",path:"/farmer-dashboard"},{name:"User Profile",path:"/user-profile"},{name:"Predictive Analytics",path:"/predictive-analytics"},{name:"DSS Recommendations",path:"/dss-recommendations"},{name:"Coffee Grade Predictor",path:"/coffee-grader"},{name:"Land & Plant Declaration",path:"/land-declaration"},{name:"Harvest Reporting",path:"/harvest-reporting"}];i==null||i.role;const B=L=>{switch(L==null?void 0:L.toLowerCase()){case"healthy":return e?"bg-green-900 text-green-200":"bg-green-100 text-green-800";case"diseased":return e?"bg-red-900 text-red-200":"bg-red-100 text-red-800";case"pest-affected":return e?"bg-yellow-900 text-yellow-200":"bg-yellow-100 text-yellow-800";default:return e?"bg-gray-700 text-gray-200":"bg-gray-100 text-gray-800"}},G=({yieldPerTree:L,premiumPercentage:W,totalTrees:j,farmSize:te,elevation:ae,harvestCount:me,totalDryYield:K})=>{const re=[];return L<2&&re.push({type:"critical",category:"Yield",issue:"Low yield per tree",action:"Implement proper fertilization and pruning techniques",impact:"Potential 20-30% yield increase"}),W<30&&re.push({type:"high",category:"Quality",issue:"Low premium grade percentage",action:"Improve cherry selection and processing methods",impact:"Increase premium grade ratio by 15-20%"}),te&&j&&j/te<1e3&&re.push({type:"medium",category:"Farm Utilization",issue:"Low tree density",action:"Consider planting more trees in available space",impact:"Optimize land usage and increase total yield"}),me<2&&K>0&&re.push({type:"high",category:"Harvest Management",issue:"Low harvest frequency",action:"Implement regular harvest schedules",impact:"Better yield distribution and quality control"}),ae<1e3&&re.push({type:"medium",category:"Environment",issue:"Low elevation farming",action:"Implement shade management techniques",impact:"Improve coffee quality and plant health"}),re},Y=L=>{n(`/plant-status/${L.plant_id}`)},X=(L,W,j)=>{const te=new Date().getMonth(),ae=[];if(te>=2&&te<=4?ae.push({type:"seasonal",priority:"high",message:"Peak harvest season - Focus on proper harvesting techniques and post-harvest processing",details:["Harvest only ripe cherries","Maintain proper drying conditions","Monitor moisture content during processing"]}):te>=5&&te<=7?ae.push({type:"seasonal",priority:"medium",message:"Post-harvest maintenance period",details:["Prune trees to remove dead branches","Apply balanced fertilizer","Monitor for pest infestations"]}):te>=8&&te<=10?ae.push({type:"seasonal",priority:"high",message:"Pre-harvest preparation",details:["Monitor cherry development","Prepare processing equipment","Plan harvest schedule"]}):ae.push({type:"seasonal",priority:"medium",message:"Off-season maintenance",details:["Focus on soil management","Implement water conservation measures","Plan for next season's activities"]}),j&&((j.soil_ph<5.5||j.soil_ph>6.5)&&ae.push({type:"soil",priority:"high",message:"Soil pH needs adjustment",details:[`Current pH: ${j.soil_ph}`,"Apply appropriate soil amendments","Monitor pH changes after application"]}),j.moisture_level==="dry"&&ae.push({type:"irrigation",priority:"high",message:"Irrigation needed",details:["Implement regular watering schedule","Consider mulching to retain moisture","Monitor soil moisture levels"]}),j.status==="diseased"&&ae.push({type:"health",priority:"critical",message:"Disease management required",details:["Identify specific disease symptoms","Apply appropriate treatment","Implement preventive measures"]})),W&&W.length>0){const me=W.slice(-3),K=me.reduce((oe,_e)=>oe+_e.coffee_dry_quantity,0)/me.length;me.reduce((oe,_e)=>oe+_e.coffee_premium_grade,0)/me.length/K<.3&&ae.push({type:"quality",priority:"medium",message:"Quality improvement needed",details:["Review harvesting techniques","Improve post-harvest processing","Consider selective picking"]})}return ae},Q=(L,W)=>{const j=[];return j.push({category:"Planting",practices:["Maintain proper spacing between trees (2-3 meters)","Plant in well-draining soil","Provide adequate shade for young plants"]}),j.push({category:"Maintenance",practices:["Regular pruning to maintain tree shape","Annual soil testing and amendment","Proper weed management","Regular pest and disease monitoring"]}),j.push({category:"Harvesting",practices:["Selective picking of ripe cherries","Proper sorting of harvested cherries","Maintain clean processing equipment","Monitor moisture content during drying"]}),L&&L.length>0&&[...new Set(L.map(ae=>ae.coffee_variety))].forEach(ae=>{j.push({category:`${ae} Specific`,practices:["Follow variety-specific pruning techniques","Monitor for variety-specific diseases","Adjust fertilization based on variety requirements"]})}),j};return F.useEffect(()=>{if(o&&A&&Object.keys(c).length>0){const L=X(o,A,c[o[0].plant_id]);T(L);const W=Q(o);R(W)}},[o,A,c]),g.jsx(ci,{children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsx("div",{className:`mb-8 ${e?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6`,children:g.jsx("div",{className:"flex items-center justify-between",children:g.jsxs("div",{children:[g.jsx("h2",{className:`text-3xl font-bold ${e?"text-white":"text-gray-900"}`,children:"DSS Recommendations"}),s&&g.jsxs("p",{className:`mt-2 text-lg ${e?"text-gray-300":"text-gray-600"}`,children:["Welcome back, ",g.jsxs("span",{className:"font-semibold",children:[s.first_name," ",s.middle_name?`${s.middle_name} `:"",s.last_name]})]}),g.jsx("p",{className:`mt-2 ${e?"text-gray-400":"text-gray-500"}`,children:"Here are your personalized recommendations and insights"})]})})}),d?g.jsxs("div",{className:"animate-pulse space-y-6",children:[g.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),g.jsx("div",{className:"h-40 bg-gray-200 rounded"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsx("div",{className:"h-32 bg-gray-200 rounded"}),g.jsx("div",{className:"h-32 bg-gray-200 rounded"})]})]}):g.jsxs(g.Fragment,{children:[x&&g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[g.jsxs("div",{className:`p-6 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-lg font-semibold ${e?"text-gray-200":"text-gray-700"}`,children:"Yield per Tree"}),g.jsxs("p",{className:`text-3xl font-bold mt-2 ${e?"text-indigo-400":"text-indigo-600"}`,children:[x.yieldPerTree.toFixed(2)," kg"]})]}),g.jsxs("div",{className:`p-6 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-lg font-semibold ${e?"text-gray-200":"text-gray-700"}`,children:"Premium Grade"}),g.jsxs("p",{className:`text-3xl font-bold mt-2 ${e?"text-indigo-400":"text-indigo-600"}`,children:[x.premiumPercentage.toFixed(1),"%"]})]}),g.jsxs("div",{className:`p-6 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-lg font-semibold ${e?"text-gray-200":"text-gray-700"}`,children:"Total Trees"}),g.jsx("p",{className:`text-3xl font-bold mt-2 ${e?"text-indigo-400":"text-indigo-600"}`,children:x.totalTrees})]}),g.jsxs("div",{className:`p-6 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-lg font-semibold ${e?"text-gray-200":"text-gray-700"}`,children:"Harvests"}),g.jsx("p",{className:`text-3xl font-bold mt-2 ${e?"text-indigo-400":"text-indigo-600"}`,children:x.harvestCount})]})]}),v&&g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[g.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h2",{className:`text-xl font-bold mb-4 ${e?"text-white":"text-gray-900"}`,children:"Grade Distribution (kg)"}),g.jsx("div",{className:"h-64",children:g.jsx(lS,{data:{labels:["Premium","Fine","Commercial"],datasets:[{label:"Grade Distribution (kg)",data:[v.premiumGrade,v.fineGrade,v.commercialGrade],backgroundColor:e?["rgba(129, 140, 248, 0.8)","rgba(96, 165, 250, 0.8)","rgba(147, 197, 253, 0.8)"]:["rgba(99, 102, 241, 0.8)","rgba(59, 130, 246, 0.8)","rgba(96, 165, 250, 0.8)"]}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{callback:L=>`${L} kg`},grid:{display:!1}},x:{grid:{display:!1}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(L){const W=L.raw,j=v[`${L.label.toLowerCase()}Percentage`];return`${W.toFixed(2)} kg (${j.toFixed(1)}%)`}}}}}})})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:`text-xl font-bold mb-4 ${e?"text-white":"text-gray-900"}`,children:"Recommendations"}),g.jsx("div",{className:"max-h-[500px] overflow-y-auto pr-2 space-y-4",children:w.map((L,W)=>g.jsxs("div",{className:`p-4 rounded-md border-l-4 ${L.type==="critical"?e?"bg-red-900/30 border-red-500":"bg-red-50 border-red-500":L.type==="high"?e?"bg-orange-900/30 border-orange-500":"bg-orange-50 border-orange-500":e?"bg-yellow-900/30 border-yellow-500":"bg-yellow-50 border-yellow-500"}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("span",{className:`font-bold ${e?"text-white":"text-gray-900"}`,children:L.category}),g.jsx("span",{className:`text-sm font-medium px-2 py-1 rounded-full ${L.type==="critical"?e?"bg-red-900 text-red-300":"bg-red-100 text-red-700":L.type==="high"?e?"bg-orange-900 text-orange-300":"bg-orange-100 text-orange-700":e?"bg-yellow-900 text-yellow-300":"bg-yellow-100 text-yellow-700"}`,children:L.type.toUpperCase()})]}),g.jsx("p",{className:`text-sm ${e?"text-gray-300":"text-gray-600"}`,children:L.issue}),g.jsxs("p",{className:`mt-2 text-sm font-medium ${e?"text-gray-200":"text-gray-800"}`,children:["Action: ",L.action]}),g.jsxs("p",{className:`mt-1 text-sm ${e?"text-gray-400":"text-gray-500"}`,children:["Expected Impact: ",L.impact]})]},W))})]})]}),g.jsx("div",{className:"mt-8",children:g.jsxs("div",{className:`p-6 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-6",children:[g.jsx("h3",{className:`text-2xl font-bold ${e?"text-white":"text-gray-900"}`,children:"Seasonal Recommendations"}),g.jsxs("div",{className:`px-4 py-2 rounded-full text-sm font-medium ${e?"bg-indigo-900 text-indigo-200":"bg-indigo-100 text-indigo-700"}`,children:[new Date().toLocaleString("default",{month:"long"})," ",new Date().getFullYear()]})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:k.map((L,W)=>g.jsxs("div",{className:`p-6 rounded-lg border-l-4 transition-all duration-200 hover:shadow-lg ${L.priority==="critical"?e?"bg-red-900/20 border-red-500 hover:bg-red-900/30":"bg-red-50 border-red-500 hover:bg-red-100":L.priority==="high"?e?"bg-yellow-900/20 border-yellow-500 hover:bg-yellow-900/30":"bg-yellow-50 border-yellow-500 hover:bg-yellow-100":e?"bg-blue-900/20 border-blue-500 hover:bg-blue-900/30":"bg-blue-50 border-blue-500 hover:bg-blue-100"}`,children:[g.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[g.jsx("div",{className:`p-2 rounded-full ${L.priority==="critical"?e?"bg-red-900/50":"bg-red-100":L.priority==="high"?e?"bg-yellow-900/50":"bg-yellow-100":e?"bg-blue-900/50":"bg-blue-100"}`,children:L.priority==="critical"?g.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}):L.priority==="high"?g.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}):g.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),g.jsx("span",{className:`font-semibold text-lg ${e?"text-white":"text-gray-900"}`,children:L.message})]}),g.jsx("ul",{className:"space-y-2",children:L.details.map((j,te)=>g.jsxs("li",{className:`flex items-start gap-2 ${e?"text-gray-300":"text-gray-600"}`,children:[g.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})}),g.jsx("span",{children:j})]},te))})]},W))})]})}),g.jsx("div",{className:"mt-8",children:g.jsxs("div",{className:`p-6 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-2xl font-bold mb-6 ${e?"text-white":"text-gray-900"}`,children:"Best Practices"}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map((L,W)=>g.jsxs("div",{className:`p-6 rounded-lg transition-all duration-200 hover:shadow-lg ${e?"bg-gray-700/50 hover:bg-gray-700":"bg-gray-50 hover:bg-gray-100"}`,children:[g.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[g.jsx("div",{className:`p-2 rounded-full ${e?"bg-indigo-900/50":"bg-indigo-100"}`,children:L.category==="Planting"?g.jsx("svg",{className:"w-5 h-5 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}):L.category==="Maintenance"?g.jsxs("svg",{className:"w-5 h-5 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):g.jsx("svg",{className:"w-5 h-5 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),g.jsx("h4",{className:`text-lg font-semibold ${e?"text-white":"text-gray-900"}`,children:L.category})]}),g.jsx("ul",{className:"space-y-3",children:L.practices.map((j,te)=>g.jsxs("li",{className:`flex items-start gap-2 ${e?"text-gray-300":"text-gray-600"}`,children:[g.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),g.jsx("span",{children:j})]},te))})]},W))})]})}),g.jsxs("div",{className:`mt-8 ${e?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6`,children:[g.jsx("h3",{className:`text-2xl font-semibold mb-6 ${e?"text-white":"text-gray-900"}`,children:"Your Current Plants"}),o.length===0?g.jsxs("div",{className:"text-center py-8",children:[g.jsx("p",{className:`mb-4 text-lg ${e?"text-gray-300":"text-gray-600"}`,children:"Please declare plant first."}),g.jsx("button",{className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",onClick:()=>n("/land-declaration"),children:"Declare Plant"})]}):g.jsx("div",{className:"space-y-4",children:o.map(L=>g.jsx("div",{className:`p-6 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"} 
                        hover:shadow-xl transition-all duration-200 cursor-pointer 
                        ${e?"hover:bg-gray-700":"hover:bg-gray-50"}`,onClick:()=>Y(L),children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsx("h3",{className:`text-lg font-medium ${e?"text-white":"text-gray-900"}`,children:L.coffee_variety}),g.jsxs("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"}`,children:["Trees: ",L.number_of_tree_planted]}),g.jsxs("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"}`,children:["Planted: ",new Date(L.planting_date).toLocaleDateString()]})]}),c[L.plant_id]&&g.jsx("div",{className:`px-4 py-2 rounded-full text-sm font-medium
                            ${B(c[L.plant_id].status)}`,children:c[L.plant_id].status}),g.jsx("div",{className:`ml-4 p-2 rounded-full ${e?"bg-gray-700 text-indigo-400":"bg-gray-100 text-indigo-600"}`,children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]})},L.plant_id))})]})]})]})})};Za.register(To,Co,Xl,dc,hc,uc);const Qee=()=>{const{user:n}=Po(),{isDarkMode:e}=Zi(),[t,i]=F.useState(!0),[r,s]=F.useState(null),[a,o]=F.useState([]),[l,c]=F.useState(null),u=F.useCallback(async()=>{try{i(!0),s(null);const{data:h,error:p}=await tt.from("users").select("id, first_name, last_name").eq("role","farmer");if(p)throw p;const{data:y,error:x}=await tt.from("farmer_detail").select(`
          id,
          farm_location,
          farm_size,
          farm_elevation,
          plant_id
        `);if(x)throw x;const{data:_,error:v}=await tt.from("plant_data").select("plant_id, farmer_id, number_of_tree_planted");if(v)throw v;const{data:b,error:w}=await tt.from("harvest_data").select("*");if(w)throw w;const S=h.map(A=>{const P=y.find(W=>W.id===A.id)||{},k=_.filter(W=>W.farmer_id===A.id),T=b.filter(W=>W.farmer_id===A.id),E=k.reduce((W,j)=>W+(j.number_of_tree_planted||0),0),R=T.reduce((W,j)=>W+(j.coffee_raw_quantity||0),0),I=T.reduce((W,j)=>W+(j.coffee_dry_quantity||0),0),D=T.reduce((W,j)=>W+(j.coffee_premium_grade||0),0),B=T.reduce((W,j)=>W+(j.coffee_fine_grade||0),0),G=T.reduce((W,j)=>W+(j.coffee_commercial_grade||0),0),Y=E>0?I/E:0,X=I>0?D/I*100:0,Q=I>0?B/I*100:0,L=I>0?G/I*100:0;return{id:A.id,name:`${A.first_name} ${A.last_name}`,farmLocation:P.farm_location,farmSize:P.farm_size,farmElevation:P.farm_elevation,totalTrees:E,totalRawYield:R,totalDryYield:I,yieldPerTree:Y,premiumPercentage:X,finePercentage:Q,commercialPercentage:L,harvestCount:T.length,recommendations:d({yieldPerTree:Y,premiumPercentage:X,totalTrees:E,farmSize:P.farm_size,elevation:P.farm_elevation,harvestCount:T.length,totalDryYield:I})}});o(S)}catch(h){console.error("Error fetching farmer data:",h),s("Failed to load farmer data. Please try again later.")}finally{i(!1)}},[]);F.useEffect(()=>{u()},[u]);const d=({yieldPerTree:h,premiumPercentage:p,totalTrees:y,farmSize:x,elevation:_,harvestCount:v,totalDryYield:b})=>{const w=[];return h<2&&w.push({type:"critical",category:"Yield",issue:"Low yield per tree",action:"Implement proper fertilization and pruning techniques",impact:"Potential 20-30% yield increase"}),p<30&&w.push({type:"high",category:"Quality",issue:"Low premium grade percentage",action:"Improve cherry selection and processing methods",impact:"Increase premium grade ratio by 15-20%"}),x&&y&&y/x<1e3&&w.push({type:"medium",category:"Farm Utilization",issue:"Low tree density",action:"Consider planting more trees in available space",impact:"Optimize land usage and increase total yield"}),v<2&&b>0&&w.push({type:"high",category:"Harvest Management",issue:"Low harvest frequency",action:"Implement regular harvest schedules",impact:"Better yield distribution and quality control"}),_<1e3&&w.push({type:"medium",category:"Environment",issue:"Low elevation farming",action:"Implement shade management techniques",impact:"Improve coffee quality and plant health"}),w};return g.jsx(ci,{children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsxs("div",{className:`mb-8 ${e?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6`,children:[g.jsx("h1",{className:`text-3xl font-bold ${e?"text-white":"text-gray-900"}`,children:"DSS Insights"}),n&&g.jsxs("p",{className:`mt-2 text-lg ${e?"text-gray-400":"text-gray-700"}`,children:["Welcome back, ",n.first_name," ",n.last_name]}),g.jsx("p",{className:`mt-2 text-sm ${e?"text-gray-400":"text-gray-700"}`,children:"Smart recommendations for optimal farming practices"})]}),t?g.jsx("div",{className:"mt-6",children:g.jsxs("div",{className:"animate-pulse space-y-6",children:[g.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),g.jsx("div",{className:"h-40 bg-gray-200 rounded"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsx("div",{className:"h-32 bg-gray-200 rounded"}),g.jsx("div",{className:"h-32 bg-gray-200 rounded"})]})]})}):r?g.jsx("div",{className:`mt-6 p-4 rounded-md ${e?"bg-red-900/50 text-red-400":"bg-red-50 text-red-600"}`,children:r}):g.jsxs("div",{className:"mt-6 space-y-8",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[g.jsxs("div",{className:`p-6 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-lg font-semibold ${e?"text-gray-200":"text-gray-700"}`,children:"Total Farmers"}),g.jsx("p",{className:`text-3xl font-bold mt-2 ${e?"text-indigo-400":"text-indigo-600"}`,children:a.length})]}),g.jsxs("div",{className:`p-6 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-lg font-semibold ${e?"text-gray-200":"text-gray-700"}`,children:"Average Yield/Tree"}),g.jsxs("p",{className:`text-3xl font-bold mt-2 ${e?"text-indigo-400":"text-indigo-600"}`,children:[(a.reduce((h,p)=>h+p.yieldPerTree,0)/a.length).toFixed(2)," kg"]})]}),g.jsxs("div",{className:`p-6 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-lg font-semibold ${e?"text-gray-200":"text-gray-700"}`,children:"Avg Premium Grade"}),g.jsxs("p",{className:`text-3xl font-bold mt-2 ${e?"text-indigo-400":"text-indigo-600"}`,children:[(a.reduce((h,p)=>h+p.premiumPercentage,0)/a.length).toFixed(1),"%"]})]})]}),a.map(h=>g.jsxs("div",{className:`p-6 rounded-lg shadow-lg transform transition-all duration-200 hover:scale-[1.02] ${e?"bg-gray-800 hover:bg-gray-750":"bg-white hover:bg-gray-50"}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-6",children:[g.jsxs("div",{children:[g.jsx("h2",{className:`text-2xl font-bold ${e?"text-white":"text-gray-900"}`,children:h.name}),g.jsxs("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:[h.farmLocation,"  ",h.farmElevation,"m elevation"]})]}),g.jsx("button",{onClick:()=>c((l==null?void 0:l.id)===h.id?null:h),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${e?"text-indigo-400 hover:bg-gray-700 border border-indigo-400":"text-indigo-600 hover:bg-indigo-50 border border-indigo-600"}`,children:(l==null?void 0:l.id)===h.id?"Hide Details":"View Insights"})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[g.jsxs("div",{className:`p-4 rounded-md ${e?"bg-gray-700":"bg-gray-50"}`,children:[g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"Yield per Tree"}),g.jsxs("p",{className:`text-xl font-bold ${e?"text-white":"text-gray-900"}`,children:[h.yieldPerTree.toFixed(2)," kg"]})]}),g.jsxs("div",{className:`p-4 rounded-md ${e?"bg-gray-700":"bg-gray-50"}`,children:[g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"Premium Grade"}),g.jsxs("p",{className:`text-xl font-bold ${e?"text-white":"text-gray-900"}`,children:[h.premiumPercentage.toFixed(1),"%"]})]}),g.jsxs("div",{className:`p-4 rounded-md ${e?"bg-gray-700":"bg-gray-50"}`,children:[g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"Total Trees"}),g.jsx("p",{className:`text-xl font-bold ${e?"text-white":"text-gray-900"}`,children:h.totalTrees})]}),g.jsxs("div",{className:`p-4 rounded-md ${e?"bg-gray-700":"bg-gray-50"}`,children:[g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"Harvests"}),g.jsx("p",{className:`text-xl font-bold ${e?"text-white":"text-gray-900"}`,children:h.harvestCount})]})]}),(l==null?void 0:l.id)===h.id&&g.jsx("div",{className:"mt-8 space-y-6",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("h3",{className:`text-xl font-bold mb-4 ${e?"text-white":"text-gray-900"}`,children:"Grade Distribution"}),g.jsx(lS,{data:{labels:["Premium","Fine","Commercial"],datasets:[{label:"Grade Distribution (%)",data:[h.premiumPercentage,h.finePercentage,h.commercialPercentage],backgroundColor:e?["rgba(129, 140, 248, 0.8)","rgba(96, 165, 250, 0.8)","rgba(147, 197, 253, 0.8)"]:["rgba(99, 102, 241, 0.8)","rgba(59, 130, 246, 0.8)","rgba(96, 165, 250, 0.8)"]}]},options:{responsive:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,grid:{color:e?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:e?"#9CA3AF":"#4B5563"}},x:{grid:{display:!1},ticks:{color:e?"#9CA3AF":"#4B5563"}}}}})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:`text-xl font-bold mb-4 ${e?"text-white":"text-gray-900"}`,children:"Recommendations"}),h.recommendations.map((p,y)=>g.jsxs("div",{className:`p-4 rounded-md border-l-4 ${p.type==="critical"?e?"bg-red-900/30 border-red-500":"bg-red-50 border-red-500":p.type==="high"?e?"bg-orange-900/30 border-orange-500":"bg-orange-50 border-orange-500":e?"bg-yellow-900/30 border-yellow-500":"bg-yellow-50 border-yellow-500"}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("span",{className:`font-bold ${e?"text-white":"text-gray-900"}`,children:p.category}),g.jsx("span",{className:`text-sm font-medium px-2 py-1 rounded-full ${p.type==="critical"?e?"bg-red-900 text-red-300":"bg-red-100 text-red-700":p.type==="high"?e?"bg-orange-900 text-orange-300":"bg-orange-100 text-orange-700":e?"bg-yellow-900 text-yellow-300":"bg-yellow-100 text-yellow-700"}`,children:p.type.toUpperCase()})]}),g.jsx("p",{className:`text-sm ${e?"text-gray-300":"text-gray-600"}`,children:p.issue}),g.jsxs("p",{className:`mt-2 text-sm font-medium ${e?"text-gray-200":"text-gray-800"}`,children:["Action: ",p.action]}),g.jsxs("p",{className:`mt-1 text-sm ${e?"text-gray-400":"text-gray-500"}`,children:["Expected Impact: ",p.impact]})]},y))]})]})})]},h.id))]})]})})},Qr=({children:n,requiredRoles:e})=>{const{user:t}=Po();return t?e&&!e.includes(t.role)?g.jsx(sb,{to:"/dashboard"}):n:g.jsx(sb,{to:"/login"})},ete=()=>{const n=Ki(),{isDarkMode:e,toggleTheme:t}=Zi(),{user:i}=Po(),r=F.useRef(!1),[s,a]=F.useState({farm_location:"",farm_size:"",farm_elevation:""}),[o,l]=F.useState([]),[c,u]=F.useState({plant_id:null,coffee_variety:"",planting_date:"",number_of_tree_planted:""}),[d,h]=F.useState(!1),[p,y]=F.useState(!1),[x,_]=F.useState(!1),[v,b]=F.useState(!1),w=async()=>{if(!i){n("/login");return}try{const{data:D,error:B}=await tt.from("farmer_detail").select("*").eq("id",i.id).single();if(B&&B.code==="PGRST116")h(!1),y(!0),r.current||bt.info("No farmer details found. Please declare your farm.");else if(D){a(D),h(!0),y(!1);const{data:G,error:Y}=await tt.from("plant_data").select("*").eq("farmer_id",D.id);if(Y)console.error("Error fetching plant data list:",Y),r.current||bt.error("Error loading data. Please try refreshing the page."),l([]);else if(l(G||[]),b(!1),!r.current){const X=(G==null?void 0:G.length)||0;X>0?bt.success(`Farmer details and ${X} plant record${X>1?"s":""} loaded successfully.`):bt.success("Farmer details loaded. No plant records found.")}}else B&&(console.error("Error fetching farmer details:",B),r.current||bt.error("Error loading data. Please try refreshing the page."))}catch(D){console.error("Error in fetchFarmerAndPlantData:",D),r.current||bt.error("An unexpected error occurred.")}finally{r.current=!0}};F.useEffect(()=>{w()},[i,n]);const S=D=>{const{name:B,value:G}=D.target;a(Y=>({...Y,[B]:G}))},A=D=>{const{name:B,value:G}=D.target;u(Y=>({...Y,[B]:G}))},P=async()=>{if(!i){bt.error("User not authenticated.");return}if(!s.farm_location||s.farm_size===""||s.farm_elevation===""){bt.warning("Please fill all farmer detail fields.");return}const D=parseFloat(s.farm_size),B=parseFloat(s.farm_elevation);if(isNaN(D)||D<0||isNaN(B)||B<0){bt.warning("Farm size and elevation must be valid positive numbers.");return}try{const{data:G,error:Y}=await tt.from("farmer_detail").upsert({id:i.id,farm_location:s.farm_location,farm_size:D,farm_elevation:B},{onConflict:"id"}).select().single();if(Y)throw Y;a(G),h(!0),y(!1),bt.success("Farmer details saved successfully!")}catch(G){console.error("Error saving farmer details:",G),bt.error(`Error saving farmer details: ${G.message}`)}},k=async D=>{if(D.preventDefault(),!i||!d||!s.id){bt.error("Farmer details not saved or user not authenticated.");return}if(!c.coffee_variety||!c.planting_date||c.number_of_tree_planted===""){bt.warning("Please fill all plant data fields.");return}const B=parseInt(c.number_of_tree_planted,10);if(isNaN(B)||B<=0){bt.warning("Number of trees planted must be a positive whole number.");return}try{if(c.plant_id){const{error:X}=await tt.from("plant_data").update({coffee_variety:c.coffee_variety,planting_date:c.planting_date,number_of_tree_planted:B}).eq("plant_id",c.plant_id);if(X)throw X;bt.success("Plant data updated successfully!")}else{const{data:X,error:Q}=await tt.from("plant_data").insert({farmer_id:s.id,coffee_variety:c.coffee_variety,planting_date:c.planting_date,number_of_tree_planted:B}).select("plant_id").single();if(Q)throw Q;bt.success("Plant data added successfully!")}const{data:G,error:Y}=await tt.from("plant_data").select("*").eq("farmer_id",s.id);if(Y)throw Y;l(G||[]),u({plant_id:null,coffee_variety:"",planting_date:"",number_of_tree_planted:""}),b(!1),_(!1)}catch(G){console.error("Error saving plant data:",G),bt.error(`Error saving plant data: ${G.message}`)}},T=D=>{u({plant_id:D.plant_id,coffee_variety:D.coffee_variety,planting_date:D.planting_date.split("T")[0],number_of_tree_planted:D.number_of_tree_planted}),b(!0),_(!0)},E=async D=>{if(window.confirm("Are you sure you want to delete this plant entry?"))try{const{error:B}=await tt.from("plant_data").delete().eq("plant_id",D);if(B)throw B;bt.success("Plant data deleted successfully!"),l(o.filter(G=>G.plant_id!==D)),c.plant_id===D&&(u({plant_id:null,coffee_variety:"",planting_date:"",number_of_tree_planted:""}),b(!1),_(!1))}catch(B){console.error("Error deleting plant data:",B),bt.error(`Error deleting plant data: ${B.message}`)}},R=[{name:"Dashboard",path:"/dashboard"},{name:"User Management",path:"/user-management"},{name:"Predictive Analytics",path:"/predictive-analytics"},{name:"Data Entry",path:"/data-entry"},{name:"DSS Recommendations",path:"/dss-recommendations"},{name:"Coffee Grade Predictor",path:"/coffee-grader"},{name:"Land & Plant Declaration",path:"/land-declaration"}],I=[{name:"Dashboard",path:"/farmer-dashboard"},{name:"User Profile",path:"/user-profile"},{name:"Predictive Analytics",path:"/predictive-analytics"},{name:"DSS Recommendations",path:"/dss-recommendations"},{name:"Coffee Grade Predictor",path:"/coffee-grader"},{name:"Land & Plant Declaration",path:"/land-declaration"},{name:"Harvest Reporting",path:"/harvest-reporting"}];return i==null||i.role,g.jsx(ci,{children:g.jsx("div",{className:"flex-1 overflow-auto",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsxs("div",{className:`mb-8 ${e?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6`,children:[g.jsx("h2",{className:`text-3xl font-bold ${e?"text-white":"text-gray-900"}`,children:"Land & Plant Declaration"}),g.jsx("p",{className:`mt-2 text-lg ${e?"text-gray-300":"text-gray-600"}`,children:"Manage your farm details and coffee plant information"})]}),g.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"} hover:shadow-xl transition-shadow duration-200`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-6",children:[g.jsx("h3",{className:`text-xl font-medium ${e?"text-white":"text-gray-900"}`,children:"Farm Details"}),g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsx("div",{className:`p-3 rounded-full ${e?"bg-green-900":"bg-green-100"}`,children:g.jsx("svg",{className:`w-6 h-6 ${e?"text-green-400":"text-green-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),!p&&g.jsx("button",{onClick:()=>y(!0),className:"px-4 py-2 text-sm font-medium rounded-lg transition-colors bg-green-600 hover:bg-green-700 text-white",children:"Edit Farm Details"})]})]}),p?g.jsxs("form",{onSubmit:D=>{D.preventDefault(),P()},className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Farm Location"}),g.jsx("input",{type:"text",name:"farm_location",value:s.farm_location,onChange:S,className:`w-full px-3 py-2 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-green-500":"bg-white border-gray-300 text-gray-900 focus:border-green-500"} focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors`,required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Farm Size (hectares)"}),g.jsx("input",{type:"number",step:"0.01",name:"farm_size",value:s.farm_size,onChange:S,className:`w-full px-3 py-2 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-green-500":"bg-white border-gray-300 text-gray-900 focus:border-green-500"} focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors`,required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Farm Elevation (meters)"}),g.jsx("input",{type:"number",name:"farm_elevation",value:s.farm_elevation,onChange:S,className:`w-full px-3 py-2 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-green-500":"bg-white border-gray-300 text-gray-900 focus:border-green-500"} focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors`,required:!0})]}),g.jsx("button",{type:"submit",className:"w-full px-4 py-2 text-sm font-medium rounded-lg transition-colors bg-green-600 hover:bg-green-700 text-white",children:"Save Farm Details"})]}):g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"Farm Location"}),g.jsx("p",{className:`text-lg font-semibold ${e?"text-white":"text-gray-900"}`,children:s.farm_location})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"Farm Size"}),g.jsxs("p",{className:`text-lg font-semibold ${e?"text-white":"text-gray-900"}`,children:[s.farm_size," hectares"]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"Farm Elevation"}),g.jsxs("p",{className:`text-lg font-semibold ${e?"text-white":"text-gray-900"}`,children:[s.farm_elevation," meters"]})]})]})]}),g.jsxs("div",{className:`p-6 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"} hover:shadow-xl transition-shadow duration-200`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-6",children:[g.jsx("h3",{className:`text-xl font-medium ${e?"text-white":"text-gray-900"}`,children:"Coffee Plants"}),g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsx("div",{className:`p-3 rounded-full ${e?"bg-indigo-900":"bg-indigo-100"}`,children:g.jsx("svg",{className:`w-6 h-6 ${e?"text-indigo-400":"text-indigo-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),g.jsx("button",{onClick:()=>b(!0),className:"px-4 py-2 text-sm font-medium rounded-lg transition-colors bg-indigo-600 hover:bg-indigo-700 text-white",children:"Add New Plant"})]})]}),v&&g.jsxs("form",{onSubmit:k,className:"mb-8 space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Coffee Variety"}),g.jsx("input",{type:"text",name:"coffee_variety",value:c.coffee_variety,onChange:A,className:`w-full px-3 py-2 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-indigo-500":"bg-white border-gray-300 text-gray-900 focus:border-indigo-500"} focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50 transition-colors`,required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Planting Date"}),g.jsx("input",{type:"date",name:"planting_date",value:c.planting_date,onChange:A,className:`w-full px-3 py-2 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-indigo-500":"bg-white border-gray-300 text-gray-900 focus:border-indigo-500"} focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50 transition-colors`,required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Number of Trees Planted"}),g.jsx("input",{type:"number",name:"number_of_tree_planted",value:c.number_of_tree_planted,onChange:A,className:`w-full px-3 py-2 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-indigo-500":"bg-white border-gray-300 text-gray-900 focus:border-indigo-500"} focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50 transition-colors`,required:!0})]}),g.jsxs("div",{className:"flex justify-end space-x-4",children:[g.jsx("button",{type:"button",onClick:()=>{b(!1),_(!1),u({plant_id:null,coffee_variety:"",planting_date:"",number_of_tree_planted:""})},className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${e?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium rounded-lg transition-colors bg-indigo-600 hover:bg-indigo-700 text-white",children:x?"Update Plant":"Add Plant"})]})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(D=>g.jsxs("div",{className:`p-6 rounded-lg ${e?"bg-gray-700":"bg-gray-50"} hover:shadow-lg transition-shadow duration-200`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h4",{className:`text-lg font-medium ${e?"text-white":"text-gray-900"}`,children:D.coffee_variety}),g.jsxs("div",{className:"flex space-x-2",children:[g.jsx("button",{onClick:()=>T(D),className:`p-2 rounded-lg transition-colors ${e?"hover:bg-gray-600 text-blue-400":"hover:bg-gray-200 text-blue-600"}`,children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),g.jsx("button",{onClick:()=>E(D.plant_id),className:`p-2 rounded-lg transition-colors ${e?"hover:bg-gray-600 text-red-400":"hover:bg-gray-200 text-red-600"}`,children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{children:[g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"Planting Date"}),g.jsx("p",{className:`text-base font-medium ${e?"text-gray-300":"text-gray-700"}`,children:new Date(D.planting_date).toLocaleDateString()})]}),g.jsxs("div",{children:[g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"Trees Planted"}),g.jsx("p",{className:`text-base font-medium ${e?"text-gray-300":"text-gray-700"}`,children:D.number_of_tree_planted})]})]})]},D.plant_id))})]})]})})})},tte=()=>{const n=Ki();Bs();const{isDarkMode:e,toggleTheme:t}=Zi(),i=F.useRef(!1);sn.useEffect(()=>{const L=document.createElement("style");return L.textContent=`
      .dark-mode select option {
        background-color: #374151 !important;
        color: white !important;
      }
    `,document.head.appendChild(L),()=>document.head.removeChild(L)},[]),sn.useEffect(()=>{e?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")},[e]);const[r,s]=F.useState(null),[a,o]=F.useState(null),[l,c]=F.useState([]),[u,d]=F.useState([]),[h,p]=F.useState("All"),[y,x]=F.useState({harvest_id:null,farmer_id:null,plant_id:"",harvest_date:"",coffee_raw_quantity:"",coffee_dry_quantity:"",coffee_premium_grade:"",coffee_fine_grade:"",coffee_commercial_grade:""}),[_,v]=F.useState(!1),[b,w]=F.useState(!1),[S,A]=F.useState(!1),[P,k]=F.useState(0);F.useEffect(()=>{(async()=>{const{data:{user:W}}=await tt.auth.getUser();if(!W){n("/login");return}s(W);const{data:j,error:te}=await tt.from("users").select("first_name, last_name, email, role").eq("email",W.email).single();te||s(K=>({...K,...j}));const{data:ae,error:me}=await tt.from("farmer_detail").select("id").eq("id",W.id).single();if(me&&me.code==="PGRST116"){i.current||bt.info("Please declare your farm details first in 'Land & Plant Declaration'."),o(null),c([]),d([]);return}else if(ae){o(ae);const{data:K,error:re}=await tt.from("plant_data").select("plant_id, coffee_variety, planting_date").eq("farmer_id",ae.id);re?(console.error("Error fetching plant data for dropdown:",re),i.current||bt.error("Error loading data. Please try refreshing the page.")):c(K||[]);const{data:oe,error:_e}=await tt.from("harvest_data").select("*").eq("farmer_id",ae.id).order("harvest_date",{ascending:!1});if(_e)console.error("Error fetching harvest data:",_e),i.current||bt.error("Error loading data. Please try refreshing the page.");else if(d(oe||[]),!i.current){const Ce=(K==null?void 0:K.length)||0,Ee=(oe==null?void 0:oe.length)||0;Ce===0?bt.info("No plant data found. Please add plants in 'Land & Plant Declaration'."):Ee===0?bt.info("No harvest data recorded yet. You can start adding harvest records."):bt.success(`Loaded ${Ce} plant record${Ce>1?"s":""} and ${Ee} harvest record${Ee>1?"s":""}.`)}}else me&&(console.error("Error fetching farmer details:",me),i.current||bt.error("Error loading data. Please try refreshing the page."));i.current=!0})()},[n]);const T=L=>{const{name:W,value:j}=L.target;if(x(te=>({...te,[W]:j})),W==="coffee_raw_quantity"){const te=parseFloat(j)||0,ae=Math.round(te*1*100)/100;k(ae)}if(["coffee_premium_grade","coffee_fine_grade","coffee_commercial_grade"].includes(W)){const te=parseFloat(W==="coffee_premium_grade"?j:y.coffee_premium_grade)||0,ae=parseFloat(W==="coffee_fine_grade"?j:y.coffee_fine_grade)||0,me=parseFloat(W==="coffee_commercial_grade"?j:y.coffee_commercial_grade)||0,K=te+ae+me;x(re=>({...re,coffee_dry_quantity:K.toFixed(2)}))}},E=async L=>{L.preventDefault();const W=parseFloat(y.coffee_dry_quantity),j=parseFloat(y.coffee_raw_quantity);if(W>P){bt.error(`Total dry quantity (${W}kg) cannot exceed ${P}(kg of raw quantity ${j}kg)`);return}if(!a||!a.id){bt.error("Farmer details not loaded. Cannot save harvest data.");return}if(!y.harvest_date||!y.plant_id||y.coffee_raw_quantity===""||y.coffee_premium_grade===""||y.coffee_fine_grade===""||y.coffee_commercial_grade===""){bt.warning("Please fill all harvest data fields.");return}const te=parseFloat(y.coffee_raw_quantity);if(isNaN(te)||te<0){bt.warning("Raw coffee quantity must be a non-negative number.");return}const ae=parseFloat(y.coffee_premium_grade);if(isNaN(ae)||ae<0){bt.warning("Premium grade must be a non-negative number.");return}const me=parseFloat(y.coffee_fine_grade);if(isNaN(me)||me<0){bt.warning("Fine grade must be a non-negative number.");return}const K=parseFloat(y.coffee_commercial_grade);if(isNaN(K)||K<0){bt.warning("Commercial grade must be a non-negative number.");return}const re=ae+me+K;try{const oe={plant_id:y.plant_id,harvest_date:y.harvest_date,coffee_raw_quantity:te,coffee_dry_quantity:re,coffee_premium_grade:ae,coffee_fine_grade:me,coffee_commercial_grade:K};if(y.harvest_id){const{error:Ee}=await tt.from("harvest_data").update(oe).eq("harvest_id",y.harvest_id).eq("farmer_id",a.id);if(Ee)throw Ee;bt.success("Harvest data updated successfully!")}else{const{error:Ee}=await tt.from("harvest_data").insert({...oe,farmer_id:a.id});if(Ee)throw Ee;bt.success("Harvest data added successfully!")}const{data:_e,error:Ce}=await tt.from("harvest_data").select("*").eq("farmer_id",a.id).order("harvest_date",{ascending:!1});if(Ce)throw Ce;d(_e||[]),b&&(A(!1),w(!1)),x({harvest_id:null,farmer_id:a==null?void 0:a.id,plant_id:"",harvest_date:"",coffee_raw_quantity:"",coffee_dry_quantity:"",coffee_premium_grade:"",coffee_fine_grade:"",coffee_commercial_grade:""})}catch(oe){console.error("Error saving harvest data:",oe),bt.error(`Error saving harvest data: ${oe.message}`)}},R=L=>{x({harvest_id:L.harvest_id,farmer_id:L.farmer_id,plant_id:L.plant_id,harvest_date:L.harvest_date.split("T")[0],coffee_raw_quantity:L.coffee_raw_quantity,coffee_dry_quantity:L.coffee_dry_quantity,coffee_premium_grade:L.coffee_premium_grade,coffee_fine_grade:L.coffee_fine_grade,coffee_commercial_grade:L.coffee_commercial_grade}),w(!0),A(!0)},I=async L=>{if(window.confirm("Are you sure you want to delete this harvest entry?"))try{const{error:W}=await tt.from("harvest_data").delete().eq("harvest_id",L).eq("farmer_id",a.id);if(W)throw W;bt.success("Harvest data deleted successfully!"),d(u.filter(j=>j.harvest_id!==L)),y.harvest_id===L&&(x({harvest_id:null,farmer_id:a.id,plant_id:"",harvest_date:"",coffee_raw_quantity:"",coffee_dry_quantity:"",coffee_premium_grade:"",coffee_fine_grade:"",coffee_commercial_grade:""}),v(!1),w(!1))}catch(W){console.error("Error deleting harvest data:",W),bt.error(`Error deleting harvest data: ${W.message}`)}},D=()=>{A(!1),w(!1),x({harvest_id:null,farmer_id:a==null?void 0:a.id,plant_id:"",harvest_date:"",coffee_raw_quantity:"",coffee_dry_quantity:"",coffee_premium_grade:"",coffee_fine_grade:"",coffee_commercial_grade:""})},B=[{name:"Dashboard",path:"/dashboard"},{name:"User Management",path:"/user-management"},{name:"Predictive Analytics",path:"/predictive-analytics"},{name:"Data Entry",path:"/data-entry"},{name:"DSS Recommendations",path:"/dss-recommendations"},{name:"Coffee Grade Predictor",path:"/coffee-grader"},{name:"Land & Plant Declaration",path:"/land-declaration"}],G=[{name:"Dashboard",path:"/farmer-dashboard"},{name:"User Profile",path:"/user-profile"},{name:"Predictive Analytics",path:"/predictive-analytics"},{name:"DSS Recommendations",path:"/dss-recommendations"},{name:"Coffee Grade Predictor",path:"/coffee-grader"},{name:"Land & Plant Declaration",path:"/land-declaration"},{name:"Harvest Reporting",path:"/harvest-reporting"}];r==null||r.role;const Y=(L,W)=>{const j=parseFloat(W==="coffee_premium_grade"?L:y.coffee_premium_grade)||0,te=parseFloat(W==="coffee_fine_grade"?L:y.coffee_fine_grade)||0,ae=parseFloat(W==="coffee_commercial_grade"?L:y.coffee_commercial_grade)||0;return j+te+ae<=P},X=()=>{const L=u.map(W=>new Date(W.harvest_date).getFullYear().toString());return["All",...Array.from(new Set(L)).sort((W,j)=>j-W)]},Q=()=>h==="All"?u:u.filter(L=>new Date(L.harvest_date).getFullYear().toString()===h);return g.jsx(ci,{children:g.jsx("div",{className:"flex-1 overflow-auto",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsxs("div",{className:`mb-8 ${e?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6`,children:[g.jsx("h2",{className:`text-3xl font-bold ${e?"text-white":"text-gray-900"}`,children:"Harvest Reporting"}),g.jsx("p",{className:`mt-2 text-lg ${e?"text-gray-300":"text-gray-600"}`,children:"Record and manage your coffee harvest data"})]}),g.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"} hover:shadow-xl transition-shadow duration-200`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-6",children:[g.jsx("h3",{className:`text-xl font-medium ${e?"text-white":"text-gray-900"}`,children:"Record New Harvest"}),g.jsx("div",{className:`p-3 rounded-full ${e?"bg-green-900":"bg-green-100"}`,children:g.jsx("svg",{className:`w-6 h-6 ${e?"text-green-400":"text-green-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]}),g.jsxs("form",{onSubmit:E,className:"space-y-4",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Plant"}),g.jsxs("select",{name:"plant_id",value:y.plant_id,onChange:T,className:`w-full px-3 py-2 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-green-500":"bg-white border-gray-300 text-gray-900 focus:border-green-500"} focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors`,required:!0,children:[g.jsx("option",{value:"",children:"Select a plant"}),l.map(L=>g.jsxs("option",{value:L.plant_id,children:[L.coffee_variety," (Planted: ",new Date(L.planting_date).toLocaleDateString(),")"]},L.plant_id))]})]}),g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Harvest Date"}),g.jsx("input",{type:"date",name:"harvest_date",value:y.harvest_date,onChange:T,className:`w-full px-3 py-2 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-green-500":"bg-white border-gray-300 text-gray-900 focus:border-green-500"} focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors`,required:!0})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Raw Coffee Quantity (kg)"}),g.jsx("input",{type:"number",step:"0.01",name:"coffee_raw_quantity",value:y.coffee_raw_quantity,onChange:T,className:`w-full px-3 py-2 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-green-500":"bg-white border-gray-300 text-gray-900 focus:border-green-500"} focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors`,required:!0}),y.coffee_raw_quantity>0&&g.jsxs("p",{className:`mt-1 text-sm ${e?"text-gray-400":"text-gray-500"}`,children:["Maximum dry quantity: ",P,"kg (of raw quantity)"]})]}),g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Total Dry Coffee Quantity (kg)"}),g.jsx("input",{type:"number",step:"0.01",name:"coffee_dry_quantity",value:y.coffee_dry_quantity,readOnly:!0,className:`w-full px-3 py-2 rounded-lg border ${e?"bg-gray-600 border-gray-600 text-white":"bg-gray-100 border-gray-300 text-gray-900"} cursor-not-allowed`}),g.jsx("p",{className:`mt-1 text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"Auto-calculated from grades"})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Quantity of Premium Grade (kg)"}),g.jsx("input",{type:"number",step:"0.01",name:"coffee_premium_grade",value:y.coffee_premium_grade,onChange:L=>{T(L),Y(L.target.value,"coffee_premium_grade")||bt.warning(`Total dry quantity cannot exceed ${P}kg`)},className:`w-full px-3 py-2 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-green-500":"bg-white border-gray-300 text-gray-900 focus:border-green-500"} focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors`,required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Quantity of Fine Grade (kg)"}),g.jsx("input",{type:"number",step:"0.01",name:"coffee_fine_grade",value:y.coffee_fine_grade,onChange:L=>{T(L),Y(L.target.value,"coffee_fine_grade")||bt.warning(`Total dry quantity cannot exceed ${P}kg`)},className:`w-full px-3 py-2 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-green-500":"bg-white border-gray-300 text-gray-900 focus:border-green-500"} focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors`,required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Quantity of Commercial Grade (kg)"}),g.jsx("input",{type:"number",step:"0.01",name:"coffee_commercial_grade",value:y.coffee_commercial_grade,onChange:L=>{T(L),Y(L.target.value,"coffee_commercial_grade")||bt.warning(`Total dry quantity cannot exceed ${P}kg`)},className:`w-full px-3 py-2 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-green-500":"bg-white border-gray-300 text-gray-900 focus:border-green-500"} focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors`,required:!0})]})]}),g.jsxs("div",{className:"flex justify-end space-x-4",children:[g.jsx("button",{type:"button",onClick:()=>{v(!1),w(!1),x({harvest_id:null,farmer_id:a==null?void 0:a.id,plant_id:"",harvest_date:"",coffee_raw_quantity:"",coffee_dry_quantity:"",coffee_premium_grade:"",coffee_fine_grade:"",coffee_commercial_grade:""})},className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${e?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium rounded-lg transition-colors bg-green-600 hover:bg-green-700 text-white",children:b?"Update Harvest":"Record Harvest"})]})]})]}),S&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:`relative w-full max-w-3xl p-8 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("button",{onClick:D,className:`absolute top-4 right-4 text-2xl ${e?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-700"}`,children:""}),g.jsx("h3",{className:`text-2xl font-bold mb-6 ${e?"text-white":"text-gray-900"}`,children:"Edit Harvest Record"}),g.jsxs("form",{onSubmit:E,className:"space-y-6",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:`block text-sm font-medium ${e?"text-gray-300":"text-gray-700"}`,children:"Plant"}),g.jsxs("select",{name:"plant_id",value:y.plant_id,onChange:T,className:`w-full px-4 py-2.5 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-green-500":"bg-white border-gray-300 text-gray-900 focus:border-green-500"} focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors`,required:!0,children:[g.jsx("option",{value:"",children:"Select a plant"}),l.map(L=>g.jsxs("option",{value:L.plant_id,children:[L.coffee_variety," (Planted: ",new Date(L.planting_date).toLocaleDateString(),")"]},L.plant_id))]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:`block text-sm font-medium ${e?"text-gray-300":"text-gray-700"}`,children:"Harvest Date"}),g.jsx("input",{type:"date",name:"harvest_date",value:y.harvest_date,onChange:T,className:`w-full px-4 py-2.5 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-green-500":"bg-white border-gray-300 text-gray-900 focus:border-green-500"} focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors`,required:!0})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:`block text-sm font-medium ${e?"text-gray-300":"text-gray-700"}`,children:"Raw Coffee Quantity (kg)"}),g.jsx("input",{type:"number",step:"0.01",name:"coffee_raw_quantity",value:y.coffee_raw_quantity,onChange:T,className:`w-full px-4 py-2.5 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-green-500":"bg-white border-gray-300 text-gray-900 focus:border-green-500"} focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors`,required:!0}),y.coffee_raw_quantity>0&&g.jsxs("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:["Maximum dry quantity: ",P,"kg (of raw quantity)"]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:`block text-sm font-medium ${e?"text-gray-300":"text-gray-700"}`,children:"Total Dry Coffee Quantity (kg)"}),g.jsx("input",{type:"number",step:"0.01",name:"coffee_dry_quantity",value:y.coffee_dry_quantity,readOnly:!0,className:`w-full px-4 py-2.5 rounded-lg border ${e?"bg-gray-600 border-gray-600 text-white":"bg-gray-100 border-gray-300 text-gray-900"} cursor-not-allowed`}),g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"Auto-calculated from grades"})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("h4",{className:`font-medium ${e?"text-gray-200":"text-gray-800"}`,children:"Coffee Grades"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:`block text-sm font-medium ${e?"text-gray-300":"text-gray-700"}`,children:"Premium Grade (kg)"}),g.jsx("input",{type:"number",step:"0.01",name:"coffee_premium_grade",value:y.coffee_premium_grade,onChange:L=>{T(L),Y(L.target.value,"coffee_premium_grade")||bt.warning(`Total dry quantity cannot exceed ${P}kg`)},className:`w-full px-4 py-2.5 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-green-500":"bg-white border-gray-300 text-gray-900 focus:border-green-500"} focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors`,required:!0})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:`block text-sm font-medium ${e?"text-gray-300":"text-gray-700"}`,children:"Fine Grade (kg)"}),g.jsx("input",{type:"number",step:"0.01",name:"coffee_fine_grade",value:y.coffee_fine_grade,onChange:L=>{T(L),Y(L.target.value,"coffee_fine_grade")||bt.warning(`Total dry quantity cannot exceed ${P}kg`)},className:`w-full px-4 py-2.5 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-green-500":"bg-white border-gray-300 text-gray-900 focus:border-green-500"} focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors`,required:!0})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:`block text-sm font-medium ${e?"text-gray-300":"text-gray-700"}`,children:"Commercial Grade (kg)"}),g.jsx("input",{type:"number",step:"0.01",name:"coffee_commercial_grade",value:y.coffee_commercial_grade,onChange:L=>{T(L),Y(L.target.value,"coffee_commercial_grade")||bt.warning(`Total dry quantity cannot exceed ${P}kg`)},className:`w-full px-4 py-2.5 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-green-500":"bg-white border-gray-300 text-gray-900 focus:border-green-500"} focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors`,required:!0})]})]})]}),g.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[g.jsx("button",{type:"button",onClick:D,className:`px-6 py-2.5 text-sm font-medium rounded-lg transition-colors ${e?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-6 py-2.5 text-sm font-medium rounded-lg transition-colors bg-green-600 hover:bg-green-700 text-white",children:"Update Harvest"})]})]})]})}),g.jsxs("div",{className:`p-6 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"} hover:shadow-xl transition-shadow duration-200`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-6",children:[g.jsx("h3",{className:`text-xl font-medium ${e?"text-white":"text-gray-900"}`,children:"Harvest History"}),g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsx("select",{value:h,onChange:L=>p(L.target.value),className:`px-3 py-2 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"} focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition-colors`,children:X().map(L=>g.jsx("option",{value:L,children:L==="All"?"All Years":L},L))}),g.jsx("div",{className:`p-3 rounded-full ${e?"bg-blue-900":"bg-blue-100"}`,children:g.jsx("svg",{className:`w-6 h-6 ${e?"text-blue-400":"text-blue-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})]})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Q().map(L=>g.jsxs("div",{className:`p-6 rounded-lg ${e?"bg-gray-700":"bg-gray-50"} hover:shadow-lg transition-shadow duration-200`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("div",{children:[g.jsx("h4",{className:`text-lg font-medium ${e?"text-white":"text-gray-900"}`,children:new Date(L.harvest_date).toLocaleDateString()}),g.jsxs("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:["Plant ID: ",L.plant_id]})]}),g.jsxs("div",{className:"flex space-x-2",children:[g.jsx("button",{onClick:()=>R(L),className:`p-2 rounded-lg transition-colors ${e?"hover:bg-gray-600 text-blue-400":"hover:bg-gray-200 text-blue-600"}`,children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),g.jsx("button",{onClick:()=>I(L.harvest_id),className:`p-2 rounded-lg transition-colors ${e?"hover:bg-gray-600 text-red-400":"hover:bg-gray-200 text-red-600"}`,children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"Raw Quantity"}),g.jsxs("p",{className:`text-base font-medium ${e?"text-gray-300":"text-gray-700"}`,children:[L.coffee_raw_quantity," kg"]})]}),g.jsxs("div",{children:[g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"Dry Quantity"}),g.jsxs("p",{className:`text-base font-medium ${e?"text-gray-300":"text-gray-700"}`,children:[L.coffee_dry_quantity," kg"]})]}),g.jsxs("div",{children:[g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"Premium Grade"}),g.jsxs("p",{className:`text-base font-medium ${e?"text-gray-300":"text-gray-700"}`,children:[L.coffee_premium_grade," kg"]})]}),g.jsxs("div",{children:[g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"Fine Grade"}),g.jsxs("p",{className:`text-base font-medium ${e?"text-gray-300":"text-gray-700"}`,children:[L.coffee_fine_grade," kg"]})]}),g.jsxs("div",{children:[g.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"Commercial Grade"}),g.jsxs("p",{className:`text-base font-medium ${e?"text-gray-300":"text-gray-700"}`,children:[L.coffee_commercial_grade," kg"]})]})]})]},L.harvest_id))})]})]})})})};Za.register(To,Co,Xl,dc,hc,uc);const nte=()=>{const n=Ki(),{isDarkMode:e}=Zi(),{user:t}=Po(),[i,r]=F.useState([]),[s,a]=F.useState([]),[o,l]=F.useState(!0),[c,u]=F.useState(null),[d,h]=F.useState([]),[p,y]=F.useState({labels:[],datasets:[{label:"Total Raw Yield (kg)",data:[],backgroundColor:"rgb(75, 192, 192)"},{label:"Total Trees",data:[],backgroundColor:"rgb(54, 162, 235)"}]}),[x,_]=F.useState(""),[v,b]=F.useState(""),[w,S]=F.useState(""),[A,P]=F.useState(""),[k,T]=F.useState([]),[E,R]=F.useState([]),I=F.useCallback(async()=>{try{l(!0),u(null);const{data:B,error:G}=await tt.from("users").select("id, first_name, last_name");if(G)throw G;const{data:Y,error:X}=await tt.from("farmer_detail").select(`
          farmers_details,
          id,
          farm_location,
          farm_size,
          farm_elevation,
          plant_id
        `);if(X)throw X;const{data:Q,error:L}=await tt.from("plant_data").select("plant_id, farmer_id, number_of_tree_planted");if(L)throw L;const{data:W,error:j}=await tt.from("harvest_data").select("*");if(j)throw j;const te=Y.map(oe=>{const _e=B.find(ue=>ue.id===oe.id),Ee=Q.filter(ue=>ue.farmer_id===oe.id).reduce((ue,je)=>ue+(je.number_of_tree_planted||0),0),Pe=W.filter(ue=>ue.farmer_id===oe.id),De=Pe.reduce((ue,je)=>ue+(je.coffee_raw_quantity||0),0),xe=Pe.reduce((ue,je)=>ue+(je.coffee_dry_quantity||0),0),we=Pe.reduce((ue,je)=>ue+(je.coffee_premium_grade||0),0),$=Pe.reduce((ue,je)=>ue+(je.coffee_fine_grade||0),0),Se=Pe.reduce((ue,je)=>ue+(je.coffee_commercial_grade||0),0),de=Ee>0?xe/Ee:0,J=Pe.length>0?new Date(Math.max(...Pe.map(ue=>new Date(ue.harvest_date)))):null;return{id:oe.id,name:_e?`${_e.first_name||""} ${_e.last_name||""}`.trim():"Unnamed Farmer",farm_location:oe.farm_location,farm_size:oe.farm_size,farm_elevation:oe.farm_elevation,total_trees:Ee,totalRawYield:De,totalDryYield:xe,avgYieldPerTree:de,premiumGrade:we,fineGrade:$,commercialGrade:Se,lastHarvest:J?J.toLocaleDateString():"N/A",harvestCount:Pe.length}}),me=[...te].sort((oe,_e)=>_e.totalDryYield-oe.totalDryYield).slice(0,5);y({labels:me.map(oe=>oe.name),datasets:[{label:"Total Raw Yield (kg)",data:me.map(oe=>oe.totalRawYield.toFixed(2)),backgroundColor:"rgb(75, 192, 192)"},{label:"Total Trees",data:me.map(oe=>oe.total_trees),backgroundColor:"rgb(54, 162, 235)"}]}),h(me.slice(0,3)),r(te),a(te);const K=[...new Set(te.map(oe=>oe.name))],re=[...new Set(te.map(oe=>oe.farm_location))];T(K),R(re)}catch(B){console.error("Error fetching farmer reports:",B),u("Failed to load farmer reports. Please try again later.")}finally{l(!1)}},[]);F.useEffect(()=>{I()},[I]);const D=F.useCallback(()=>{let B=[...i];x&&(B=B.filter(G=>G.name.toLowerCase().includes(x.toLowerCase()))),v&&(B=B.filter(G=>G.farm_location.toLowerCase().includes(v.toLowerCase()))),w&&(B=B.filter(G=>G.totalDryYield>=parseFloat(w))),A&&(B=B.filter(G=>G.total_trees>=parseInt(A))),a(B)},[i,x,v,w,A]);return F.useEffect(()=>{D()},[x,v,w,A,D]),t?g.jsx(ci,{children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsxs("div",{className:`mb-8 ${e?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6`,children:[g.jsx("h1",{className:`text-2xl font-bold ${e?"text-white":"text-gray-900"}`,children:"Farmer Reports"}),t&&g.jsxs("p",{className:`mt-2 text-lg ${e?"text-gray-400":"text-gray-700"}`,children:["Welcome back, ",t.first_name," ",t.last_name]}),g.jsx("p",{className:`mt-2 text-sm ${e?"text-gray-400":"text-gray-700"}`,children:"Detailed reports and performance metrics for all farmers"})]}),c&&g.jsx("div",{className:"mb-6 p-4 bg-red-900 border border-red-700 rounded-md text-red-200",children:g.jsx("p",{children:c})}),g.jsxs("div",{className:`rounded-lg p-6 mb-8 ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h2",{className:`text-xl font-semibold mb-4 ${e?"text-white":"text-gray-900"}`,children:"Farmer Performance Overview"}),g.jsx("div",{className:"h-80",children:g.jsx(lS,{data:p,options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,grid:{color:e?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:e?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.7)"}},x:{grid:{color:e?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:e?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.7)"}}},plugins:{legend:{labels:{color:e?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.7)"}}}}})})]}),g.jsxs("div",{className:`rounded-lg p-6 mb-8 ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h2",{className:`text-xl font-semibold mb-4 ${e?"text-white":"text-gray-900"}`,children:"Top 3 Best Performing Farmers"}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:d.map((B,G)=>g.jsxs("div",{className:`rounded-lg p-4 ${e?"bg-gray-700":"bg-gray-100"}`,children:[g.jsxs("div",{className:"flex justify-between items-center mb-3",children:[g.jsx("div",{className:"flex items-center",children:g.jsxs("span",{className:`text-xl font-bold ${e?"text-white":"text-gray-900"}`,children:["#",G+1]})}),g.jsx("div",{className:"bg-yellow-500 text-white rounded-full w-8 h-8 flex items-center justify-center",children:G+1})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("p",{className:`font-semibold ${e?"text-white":"text-gray-900"}`,children:B.name}),g.jsxs("p",{className:`${e?"text-gray-300":"text-gray-700"}`,children:["Location: ",B.farm_location]}),g.jsxs("p",{className:`${e?"text-gray-300":"text-gray-700"}`,children:["Total Raw Yield: ",B.totalRawYield.toFixed(2)," kg"]}),g.jsxs("p",{className:`${e?"text-gray-300":"text-gray-700"}`,children:["Total Trees: ",B.total_trees]}),g.jsxs("p",{className:`${e?"text-gray-300":"text-gray-700"}`,children:["Premium Grade: ",B.premiumGrade.toFixed(2)]})]})]},B.id))})]}),g.jsxs("div",{className:`rounded-lg p-6 mb-8 ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h2",{className:`text-xl font-semibold mb-6 ${e?"text-white":"text-gray-900"}`,children:"Filter Farmers"}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[g.jsx(WC,{value:x,onChange:_,options:k,placeholder:"Search by name...",label:"Farmer Name",isDarkMode:e,icon:g.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),g.jsx(WC,{value:v,onChange:b,options:E,placeholder:"Search by location...",label:"Location",isDarkMode:e,icon:g.jsxs("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),g.jsxs("div",{className:"relative",children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Minimum Yield (kg)"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"number",value:w,onChange:B=>S(B.target.value),placeholder:"Min yield...",className:`mt-1 block w-full rounded-lg border-2 px-4 py-2.5 
                    placeholder-gray-400 shadow-sm focus:ring-2 focus:ring-blue-500 
                    focus:ring-opacity-50 transition-colors duration-200
                    ${e?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`}),g.jsx("div",{className:`absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none ${e?"text-gray-400":"text-gray-500"}`,children:g.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]})]}),g.jsxs("div",{className:"relative",children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Minimum Trees"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"number",value:A,onChange:B=>P(B.target.value),placeholder:"Min trees...",className:`mt-1 block w-full rounded-lg border-2 px-4 py-2.5 
                    placeholder-gray-400 shadow-sm focus:ring-2 focus:ring-blue-500 
                    focus:ring-opacity-50 transition-colors duration-200
                    ${e?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"}`}),g.jsx("div",{className:`absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none ${e?"text-gray-400":"text-gray-500"}`,children:g.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"})})})]})]})]}),g.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[g.jsxs("button",{onClick:()=>{_(""),b(""),S(""),P("")},className:`px-4 py-2 rounded-lg transition-colors duration-200 flex items-center space-x-2
                ${e?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[g.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),g.jsx("span",{children:"Clear Filters"})]}),g.jsxs("button",{onClick:D,className:`px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-500 
                transition-colors duration-200 flex items-center space-x-2`,children:[g.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),g.jsx("span",{children:"Apply Filters"})]})]})]}),g.jsx("div",{className:`rounded-lg overflow-hidden ${e?"bg-gray-800":"bg-white"}`,children:o?g.jsx("div",{className:"p-6",children:g.jsxs("div",{className:"animate-pulse space-y-4",children:[g.jsx("div",{className:`h-4 rounded w-1/4 ${e?"bg-gray-700":"bg-gray-200"}`}),g.jsx("div",{className:"space-y-3",children:[1,2,3].map(B=>g.jsx("div",{className:`h-4 rounded ${e?"bg-gray-700":"bg-gray-200"}`},B))})]})}):g.jsx("div",{className:"overflow-x-auto",children:s.map(B=>g.jsx("div",{className:`border-b ${e?"border-gray-700":"border-gray-200"} p-4`,children:g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{children:[g.jsx("h3",{className:`text-lg font-medium mb-2 ${e?"text-white":"text-gray-900"}`,children:B.name}),g.jsxs("p",{className:`${e?"text-gray-300":"text-gray-700"}`,children:["Location: ",B.farm_location]}),g.jsxs("p",{className:`${e?"text-gray-300":"text-gray-700"}`,children:["Total Trees: ",B.total_trees]}),g.jsxs("p",{className:`${e?"text-gray-300":"text-gray-700"}`,children:["Total Yield: ",B.totalDryYield.toFixed(2)," kg"]})]}),g.jsxs("div",{className:"text-right",children:[g.jsxs("p",{className:`${e?"text-gray-400":"text-gray-600"}`,children:["Average Yield per Tree: ",B.avgYieldPerTree.toFixed(2)," kg"]}),g.jsxs("p",{className:`${e?"text-gray-400":"text-gray-600"}`,children:["Last Harvest: ",B.lastHarvest]}),g.jsx("button",{onClick:()=>n(`/farmer-profile/${B.id}`),className:`mt-2 px-4 py-2 rounded-lg text-sm transition-colors
                          ${e?"bg-blue-600 text-white hover:bg-blue-500":"bg-blue-500 text-white hover:bg-blue-600"}`,children:"View Details"})]})]})},B.id))})})]})}):g.jsx(Navigate,{to:"/login"})};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const $y="177",ite={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},rte={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},gB=0,GC=1,yB=2,ste=3,vB=0,cS=1,Kg=2,ho=3,sl=0,ms=1,xo=2,nl=0,nh=1,qC=2,XC=3,YC=4,xB=5,Wc=100,_B=101,bB=102,wB=103,SB=104,MB=200,EB=201,TB=202,CB=203,_b=204,bb=205,AB=206,PB=207,RB=208,kB=209,NB=210,IB=211,DB=212,LB=213,OB=214,wb=0,Sb=1,Mb=2,wh=3,Eb=4,Tb=5,Cb=6,Ab=7,Wy=0,FB=1,UB=2,il=0,jB=1,zB=2,BB=3,bR=4,HB=5,VB=6,$B=7,KC="attached",WB="detached",Ru=300,al=301,ku=302,Sh=303,Q0=304,cm=306,Nu=1e3,Ai=1001,ey=1002,Tr=1003,wR=1004,ate=1004,Jf=1005,ote=1005,On=1006,Zg=1007,lte=1007,Ko=1008,ZC=1008,gs=1009,uS=1010,dS=1011,Lp=1012,Gy=1013,ol=1014,yi=1015,vr=1016,hS=1017,fS=1018,Op=1020,SR=35902,MR=1021,ER=1022,Fi=1023,Fp=1026,Up=1027,qy=1028,Xy=1029,TR=1030,pS=1031,cte=1032,mS=1033,Jg=33776,Qg=33777,e0=33778,t0=33779,Pb=35840,Rb=35841,kb=35842,Nb=35843,Ib=36196,Db=37492,Lb=37496,Ob=37808,Fb=37809,Ub=37810,jb=37811,zb=37812,Bb=37813,Hb=37814,Vb=37815,$b=37816,Wb=37817,Gb=37818,qb=37819,Xb=37820,Yb=37821,n0=36492,Kb=36494,Zb=36495,CR=36283,Jb=36284,Qb=36285,ew=36286,GB=2200,qB=2201,XB=2202,ty=2300,tw=2301,v1=2302,Hd=2400,Vd=2401,ny=2402,gS=2500,AR=2501,ute=0,dte=1,hte=2,YB=3200,KB=3201,fte=3202,pte=3203,Hu=0,ZB=1,Ol="",Mn="srgb",ll="srgb-linear",iy="linear",Dn="srgb",mte=0,Pd=7680,gte=7681,yte=7682,vte=7683,xte=34055,_te=34056,bte=5386,wte=512,Ste=513,Mte=514,Ete=515,Tte=516,Cte=517,Ate=518,JC=519,JB=512,QB=513,e6=514,PR=515,t6=516,n6=517,i6=518,r6=519,ry=35044,Pte=35048,Rte=35040,kte=35045,Nte=35049,Ite=35041,Dte=35046,Lte=35050,Ote=35042,Fte="100",QC="300 es",ja=2e3,sy=2001,Ute={COMPUTE:"compute",RENDER:"render"},jte={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},zte={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FLAT_FIRST:"flat first",FLAT_EITHER:"flat either"};class ul{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}const Or=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let qL=1234567;const ih=Math.PI/180,jp=180/Math.PI;function oa(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Or[n&255]+Or[n>>8&255]+Or[n>>16&255]+Or[n>>24&255]+"-"+Or[e&255]+Or[e>>8&255]+"-"+Or[e>>16&15|64]+Or[e>>24&255]+"-"+Or[t&63|128]+Or[t>>8&255]+"-"+Or[t>>16&255]+Or[t>>24&255]+Or[i&255]+Or[i>>8&255]+Or[i>>16&255]+Or[i>>24&255]).toLowerCase()}function Yt(n,e,t){return Math.max(e,Math.min(t,n))}function RR(n,e){return(n%e+e)%e}function Bte(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function Hte(n,e,t){return n!==e?(t-n)/(e-n):0}function i0(n,e,t){return(1-t)*n+t*e}function Vte(n,e,t,i){return i0(n,e,1-Math.exp(-t*i))}function $te(n,e=1){return e-Math.abs(RR(n,e*2)-e)}function Wte(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Gte(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function qte(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Xte(n,e){return n+Math.random()*(e-n)}function Yte(n){return n*(.5-Math.random())}function Kte(n){n!==void 0&&(qL=n);let e=qL+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Zte(n){return n*ih}function Jte(n){return n*jp}function Qte(n){return(n&n-1)===0&&n!==0}function ene(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function tne(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function nne(n,e,t,i,r){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),c=s((e+i)/2),u=a((e+i)/2),d=s((e-i)/2),h=a((e-i)/2),p=s((i-e)/2),y=a((i-e)/2);switch(r){case"XYX":n.set(o*u,l*d,l*h,o*c);break;case"YZY":n.set(l*h,o*u,l*d,o*c);break;case"ZXZ":n.set(l*d,l*h,o*u,o*c);break;case"XZX":n.set(o*u,l*y,l*p,o*c);break;case"YXY":n.set(l*p,o*u,l*y,o*c);break;case"ZYZ":n.set(l*y,l*p,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function us(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function nn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Ii={DEG2RAD:ih,RAD2DEG:jp,generateUUID:oa,clamp:Yt,euclideanModulo:RR,mapLinear:Bte,inverseLerp:Hte,lerp:i0,damp:Vte,pingpong:$te,smoothstep:Wte,smootherstep:Gte,randInt:qte,randFloat:Xte,randFloatSpread:Yte,seededRandom:Kte,degToRad:Zte,radToDeg:Jte,isPowerOfTwo:Qte,ceilPowerOfTwo:ene,floorPowerOfTwo:tne,setQuaternionFromProperEuler:nne,normalize:nn,denormalize:us};class Ye{constructor(e=0,t=0){Ye.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Yt(this.x,e.x,t.x),this.y=Yt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Yt(this.x,e,t),this.y=Yt(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Yt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Yt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ei{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,a,o){let l=i[r+0],c=i[r+1],u=i[r+2],d=i[r+3];const h=s[a+0],p=s[a+1],y=s[a+2],x=s[a+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d;return}if(o===1){e[t+0]=h,e[t+1]=p,e[t+2]=y,e[t+3]=x;return}if(d!==x||l!==h||c!==p||u!==y){let _=1-o;const v=l*h+c*p+u*y+d*x,b=v>=0?1:-1,w=1-v*v;if(w>Number.EPSILON){const A=Math.sqrt(w),P=Math.atan2(A,v*b);_=Math.sin(_*P)/A,o=Math.sin(o*P)/A}const S=o*b;if(l=l*_+h*S,c=c*_+p*S,u=u*_+y*S,d=d*_+x*S,_===1-o){const A=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=A,c*=A,u*=A,d*=A}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,a){const o=i[r],l=i[r+1],c=i[r+2],u=i[r+3],d=s[a],h=s[a+1],p=s[a+2],y=s[a+3];return e[t]=o*y+u*d+l*p-c*h,e[t+1]=l*y+u*h+c*d-o*p,e[t+2]=c*y+u*p+o*h-l*d,e[t+3]=u*y-o*d-l*h-c*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(i/2),u=o(r/2),d=o(s/2),h=l(i/2),p=l(r/2),y=l(s/2);switch(a){case"XYZ":this._x=h*u*d+c*p*y,this._y=c*p*d-h*u*y,this._z=c*u*y+h*p*d,this._w=c*u*d-h*p*y;break;case"YXZ":this._x=h*u*d+c*p*y,this._y=c*p*d-h*u*y,this._z=c*u*y-h*p*d,this._w=c*u*d+h*p*y;break;case"ZXY":this._x=h*u*d-c*p*y,this._y=c*p*d+h*u*y,this._z=c*u*y+h*p*d,this._w=c*u*d-h*p*y;break;case"ZYX":this._x=h*u*d-c*p*y,this._y=c*p*d+h*u*y,this._z=c*u*y-h*p*d,this._w=c*u*d+h*p*y;break;case"YZX":this._x=h*u*d+c*p*y,this._y=c*p*d+h*u*y,this._z=c*u*y-h*p*d,this._w=c*u*d-h*p*y;break;case"XZY":this._x=h*u*d-c*p*y,this._y=c*p*d-h*u*y,this._z=c*u*y+h*p*d,this._w=c*u*d+h*p*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],a=t[1],o=t[5],l=t[9],c=t[2],u=t[6],d=t[10],h=i+o+d;if(h>0){const p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(u-l)*p,this._y=(s-c)*p,this._z=(a-r)*p}else if(i>o&&i>d){const p=2*Math.sqrt(1+i-o-d);this._w=(u-l)/p,this._x=.25*p,this._y=(r+a)/p,this._z=(s+c)/p}else if(o>d){const p=2*Math.sqrt(1+o-i-d);this._w=(s-c)/p,this._x=(r+a)/p,this._y=.25*p,this._z=(l+u)/p}else{const p=2*Math.sqrt(1+d-i-o);this._w=(a-r)/p,this._x=(s+c)/p,this._y=(l+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Yt(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,a=e._w,o=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+a*o+r*c-s*l,this._y=r*u+a*l+s*o-i*c,this._z=s*u+a*c+i*l-r*o,this._w=a*u-i*o-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+i*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const p=1-t;return this._w=p*a+t*this._w,this._x=p*i+t*this._x,this._y=p*r+t*this._y,this._z=p*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,o),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=a*d+this._w*h,this._x=i*d+this._x*h,this._y=r*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Z{constructor(e=0,t=0,i=0){Z.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(XL.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(XL.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=2*(a*r-o*i),u=2*(o*t-s*r),d=2*(s*i-a*t);return this.x=t+l*c+a*d-o*u,this.y=i+l*u+o*c-s*d,this.z=r+l*d+s*u-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Yt(this.x,e.x,t.x),this.y=Yt(this.y,e.y,t.y),this.z=Yt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Yt(this.x,e,t),this.y=Yt(this.y,e,t),this.z=Yt(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Yt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=r*l-s*o,this.y=s*a-i*l,this.z=i*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return JE.copy(this).projectOnVector(e),this.sub(JE)}reflect(e){return this.sub(JE.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Yt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const JE=new Z,XL=new Ei;class Xt{constructor(e,t,i,r,s,a,o,l,c){Xt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,o,l,c)}set(e,t,i,r,s,a,o,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[3],l=i[6],c=i[1],u=i[4],d=i[7],h=i[2],p=i[5],y=i[8],x=r[0],_=r[3],v=r[6],b=r[1],w=r[4],S=r[7],A=r[2],P=r[5],k=r[8];return s[0]=a*x+o*b+l*A,s[3]=a*_+o*w+l*P,s[6]=a*v+o*S+l*k,s[1]=c*x+u*b+d*A,s[4]=c*_+u*w+d*P,s[7]=c*v+u*S+d*k,s[2]=h*x+p*b+y*A,s[5]=h*_+p*w+y*P,s[8]=h*v+p*S+y*k,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return t*a*u-t*o*c-i*s*u+i*o*l+r*s*c-r*a*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=u*a-o*c,h=o*l-u*s,p=c*s-a*l,y=t*d+i*h+r*p;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/y;return e[0]=d*x,e[1]=(r*c-u*i)*x,e[2]=(o*i-r*a)*x,e[3]=h*x,e[4]=(u*t-r*l)*x,e[5]=(r*s-o*t)*x,e[6]=p*x,e[7]=(i*l-c*t)*x,e[8]=(a*t-i*s)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*a+c*o)+a+e,-r*c,r*l,-r*(-c*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(QE.makeScale(e,t)),this}rotate(e){return this.premultiply(QE.makeRotation(-e)),this}translate(e,t){return this.premultiply(QE.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const QE=new Xt;function s6(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const ine={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Qf(n,e){return new ine[n](e)}function ay(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function a6(){const n=ay("canvas");return n.style.display="block",n}const YL={};function pp(n){n in YL||(YL[n]=!0,console.warn(n))}function rne(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function sne(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function ane(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const KL=new Xt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),ZL=new Xt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function one(){const n={enabled:!0,workingColorSpace:ll,spaces:{},convert:function(r,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===Dn&&(r.r=Yl(r.r),r.g=Yl(r.g),r.b=Yl(r.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Dn&&(r.r=mp(r.r),r.g=mp(r.g),r.b=mp(r.b))),r},workingToColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},colorSpaceToWorking:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Ol?iy:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,a){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,s){return pp("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(r,s)},toWorkingColorSpace:function(r,s){return pp("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(r,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[ll]:{primaries:e,whitePoint:i,transfer:iy,toXYZ:KL,fromXYZ:ZL,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Mn},outputColorSpaceConfig:{drawingBufferColorSpace:Mn}},[Mn]:{primaries:e,whitePoint:i,transfer:Dn,toXYZ:KL,fromXYZ:ZL,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Mn}}}),n}const qt=one();function Yl(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function mp(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let lf;class o6{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{lf===void 0&&(lf=ay("canvas")),lf.width=e.width,lf.height=e.height;const r=lf.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=lf}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=ay("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=Yl(s[a]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Yl(t[i]/255)*255):t[i]=Yl(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let lne=0;class eu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:lne++}),this.uuid=oa(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(eT(r[a].image)):s.push(eT(r[a]))}else s=eT(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function eT(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?o6.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let cne=0;const tT=new Z;class Fn extends ul{constructor(e=Fn.DEFAULT_IMAGE,t=Fn.DEFAULT_MAPPING,i=Ai,r=Ai,s=On,a=Ko,o=Fi,l=gs,c=Fn.DEFAULT_ANISOTROPY,u=Ol){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:cne++}),this.uuid=oa(),this.name="",this.source=new eu(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new Ye(0,0),this.repeat=new Ye(1,1),this.center=new Ye(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Xt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(tT).x}get height(){return this.source.getSize(tT).y}get depth(){return this.source.getSize(tT).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}r&&i&&r.isVector2&&i.isVector2||r&&i&&r.isVector3&&i.isVector3||r&&i&&r.isMatrix3&&i.isMatrix3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Ru)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Nu:e.x=e.x-Math.floor(e.x);break;case Ai:e.x=e.x<0?0:1;break;case ey:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Nu:e.y=e.y-Math.floor(e.y);break;case Ai:e.y=e.y<0?0:1;break;case ey:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Fn.DEFAULT_IMAGE=null;Fn.DEFAULT_MAPPING=Ru;Fn.DEFAULT_ANISOTROPY=1;class mn{constructor(e=0,t=0,i=0,r=1){mn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],p=l[5],y=l[9],x=l[2],_=l[6],v=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-x)<.01&&Math.abs(y-_)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+x)<.1&&Math.abs(y+_)<.1&&Math.abs(c+p+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(c+1)/2,S=(p+1)/2,A=(v+1)/2,P=(u+h)/4,k=(d+x)/4,T=(y+_)/4;return w>S&&w>A?w<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(w),r=P/i,s=k/i):S>A?S<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(S),i=P/r,s=T/r):A<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(A),i=k/s,r=T/s),this.set(i,r,s,t),this}let b=Math.sqrt((_-y)*(_-y)+(d-x)*(d-x)+(h-u)*(h-u));return Math.abs(b)<.001&&(b=1),this.x=(_-y)/b,this.y=(d-x)/b,this.z=(h-u)/b,this.w=Math.acos((c+p+v-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Yt(this.x,e.x,t.x),this.y=Yt(this.y,e.y,t.y),this.z=Yt(this.z,e.z,t.z),this.w=Yt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Yt(this.x,e,t),this.y=Yt(this.y,e,t),this.z=Yt(this.z,e,t),this.w=Yt(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Yt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class kR extends ul{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:On,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new mn(0,0,e,t),this.scissorTest=!1,this.viewport=new mn(0,0,e,t);const r={width:e,height:t,depth:i.depth},s=new Fn(r);this.textures=[];const a=i.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const t={minFilter:On,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new eu(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ya extends kR{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class yS extends Fn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Tr,this.minFilter=Tr,this.wrapR=Ai,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class une extends Ya{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new yS(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class vS extends Fn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Tr,this.minFilter=Tr,this.wrapR=Ai,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class dne extends Ya{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new vS(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class Gr{constructor(e=new Z(1/0,1/0,1/0),t=new Z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(io.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(io.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=io.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,io):io.fromBufferAttribute(s,a),io.applyMatrix4(e.matrixWorld),this.expandByPoint(io);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Vx.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Vx.copy(i.boundingBox)),Vx.applyMatrix4(e.matrixWorld),this.union(Vx)}const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,io),io.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Gm),$x.subVectors(this.max,Gm),cf.subVectors(e.a,Gm),uf.subVectors(e.b,Gm),df.subVectors(e.c,Gm),Mc.subVectors(uf,cf),Ec.subVectors(df,uf),ld.subVectors(cf,df);let t=[0,-Mc.z,Mc.y,0,-Ec.z,Ec.y,0,-ld.z,ld.y,Mc.z,0,-Mc.x,Ec.z,0,-Ec.x,ld.z,0,-ld.x,-Mc.y,Mc.x,0,-Ec.y,Ec.x,0,-ld.y,ld.x,0];return!nT(t,cf,uf,df,$x)||(t=[1,0,0,0,1,0,0,0,1],!nT(t,cf,uf,df,$x))?!1:(Wx.crossVectors(Mc,Ec),t=[Wx.x,Wx.y,Wx.z],nT(t,cf,uf,df,$x))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,io).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(io).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(vl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),vl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),vl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),vl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),vl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),vl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),vl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),vl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(vl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const vl=[new Z,new Z,new Z,new Z,new Z,new Z,new Z,new Z],io=new Z,Vx=new Gr,cf=new Z,uf=new Z,df=new Z,Mc=new Z,Ec=new Z,ld=new Z,Gm=new Z,$x=new Z,Wx=new Z,cd=new Z;function nT(n,e,t,i,r){for(let s=0,a=n.length-3;s<=a;s+=3){cd.fromArray(n,s);const o=r.x*Math.abs(cd.x)+r.y*Math.abs(cd.y)+r.z*Math.abs(cd.z),l=e.dot(cd),c=t.dot(cd),u=i.dot(cd);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}const hne=new Gr,qm=new Z,iT=new Z;class Cr{constructor(e=new Z,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):hne.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;qm.subVectors(e,this.center);const t=qm.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(qm,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(iT.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(qm.copy(e.center).add(iT)),this.expandByPoint(qm.copy(e.center).sub(iT))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const xl=new Z,rT=new Z,Gx=new Z,Tc=new Z,sT=new Z,qx=new Z,aT=new Z;class um{constructor(e=new Z,t=new Z(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,xl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=xl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(xl.copy(this.origin).addScaledVector(this.direction,t),xl.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){rT.copy(e).add(t).multiplyScalar(.5),Gx.copy(t).sub(e).normalize(),Tc.copy(this.origin).sub(rT);const s=e.distanceTo(t)*.5,a=-this.direction.dot(Gx),o=Tc.dot(this.direction),l=-Tc.dot(Gx),c=Tc.lengthSq(),u=Math.abs(1-a*a);let d,h,p,y;if(u>0)if(d=a*l-o,h=a*o-l,y=s*u,d>=0)if(h>=-y)if(h<=y){const x=1/u;d*=x,h*=x,p=d*(d+a*h+2*o)+h*(a*d+h+2*l)+c}else h=s,d=Math.max(0,-(a*h+o)),p=-d*d+h*(h+2*l)+c;else h=-s,d=Math.max(0,-(a*h+o)),p=-d*d+h*(h+2*l)+c;else h<=-y?(d=Math.max(0,-(-a*s+o)),h=d>0?-s:Math.min(Math.max(-s,-l),s),p=-d*d+h*(h+2*l)+c):h<=y?(d=0,h=Math.min(Math.max(-s,-l),s),p=h*(h+2*l)+c):(d=Math.max(0,-(a*s+o)),h=d>0?s:Math.min(Math.max(-s,-l),s),p=-d*d+h*(h+2*l)+c);else h=a>0?-s:s,d=Math.max(0,-(a*h+o)),p=-d*d+h*(h+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(rT).addScaledVector(Gx,h),p}intersectSphere(e,t){xl.subVectors(e.center,this.origin);const i=xl.dot(this.direction),r=xl.dot(xl)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=i-a,l=i+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,a,o,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),i>a||s>r||((s>i||isNaN(i))&&(i=s),(a<r||isNaN(r))&&(r=a),d>=0?(o=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(o=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),i>l||o>r)||((o>i||i!==i)&&(i=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,xl)!==null}intersectTriangle(e,t,i,r,s){sT.subVectors(t,e),qx.subVectors(i,e),aT.crossVectors(sT,qx);let a=this.direction.dot(aT),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;Tc.subVectors(this.origin,e);const l=o*this.direction.dot(qx.crossVectors(Tc,qx));if(l<0)return null;const c=o*this.direction.dot(sT.cross(Tc));if(c<0||l+c>a)return null;const u=-o*Tc.dot(aT);return u<0?null:this.at(u/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class wt{constructor(e,t,i,r,s,a,o,l,c,u,d,h,p,y,x,_){wt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,o,l,c,u,d,h,p,y,x,_)}set(e,t,i,r,s,a,o,l,c,u,d,h,p,y,x,_){const v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=r,v[1]=s,v[5]=a,v[9]=o,v[13]=l,v[2]=c,v[6]=u,v[10]=d,v[14]=h,v[3]=p,v[7]=y,v[11]=x,v[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new wt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/hf.setFromMatrixColumn(e,0).length(),s=1/hf.setFromMatrixColumn(e,1).length(),a=1/hf.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),o=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const h=a*u,p=a*d,y=o*u,x=o*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=p+y*c,t[5]=h-x*c,t[9]=-o*l,t[2]=x-h*c,t[6]=y+p*c,t[10]=a*l}else if(e.order==="YXZ"){const h=l*u,p=l*d,y=c*u,x=c*d;t[0]=h+x*o,t[4]=y*o-p,t[8]=a*c,t[1]=a*d,t[5]=a*u,t[9]=-o,t[2]=p*o-y,t[6]=x+h*o,t[10]=a*l}else if(e.order==="ZXY"){const h=l*u,p=l*d,y=c*u,x=c*d;t[0]=h-x*o,t[4]=-a*d,t[8]=y+p*o,t[1]=p+y*o,t[5]=a*u,t[9]=x-h*o,t[2]=-a*c,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const h=a*u,p=a*d,y=o*u,x=o*d;t[0]=l*u,t[4]=y*c-p,t[8]=h*c+x,t[1]=l*d,t[5]=x*c+h,t[9]=p*c-y,t[2]=-c,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const h=a*l,p=a*c,y=o*l,x=o*c;t[0]=l*u,t[4]=x-h*d,t[8]=y*d+p,t[1]=d,t[5]=a*u,t[9]=-o*u,t[2]=-c*u,t[6]=p*d+y,t[10]=h-x*d}else if(e.order==="XZY"){const h=a*l,p=a*c,y=o*l,x=o*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+x,t[5]=a*u,t[9]=p*d-y,t[2]=y*d-p,t[6]=o*u,t[10]=x*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(fne,e,pne)}lookAt(e,t,i){const r=this.elements;return qs.subVectors(e,t),qs.lengthSq()===0&&(qs.z=1),qs.normalize(),Cc.crossVectors(i,qs),Cc.lengthSq()===0&&(Math.abs(i.z)===1?qs.x+=1e-4:qs.z+=1e-4,qs.normalize(),Cc.crossVectors(i,qs)),Cc.normalize(),Xx.crossVectors(qs,Cc),r[0]=Cc.x,r[4]=Xx.x,r[8]=qs.x,r[1]=Cc.y,r[5]=Xx.y,r[9]=qs.y,r[2]=Cc.z,r[6]=Xx.z,r[10]=qs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[4],l=i[8],c=i[12],u=i[1],d=i[5],h=i[9],p=i[13],y=i[2],x=i[6],_=i[10],v=i[14],b=i[3],w=i[7],S=i[11],A=i[15],P=r[0],k=r[4],T=r[8],E=r[12],R=r[1],I=r[5],D=r[9],B=r[13],G=r[2],Y=r[6],X=r[10],Q=r[14],L=r[3],W=r[7],j=r[11],te=r[15];return s[0]=a*P+o*R+l*G+c*L,s[4]=a*k+o*I+l*Y+c*W,s[8]=a*T+o*D+l*X+c*j,s[12]=a*E+o*B+l*Q+c*te,s[1]=u*P+d*R+h*G+p*L,s[5]=u*k+d*I+h*Y+p*W,s[9]=u*T+d*D+h*X+p*j,s[13]=u*E+d*B+h*Q+p*te,s[2]=y*P+x*R+_*G+v*L,s[6]=y*k+x*I+_*Y+v*W,s[10]=y*T+x*D+_*X+v*j,s[14]=y*E+x*B+_*Q+v*te,s[3]=b*P+w*R+S*G+A*L,s[7]=b*k+w*I+S*Y+A*W,s[11]=b*T+w*D+S*X+A*j,s[15]=b*E+w*B+S*Q+A*te,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],p=e[14],y=e[3],x=e[7],_=e[11],v=e[15];return y*(+s*l*d-r*c*d-s*o*h+i*c*h+r*o*p-i*l*p)+x*(+t*l*p-t*c*h+s*a*h-r*a*p+r*c*u-s*l*u)+_*(+t*c*d-t*o*p-s*a*d+i*a*p+s*o*u-i*c*u)+v*(-r*o*u-t*l*d+t*o*h+r*a*d-i*a*h+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],p=e[11],y=e[12],x=e[13],_=e[14],v=e[15],b=d*_*c-x*h*c+x*l*p-o*_*p-d*l*v+o*h*v,w=y*h*c-u*_*c-y*l*p+a*_*p+u*l*v-a*h*v,S=u*x*c-y*d*c+y*o*p-a*x*p-u*o*v+a*d*v,A=y*d*l-u*x*l-y*o*h+a*x*h+u*o*_-a*d*_,P=t*b+i*w+r*S+s*A;if(P===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const k=1/P;return e[0]=b*k,e[1]=(x*h*s-d*_*s-x*r*p+i*_*p+d*r*v-i*h*v)*k,e[2]=(o*_*s-x*l*s+x*r*c-i*_*c-o*r*v+i*l*v)*k,e[3]=(d*l*s-o*h*s-d*r*c+i*h*c+o*r*p-i*l*p)*k,e[4]=w*k,e[5]=(u*_*s-y*h*s+y*r*p-t*_*p-u*r*v+t*h*v)*k,e[6]=(y*l*s-a*_*s-y*r*c+t*_*c+a*r*v-t*l*v)*k,e[7]=(a*h*s-u*l*s+u*r*c-t*h*c-a*r*p+t*l*p)*k,e[8]=S*k,e[9]=(y*d*s-u*x*s-y*i*p+t*x*p+u*i*v-t*d*v)*k,e[10]=(a*x*s-y*o*s+y*i*c-t*x*c-a*i*v+t*o*v)*k,e[11]=(u*o*s-a*d*s-u*i*c+t*d*c+a*i*p-t*o*p)*k,e[12]=A*k,e[13]=(u*x*r-y*d*r+y*i*h-t*x*h-u*i*_+t*d*_)*k,e[14]=(y*o*r-a*x*r-y*i*l+t*x*l+a*i*_-t*o*_)*k,e[15]=(a*d*r-u*o*r+u*i*l-t*d*l-a*i*h+t*o*h)*k,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,a=e.x,o=e.y,l=e.z,c=s*a,u=s*o;return this.set(c*a+i,c*o-r*l,c*l+r*o,0,c*o+r*l,u*o+i,u*l-r*a,0,c*l-r*o,u*l+r*a,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,c=s+s,u=a+a,d=o+o,h=s*c,p=s*u,y=s*d,x=a*u,_=a*d,v=o*d,b=l*c,w=l*u,S=l*d,A=i.x,P=i.y,k=i.z;return r[0]=(1-(x+v))*A,r[1]=(p+S)*A,r[2]=(y-w)*A,r[3]=0,r[4]=(p-S)*P,r[5]=(1-(h+v))*P,r[6]=(_+b)*P,r[7]=0,r[8]=(y+w)*k,r[9]=(_-b)*k,r[10]=(1-(h+x))*k,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=hf.set(r[0],r[1],r[2]).length();const a=hf.set(r[4],r[5],r[6]).length(),o=hf.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],ro.copy(this);const c=1/s,u=1/a,d=1/o;return ro.elements[0]*=c,ro.elements[1]*=c,ro.elements[2]*=c,ro.elements[4]*=u,ro.elements[5]*=u,ro.elements[6]*=u,ro.elements[8]*=d,ro.elements[9]*=d,ro.elements[10]*=d,t.setFromRotationMatrix(ro),i.x=s,i.y=a,i.z=o,this}makePerspective(e,t,i,r,s,a,o=ja){const l=this.elements,c=2*s/(t-e),u=2*s/(i-r),d=(t+e)/(t-e),h=(i+r)/(i-r);let p,y;if(o===ja)p=-(a+s)/(a-s),y=-2*a*s/(a-s);else if(o===sy)p=-a/(a-s),y=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=y,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,a,o=ja){const l=this.elements,c=1/(t-e),u=1/(i-r),d=1/(a-s),h=(t+e)*c,p=(i+r)*u;let y,x;if(o===ja)y=(a+s)*d,x=-2*d;else if(o===sy)y=s*d,x=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=x,l[14]=-y,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const hf=new Z,ro=new wt,fne=new Z(0,0,0),pne=new Z(1,1,1),Cc=new Z,Xx=new Z,qs=new Z,JL=new wt,QL=new Ei;class qi{constructor(e=0,t=0,i=0,r=qi.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],a=r[4],o=r[8],l=r[1],c=r[5],u=r[9],d=r[2],h=r[6],p=r[10];switch(t){case"XYZ":this._y=Math.asin(Yt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Yt(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Yt(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Yt(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(Yt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(o,p));break;case"XZY":this._z=Math.asin(-Yt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return JL.makeRotationFromQuaternion(e),this.setFromRotationMatrix(JL,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return QL.setFromEuler(this),this.setFromQuaternion(QL,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}qi.DEFAULT_ORDER="XYZ";class rh{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let mne=0;const eO=new Z,ff=new Ei,_l=new wt,Yx=new Z,Xm=new Z,gne=new Z,yne=new Ei,tO=new Z(1,0,0),nO=new Z(0,1,0),iO=new Z(0,0,1),rO={type:"added"},vne={type:"removed"},pf={type:"childadded",child:null},oT={type:"childremoved",child:null};class xn extends ul{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:mne++}),this.uuid=oa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=xn.DEFAULT_UP.clone();const e=new Z,t=new qi,i=new Ei,r=new Z(1,1,1);function s(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new wt},normalMatrix:{value:new Xt}}),this.matrix=new wt,this.matrixWorld=new wt,this.matrixAutoUpdate=xn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=xn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new rh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ff.setFromAxisAngle(e,t),this.quaternion.multiply(ff),this}rotateOnWorldAxis(e,t){return ff.setFromAxisAngle(e,t),this.quaternion.premultiply(ff),this}rotateX(e){return this.rotateOnAxis(tO,e)}rotateY(e){return this.rotateOnAxis(nO,e)}rotateZ(e){return this.rotateOnAxis(iO,e)}translateOnAxis(e,t){return eO.copy(e).applyQuaternion(this.quaternion),this.position.add(eO.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(tO,e)}translateY(e){return this.translateOnAxis(nO,e)}translateZ(e){return this.translateOnAxis(iO,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(_l.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Yx.copy(e):Yx.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Xm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_l.lookAt(Xm,Yx,this.up):_l.lookAt(Yx,Xm,this.up),this.quaternion.setFromRotationMatrix(_l),r&&(_l.extractRotation(r.matrixWorld),ff.setFromRotationMatrix(_l),this.quaternion.premultiply(ff.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(rO),pf.child=e,this.dispatchEvent(pf),pf.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(vne),oT.child=e,this.dispatchEvent(oT),oT.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),_l.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),_l.multiply(e.parent.matrixWorld)),e.applyMatrix4(_l),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(rO),pf.child=e,this.dispatchEvent(pf),pf.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Xm,e,gne),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Xm,yne,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(o=>({...o})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(s(e.materials,this.material[l]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),d=a(e.shapes),h=a(e.skeletons),p=a(e.animations),y=a(e.nodes);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),d.length>0&&(i.shapes=d),h.length>0&&(i.skeletons=h),p.length>0&&(i.animations=p),y.length>0&&(i.nodes=y)}return i.object=r,i;function a(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}xn.DEFAULT_UP=new Z(0,1,0);xn.DEFAULT_MATRIX_AUTO_UPDATE=!0;xn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const so=new Z,bl=new Z,lT=new Z,wl=new Z,mf=new Z,gf=new Z,sO=new Z,cT=new Z,uT=new Z,dT=new Z,hT=new mn,fT=new mn,pT=new mn;class Rs{constructor(e=new Z,t=new Z,i=new Z){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),so.subVectors(e,t),r.cross(so);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){so.subVectors(r,t),bl.subVectors(i,t),lT.subVectors(e,t);const a=so.dot(so),o=so.dot(bl),l=so.dot(lT),c=bl.dot(bl),u=bl.dot(lT),d=a*c-o*o;if(d===0)return s.set(0,0,0),null;const h=1/d,p=(c*l-o*u)*h,y=(a*u-o*l)*h;return s.set(1-p-y,y,p)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,wl)===null?!1:wl.x>=0&&wl.y>=0&&wl.x+wl.y<=1}static getInterpolation(e,t,i,r,s,a,o,l){return this.getBarycoord(e,t,i,r,wl)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,wl.x),l.addScaledVector(a,wl.y),l.addScaledVector(o,wl.z),l)}static getInterpolatedAttribute(e,t,i,r,s,a){return hT.setScalar(0),fT.setScalar(0),pT.setScalar(0),hT.fromBufferAttribute(e,t),fT.fromBufferAttribute(e,i),pT.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector(hT,s.x),a.addScaledVector(fT,s.y),a.addScaledVector(pT,s.z),a}static isFrontFacing(e,t,i,r){return so.subVectors(i,t),bl.subVectors(e,t),so.cross(bl).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return so.subVectors(this.c,this.b),bl.subVectors(this.a,this.b),so.cross(bl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Rs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Rs.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return Rs.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Rs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Rs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let a,o;mf.subVectors(r,i),gf.subVectors(s,i),cT.subVectors(e,i);const l=mf.dot(cT),c=gf.dot(cT);if(l<=0&&c<=0)return t.copy(i);uT.subVectors(e,r);const u=mf.dot(uT),d=gf.dot(uT);if(u>=0&&d<=u)return t.copy(r);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return a=l/(l-u),t.copy(i).addScaledVector(mf,a);dT.subVectors(e,s);const p=mf.dot(dT),y=gf.dot(dT);if(y>=0&&p<=y)return t.copy(s);const x=p*c-l*y;if(x<=0&&c>=0&&y<=0)return o=c/(c-y),t.copy(i).addScaledVector(gf,o);const _=u*y-p*d;if(_<=0&&d-u>=0&&p-y>=0)return sO.subVectors(s,r),o=(d-u)/(d-u+(p-y)),t.copy(r).addScaledVector(sO,o);const v=1/(_+x+h);return a=x*v,o=h*v,t.copy(i).addScaledVector(mf,a).addScaledVector(gf,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const l6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ac={h:0,s:0,l:0},Kx={h:0,s:0,l:0};function mT(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class ct{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Mn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,qt.colorSpaceToWorking(this,t),this}setRGB(e,t,i,r=qt.workingColorSpace){return this.r=e,this.g=t,this.b=i,qt.colorSpaceToWorking(this,r),this}setHSL(e,t,i,r=qt.workingColorSpace){if(e=RR(e,1),t=Yt(t,0,1),i=Yt(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,a=2*i-s;this.r=mT(a,s,e+1/3),this.g=mT(a,s,e),this.b=mT(a,s,e-1/3)}return qt.colorSpaceToWorking(this,r),this}setStyle(e,t=Mn){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Mn){const i=l6[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Yl(e.r),this.g=Yl(e.g),this.b=Yl(e.b),this}copyLinearToSRGB(e){return this.r=mp(e.r),this.g=mp(e.g),this.b=mp(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Mn){return qt.workingToColorSpace(Fr.copy(this),e),Math.round(Yt(Fr.r*255,0,255))*65536+Math.round(Yt(Fr.g*255,0,255))*256+Math.round(Yt(Fr.b*255,0,255))}getHexString(e=Mn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=qt.workingColorSpace){qt.workingToColorSpace(Fr.copy(this),t);const i=Fr.r,r=Fr.g,s=Fr.b,a=Math.max(i,r,s),o=Math.min(i,r,s);let l,c;const u=(o+a)/2;if(o===a)l=0,c=0;else{const d=a-o;switch(c=u<=.5?d/(a+o):d/(2-a-o),a){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=qt.workingColorSpace){return qt.workingToColorSpace(Fr.copy(this),t),e.r=Fr.r,e.g=Fr.g,e.b=Fr.b,e}getStyle(e=Mn){qt.workingToColorSpace(Fr.copy(this),e);const t=Fr.r,i=Fr.g,r=Fr.b;return e!==Mn?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Ac),this.setHSL(Ac.h+e,Ac.s+t,Ac.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ac),e.getHSL(Kx);const i=i0(Ac.h,Kx.h,t),r=i0(Ac.s,Kx.s,t),s=i0(Ac.l,Kx.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Fr=new ct;ct.NAMES=l6;let xne=0;class _r extends ul{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:xne++}),this.uuid=oa(),this.name="",this.type="Material",this.blending=nh,this.side=sl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=_b,this.blendDst=bb,this.blendEquation=Wc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ct(0,0,0),this.blendAlpha=0,this.depthFunc=wh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=JC,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Pd,this.stencilZFail=Pd,this.stencilZPass=Pd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==nh&&(i.blending=this.blending),this.side!==sl&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==_b&&(i.blendSrc=this.blendSrc),this.blendDst!==bb&&(i.blendDst=this.blendDst),this.blendEquation!==Wc&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==wh&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==JC&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Pd&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Pd&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Pd&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class fc extends _r{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ct(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new qi,this.combine=Wy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Fl=_ne();function _ne(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}function Es(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Yt(n,-65504,65504),Fl.floatView[0]=n;const e=Fl.uint32View[0],t=e>>23&511;return Fl.baseTable[t]+((e&8388607)>>Fl.shiftTable[t])}function Sg(n){const e=n>>10;return Fl.uint32View[0]=Fl.mantissaTable[Fl.offsetTable[e]+(n&1023)]+Fl.exponentTable[e],Fl.floatView[0]}class $d{static toHalfFloat(e){return Es(e)}static fromHalfFloat(e){return Sg(e)}}const Hi=new Z,Zx=new Ye;let bne=0;class zn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:bne++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=ry,this.updateRanges=[],this.gpuType=yi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Zx.fromBufferAttribute(this,t),Zx.applyMatrix3(e),this.setXY(t,Zx.x,Zx.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Hi.fromBufferAttribute(this,t),Hi.applyMatrix3(e),this.setXYZ(t,Hi.x,Hi.y,Hi.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Hi.fromBufferAttribute(this,t),Hi.applyMatrix4(e),this.setXYZ(t,Hi.x,Hi.y,Hi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Hi.fromBufferAttribute(this,t),Hi.applyNormalMatrix(e),this.setXYZ(t,Hi.x,Hi.y,Hi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Hi.fromBufferAttribute(this,t),Hi.transformDirection(e),this.setXYZ(t,Hi.x,Hi.y,Hi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=us(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=nn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=us(t,this.array)),t}setX(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=us(t,this.array)),t}setY(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=us(t,this.array)),t}setZ(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=us(t,this.array)),t}setW(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array),s=nn(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==ry&&(e.usage=this.usage),e}}class wne extends zn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class Sne extends zn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class Mne extends zn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class Ene extends zn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class xS extends zn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Tne extends zn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class NR extends zn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Cne extends zn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Sg(this.array[e*this.itemSize]);return this.normalized&&(t=us(t,this.array)),t}setX(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize]=Es(t),this}getY(e){let t=Sg(this.array[e*this.itemSize+1]);return this.normalized&&(t=us(t,this.array)),t}setY(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+1]=Es(t),this}getZ(e){let t=Sg(this.array[e*this.itemSize+2]);return this.normalized&&(t=us(t,this.array)),t}setZ(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+2]=Es(t),this}getW(e){let t=Sg(this.array[e*this.itemSize+3]);return this.normalized&&(t=us(t,this.array)),t}setW(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+3]=Es(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array)),this.array[e+0]=Es(t),this.array[e+1]=Es(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array)),this.array[e+0]=Es(t),this.array[e+1]=Es(i),this.array[e+2]=Es(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array),s=nn(s,this.array)),this.array[e+0]=Es(t),this.array[e+1]=Es(i),this.array[e+2]=Es(r),this.array[e+3]=Es(s),this}}class mt extends zn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let Ane=0;const Ma=new wt,gT=new xn,yf=new Z,Xs=new Gr,Ym=new Gr,hr=new Z;class Wt extends ul{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Ane++}),this.uuid=oa(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(s6(e)?NR:xS)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Xt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ma.makeRotationFromQuaternion(e),this.applyMatrix4(Ma),this}rotateX(e){return Ma.makeRotationX(e),this.applyMatrix4(Ma),this}rotateY(e){return Ma.makeRotationY(e),this.applyMatrix4(Ma),this}rotateZ(e){return Ma.makeRotationZ(e),this.applyMatrix4(Ma),this}translate(e,t,i){return Ma.makeTranslation(e,t,i),this.applyMatrix4(Ma),this}scale(e,t,i){return Ma.makeScale(e,t,i),this.applyMatrix4(Ma),this}lookAt(e){return gT.lookAt(e),gT.updateMatrix(),this.applyMatrix4(gT.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(yf).negate(),this.translate(yf.x,yf.y,yf.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];i.push(a.x,a.y,a.z||0)}this.setAttribute("position",new mt(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Gr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Z(-1/0,-1/0,-1/0),new Z(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Xs.setFromBufferAttribute(s),this.morphTargetsRelative?(hr.addVectors(this.boundingBox.min,Xs.min),this.boundingBox.expandByPoint(hr),hr.addVectors(this.boundingBox.max,Xs.max),this.boundingBox.expandByPoint(hr)):(this.boundingBox.expandByPoint(Xs.min),this.boundingBox.expandByPoint(Xs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Cr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Z,1/0);return}if(e){const i=this.boundingSphere.center;if(Xs.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];Ym.setFromBufferAttribute(o),this.morphTargetsRelative?(hr.addVectors(Xs.min,Ym.min),Xs.expandByPoint(hr),hr.addVectors(Xs.max,Ym.max),Xs.expandByPoint(hr)):(Xs.expandByPoint(Ym.min),Xs.expandByPoint(Ym.max))}Xs.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)hr.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(hr));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let c=0,u=o.count;c<u;c++)hr.fromBufferAttribute(o,c),l&&(yf.fromBufferAttribute(e,c),hr.add(yf)),r=Math.max(r,i.distanceToSquared(hr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new zn(new Float32Array(4*i.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let T=0;T<i.count;T++)o[T]=new Z,l[T]=new Z;const c=new Z,u=new Z,d=new Z,h=new Ye,p=new Ye,y=new Ye,x=new Z,_=new Z;function v(T,E,R){c.fromBufferAttribute(i,T),u.fromBufferAttribute(i,E),d.fromBufferAttribute(i,R),h.fromBufferAttribute(s,T),p.fromBufferAttribute(s,E),y.fromBufferAttribute(s,R),u.sub(c),d.sub(c),p.sub(h),y.sub(h);const I=1/(p.x*y.y-y.x*p.y);isFinite(I)&&(x.copy(u).multiplyScalar(y.y).addScaledVector(d,-p.y).multiplyScalar(I),_.copy(d).multiplyScalar(p.x).addScaledVector(u,-y.x).multiplyScalar(I),o[T].add(x),o[E].add(x),o[R].add(x),l[T].add(_),l[E].add(_),l[R].add(_))}let b=this.groups;b.length===0&&(b=[{start:0,count:e.count}]);for(let T=0,E=b.length;T<E;++T){const R=b[T],I=R.start,D=R.count;for(let B=I,G=I+D;B<G;B+=3)v(e.getX(B+0),e.getX(B+1),e.getX(B+2))}const w=new Z,S=new Z,A=new Z,P=new Z;function k(T){A.fromBufferAttribute(r,T),P.copy(A);const E=o[T];w.copy(E),w.sub(A.multiplyScalar(A.dot(E))).normalize(),S.crossVectors(P,E);const I=S.dot(l[T])<0?-1:1;a.setXYZW(T,w.x,w.y,w.z,I)}for(let T=0,E=b.length;T<E;++T){const R=b[T],I=R.start,D=R.count;for(let B=I,G=I+D;B<G;B+=3)k(e.getX(B+0)),k(e.getX(B+1)),k(e.getX(B+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new zn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let h=0,p=i.count;h<p;h++)i.setXYZ(h,0,0,0);const r=new Z,s=new Z,a=new Z,o=new Z,l=new Z,c=new Z,u=new Z,d=new Z;if(e)for(let h=0,p=e.count;h<p;h+=3){const y=e.getX(h+0),x=e.getX(h+1),_=e.getX(h+2);r.fromBufferAttribute(t,y),s.fromBufferAttribute(t,x),a.fromBufferAttribute(t,_),u.subVectors(a,s),d.subVectors(r,s),u.cross(d),o.fromBufferAttribute(i,y),l.fromBufferAttribute(i,x),c.fromBufferAttribute(i,_),o.add(u),l.add(u),c.add(u),i.setXYZ(y,o.x,o.y,o.z),i.setXYZ(x,l.x,l.y,l.z),i.setXYZ(_,c.x,c.y,c.z)}else for(let h=0,p=t.count;h<p;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),a.fromBufferAttribute(t,h+2),u.subVectors(a,s),d.subVectors(r,s),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)hr.fromBufferAttribute(e,t),hr.normalize(),e.setXYZ(t,hr.x,hr.y,hr.z)}toNonIndexed(){function e(o,l){const c=o.array,u=o.itemSize,d=o.normalized,h=new c.constructor(l.length*u);let p=0,y=0;for(let x=0,_=l.length;x<_;x++){o.isInterleavedBufferAttribute?p=l[x]*o.data.stride+o.offset:p=l[x]*u;for(let v=0;v<u;v++)h[y++]=c[p++]}return new zn(h,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Wt,i=this.index.array,r=this.attributes;for(const o in r){const l=r[o],c=e(l,i);t.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const l=[],c=s[o];for(let u=0,d=c.length;u<d;u++){const h=c[u],p=e(h,i);l.push(p)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++){const p=c[d];u.push(p.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere=o.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let h=0,p=d.length;h<p;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const d=a[c];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const aO=new wt,ud=new um,Jx=new Cr,oO=new Z,Qx=new Z,e_=new Z,t_=new Z,yT=new Z,n_=new Z,lO=new Z,i_=new Z;class Zn extends xn{constructor(e=new Wt,t=new fc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(s&&o){n_.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=o[l],d=s[l];u!==0&&(yT.fromBufferAttribute(d,e),a?n_.addScaledVector(yT,u):n_.addScaledVector(yT.sub(t),u))}t.add(n_)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Jx.copy(i.boundingSphere),Jx.applyMatrix4(s),ud.copy(e.ray).recast(e.near),!(Jx.containsPoint(ud.origin)===!1&&(ud.intersectSphere(Jx,oO)===null||ud.origin.distanceToSquared(oO)>(e.far-e.near)**2))&&(aO.copy(s).invert(),ud.copy(e.ray).applyMatrix4(aO),!(i.boundingBox!==null&&ud.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,ud)))}_computeIntersections(e,t,i){let r;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,h=s.groups,p=s.drawRange;if(o!==null)if(Array.isArray(a))for(let y=0,x=h.length;y<x;y++){const _=h[y],v=a[_.materialIndex],b=Math.max(_.start,p.start),w=Math.min(o.count,Math.min(_.start+_.count,p.start+p.count));for(let S=b,A=w;S<A;S+=3){const P=o.getX(S),k=o.getX(S+1),T=o.getX(S+2);r=r_(this,v,e,i,c,u,d,P,k,T),r&&(r.faceIndex=Math.floor(S/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const y=Math.max(0,p.start),x=Math.min(o.count,p.start+p.count);for(let _=y,v=x;_<v;_+=3){const b=o.getX(_),w=o.getX(_+1),S=o.getX(_+2);r=r_(this,a,e,i,c,u,d,b,w,S),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(a))for(let y=0,x=h.length;y<x;y++){const _=h[y],v=a[_.materialIndex],b=Math.max(_.start,p.start),w=Math.min(l.count,Math.min(_.start+_.count,p.start+p.count));for(let S=b,A=w;S<A;S+=3){const P=S,k=S+1,T=S+2;r=r_(this,v,e,i,c,u,d,P,k,T),r&&(r.faceIndex=Math.floor(S/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const y=Math.max(0,p.start),x=Math.min(l.count,p.start+p.count);for(let _=y,v=x;_<v;_+=3){const b=_,w=_+1,S=_+2;r=r_(this,a,e,i,c,u,d,b,w,S),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}}}function Pne(n,e,t,i,r,s,a,o){let l;if(e.side===ms?l=i.intersectTriangle(a,s,r,!0,o):l=i.intersectTriangle(r,s,a,e.side===sl,o),l===null)return null;i_.copy(o),i_.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(i_);return c<t.near||c>t.far?null:{distance:c,point:i_.clone(),object:n}}function r_(n,e,t,i,r,s,a,o,l,c){n.getVertexPosition(o,Qx),n.getVertexPosition(l,e_),n.getVertexPosition(c,t_);const u=Pne(n,e,t,i,Qx,e_,t_,lO);if(u){const d=new Z;Rs.getBarycoord(lO,Qx,e_,t_,d),r&&(u.uv=Rs.getInterpolatedAttribute(r,o,l,c,d,new Ye)),s&&(u.uv1=Rs.getInterpolatedAttribute(s,o,l,c,d,new Ye)),a&&(u.normal=Rs.getInterpolatedAttribute(a,o,l,c,d,new Z),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const h={a:o,b:l,c,normal:new Z,materialIndex:0};Rs.getNormal(Qx,e_,t_,h.normal),u.face=h,u.barycoord=d}return u}class Oh extends Wt{constructor(e=1,t=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const l=[],c=[],u=[],d=[];let h=0,p=0;y("z","y","x",-1,-1,i,t,e,a,s,0),y("z","y","x",1,-1,i,t,-e,a,s,1),y("x","z","y",1,1,e,i,t,r,a,2),y("x","z","y",1,-1,e,i,-t,r,a,3),y("x","y","z",1,-1,e,t,i,r,s,4),y("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new mt(c,3)),this.setAttribute("normal",new mt(u,3)),this.setAttribute("uv",new mt(d,2));function y(x,_,v,b,w,S,A,P,k,T,E){const R=S/k,I=A/T,D=S/2,B=A/2,G=P/2,Y=k+1,X=T+1;let Q=0,L=0;const W=new Z;for(let j=0;j<X;j++){const te=j*I-B;for(let ae=0;ae<Y;ae++){const me=ae*R-D;W[x]=me*b,W[_]=te*w,W[v]=G,c.push(W.x,W.y,W.z),W[x]=0,W[_]=0,W[v]=P>0?1:-1,u.push(W.x,W.y,W.z),d.push(ae/k),d.push(1-j/T),Q+=1}}for(let j=0;j<T;j++)for(let te=0;te<k;te++){const ae=h+te+Y*j,me=h+te+Y*(j+1),K=h+(te+1)+Y*(j+1),re=h+(te+1)+Y*j;l.push(ae,me,re),l.push(me,K,re),L+=6}o.addGroup(p,L,E),p+=L,h+=Q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Oh(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function zp(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function rs(n){const e={};for(let t=0;t<n.length;t++){const i=zp(n[t]);for(const r in i)e[r]=i[r]}return e}function Rne(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function c6(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:qt.workingColorSpace}const u6={clone:zp,merge:rs};var kne=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Nne=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class js extends _r{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=kne,this.fragmentShader=Nne,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=zp(e.uniforms),this.uniformsGroups=Rne(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Yy extends xn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new wt,this.projectionMatrix=new wt,this.projectionMatrixInverse=new wt,this.coordinateSystem=ja}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Pc=new Z,cO=new Ye,uO=new Ye;class ir extends Yy{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=jp*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ih*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return jp*2*Math.atan(Math.tan(ih*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Pc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Pc.x,Pc.y).multiplyScalar(-e/Pc.z),Pc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Pc.x,Pc.y).multiplyScalar(-e/Pc.z)}getViewSize(e,t){return this.getViewBounds(e,cO,uO),t.subVectors(uO,cO)}setViewOffset(e,t,i,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(ih*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;s+=a.offsetX*r/l,t-=a.offsetY*i/c,r*=a.width/l,i*=a.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const vf=-90,xf=1;class d6 extends xn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new ir(vf,xf,e,t);r.layers=this.layers,this.add(r);const s=new ir(vf,xf,e,t);s.layers=this.layers,this.add(s);const a=new ir(vf,xf,e,t);a.layers=this.layers,this.add(a);const o=new ir(vf,xf,e,t);o.layers=this.layers,this.add(o);const l=new ir(vf,xf,e,t);l.layers=this.layers,this.add(l);const c=new ir(vf,xf,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,a,o,l]=t;for(const c of t)this.remove(c);if(e===ja)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===sy)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,c,u]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;const x=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,a),e.setRenderTarget(i,2,r),e.render(t,o),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=x,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(d,h,p),e.xr.enabled=y,i.texture.needsPMREMUpdate=!0}}class Ky extends Fn{constructor(e=[],t=al,i,r,s,a,o,l,c,u){super(e,t,i,r,s,a,o,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class IR extends Ya{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Ky(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Oh(5,5,5),s=new js({name:"CubemapFromEquirect",uniforms:zp(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ms,blending:nl});s.uniforms.tEquirect.value=t;const a=new Zn(r,s),o=t.minFilter;return t.minFilter===Ko&&(t.minFilter=On),new d6(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(s)}}class Vl extends xn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Ine={type:"move"};class x1{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Vl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Vl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Z),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Vl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Z),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const x of e.hand.values()){const _=t.getJointPose(x,i),v=this._getHandJoint(c,x);_!==null&&(v.matrix.fromArray(_.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=_.radius),v.visible=_!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],h=u.position.distanceTo(d.position),p=.02,y=.005;c.inputState.pinching&&h>p+y?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=p-y&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Ine)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Vl;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class _S{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ct(e),this.density=t}clone(){return new _S(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class bS{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new ct(e),this.near=t,this.far=i}clone(){return new bS(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Zy extends xn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new qi,this.environmentIntensity=1,this.environmentRotation=new qi,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class wS{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=ry,this.updateRanges=[],this.version=0,this.uuid=oa()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=oa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=oa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const es=new Z;class Mh{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)es.fromBufferAttribute(this,t),es.applyMatrix4(e),this.setXYZ(t,es.x,es.y,es.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)es.fromBufferAttribute(this,t),es.applyNormalMatrix(e),this.setXYZ(t,es.x,es.y,es.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)es.fromBufferAttribute(this,t),es.transformDirection(e),this.setXYZ(t,es.x,es.y,es.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=us(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=nn(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=us(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=us(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=us(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=us(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array),s=nn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new zn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Mh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class DR extends _r{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ct(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let _f;const Km=new Z,bf=new Z,wf=new Z,Sf=new Ye,Zm=new Ye,h6=new wt,s_=new Z,Jm=new Z,a_=new Z,dO=new Ye,vT=new Ye,hO=new Ye;class f6 extends xn{constructor(e=new DR){if(super(),this.isSprite=!0,this.type="Sprite",_f===void 0){_f=new Wt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new wS(t,5);_f.setIndex([0,1,2,0,2,3]),_f.setAttribute("position",new Mh(i,3,0,!1)),_f.setAttribute("uv",new Mh(i,2,3,!1))}this.geometry=_f,this.material=e,this.center=new Ye(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),bf.setFromMatrixScale(this.matrixWorld),h6.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),wf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&bf.multiplyScalar(-wf.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const a=this.center;o_(s_.set(-.5,-.5,0),wf,a,bf,r,s),o_(Jm.set(.5,-.5,0),wf,a,bf,r,s),o_(a_.set(.5,.5,0),wf,a,bf,r,s),dO.set(0,0),vT.set(1,0),hO.set(1,1);let o=e.ray.intersectTriangle(s_,Jm,a_,!1,Km);if(o===null&&(o_(Jm.set(-.5,.5,0),wf,a,bf,r,s),vT.set(0,1),o=e.ray.intersectTriangle(s_,a_,Jm,!1,Km),o===null))return;const l=e.ray.origin.distanceTo(Km);l<e.near||l>e.far||t.push({distance:l,point:Km.clone(),uv:Rs.getInterpolation(Km,s_,Jm,a_,dO,vT,hO,new Ye),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function o_(n,e,t,i,r,s){Sf.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Zm.x=s*Sf.x-r*Sf.y,Zm.y=r*Sf.x+s*Sf.y):Zm.copy(Sf),n.copy(e),n.x+=Zm.x,n.y+=Zm.y,n.applyMatrix4(h6)}const l_=new Z,fO=new Z;class p6 extends xn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){l_.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(l_);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){l_.setFromMatrixPosition(e.matrixWorld),fO.setFromMatrixPosition(this.matrixWorld);const i=l_.distanceTo(fO)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),i>=a)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const a=i[r];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const pO=new Z,mO=new mn,gO=new mn,Dne=new Z,yO=new wt,c_=new Z,xT=new Cr,vO=new wt,_T=new um;class LR extends Zn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=KC,this.bindMatrix=new wt,this.bindMatrixInverse=new wt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Gr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,c_),this.boundingBox.expandByPoint(c_)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Cr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,c_),this.boundingSphere.expandByPoint(c_)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),xT.copy(this.boundingSphere),xT.applyMatrix4(r),e.ray.intersectsSphere(xT)!==!1&&(vO.copy(r).invert(),_T.copy(e.ray).applyMatrix4(vO),!(this.boundingBox!==null&&_T.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,_T)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new mn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===KC?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===WB?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;mO.fromBufferAttribute(r.attributes.skinIndex,e),gO.fromBufferAttribute(r.attributes.skinWeight,e),pO.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=gO.getComponent(s);if(a!==0){const o=mO.getComponent(s);yO.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),t.addScaledVector(Dne.copy(pO).applyMatrix4(yO),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class oy extends xn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class So extends Fn{constructor(e=null,t=1,i=1,r,s,a,o,l,c=Tr,u=Tr,d,h){super(null,a,o,l,c,u,r,s,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const xO=new wt,Lne=new wt;class Jy{constructor(e=[],t=[]){this.uuid=oa(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new wt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new wt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:Lne;xO.multiplyMatrices(o,t[s]),xO.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Jy(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new So(t,e,e,Fi,yi);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new oy),this.bones.push(a),this.boneInverses.push(new wt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const a=t[r];e.bones.push(a.uuid);const o=i[r];e.boneInverses.push(o.toArray())}return e}}class Bp extends zn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Mf=new wt,_O=new wt,u_=[],bO=new Gr,One=new wt,Qm=new Zn,eg=new Cr;class m6 extends Zn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Bp(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,One)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Gr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Mf),bO.copy(e.boundingBox).applyMatrix4(Mf),this.boundingBox.union(bO)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Cr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Mf),eg.copy(e.boundingSphere).applyMatrix4(Mf),this.boundingSphere.union(eg)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,a=e*s+1;for(let o=0;o<i.length;o++)i[o]=r[a+o]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Qm.geometry=this.geometry,Qm.material=this.material,Qm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),eg.copy(this.boundingSphere),eg.applyMatrix4(i),e.ray.intersectsSphere(eg)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Mf),_O.multiplyMatrices(i,Mf),Qm.matrixWorld=_O,Qm.raycast(e,u_);for(let a=0,o=u_.length;a<o;a++){const l=u_[a];l.instanceId=s,l.object=this,t.push(l)}u_.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Bp(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new So(new Float32Array(r*this.count),r,this.count,qy,yi));const s=this.morphTexture.source.data.data;let a=0;for(let c=0;c<i.length;c++)a+=i[c];const o=this.geometry.morphTargetsRelative?1:1-a,l=r*e;s[l]=o,s.set(i,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const bT=new Z,Fne=new Z,Une=new Xt;class zc{constructor(e=new Z(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=bT.subVectors(i,t).cross(Fne.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(bT),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Une.getNormalMatrix(e),r=this.coplanarPoint(bT).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const dd=new Cr,d_=new Z;class dm{constructor(e=new zc,t=new zc,i=new zc,r=new zc,s=new zc,a=new zc){this.planes=[e,t,i,r,s,a]}set(e,t,i,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=ja){const i=this.planes,r=e.elements,s=r[0],a=r[1],o=r[2],l=r[3],c=r[4],u=r[5],d=r[6],h=r[7],p=r[8],y=r[9],x=r[10],_=r[11],v=r[12],b=r[13],w=r[14],S=r[15];if(i[0].setComponents(l-s,h-c,_-p,S-v).normalize(),i[1].setComponents(l+s,h+c,_+p,S+v).normalize(),i[2].setComponents(l+a,h+u,_+y,S+b).normalize(),i[3].setComponents(l-a,h-u,_-y,S-b).normalize(),i[4].setComponents(l-o,h-d,_-x,S-w).normalize(),t===ja)i[5].setComponents(l+o,h+d,_+x,S+w).normalize();else if(t===sy)i[5].setComponents(o,d,x,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),dd.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),dd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(dd)}intersectsSprite(e){return dd.center.set(0,0,0),dd.radius=.7071067811865476,dd.applyMatrix4(e.matrixWorld),this.intersectsSphere(dd)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(d_.x=r.normal.x>0?e.max.x:e.min.x,d_.y=r.normal.y>0?e.max.y:e.min.y,d_.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(d_)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Uo=new wt,jo=new dm;class SS{constructor(){this.coordinateSystem=ja}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Uo.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),jo.setFromProjectionMatrix(Uo,this.coordinateSystem),jo.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Uo.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),jo.setFromProjectionMatrix(Uo,this.coordinateSystem),jo.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Uo.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),jo.setFromProjectionMatrix(Uo,this.coordinateSystem),jo.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Uo.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),jo.setFromProjectionMatrix(Uo,this.coordinateSystem),jo.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Uo.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),jo.setFromProjectionMatrix(Uo,this.coordinateSystem),jo.containsPoint(e))return!0}return!1}clone(){return new SS}}function wT(n,e){return n-e}function jne(n,e){return n.z-e.z}function zne(n,e){return e.z-n.z}class Bne{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const s=this.pool,a=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const o=s[this.index];a.push(o),this.index++,o.start=e,o.count=t,o.z=i,o.index=r}reset(){this.list.length=0,this.index=0}}const Ms=new wt,Hne=new ct(1,1,1),wO=new dm,Vne=new SS,h_=new Gr,hd=new Cr,tg=new Z,SO=new Z,$ne=new Z,ST=new Bne,Ur=new Zn,f_=[];function Wne(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let a=0;a<i;a++)e.setComponent(s+t,a,n.getComponent(s,a))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function fd(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class g6 extends Zn{constructor(e,t,i=t*2,r){super(new Wt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new So(t,e,e,Fi,yi);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new So(t,e,e,Xy,ol);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new So(t,e,e,Fi,yi);i.colorSpace=qt.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const a=e.getAttribute(s),{array:o,itemSize:l,normalized:c}=a,u=new o.constructor(i*l),d=new zn(u,l,c);t.setAttribute(s,d)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new zn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Gr);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Ms),this.getBoundingBoxAt(s,h_).applyMatrix4(Ms),e.union(h_)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Cr);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Ms),this.getBoundingSphereAt(s,hd).applyMatrix4(Ms),e.union(hd)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(wT),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;Ms.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const a=this._colorsTexture;return a&&(Hne.toArray(a.image.data,r*4),a.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const a=e.getIndex();if(a!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?a.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(wT),l=this._availableGeometryIds.shift(),s[l]=r):(l=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),a=t.getIndex(),o=this._geometryInfo[e];if(r&&a.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=o.vertexStart,c=o.reservedVertexCount;o.vertexCount=t.getAttribute("position").count;for(const u in i.attributes){const d=t.getAttribute(u),h=i.getAttribute(u);Wne(d,h,l);const p=d.itemSize;for(let y=d.count,x=c;y<x;y++){const _=l+y;for(let v=0;v<p;v++)h.setComponent(_,v,0)}h.needsUpdate=!0,h.addUpdateRange(l*p,c*p)}if(r){const u=o.indexStart,d=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let h=0;h<a.count;h++)s.setX(u+h,l+a.getX(h));for(let h=a.count,p=d;h<p;h++)s.setX(u+h,l);s.needsUpdate=!0,s.addUpdateRange(u,o.reservedIndexCount)}return o.start=r?o.indexStart:o.vertexStart,o.count=r?o.indexCount:o.vertexCount,o.boundingBox=null,t.boundingBox!==null&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,t.boundingSphere!==null&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,s=i.length;r<s;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((a,o)=>o).sort((a,o)=>i[a].vertexStart-i[o].vertexStart),s=this.geometry;for(let a=0,o=i.length;a<o;a++){const l=r[a],c=i[l];if(c.active!==!1){if(s.index!==null){if(c.indexStart!==t){const{indexStart:u,vertexStart:d,reservedIndexCount:h}=c,p=s.index,y=p.array,x=e-d;for(let _=u;_<u+h;_++)y[_]=y[_]+x;p.array.copyWithin(t,u,u+h),p.addUpdateRange(t,h),c.indexStart=t}t+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:u,reservedVertexCount:d}=c,h=s.attributes;for(const p in h){const y=h[p],{array:x,itemSize:_}=y;x.copyWithin(e*_,u*_,(u+d)*_),y.addUpdateRange(e*_,d*_)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=s.index?c.indexStart:c.vertexStart,this._nextIndexStart=s.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new Gr,a=i.index,o=i.attributes.position;for(let l=r.start,c=r.start+r.count;l<c;l++){let u=l;a&&(u=a.getX(u)),s.expandByPoint(tg.fromBufferAttribute(o,u))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new Cr;this.getBoundingBoxAt(e,h_),h_.getCenter(s.center);const a=i.index,o=i.attributes.position;let l=0;for(let c=r.start,u=r.start+r.count;c<u;c++){let d=c;a&&(d=a.getX(d)),tg.fromBufferAttribute(o,d),l=Math.max(l,s.center.distanceToSquared(tg))}s.radius=Math.sqrt(l),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(wT);t[t.length-1]===i.length;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);fd(this._multiDrawCounts,r),fd(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const a=this._indirectTexture,o=this._matricesTexture,l=this._colorsTexture;a.dispose(),this._initIndirectTexture(),fd(a.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),fd(o.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),fd(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...i.map(o=>o.vertexStart+o.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Wt,this._initializeGeometry(s));const a=this.geometry;s.index&&fd(s.index.array,a.index.array);for(const o in s.attributes)fd(s.attributes[o].array,a.attributes[o].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,a=this.geometry;Ur.material=this.material,Ur.geometry.index=a.index,Ur.geometry.attributes=a.attributes,Ur.geometry.boundingBox===null&&(Ur.geometry.boundingBox=new Gr),Ur.geometry.boundingSphere===null&&(Ur.geometry.boundingSphere=new Cr);for(let o=0,l=i.length;o<l;o++){if(!i[o].visible||!i[o].active)continue;const c=i[o].geometryIndex,u=r[c];Ur.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(o,Ur.matrixWorld).premultiply(s),this.getBoundingBoxAt(c,Ur.geometry.boundingBox),this.getBoundingSphereAt(c,Ur.geometry.boundingSphere),Ur.raycast(e,f_);for(let d=0,h=f_.length;d<h;d++){const p=f_[d];p.object=this,p.batchId=o,t.push(p)}f_.length=0}Ur.material=null,Ur.geometry.index=null,Ur.geometry.attributes={},Ur.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=r.getIndex(),o=a===null?1:a.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,u=this._multiDrawCounts,d=this._geometryInfo,h=this.perObjectFrustumCulled,p=this._indirectTexture,y=p.image.data,x=i.isArrayCamera?Vne:wO;h&&!i.isArrayCamera&&(Ms.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),wO.setFromProjectionMatrix(Ms,e.coordinateSystem));let _=0;if(this.sortObjects){Ms.copy(this.matrixWorld).invert(),tg.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Ms),SO.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Ms);for(let w=0,S=l.length;w<S;w++)if(l[w].visible&&l[w].active){const A=l[w].geometryIndex;this.getMatrixAt(w,Ms),this.getBoundingSphereAt(A,hd).applyMatrix4(Ms);let P=!1;if(h&&(P=!x.intersectsSphere(hd,i)),!P){const k=d[A],T=$ne.subVectors(hd.center,tg).dot(SO);ST.push(k.start,k.count,T,w)}}const v=ST.list,b=this.customSort;b===null?v.sort(s.transparent?zne:jne):b.call(this,v,i);for(let w=0,S=v.length;w<S;w++){const A=v[w];c[_]=A.start*o,u[_]=A.count,y[_]=A.index,_++}ST.reset()}else for(let v=0,b=l.length;v<b;v++)if(l[v].visible&&l[v].active){const w=l[v].geometryIndex;let S=!1;if(h&&(this.getMatrixAt(v,Ms),this.getBoundingSphereAt(w,hd).applyMatrix4(Ms),S=!x.intersectsSphere(hd,i)),!S){const A=d[w];c[_]=A.start*o,u[_]=A.count,y[_]=v,_++}}p.needsUpdate=!0,this._multiDrawCount=_,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,a){this.onBeforeRender(e,null,r,s,a)}}class ar extends _r{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ct(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const nw=new Z,iw=new Z,MO=new wt,ng=new um,p_=new Cr,MT=new Z,EO=new Z;class nc extends xn{constructor(e=new Wt,t=new ar){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)nw.fromBufferAttribute(t,r-1),iw.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=nw.distanceTo(iw);e.setAttribute("lineDistance",new mt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),p_.copy(i.boundingSphere),p_.applyMatrix4(r),p_.radius+=s,e.ray.intersectsSphere(p_)===!1)return;MO.copy(r).invert(),ng.copy(e.ray).applyMatrix4(MO);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=this.isLineSegments?2:1,u=i.index,h=i.attributes.position;if(u!==null){const p=Math.max(0,a.start),y=Math.min(u.count,a.start+a.count);for(let x=p,_=y-1;x<_;x+=c){const v=u.getX(x),b=u.getX(x+1),w=m_(this,e,ng,l,v,b,x);w&&t.push(w)}if(this.isLineLoop){const x=u.getX(y-1),_=u.getX(p),v=m_(this,e,ng,l,x,_,y-1);v&&t.push(v)}}else{const p=Math.max(0,a.start),y=Math.min(h.count,a.start+a.count);for(let x=p,_=y-1;x<_;x+=c){const v=m_(this,e,ng,l,x,x+1,x);v&&t.push(v)}if(this.isLineLoop){const x=m_(this,e,ng,l,y-1,p,y-1);x&&t.push(x)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function m_(n,e,t,i,r,s,a){const o=n.geometry.attributes.position;if(nw.fromBufferAttribute(o,r),iw.fromBufferAttribute(o,s),t.distanceSqToSegment(nw,iw,MT,EO)>i)return;MT.applyMatrix4(n.matrixWorld);const c=e.ray.origin.distanceTo(MT);if(!(c<e.near||c>e.far))return{distance:c,point:EO.clone().applyMatrix4(n.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:n}}const TO=new Z,CO=new Z;class Ka extends nc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)TO.fromBufferAttribute(t,r),CO.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+TO.distanceTo(CO);e.setAttribute("lineDistance",new mt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class y6 extends nc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Wd extends _r{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ct(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const AO=new wt,eA=new um,g_=new Cr,y_=new Z;class r0 extends xn{constructor(e=new Wt,t=new Wd){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),g_.copy(i.boundingSphere),g_.applyMatrix4(r),g_.radius+=s,e.ray.intersectsSphere(g_)===!1)return;AO.copy(r).invert(),eA.copy(e.ray).applyMatrix4(AO);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=i.index,d=i.attributes.position;if(c!==null){const h=Math.max(0,a.start),p=Math.min(c.count,a.start+a.count);for(let y=h,x=p;y<x;y++){const _=c.getX(y);y_.fromBufferAttribute(d,_),PO(y_,_,l,r,e,t,this)}}else{const h=Math.max(0,a.start),p=Math.min(d.count,a.start+a.count);for(let y=h,x=p;y<x;y++)y_.fromBufferAttribute(d,y),PO(y_,y,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function PO(n,e,t,i,r,s,a){const o=eA.distanceSqToPoint(n);if(o<t){const l=new Z;eA.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class v6 extends Fn{constructor(e,t,i,r,s=On,a=On,o,l,c){super(e,t,i,r,s,a,o,l,c),this.isVideoTexture=!0,this.generateMipmaps=!1;const u=this;function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Gne extends v6{constructor(e,t,i,r,s,a,o,l){super({},e,t,i,r,s,a,o,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class qne extends Fn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Tr,this.minFilter=Tr,this.generateMipmaps=!1,this.needsUpdate=!0}}class MS extends Fn{constructor(e,t,i,r,s,a,o,l,c,u,d,h){super(null,a,o,l,c,u,r,s,d,h),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Xne extends MS{constructor(e,t,i,r,s,a){super(e,t,i,s,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Ai,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Yne extends MS{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,al),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Kne extends Fn{constructor(e,t,i,r,s,a,o,l,c){super(e,t,i,r,s,a,o,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class OR extends Fn{constructor(e,t,i=ol,r,s,a,o=Tr,l=Tr,c,u=Fp,d=1){if(u!==Fp&&u!==Up)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const h={width:e,height:t,depth:d};super(h,r,s,a,o,l,u,i,c),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new eu(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class ES extends Wt{constructor(e=1,t=1,i=4,r=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r,heightSegments:s},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),s=Math.max(1,Math.floor(s));const a=[],o=[],l=[],c=[],u=t/2,d=Math.PI/2*e,h=t,p=2*d+h,y=i*2+s,x=r+1,_=new Z,v=new Z;for(let b=0;b<=y;b++){let w=0,S=0,A=0,P=0;if(b<=i){const E=b/i,R=E*Math.PI/2;S=-u-e*Math.cos(R),A=e*Math.sin(R),P=-e*Math.cos(R),w=E*d}else if(b<=i+s){const E=(b-i)/s;S=-u+E*t,A=e,P=0,w=d+E*h}else{const E=(b-i-s)/i,R=E*Math.PI/2;S=u+e*Math.sin(R),A=e*Math.cos(R),P=e*Math.sin(R),w=d+h+E*d}const k=Math.max(0,Math.min(1,w/p));let T=0;b===0?T=.5/r:b===y&&(T=-.5/r);for(let E=0;E<=r;E++){const R=E/r,I=R*Math.PI*2,D=Math.sin(I),B=Math.cos(I);v.x=-A*B,v.y=S,v.z=A*D,o.push(v.x,v.y,v.z),_.set(-A*B,P,A*D),_.normalize(),l.push(_.x,_.y,_.z),c.push(R+T,k)}if(b>0){const E=(b-1)*x;for(let R=0;R<r;R++){const I=E+R,D=E+R+1,B=b*x+R,G=b*x+R+1;a.push(I,D,B),a.push(D,G,B)}}}this.setIndex(a),this.setAttribute("position",new mt(o,3)),this.setAttribute("normal",new mt(l,3)),this.setAttribute("uv",new mt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ES(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class TS extends Wt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],a=[],o=[],l=[],c=new Z,u=new Ye;a.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let d=0,h=3;d<=t;d++,h+=3){const p=i+d/t*r;c.x=e*Math.cos(p),c.y=e*Math.sin(p),a.push(c.x,c.y,c.z),o.push(0,0,1),u.x=(a[h]/e+1)/2,u.y=(a[h+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new mt(a,3)),this.setAttribute("normal",new mt(o,3)),this.setAttribute("uv",new mt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new TS(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Qy extends Wt{constructor(e=1,t=1,i=1,r=32,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],d=[],h=[],p=[];let y=0;const x=[],_=i/2;let v=0;b(),a===!1&&(e>0&&w(!0),t>0&&w(!1)),this.setIndex(u),this.setAttribute("position",new mt(d,3)),this.setAttribute("normal",new mt(h,3)),this.setAttribute("uv",new mt(p,2));function b(){const S=new Z,A=new Z;let P=0;const k=(t-e)/i;for(let T=0;T<=s;T++){const E=[],R=T/s,I=R*(t-e)+e;for(let D=0;D<=r;D++){const B=D/r,G=B*l+o,Y=Math.sin(G),X=Math.cos(G);A.x=I*Y,A.y=-R*i+_,A.z=I*X,d.push(A.x,A.y,A.z),S.set(Y,k,X).normalize(),h.push(S.x,S.y,S.z),p.push(B,1-R),E.push(y++)}x.push(E)}for(let T=0;T<r;T++)for(let E=0;E<s;E++){const R=x[E][T],I=x[E+1][T],D=x[E+1][T+1],B=x[E][T+1];(e>0||E!==0)&&(u.push(R,I,B),P+=3),(t>0||E!==s-1)&&(u.push(I,D,B),P+=3)}c.addGroup(v,P,0),v+=P}function w(S){const A=y,P=new Ye,k=new Z;let T=0;const E=S===!0?e:t,R=S===!0?1:-1;for(let D=1;D<=r;D++)d.push(0,_*R,0),h.push(0,R,0),p.push(.5,.5),y++;const I=y;for(let D=0;D<=r;D++){const G=D/r*l+o,Y=Math.cos(G),X=Math.sin(G);k.x=E*X,k.y=_*R,k.z=E*Y,d.push(k.x,k.y,k.z),h.push(0,R,0),P.x=Y*.5+.5,P.y=X*.5*R+.5,p.push(P.x,P.y),y++}for(let D=0;D<r;D++){const B=A+D,G=I+D;S===!0?u.push(G,G+1,B):u.push(G+1,G,B),T+=3}c.addGroup(v,T,S===!0?1:2),v+=T}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qy(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ev extends Qy{constructor(e=1,t=1,i=32,r=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,i,r,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new ev(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Vu extends Wt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],a=[];o(r),c(i),u(),this.setAttribute("position",new mt(s,3)),this.setAttribute("normal",new mt(s.slice(),3)),this.setAttribute("uv",new mt(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(b){const w=new Z,S=new Z,A=new Z;for(let P=0;P<t.length;P+=3)p(t[P+0],w),p(t[P+1],S),p(t[P+2],A),l(w,S,A,b)}function l(b,w,S,A){const P=A+1,k=[];for(let T=0;T<=P;T++){k[T]=[];const E=b.clone().lerp(S,T/P),R=w.clone().lerp(S,T/P),I=P-T;for(let D=0;D<=I;D++)D===0&&T===P?k[T][D]=E:k[T][D]=E.clone().lerp(R,D/I)}for(let T=0;T<P;T++)for(let E=0;E<2*(P-T)-1;E++){const R=Math.floor(E/2);E%2===0?(h(k[T][R+1]),h(k[T+1][R]),h(k[T][R])):(h(k[T][R+1]),h(k[T+1][R+1]),h(k[T+1][R]))}}function c(b){const w=new Z;for(let S=0;S<s.length;S+=3)w.x=s[S+0],w.y=s[S+1],w.z=s[S+2],w.normalize().multiplyScalar(b),s[S+0]=w.x,s[S+1]=w.y,s[S+2]=w.z}function u(){const b=new Z;for(let w=0;w<s.length;w+=3){b.x=s[w+0],b.y=s[w+1],b.z=s[w+2];const S=_(b)/2/Math.PI+.5,A=v(b)/Math.PI+.5;a.push(S,1-A)}y(),d()}function d(){for(let b=0;b<a.length;b+=6){const w=a[b+0],S=a[b+2],A=a[b+4],P=Math.max(w,S,A),k=Math.min(w,S,A);P>.9&&k<.1&&(w<.2&&(a[b+0]+=1),S<.2&&(a[b+2]+=1),A<.2&&(a[b+4]+=1))}}function h(b){s.push(b.x,b.y,b.z)}function p(b,w){const S=b*3;w.x=e[S+0],w.y=e[S+1],w.z=e[S+2]}function y(){const b=new Z,w=new Z,S=new Z,A=new Z,P=new Ye,k=new Ye,T=new Ye;for(let E=0,R=0;E<s.length;E+=9,R+=6){b.set(s[E+0],s[E+1],s[E+2]),w.set(s[E+3],s[E+4],s[E+5]),S.set(s[E+6],s[E+7],s[E+8]),P.set(a[R+0],a[R+1]),k.set(a[R+2],a[R+3]),T.set(a[R+4],a[R+5]),A.copy(b).add(w).add(S).divideScalar(3);const I=_(A);x(P,R+0,b,I),x(k,R+2,w,I),x(T,R+4,S,I)}}function x(b,w,S,A){A<0&&b.x===1&&(a[w]=b.x-1),S.x===0&&S.z===0&&(a[w]=A/2/Math.PI+.5)}function _(b){return Math.atan2(b.z,-b.x)}function v(b){return Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vu(e.vertices,e.indices,e.radius,e.details)}}class CS extends Vu{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new CS(e.radius,e.detail)}}const v_=new Z,x_=new Z,ET=new Z,__=new Rs;class x6 extends Wt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(ih*t),a=e.getIndex(),o=e.getAttribute("position"),l=a?a.count:o.count,c=[0,0,0],u=["a","b","c"],d=new Array(3),h={},p=[];for(let y=0;y<l;y+=3){a?(c[0]=a.getX(y),c[1]=a.getX(y+1),c[2]=a.getX(y+2)):(c[0]=y,c[1]=y+1,c[2]=y+2);const{a:x,b:_,c:v}=__;if(x.fromBufferAttribute(o,c[0]),_.fromBufferAttribute(o,c[1]),v.fromBufferAttribute(o,c[2]),__.getNormal(ET),d[0]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,d[1]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,d[2]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let b=0;b<3;b++){const w=(b+1)%3,S=d[b],A=d[w],P=__[u[b]],k=__[u[w]],T=`${S}_${A}`,E=`${A}_${S}`;E in h&&h[E]?(ET.dot(h[E].normal)<=s&&(p.push(P.x,P.y,P.z),p.push(k.x,k.y,k.z)),h[E]=null):T in h||(h[T]={index0:c[b],index1:c[w],normal:ET.clone()})}}for(const y in h)if(h[y]){const{index0:x,index1:_}=h[y];v_.fromBufferAttribute(o,x),x_.fromBufferAttribute(o,_),p.push(v_.x,v_.y,v_.z),p.push(x_.x,x_.y,x_.z)}this.setAttribute("position",new mt(p,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Ja{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const s=i.length;let a;t?a=t:a=e*i[s-1];let o=0,l=s-1,c;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),c=i[r]-a,c<0)o=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===a)return r/(s-1);const u=i[r],h=i[r+1]-u,p=(a-u)/h;return(r+p)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),o=this.getPoint(s),l=t||(a.isVector2?new Ye:new Z);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new Z,r=[],s=[],a=[],o=new Z,l=new wt;for(let p=0;p<=e;p++){const y=p/e;r[p]=this.getTangentAt(y,new Z)}s[0]=new Z,a[0]=new Z;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),d=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),h<=c&&i.set(0,0,1),o.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],o),a[0].crossVectors(r[0],s[0]);for(let p=1;p<=e;p++){if(s[p]=s[p-1].clone(),a[p]=a[p-1].clone(),o.crossVectors(r[p-1],r[p]),o.length()>Number.EPSILON){o.normalize();const y=Math.acos(Yt(r[p-1].dot(r[p]),-1,1));s[p].applyMatrix4(l.makeRotationAxis(o,y))}a[p].crossVectors(r[p],s[p])}if(t===!0){let p=Math.acos(Yt(s[0].dot(s[e]),-1,1));p/=e,r[0].dot(o.crossVectors(s[0],s[e]))>0&&(p=-p);for(let y=1;y<=e;y++)s[y].applyMatrix4(l.makeRotationAxis(r[y],p*y)),a[y].crossVectors(r[y],s[y])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class AS extends Ja{constructor(e=0,t=0,i=1,r=1,s=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,t=new Ye){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const o=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,p=c-this.aY;l=h*u-p*d+this.aX,c=h*d+p*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class _6 extends AS{constructor(e,t,i,r,s,a){super(e,t,i,i,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function FR(){let n=0,e=0,t=0,i=0;function r(s,a,o,l){n=s,e=o,t=-3*s+3*a-2*o-l,i=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,c){r(a,o,c*(o-s),c*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,c,u,d){let h=(a-s)/c-(o-s)/(c+u)+(o-a)/u,p=(o-a)/u-(l-a)/(u+d)+(l-o)/d;h*=u,p*=u,r(a,o,h,p)},calc:function(s){const a=s*s,o=a*s;return n+e*s+t*a+i*o}}}const b_=new Z,TT=new FR,CT=new FR,AT=new FR;class b6 extends Ja{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new Z){const i=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:l===0&&o===s-1&&(o=s-2,l=1);let c,u;this.closed||o>0?c=r[(o-1)%s]:(b_.subVectors(r[0],r[1]).add(r[0]),c=b_);const d=r[o%s],h=r[(o+1)%s];if(this.closed||o+2<s?u=r[(o+2)%s]:(b_.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=b_),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let y=Math.pow(c.distanceToSquared(d),p),x=Math.pow(d.distanceToSquared(h),p),_=Math.pow(h.distanceToSquared(u),p);x<1e-4&&(x=1),y<1e-4&&(y=x),_<1e-4&&(_=x),TT.initNonuniformCatmullRom(c.x,d.x,h.x,u.x,y,x,_),CT.initNonuniformCatmullRom(c.y,d.y,h.y,u.y,y,x,_),AT.initNonuniformCatmullRom(c.z,d.z,h.z,u.z,y,x,_)}else this.curveType==="catmullrom"&&(TT.initCatmullRom(c.x,d.x,h.x,u.x,this.tension),CT.initCatmullRom(c.y,d.y,h.y,u.y,this.tension),AT.initCatmullRom(c.z,d.z,h.z,u.z,this.tension));return i.set(TT.calc(l),CT.calc(l),AT.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Z().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function RO(n,e,t,i,r){const s=(i-e)*.5,a=(r-t)*.5,o=n*n,l=n*o;return(2*t-2*i+s+a)*l+(-3*t+3*i-2*s-a)*o+s*n+t}function Zne(n,e){const t=1-n;return t*t*e}function Jne(n,e){return 2*(1-n)*n*e}function Qne(n,e){return n*n*e}function s0(n,e,t,i){return Zne(n,e)+Jne(n,t)+Qne(n,i)}function eie(n,e){const t=1-n;return t*t*t*e}function tie(n,e){const t=1-n;return 3*t*t*n*e}function nie(n,e){return 3*(1-n)*n*n*e}function iie(n,e){return n*n*n*e}function a0(n,e,t,i,r){return eie(n,e)+tie(n,t)+nie(n,i)+iie(n,r)}class UR extends Ja{constructor(e=new Ye,t=new Ye,i=new Ye,r=new Ye){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Ye){const i=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(a0(e,r.x,s.x,a.x,o.x),a0(e,r.y,s.y,a.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class w6 extends Ja{constructor(e=new Z,t=new Z,i=new Z,r=new Z){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Z){const i=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(a0(e,r.x,s.x,a.x,o.x),a0(e,r.y,s.y,a.y,o.y),a0(e,r.z,s.z,a.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class jR extends Ja{constructor(e=new Ye,t=new Ye){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ye){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ye){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class S6 extends Ja{constructor(e=new Z,t=new Z){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Z){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Z){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class zR extends Ja{constructor(e=new Ye,t=new Ye,i=new Ye){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ye){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(s0(e,r.x,s.x,a.x),s0(e,r.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class BR extends Ja{constructor(e=new Z,t=new Z,i=new Z){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Z){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(s0(e,r.x,s.x,a.x),s0(e,r.y,s.y,a.y),s0(e,r.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class HR extends Ja{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ye){const i=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),o=s-a,l=r[a===0?a:a-1],c=r[a],u=r[a>r.length-2?r.length-1:a+1],d=r[a>r.length-3?r.length-1:a+2];return i.set(RO(o,l.x,c.x,u.x,d.x),RO(o,l.y,c.y,u.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Ye().fromArray(r))}return this}}var rw=Object.freeze({__proto__:null,ArcCurve:_6,CatmullRomCurve3:b6,CubicBezierCurve:UR,CubicBezierCurve3:w6,EllipseCurve:AS,LineCurve:jR,LineCurve3:S6,QuadraticBezierCurve:zR,QuadraticBezierCurve3:BR,SplineCurve:HR});class M6 extends Ja{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new rw[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const a=r[s]-i,o=this.curves[s],l=o.getLength(),c=l===0?0:1-a/l;return o.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(o);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new rw[r.type]().fromJSON(r))}return this}}class sw extends M6{constructor(e){super(),this.type="Path",this.currentPoint=new Ye,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new jR(this.currentPoint.clone(),new Ye(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new zR(this.currentPoint.clone(),new Ye(e,t),new Ye(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,a){const o=new UR(this.currentPoint.clone(),new Ye(e,t),new Ye(i,r),new Ye(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new HR(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,a){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,i,r,s,a),this}absarc(e,t,i,r,s,a){return this.absellipse(e,t,i,i,r,s,a),this}ellipse(e,t,i,r,s,a,o,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,i,r,s,a,o,l),this}absellipse(e,t,i,r,s,a,o,l){const c=new AS(e,t,i,r,s,a,o,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class sh extends sw{constructor(e){super(e),this.uuid=oa(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new sw().fromJSON(r))}return this}}function rie(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=E6(n,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c;if(i&&(s=cie(n,e,s,t)),n.length>80*t){o=1/0,l=1/0;let u=-1/0,d=-1/0;for(let h=t;h<r;h+=t){const p=n[h],y=n[h+1];p<o&&(o=p),y<l&&(l=y),p>u&&(u=p),y>d&&(d=y)}c=Math.max(u-o,d-l),c=c!==0?32767/c:0}return ly(s,a,t,o,l,c,0),a}function E6(n,e,t,i,r){let s;if(r===_ie(n,e,t,i)>0)for(let a=e;a<t;a+=i)s=kO(a/i|0,n[a],n[a+1],s);else for(let a=t-i;a>=e;a-=i)s=kO(a/i|0,n[a],n[a+1],s);return s&&Hp(s,s.next)&&(uy(s),s=s.next),s}function Eh(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Hp(t,t.next)||mi(t.prev,t,t.next)===0)){if(uy(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function ly(n,e,t,i,r,s,a){if(!n)return;!a&&s&&pie(n,i,r,s);let o=n;for(;n.prev!==n.next;){const l=n.prev,c=n.next;if(s?aie(n,i,r,s):sie(n)){e.push(l.i,n.i,c.i),uy(n),n=c.next,o=c.next;continue}if(n=c,n===o){a?a===1?(n=oie(Eh(n),e),ly(n,e,t,i,r,s,2)):a===2&&lie(n,e,t,i,r,s):ly(Eh(n),e,t,i,r,s,1);break}}}function sie(n){const e=n.prev,t=n,i=n.next;if(mi(e,t,i)>=0)return!1;const r=e.x,s=t.x,a=i.x,o=e.y,l=t.y,c=i.y,u=Math.min(r,s,a),d=Math.min(o,l,c),h=Math.max(r,s,a),p=Math.max(o,l,c);let y=i.next;for(;y!==e;){if(y.x>=u&&y.x<=h&&y.y>=d&&y.y<=p&&Mg(r,o,s,l,a,c,y.x,y.y)&&mi(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function aie(n,e,t,i){const r=n.prev,s=n,a=n.next;if(mi(r,s,a)>=0)return!1;const o=r.x,l=s.x,c=a.x,u=r.y,d=s.y,h=a.y,p=Math.min(o,l,c),y=Math.min(u,d,h),x=Math.max(o,l,c),_=Math.max(u,d,h),v=tA(p,y,e,t,i),b=tA(x,_,e,t,i);let w=n.prevZ,S=n.nextZ;for(;w&&w.z>=v&&S&&S.z<=b;){if(w.x>=p&&w.x<=x&&w.y>=y&&w.y<=_&&w!==r&&w!==a&&Mg(o,u,l,d,c,h,w.x,w.y)&&mi(w.prev,w,w.next)>=0||(w=w.prevZ,S.x>=p&&S.x<=x&&S.y>=y&&S.y<=_&&S!==r&&S!==a&&Mg(o,u,l,d,c,h,S.x,S.y)&&mi(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;w&&w.z>=v;){if(w.x>=p&&w.x<=x&&w.y>=y&&w.y<=_&&w!==r&&w!==a&&Mg(o,u,l,d,c,h,w.x,w.y)&&mi(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;S&&S.z<=b;){if(S.x>=p&&S.x<=x&&S.y>=y&&S.y<=_&&S!==r&&S!==a&&Mg(o,u,l,d,c,h,S.x,S.y)&&mi(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function oie(n,e){let t=n;do{const i=t.prev,r=t.next.next;!Hp(i,r)&&C6(i,t,t.next,r)&&cy(i,r)&&cy(r,i)&&(e.push(i.i,t.i,r.i),uy(t),uy(t.next),t=n=r),t=t.next}while(t!==n);return Eh(t)}function lie(n,e,t,i,r,s){let a=n;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&yie(a,o)){let l=A6(a,o);a=Eh(a,a.next),l=Eh(l,l.next),ly(a,e,t,i,r,s,0),ly(l,e,t,i,r,s,0);return}o=o.next}a=a.next}while(a!==n)}function cie(n,e,t,i){const r=[];for(let s=0,a=e.length;s<a;s++){const o=e[s]*i,l=s<a-1?e[s+1]*i:n.length,c=E6(n,o,l,i,!1);c===c.next&&(c.steiner=!0),r.push(gie(c))}r.sort(uie);for(let s=0;s<r.length;s++)t=die(r[s],t);return t}function uie(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function die(n,e){const t=hie(n,e);if(!t)return e;const i=A6(t,n);return Eh(i,i.next),Eh(t,t.next)}function hie(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,a;if(Hp(n,t))return t;do{if(Hp(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const d=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=i&&d>s&&(s=d,a=t.x<t.next.x?t:t.next,d===i))return a}t=t.next}while(t!==e);if(!a)return null;const o=a,l=a.x,c=a.y;let u=1/0;t=a;do{if(i>=t.x&&t.x>=l&&i!==t.x&&T6(r<c?i:s,r,l,c,r<c?s:i,r,t.x,t.y)){const d=Math.abs(r-t.y)/(i-t.x);cy(t,n)&&(d<u||d===u&&(t.x>a.x||t.x===a.x&&fie(a,t)))&&(a=t,u=d)}t=t.next}while(t!==o);return a}function fie(n,e){return mi(n.prev,n,e.prev)<0&&mi(e.next,n,n.next)<0}function pie(n,e,t,i){let r=n;do r.z===0&&(r.z=tA(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,mie(r)}function mie(n){let e,t=1;do{let i=n,r;n=null;let s=null;for(e=0;i;){e++;let a=i,o=0;for(let c=0;c<t&&(o++,a=a.nextZ,!!a);c++);let l=t;for(;o>0||l>0&&a;)o!==0&&(l===0||!a||i.z<=a.z)?(r=i,i=i.nextZ,o--):(r=a,a=a.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;i=a}s.nextZ=null,t*=2}while(e>1);return n}function tA(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function gie(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function T6(n,e,t,i,r,s,a,o){return(r-a)*(e-o)>=(n-a)*(s-o)&&(n-a)*(i-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(r-a)*(i-o)}function Mg(n,e,t,i,r,s,a,o){return!(n===a&&e===o)&&T6(n,e,t,i,r,s,a,o)}function yie(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!vie(n,e)&&(cy(n,e)&&cy(e,n)&&xie(n,e)&&(mi(n.prev,n,e.prev)||mi(n,e.prev,e))||Hp(n,e)&&mi(n.prev,n,n.next)>0&&mi(e.prev,e,e.next)>0)}function mi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Hp(n,e){return n.x===e.x&&n.y===e.y}function C6(n,e,t,i){const r=S_(mi(n,e,t)),s=S_(mi(n,e,i)),a=S_(mi(t,i,n)),o=S_(mi(t,i,e));return!!(r!==s&&a!==o||r===0&&w_(n,t,e)||s===0&&w_(n,i,e)||a===0&&w_(t,n,i)||o===0&&w_(t,e,i))}function w_(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function S_(n){return n>0?1:n<0?-1:0}function vie(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&C6(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function cy(n,e){return mi(n.prev,n,n.next)<0?mi(n,e,n.next)>=0&&mi(n,n.prev,e)>=0:mi(n,e,n.prev)<0||mi(n,n.next,e)<0}function xie(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function A6(n,e){const t=nA(n.i,n.x,n.y),i=nA(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function kO(n,e,t,i){const r=nA(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function uy(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function nA(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function _ie(n,e,t,i){let r=0;for(let s=e,a=t-i;s<t;s+=i)r+=(n[a]-n[s])*(n[s+1]+n[a+1]),a=s;return r}class bie{static triangulate(e,t,i=2){return rie(e,t,i)}}class za{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return za.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];NO(e),IO(i,e);let a=e.length;t.forEach(NO);for(let l=0;l<t.length;l++)r.push(a),a+=t[l].length,IO(i,t[l]);const o=bie.triangulate(i,r);for(let l=0;l<o.length;l+=3)s.push(o.slice(l,l+3));return s}}function NO(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function IO(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class PS extends Wt{constructor(e=new sh([new Ye(.5,.5),new Ye(-.5,.5),new Ye(-.5,-.5),new Ye(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let o=0,l=e.length;o<l;o++){const c=e[o];a(c)}this.setAttribute("position",new mt(r,3)),this.setAttribute("uv",new mt(s,2)),this.computeVertexNormals();function a(o){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,p=t.bevelThickness!==void 0?t.bevelThickness:.2,y=t.bevelSize!==void 0?t.bevelSize:p-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const v=t.extrudePath,b=t.UVGenerator!==void 0?t.UVGenerator:wie;let w,S=!1,A,P,k,T;v&&(w=v.getSpacedPoints(u),S=!0,h=!1,A=v.computeFrenetFrames(u,!1),P=new Z,k=new Z,T=new Z),h||(_=0,p=0,y=0,x=0);const E=o.extractPoints(c);let R=E.shape;const I=E.holes;if(!za.isClockWise(R)){R=R.reverse();for(let $=0,Se=I.length;$<Se;$++){const de=I[$];za.isClockWise(de)&&(I[$]=de.reverse())}}function B($){const de=10000000000000001e-36;let J=$[0];for(let ue=1;ue<=$.length;ue++){const je=ue%$.length,Le=$[je],Xe=Le.x-J.x,gt=Le.y-J.y,V=Xe*Xe+gt*gt,O=Math.max(Math.abs(Le.x),Math.abs(Le.y),Math.abs(J.x),Math.abs(J.y)),ee=de*O*O;if(V<=ee){$.splice(je,1),ue--;continue}J=Le}}B(R),I.forEach(B);const G=I.length,Y=R;for(let $=0;$<G;$++){const Se=I[$];R=R.concat(Se)}function X($,Se,de){return Se||console.error("THREE.ExtrudeGeometry: vec does not exist"),$.clone().addScaledVector(Se,de)}const Q=R.length;function L($,Se,de){let J,ue,je;const Le=$.x-Se.x,Xe=$.y-Se.y,gt=de.x-$.x,V=de.y-$.y,O=Le*Le+Xe*Xe,ee=Le*V-Xe*gt;if(Math.abs(ee)>Number.EPSILON){const le=Math.sqrt(O),ge=Math.sqrt(gt*gt+V*V),ye=Se.x-Xe/le,Oe=Se.y+Le/le,Te=de.x-V/ge,ze=de.y+gt/ge,Je=((Te-ye)*V-(ze-Oe)*gt)/(Le*V-Xe*gt);J=ye+Le*Je-$.x,ue=Oe+Xe*Je-$.y;const He=J*J+ue*ue;if(He<=2)return new Ye(J,ue);je=Math.sqrt(He/2)}else{let le=!1;Le>Number.EPSILON?gt>Number.EPSILON&&(le=!0):Le<-Number.EPSILON?gt<-Number.EPSILON&&(le=!0):Math.sign(Xe)===Math.sign(V)&&(le=!0),le?(J=-Xe,ue=Le,je=Math.sqrt(O)):(J=Le,ue=Xe,je=Math.sqrt(O/2))}return new Ye(J/je,ue/je)}const W=[];for(let $=0,Se=Y.length,de=Se-1,J=$+1;$<Se;$++,de++,J++)de===Se&&(de=0),J===Se&&(J=0),W[$]=L(Y[$],Y[de],Y[J]);const j=[];let te,ae=W.concat();for(let $=0,Se=G;$<Se;$++){const de=I[$];te=[];for(let J=0,ue=de.length,je=ue-1,Le=J+1;J<ue;J++,je++,Le++)je===ue&&(je=0),Le===ue&&(Le=0),te[J]=L(de[J],de[je],de[Le]);j.push(te),ae=ae.concat(te)}let me;if(_===0)me=za.triangulateShape(Y,I);else{const $=[],Se=[];for(let de=0;de<_;de++){const J=de/_,ue=p*Math.cos(J*Math.PI/2),je=y*Math.sin(J*Math.PI/2)+x;for(let Le=0,Xe=Y.length;Le<Xe;Le++){const gt=X(Y[Le],W[Le],je);Ee(gt.x,gt.y,-ue),J===0&&$.push(gt)}for(let Le=0,Xe=G;Le<Xe;Le++){const gt=I[Le];te=j[Le];const V=[];for(let O=0,ee=gt.length;O<ee;O++){const le=X(gt[O],te[O],je);Ee(le.x,le.y,-ue),J===0&&V.push(le)}J===0&&Se.push(V)}}me=za.triangulateShape($,Se)}const K=me.length,re=y+x;for(let $=0;$<Q;$++){const Se=h?X(R[$],ae[$],re):R[$];S?(k.copy(A.normals[0]).multiplyScalar(Se.x),P.copy(A.binormals[0]).multiplyScalar(Se.y),T.copy(w[0]).add(k).add(P),Ee(T.x,T.y,T.z)):Ee(Se.x,Se.y,0)}for(let $=1;$<=u;$++)for(let Se=0;Se<Q;Se++){const de=h?X(R[Se],ae[Se],re):R[Se];S?(k.copy(A.normals[$]).multiplyScalar(de.x),P.copy(A.binormals[$]).multiplyScalar(de.y),T.copy(w[$]).add(k).add(P),Ee(T.x,T.y,T.z)):Ee(de.x,de.y,d/u*$)}for(let $=_-1;$>=0;$--){const Se=$/_,de=p*Math.cos(Se*Math.PI/2),J=y*Math.sin(Se*Math.PI/2)+x;for(let ue=0,je=Y.length;ue<je;ue++){const Le=X(Y[ue],W[ue],J);Ee(Le.x,Le.y,d+de)}for(let ue=0,je=I.length;ue<je;ue++){const Le=I[ue];te=j[ue];for(let Xe=0,gt=Le.length;Xe<gt;Xe++){const V=X(Le[Xe],te[Xe],J);S?Ee(V.x,V.y+w[u-1].y,w[u-1].x+de):Ee(V.x,V.y,d+de)}}}oe(),_e();function oe(){const $=r.length/3;if(h){let Se=0,de=Q*Se;for(let J=0;J<K;J++){const ue=me[J];Pe(ue[2]+de,ue[1]+de,ue[0]+de)}Se=u+_*2,de=Q*Se;for(let J=0;J<K;J++){const ue=me[J];Pe(ue[0]+de,ue[1]+de,ue[2]+de)}}else{for(let Se=0;Se<K;Se++){const de=me[Se];Pe(de[2],de[1],de[0])}for(let Se=0;Se<K;Se++){const de=me[Se];Pe(de[0]+Q*u,de[1]+Q*u,de[2]+Q*u)}}i.addGroup($,r.length/3-$,0)}function _e(){const $=r.length/3;let Se=0;Ce(Y,Se),Se+=Y.length;for(let de=0,J=I.length;de<J;de++){const ue=I[de];Ce(ue,Se),Se+=ue.length}i.addGroup($,r.length/3-$,1)}function Ce($,Se){let de=$.length;for(;--de>=0;){const J=de;let ue=de-1;ue<0&&(ue=$.length-1);for(let je=0,Le=u+_*2;je<Le;je++){const Xe=Q*je,gt=Q*(je+1),V=Se+J+Xe,O=Se+ue+Xe,ee=Se+ue+gt,le=Se+J+gt;De(V,O,ee,le)}}}function Ee($,Se,de){l.push($),l.push(Se),l.push(de)}function Pe($,Se,de){xe($),xe(Se),xe(de);const J=r.length/3,ue=b.generateTopUV(i,r,J-3,J-2,J-1);we(ue[0]),we(ue[1]),we(ue[2])}function De($,Se,de,J){xe($),xe(Se),xe(J),xe(Se),xe(de),xe(J);const ue=r.length/3,je=b.generateSideWallUV(i,r,ue-6,ue-3,ue-2,ue-1);we(je[0]),we(je[1]),we(je[3]),we(je[1]),we(je[2]),we(je[3])}function xe($){r.push(l[$*3+0]),r.push(l[$*3+1]),r.push(l[$*3+2])}function we($){s.push($.x),s.push($.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return Sie(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=t[e.shapes[s]];i.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new rw[r.type]().fromJSON(r)),new PS(i,e.options)}}const wie={generateTopUV:function(n,e,t,i,r){const s=e[t*3],a=e[t*3+1],o=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new Ye(s,a),new Ye(o,l),new Ye(c,u)]},generateSideWallUV:function(n,e,t,i,r,s){const a=e[t*3],o=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],d=e[i*3+2],h=e[r*3],p=e[r*3+1],y=e[r*3+2],x=e[s*3],_=e[s*3+1],v=e[s*3+2];return Math.abs(o-u)<Math.abs(a-c)?[new Ye(a,1-l),new Ye(c,1-d),new Ye(h,1-y),new Ye(x,1-v)]:[new Ye(o,1-l),new Ye(u,1-d),new Ye(p,1-y),new Ye(_,1-v)]}};function Sie(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class tv extends Vu{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new tv(e.radius,e.detail)}}class RS extends Wt{constructor(e=[new Ye(0,-.5),new Ye(.5,0),new Ye(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Yt(r,0,Math.PI*2);const s=[],a=[],o=[],l=[],c=[],u=1/t,d=new Z,h=new Ye,p=new Z,y=new Z,x=new Z;let _=0,v=0;for(let b=0;b<=e.length-1;b++)switch(b){case 0:_=e[b+1].x-e[b].x,v=e[b+1].y-e[b].y,p.x=v*1,p.y=-_,p.z=v*0,x.copy(p),p.normalize(),l.push(p.x,p.y,p.z);break;case e.length-1:l.push(x.x,x.y,x.z);break;default:_=e[b+1].x-e[b].x,v=e[b+1].y-e[b].y,p.x=v*1,p.y=-_,p.z=v*0,y.copy(p),p.x+=x.x,p.y+=x.y,p.z+=x.z,p.normalize(),l.push(p.x,p.y,p.z),x.copy(y)}for(let b=0;b<=t;b++){const w=i+b*u*r,S=Math.sin(w),A=Math.cos(w);for(let P=0;P<=e.length-1;P++){d.x=e[P].x*S,d.y=e[P].y,d.z=e[P].x*A,a.push(d.x,d.y,d.z),h.x=b/t,h.y=P/(e.length-1),o.push(h.x,h.y);const k=l[3*P+0]*S,T=l[3*P+1],E=l[3*P+0]*A;c.push(k,T,E)}}for(let b=0;b<t;b++)for(let w=0;w<e.length-1;w++){const S=w+b*e.length,A=S,P=S+e.length,k=S+e.length+1,T=S+1;s.push(A,P,T),s.push(k,T,P)}this.setIndex(s),this.setAttribute("position",new mt(a,3)),this.setAttribute("uv",new mt(o,2)),this.setAttribute("normal",new mt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new RS(e.points,e.segments,e.phiStart,e.phiLength)}}class nv extends Vu{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new nv(e.radius,e.detail)}}class $u extends Wt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,a=t/2,o=Math.floor(i),l=Math.floor(r),c=o+1,u=l+1,d=e/o,h=t/l,p=[],y=[],x=[],_=[];for(let v=0;v<u;v++){const b=v*h-a;for(let w=0;w<c;w++){const S=w*d-s;y.push(S,-b,0),x.push(0,0,1),_.push(w/o),_.push(1-v/l)}}for(let v=0;v<l;v++)for(let b=0;b<o;b++){const w=b+c*v,S=b+c*(v+1),A=b+1+c*(v+1),P=b+1+c*v;p.push(w,S,P),p.push(S,A,P)}this.setIndex(p),this.setAttribute("position",new mt(y,3)),this.setAttribute("normal",new mt(x,3)),this.setAttribute("uv",new mt(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $u(e.width,e.height,e.widthSegments,e.heightSegments)}}class kS extends Wt{constructor(e=.5,t=1,i=32,r=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:a},i=Math.max(3,i),r=Math.max(1,r);const o=[],l=[],c=[],u=[];let d=e;const h=(t-e)/r,p=new Z,y=new Ye;for(let x=0;x<=r;x++){for(let _=0;_<=i;_++){const v=s+_/i*a;p.x=d*Math.cos(v),p.y=d*Math.sin(v),l.push(p.x,p.y,p.z),c.push(0,0,1),y.x=(p.x/t+1)/2,y.y=(p.y/t+1)/2,u.push(y.x,y.y)}d+=h}for(let x=0;x<r;x++){const _=x*(i+1);for(let v=0;v<i;v++){const b=v+_,w=b,S=b+i+1,A=b+i+2,P=b+1;o.push(w,S,P),o.push(S,A,P)}}this.setIndex(o),this.setAttribute("position",new mt(l,3)),this.setAttribute("normal",new mt(c,3)),this.setAttribute("uv",new mt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kS(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class NS extends Wt{constructor(e=new sh([new Ye(0,.5),new Ye(-.5,-.5),new Ye(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],a=[];let o=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(o,l,u),o+=l,l=0;this.setIndex(i),this.setAttribute("position",new mt(r,3)),this.setAttribute("normal",new mt(s,3)),this.setAttribute("uv",new mt(a,2));function c(u){const d=r.length/3,h=u.extractPoints(t);let p=h.shape;const y=h.holes;za.isClockWise(p)===!1&&(p=p.reverse());for(let _=0,v=y.length;_<v;_++){const b=y[_];za.isClockWise(b)===!0&&(y[_]=b.reverse())}const x=za.triangulateShape(p,y);for(let _=0,v=y.length;_<v;_++){const b=y[_];p=p.concat(b)}for(let _=0,v=p.length;_<v;_++){const b=p[_];r.push(b.x,b.y,0),s.push(0,0,1),a.push(b.x,b.y)}for(let _=0,v=x.length;_<v;_++){const b=x[_],w=b[0]+d,S=b[1]+d,A=b[2]+d;i.push(w,S,A),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Mie(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const a=t[e.shapes[r]];i.push(a)}return new NS(i,e.curveSegments)}}function Mie(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class iv extends Wt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(a+o,Math.PI);let c=0;const u=[],d=new Z,h=new Z,p=[],y=[],x=[],_=[];for(let v=0;v<=i;v++){const b=[],w=v/i;let S=0;v===0&&a===0?S=.5/t:v===i&&l===Math.PI&&(S=-.5/t);for(let A=0;A<=t;A++){const P=A/t;d.x=-e*Math.cos(r+P*s)*Math.sin(a+w*o),d.y=e*Math.cos(a+w*o),d.z=e*Math.sin(r+P*s)*Math.sin(a+w*o),y.push(d.x,d.y,d.z),h.copy(d).normalize(),x.push(h.x,h.y,h.z),_.push(P+S,1-w),b.push(c++)}u.push(b)}for(let v=0;v<i;v++)for(let b=0;b<t;b++){const w=u[v][b+1],S=u[v][b],A=u[v+1][b],P=u[v+1][b+1];(v!==0||a>0)&&p.push(w,S,P),(v!==i-1||l<Math.PI)&&p.push(S,A,P)}this.setIndex(p),this.setAttribute("position",new mt(y,3)),this.setAttribute("normal",new mt(x,3)),this.setAttribute("uv",new mt(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new iv(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class IS extends Vu{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new IS(e.radius,e.detail)}}class DS extends Wt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const a=[],o=[],l=[],c=[],u=new Z,d=new Z,h=new Z;for(let p=0;p<=i;p++)for(let y=0;y<=r;y++){const x=y/r*s,_=p/i*Math.PI*2;d.x=(e+t*Math.cos(_))*Math.cos(x),d.y=(e+t*Math.cos(_))*Math.sin(x),d.z=t*Math.sin(_),o.push(d.x,d.y,d.z),u.x=e*Math.cos(x),u.y=e*Math.sin(x),h.subVectors(d,u).normalize(),l.push(h.x,h.y,h.z),c.push(y/r),c.push(p/i)}for(let p=1;p<=i;p++)for(let y=1;y<=r;y++){const x=(r+1)*p+y-1,_=(r+1)*(p-1)+y-1,v=(r+1)*(p-1)+y,b=(r+1)*p+y;a.push(x,_,b),a.push(_,v,b)}this.setIndex(a),this.setAttribute("position",new mt(o,3)),this.setAttribute("normal",new mt(l,3)),this.setAttribute("uv",new mt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new DS(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class LS extends Wt{constructor(e=1,t=.4,i=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:a},i=Math.floor(i),r=Math.floor(r);const o=[],l=[],c=[],u=[],d=new Z,h=new Z,p=new Z,y=new Z,x=new Z,_=new Z,v=new Z;for(let w=0;w<=i;++w){const S=w/i*s*Math.PI*2;b(S,s,a,e,p),b(S+.01,s,a,e,y),_.subVectors(y,p),v.addVectors(y,p),x.crossVectors(_,v),v.crossVectors(x,_),x.normalize(),v.normalize();for(let A=0;A<=r;++A){const P=A/r*Math.PI*2,k=-t*Math.cos(P),T=t*Math.sin(P);d.x=p.x+(k*v.x+T*x.x),d.y=p.y+(k*v.y+T*x.y),d.z=p.z+(k*v.z+T*x.z),l.push(d.x,d.y,d.z),h.subVectors(d,p).normalize(),c.push(h.x,h.y,h.z),u.push(w/i),u.push(A/r)}}for(let w=1;w<=i;w++)for(let S=1;S<=r;S++){const A=(r+1)*(w-1)+(S-1),P=(r+1)*w+(S-1),k=(r+1)*w+S,T=(r+1)*(w-1)+S;o.push(A,P,T),o.push(P,k,T)}this.setIndex(o),this.setAttribute("position",new mt(l,3)),this.setAttribute("normal",new mt(c,3)),this.setAttribute("uv",new mt(u,2));function b(w,S,A,P,k){const T=Math.cos(w),E=Math.sin(w),R=A/S*w,I=Math.cos(R);k.x=P*(2+I)*.5*T,k.y=P*(2+I)*E*.5,k.z=P*Math.sin(R)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new LS(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class OS extends Wt{constructor(e=new BR(new Z(-1,-1,0),new Z(-1,1,0),new Z(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new Z,l=new Z,c=new Ye;let u=new Z;const d=[],h=[],p=[],y=[];x(),this.setIndex(y),this.setAttribute("position",new mt(d,3)),this.setAttribute("normal",new mt(h,3)),this.setAttribute("uv",new mt(p,2));function x(){for(let w=0;w<t;w++)_(w);_(s===!1?t:0),b(),v()}function _(w){u=e.getPointAt(w/t,u);const S=a.normals[w],A=a.binormals[w];for(let P=0;P<=r;P++){const k=P/r*Math.PI*2,T=Math.sin(k),E=-Math.cos(k);l.x=E*S.x+T*A.x,l.y=E*S.y+T*A.y,l.z=E*S.z+T*A.z,l.normalize(),h.push(l.x,l.y,l.z),o.x=u.x+i*l.x,o.y=u.y+i*l.y,o.z=u.z+i*l.z,d.push(o.x,o.y,o.z)}}function v(){for(let w=1;w<=t;w++)for(let S=1;S<=r;S++){const A=(r+1)*(w-1)+(S-1),P=(r+1)*w+(S-1),k=(r+1)*w+S,T=(r+1)*(w-1)+S;y.push(A,P,T),y.push(P,k,T)}}function b(){for(let w=0;w<=t;w++)for(let S=0;S<=r;S++)c.x=w/t,c.y=S/r,p.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new OS(new rw[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class P6 extends Wt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new Z,s=new Z;if(e.index!==null){const a=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const d=l[c],h=d.start,p=d.count;for(let y=h,x=h+p;y<x;y+=3)for(let _=0;_<3;_++){const v=o.getX(y+_),b=o.getX(y+(_+1)%3);r.fromBufferAttribute(a,v),s.fromBufferAttribute(a,b),DO(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let o=0,l=a.count/3;o<l;o++)for(let c=0;c<3;c++){const u=3*o+c,d=3*o+(c+1)%3;r.fromBufferAttribute(a,u),s.fromBufferAttribute(a,d),DO(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new mt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function DO(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var LO=Object.freeze({__proto__:null,BoxGeometry:Oh,CapsuleGeometry:ES,CircleGeometry:TS,ConeGeometry:ev,CylinderGeometry:Qy,DodecahedronGeometry:CS,EdgesGeometry:x6,ExtrudeGeometry:PS,IcosahedronGeometry:tv,LatheGeometry:RS,OctahedronGeometry:nv,PlaneGeometry:$u,PolyhedronGeometry:Vu,RingGeometry:kS,ShapeGeometry:NS,SphereGeometry:iv,TetrahedronGeometry:IS,TorusGeometry:DS,TorusKnotGeometry:LS,TubeGeometry:OS,WireframeGeometry:P6});class R6 extends _r{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ct(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class k6 extends js{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class FS extends _r{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new ct(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ct(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hu,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new qi,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class N6 extends FS{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ye(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Yt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ct(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ct(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ct(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class tu extends _r{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ct(16777215),this.specular=new ct(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ct(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hu,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new qi,this.combine=Wy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class I6 extends _r{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ct(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ct(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hu,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class D6 extends _r{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hu,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class VR extends _r{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ct(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ct(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hu,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new qi,this.combine=Wy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $R extends _r{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=YB,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class WR extends _r{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class L6 extends _r{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ct(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hu,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class O6 extends ar{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Gd(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function F6(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function U6(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function iA(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,a=0;a!==i;++s){const o=t[s]*e;for(let l=0;l!==e;++l)r[a++]=n[o+l]}return r}function GR(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let a=s[i];if(a!==void 0)if(Array.isArray(a))do a=s[i],a!==void 0&&(e.push(s.time),t.push(...a)),s=n[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[i],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do a=s[i],a!==void 0&&(e.push(s.time),t.push(a)),s=n[r++];while(s!==void 0)}function Eie(n,e,t,i,r=30){const s=n.clone();s.name=e;const a=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],h=[];for(let p=0;p<c.times.length;++p){const y=c.times[p]*r;if(!(y<t||y>=i)){d.push(c.times[p]);for(let x=0;x<u;++x)h.push(c.values[p*u+x])}}d.length!==0&&(c.times=Gd(d,c.times.constructor),c.values=Gd(h,c.values.constructor),a.push(c))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s}function Tie(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let a=0;a<r;++a){const o=t.tracks[a],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(v){return v.name===o.name&&v.ValueTypeName===l});if(c===void 0)continue;let u=0;const d=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let h=0;const p=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=p/3);const y=o.times.length-1;let x;if(s<=o.times[0]){const v=u,b=d-u;x=o.values.slice(v,b)}else if(s>=o.times[y]){const v=y*d+u,b=v+d-u;x=o.values.slice(v,b)}else{const v=o.createInterpolant(),b=u,w=d-u;v.evaluate(s),x=v.resultBuffer.slice(b,w)}l==="quaternion"&&new Ei().fromArray(x).normalize().conjugate().toArray(x);const _=c.times.length;for(let v=0;v<_;++v){const b=v*p+h;if(l==="quaternion")Ei.multiplyQuaternionsFlat(c.values,b,x,0,c.values,b);else{const w=p-h*2;for(let S=0;S<w;++S)c.values[b+S]-=x[S]}}}return n.blendMode=AR,n}class Cie{static convertArray(e,t){return Gd(e,t)}static isTypedArray(e){return F6(e)}static getKeyframeOrder(e){return U6(e)}static sortedArray(e,t,i){return iA(e,t,i)}static flattenJSON(e,t,i,r){GR(e,t,i,r)}static subclip(e,t,i,r,s=30){return Eie(e,t,i,r,s)}static makeClipAdditive(e,t=0,i=e,r=30){return Tie(e,t,i,r)}}class rv{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let a;n:{i:if(!(e<r)){for(let o=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(s=r,r=t[++i],e<r)break t}a=t.length;break n}if(!(e>=s)){const o=t[1];e<o&&(i=2,s=o);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}a=i,i=0;break n}break e}for(;i<a;){const o=i+a>>>1;e<t[o]?a=o:i=o+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)t[a]=i[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class j6 extends rv{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Hd,endingEnd:Hd}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,a=e+1,o=r[s],l=r[a];if(o===void 0)switch(this.getSettings_().endingStart){case Vd:s=e,o=2*t-i;break;case ny:s=r.length-2,o=t+r[s]-r[s+1];break;default:s=e,o=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Vd:a=e,l=2*i-t;break;case ny:a=1,l=i+r[1]-r[0];break;default:a=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=a*u}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,p=this._weightNext,y=(i-t)/(r-t),x=y*y,_=x*y,v=-h*_+2*h*x-h*y,b=(1+h)*_+(-1.5-2*h)*x+(-.5+h)*y+1,w=(-1-p)*_+(1.5+p)*x+.5*y,S=p*_-p*x;for(let A=0;A!==o;++A)s[A]=v*a[u+A]+b*a[c+A]+w*a[l+A]+S*a[d+A];return s}}class qR extends rv{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=(i-t)/(r-t),d=1-u;for(let h=0;h!==o;++h)s[h]=a[c+h]*d+a[l+h]*u;return s}}class z6 extends rv{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Qa{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Gd(t,this.TimeBufferType),this.values=Gd(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Gd(e.times,Array),values:Gd(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new z6(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new qR(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new j6(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case ty:t=this.InterpolantFactoryMethodDiscrete;break;case tw:t=this.InterpolantFactoryMethodLinear;break;case v1:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ty;case this.InterpolantFactoryMethodLinear:return tw;case this.InterpolantFactoryMethodSmooth:return v1}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,a=r-1;for(;s!==r&&i[s]<e;)++s;for(;a!==-1&&i[a]>t;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=i.slice(s,a),this.values=this.values.slice(s*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const l=i[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(r!==void 0&&F6(r))for(let o=0,l=r.length;o!==l;++o){const c=r[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===v1,s=e.length-1;let a=1;for(let o=1;o<s;++o){let l=!1;const c=e[o],u=e[o+1];if(c!==u&&(o!==1||c!==e[0]))if(r)l=!0;else{const d=o*i,h=d-i,p=d+i;for(let y=0;y!==i;++y){const x=t[d+y];if(x!==t[h+y]||x!==t[p+y]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const d=o*i,h=a*i;for(let p=0;p!==i;++p)t[h+p]=t[d+p]}++a}}if(s>0){e[a]=e[s];for(let o=s*i,l=a*i,c=0;c!==i;++c)t[l+c]=t[o+c];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Qa.prototype.ValueTypeName="";Qa.prototype.TimeBufferType=Float32Array;Qa.prototype.ValueBufferType=Float32Array;Qa.prototype.DefaultInterpolation=tw;class Fh extends Qa{constructor(e,t,i){super(e,t,i)}}Fh.prototype.ValueTypeName="bool";Fh.prototype.ValueBufferType=Array;Fh.prototype.DefaultInterpolation=ty;Fh.prototype.InterpolantFactoryMethodLinear=void 0;Fh.prototype.InterpolantFactoryMethodSmooth=void 0;class XR extends Qa{constructor(e,t,i,r){super(e,t,i,r)}}XR.prototype.ValueTypeName="color";class Vp extends Qa{constructor(e,t,i,r){super(e,t,i,r)}}Vp.prototype.ValueTypeName="number";class B6 extends rv{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(i-t)/(r-t);let c=e*o;for(let u=c+o;c!==u;c+=4)Ei.slerpFlat(s,0,a,c-o,a,c,l);return s}}class Th extends Qa{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new B6(this.times,this.values,this.getValueSize(),e)}}Th.prototype.ValueTypeName="quaternion";Th.prototype.InterpolantFactoryMethodSmooth=void 0;class Uh extends Qa{constructor(e,t,i){super(e,t,i)}}Uh.prototype.ValueTypeName="string";Uh.prototype.ValueBufferType=Array;Uh.prototype.DefaultInterpolation=ty;Uh.prototype.InterpolantFactoryMethodLinear=void 0;Uh.prototype.InterpolantFactoryMethodSmooth=void 0;class $p extends Qa{constructor(e,t,i,r){super(e,t,i,r)}}$p.prototype.ValueTypeName="vector";class Wp{constructor(e="",t=-1,i=[],r=gS){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=oa(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let a=0,o=i.length;a!==o;++a)t.push(Pie(i[a]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=i.length;s!==a;++s)t.push(Qa.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,a=[];for(let o=0;o<s;o++){let l=[],c=[];l.push((o+s-1)%s,o,(o+1)%s),c.push(0,1,0);const u=U6(l);l=iA(l,1,u),c=iA(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),a.push(new Vp(".morphTargetInfluences["+t[o].name+"]",l,c).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const c=e[o],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let h=r[d];h||(r[d]=h=[]),h.push(c)}}const a=[];for(const o in r)a.push(this.CreateFromMorphTargetSequence(o,r[o],t,i));return a}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,h,p,y,x){if(p.length!==0){const _=[],v=[];GR(p,_,v,y),_.length!==0&&x.push(new d(h,_,v))}},r=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const h=c[d].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const p={};let y;for(y=0;y<h.length;y++)if(h[y].morphTargets)for(let x=0;x<h[y].morphTargets.length;x++)p[h[y].morphTargets[x]]=-1;for(const x in p){const _=[],v=[];for(let b=0;b!==h[y].morphTargets.length;++b){const w=h[y];_.push(w.time),v.push(w.morphTarget===x?1:0)}r.push(new Vp(".morphTargetInfluence["+x+"]",_,v))}l=p.length*a}else{const p=".bones["+t[d].name+"]";i($p,p+".position",h,"pos",r),i(Th,p+".quaternion",h,"rot",r),i($p,p+".scale",h,"scl",r)}}return r.length===0?null:new this(s,l,r,o)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Aie(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Vp;case"vector":case"vector2":case"vector3":case"vector4":return $p;case"color":return XR;case"quaternion":return Th;case"bool":case"boolean":return Fh;case"string":return Uh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Pie(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Aie(n.type);if(n.times===void 0){const t=[],i=[];GR(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const $l={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class US{constructor(e,t,i){const r=this;let s=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){o++,s===!1&&r.onStart!==void 0&&r.onStart(u,a,o),s=!0},this.itemEnd=function(u){a++,r.onProgress!==void 0&&r.onProgress(u,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const p=c[d],y=c[d+1];if(p.global&&(p.lastIndex=0),p.test(u))return y}return null}}}const YR=new US;class Yi{constructor(e){this.manager=e!==void 0?e:YR,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Yi.DEFAULT_MATERIAL_NAME="__DEFAULT";const Sl={};class Rie extends Error{constructor(e,t){super(e),this.response=t}}class qr extends Yi{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=$l.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Sl[e]!==void 0){Sl[e].push({onLoad:t,onProgress:i,onError:r});return}Sl[e]=[],Sl[e].push({onLoad:t,onProgress:i,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(a).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Sl[e],d=c.body.getReader(),h=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),p=h?parseInt(h):0,y=p!==0;let x=0;const _=new ReadableStream({start(v){b();function b(){d.read().then(({done:w,value:S})=>{if(w)v.close();else{x+=S.byteLength;const A=new ProgressEvent("progress",{lengthComputable:y,loaded:x,total:p});for(let P=0,k=u.length;P<k;P++){const T=u[P];T.onProgress&&T.onProgress(A)}v.enqueue(S),b()}},w=>{v.error(w)})}}});return new Response(_)}else throw new Rie(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,o));case"json":return c.json();default:if(o==="")return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(o),h=d&&d[1]?d[1].toLowerCase():void 0,p=new TextDecoder(h);return c.arrayBuffer().then(y=>p.decode(y))}}}).then(c=>{$l.add(e,c);const u=Sl[e];delete Sl[e];for(let d=0,h=u.length;d<h;d++){const p=u[d];p.onLoad&&p.onLoad(c)}}).catch(c=>{const u=Sl[e];if(u===void 0)throw this.manager.itemError(e),c;delete Sl[e];for(let d=0,h=u.length;d<h;d++){const p=u[d];p.onError&&p.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class kie extends Yi{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new qr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Wp.parse(e[i]);t.push(r)}return t}}class Nie extends Yi{constructor(e){super(e)}load(e,t,i,r){const s=this,a=[],o=new MS,l=new qr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(d){l.load(e[d],function(h){const p=s.parse(h,!0);a[d]={width:p.width,height:p.height,format:p.format,mipmaps:p.mipmaps},c+=1,c===6&&(p.mipmapCount===1&&(o.minFilter=On),o.image=a,o.format=p.format,o.needsUpdate=!0,t&&t(o))},i,r)}if(Array.isArray(e))for(let d=0,h=e.length;d<h;++d)u(d);else l.load(e,function(d){const h=s.parse(d,!0);if(h.isCubemap){const p=h.mipmaps.length/h.mipmapCount;for(let y=0;y<p;y++){a[y]={mipmaps:[]};for(let x=0;x<h.mipmapCount;x++)a[y].mipmaps.push(h.mipmaps[y*h.mipmapCount+x]),a[y].format=h.format,a[y].width=h.width,a[y].height=h.height}o.image=a}else o.image.width=h.width,o.image.height=h.height,o.mipmaps=h.mipmaps;h.mipmapCount===1&&(o.minFilter=On),o.format=h.format,o.needsUpdate=!0,t&&t(o)},i,r);return o}}class dy extends Yi{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=$l.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=ay("img");function l(){u(),$l.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){u(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){o.removeEventListener("load",l,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class H6 extends Yi{constructor(e){super(e)}load(e,t,i,r){const s=new Ky;s.colorSpace=Mn;const a=new dy(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function l(c){a.load(e[c],function(u){s.images[c]=u,o++,o===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class KR extends Yi{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new So,o=new qr(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(r!==void 0)r(u);else{console.error(u);return}}c.image!==void 0?a.image=c.image:c.data!==void 0&&(a.image.width=c.width,a.image.height=c.height,a.image.data=c.data),a.wrapS=c.wrapS!==void 0?c.wrapS:Ai,a.wrapT=c.wrapT!==void 0?c.wrapT:Ai,a.magFilter=c.magFilter!==void 0?c.magFilter:On,a.minFilter=c.minFilter!==void 0?c.minFilter:On,a.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(a.colorSpace=c.colorSpace),c.flipY!==void 0&&(a.flipY=c.flipY),c.format!==void 0&&(a.format=c.format),c.type!==void 0&&(a.type=c.type),c.mipmaps!==void 0&&(a.mipmaps=c.mipmaps,a.minFilter=Ko),c.mipmapCount===1&&(a.minFilter=On),c.generateMipmaps!==void 0&&(a.generateMipmaps=c.generateMipmaps),a.needsUpdate=!0,t&&t(a,c)},i,r),a}}class ZR extends Yi{constructor(e){super(e)}load(e,t,i,r){const s=new Fn,a=new dy(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Wu extends xn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ct(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class V6 extends Wu{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(xn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ct(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const PT=new wt,OO=new Z,FO=new Z;class JR{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ye(512,512),this.mapType=gs,this.map=null,this.mapPass=null,this.matrix=new wt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new dm,this._frameExtents=new Ye(1,1),this._viewportCount=1,this._viewports=[new mn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;OO.setFromMatrixPosition(e.matrixWorld),t.position.copy(OO),FO.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(FO),t.updateMatrixWorld(),PT.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(PT),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(PT)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Iie extends JR{constructor(){super(new ir(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,i=jp*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class QR extends Wu{constructor(e,t,i=0,r=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(xn.DEFAULT_UP),this.updateMatrix(),this.target=new xn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new Iie}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const UO=new wt,ig=new Z,RT=new Z;class Die extends JR{constructor(){super(new ir(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ye(4,2),this._viewportCount=6,this._viewports=[new mn(2,1,1,1),new mn(0,1,1,1),new mn(3,1,1,1),new mn(1,1,1,1),new mn(3,0,1,1),new mn(1,0,1,1)],this._cubeDirections=[new Z(1,0,0),new Z(-1,0,0),new Z(0,0,1),new Z(0,0,-1),new Z(0,1,0),new Z(0,-1,0)],this._cubeUps=[new Z(0,1,0),new Z(0,1,0),new Z(0,1,0),new Z(0,1,0),new Z(0,0,1),new Z(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),ig.setFromMatrixPosition(e.matrixWorld),i.position.copy(ig),RT.copy(i.position),RT.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(RT),i.updateMatrixWorld(),r.makeTranslation(-ig.x,-ig.y,-ig.z),UO.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(UO)}}class aw extends Wu{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Die}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class hm extends Yy{constructor(e=-1,t=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,a=i+e,o=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,a=s+c*this.view.width,o-=u*this.view.offsetY,l=o-u*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class Lie extends JR{constructor(){super(new hm(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class ek extends Wu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(xn.DEFAULT_UP),this.updateMatrix(),this.target=new xn,this.shadow=new Lie}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class tk extends Wu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class $6 extends Wu{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class W6{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Z)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*i),t.addScaledVector(a[4],1.092548*(i*r)),t.addScaledVector(a[5],1.092548*(r*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(i*s)),t.addScaledVector(a[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*r),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*i),t.addScaledVector(a[4],2*.429043*i*r),t.addScaledVector(a[5],2*.429043*r*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*i*s),t.addScaledVector(a[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class G6 extends Wu{constructor(e=new W6,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class jS extends Yi{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,a=new qr(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new ct().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(r.uniforms[s]={},a.type){case"t":r.uniforms[s].value=i(a.value);break;case"c":r.uniforms[s].value=new ct().setHex(a.value);break;case"v2":r.uniforms[s].value=new Ye().fromArray(a.value);break;case"v3":r.uniforms[s].value=new Z().fromArray(a.value);break;case"v4":r.uniforms[s].value=new mn().fromArray(a.value);break;case"m3":r.uniforms[s].value=new Xt().fromArray(a.value);break;case"m4":r.uniforms[s].value=new wt().fromArray(a.value);break;default:r.uniforms[s].value=a.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Ye().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ye().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return jS.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:R6,SpriteMaterial:DR,RawShaderMaterial:k6,ShaderMaterial:js,PointsMaterial:Wd,MeshPhysicalMaterial:N6,MeshStandardMaterial:FS,MeshPhongMaterial:tu,MeshToonMaterial:I6,MeshNormalMaterial:D6,MeshLambertMaterial:VR,MeshDepthMaterial:$R,MeshDistanceMaterial:WR,MeshBasicMaterial:fc,MeshMatcapMaterial:L6,LineDashedMaterial:O6,LineBasicMaterial:ar,Material:_r};return new t[e]}}class hy{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class q6 extends Wt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class X6 extends Yi{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new qr(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(p,y){if(t[y]!==void 0)return t[y];const _=p.interleavedBuffers[y],v=s(p,_.buffer),b=Qf(_.type,v),w=new wS(b,_.stride);return w.uuid=_.uuid,t[y]=w,w}function s(p,y){if(i[y]!==void 0)return i[y];const _=p.arrayBuffers[y],v=new Uint32Array(_).buffer;return i[y]=v,v}const a=e.isInstancedBufferGeometry?new q6:new Wt,o=e.data.index;if(o!==void 0){const p=Qf(o.type,o.array);a.setIndex(new zn(p,1))}const l=e.data.attributes;for(const p in l){const y=l[p];let x;if(y.isInterleavedBufferAttribute){const _=r(e.data,y.data);x=new Mh(_,y.itemSize,y.offset,y.normalized)}else{const _=Qf(y.type,y.array),v=y.isInstancedBufferAttribute?Bp:zn;x=new v(_,y.itemSize,y.normalized)}y.name!==void 0&&(x.name=y.name),y.usage!==void 0&&x.setUsage(y.usage),a.setAttribute(p,x)}const c=e.data.morphAttributes;if(c)for(const p in c){const y=c[p],x=[];for(let _=0,v=y.length;_<v;_++){const b=y[_];let w;if(b.isInterleavedBufferAttribute){const S=r(e.data,b.data);w=new Mh(S,b.itemSize,b.offset,b.normalized)}else{const S=Qf(b.type,b.array);w=new zn(S,b.itemSize,b.normalized)}b.name!==void 0&&(w.name=b.name),x.push(w)}a.morphAttributes[p]=x}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let p=0,y=d.length;p!==y;++p){const x=d[p];a.addGroup(x.start,x.count,x.materialIndex)}const h=e.data.boundingSphere;return h!==void 0&&(a.boundingSphere=new Cr().fromJSON(h)),e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class Oie extends Yi{constructor(e){super(e)}load(e,t,i,r){const s=this,a=this.path===""?hy.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new qr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?hy.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new qr(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),o=JSON.parse(a),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(o)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){t!==void 0&&t(c)}),o=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,s,l,o,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),this.bindLightTargets(c),t!==void 0){let d=!1;for(const h in a)if(a[h].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,r,o,a,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new sh().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=new Jy().fromJSON(e[s],r);i[o.uuid]=o}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new X6;for(let s=0,a=e.length;s<a;s++){let o;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(l);break;default:l.type in LO?o=LO[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),i[l.uuid]=o}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new jS;s.setTextures(t);for(let a=0,o=e.length;a<o;a++){const l=e[a];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Wp.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function a(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return a(u)}else return l.data?{data:Qf(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new US(t);s=new dy(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const d=e[c],h=d.url;if(Array.isArray(h)){const p=[];for(let y=0,x=h.length;y<x;y++){const _=h[y],v=o(_);v!==null&&(v instanceof HTMLImageElement?p.push(v):p.push(new So(v.data,v.width,v.height)))}r[d.uuid]=new eu(p)}else{const p=o(d.url);r[d.uuid]=new eu(p)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(a){if(typeof a=="string"){const o=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await r.loadAsync(l)}else return a.data?{data:Qf(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){r=new dy(this.manager),r.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const l=e[a],c=l.url;if(Array.isArray(c)){const u=[];for(let d=0,h=c.length;d<h;d++){const p=c[d],y=await s(p);y!==null&&(y instanceof HTMLImageElement?u.push(y):u.push(new So(y.data,y.width,y.height)))}i[l.uuid]=new eu(u)}else{const u=await s(l.url);i[l.uuid]=new eu(u)}}}return i}parseTextures(e,t){function i(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const r={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=e[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],c=l.data;let u;Array.isArray(c)?(u=new Ky,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new So:u=new Fn,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=o.uuid,o.name!==void 0&&(u.name=o.name),o.mapping!==void 0&&(u.mapping=i(o.mapping,Fie)),o.channel!==void 0&&(u.channel=o.channel),o.offset!==void 0&&u.offset.fromArray(o.offset),o.repeat!==void 0&&u.repeat.fromArray(o.repeat),o.center!==void 0&&u.center.fromArray(o.center),o.rotation!==void 0&&(u.rotation=o.rotation),o.wrap!==void 0&&(u.wrapS=i(o.wrap[0],jO),u.wrapT=i(o.wrap[1],jO)),o.format!==void 0&&(u.format=o.format),o.internalFormat!==void 0&&(u.internalFormat=o.internalFormat),o.type!==void 0&&(u.type=o.type),o.colorSpace!==void 0&&(u.colorSpace=o.colorSpace),o.minFilter!==void 0&&(u.minFilter=i(o.minFilter,zO)),o.magFilter!==void 0&&(u.magFilter=i(o.magFilter,zO)),o.anisotropy!==void 0&&(u.anisotropy=o.anisotropy),o.flipY!==void 0&&(u.flipY=o.flipY),o.generateMipmaps!==void 0&&(u.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(u.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(u.compareFunction=o.compareFunction),o.userData!==void 0&&(u.userData=o.userData),r[o.uuid]=u}return r}parseObject(e,t,i,r,s){let a;function o(h){return t[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),t[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const p=[];for(let y=0,x=h.length;y<x;y++){const _=h[y];i[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),p.push(i[_])}return p}return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),i[h]}}function c(h){return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),r[h]}let u,d;switch(e.type){case"Scene":a=new Zy,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new ct(e.background):a.background=c(e.background)),e.environment!==void 0&&(a.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new bS(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new _S(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(a.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new ir(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new hm(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new tk(e.color,e.intensity);break;case"DirectionalLight":a=new ek(e.color,e.intensity),a.target=e.target||"";break;case"PointLight":a=new aw(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new $6(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new QR(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=e.target||"";break;case"HemisphereLight":a=new V6(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new G6().fromJSON(e);break;case"SkinnedMesh":u=o(e.geometry),d=l(e.material),a=new LR(u,d),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":u=o(e.geometry),d=l(e.material),a=new Zn(u,d);break;case"InstancedMesh":u=o(e.geometry),d=l(e.material);const h=e.count,p=e.instanceMatrix,y=e.instanceColor;a=new m6(u,d,h),a.instanceMatrix=new Bp(new Float32Array(p.array),16),y!==void 0&&(a.instanceColor=new Bp(new Float32Array(y.array),y.itemSize));break;case"BatchedMesh":u=o(e.geometry),d=l(e.material),a=new g6(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,d),a.geometry=u,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._geometryInfo=e.geometryInfo.map(x=>{let _=null,v=null;return x.boundingBox!==void 0&&(_=new Gr().fromJSON(x.boundingBox)),x.boundingSphere!==void 0&&(v=new Cr().fromJSON(x.boundingSphere)),{...x,boundingBox:_,boundingSphere:v}}),a._instanceInfo=e.instanceInfo,a._availableInstanceIds=e._availableInstanceIds,a._availableGeometryIds=e._availableGeometryIds,a._nextIndexStart=e.nextIndexStart,a._nextVertexStart=e.nextVertexStart,a._geometryCount=e.geometryCount,a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._matricesTexture=c(e.matricesTexture.uuid),a._indirectTexture=c(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(a._colorsTexture=c(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(a.boundingSphere=new Cr().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(a.boundingBox=new Gr().fromJSON(e.boundingBox));break;case"LOD":a=new p6;break;case"Line":a=new nc(o(e.geometry),l(e.material));break;case"LineLoop":a=new y6(o(e.geometry),l(e.material));break;case"LineSegments":a=new Ka(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new r0(o(e.geometry),l(e.material));break;case"Sprite":a=new f6(l(e.material));break;case"Group":a=new Vl;break;case"Bone":a=new oy;break;default:a=new xn}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(a.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let p=0;p<h.length;p++)a.add(this.parseObject(h[p],t,i,r,s))}if(e.animations!==void 0){const h=e.animations;for(let p=0;p<h.length;p++){const y=h[p];a.animations.push(s[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const h=e.levels;for(let p=0;p<h.length;p++){const y=h[p],x=a.getObjectByProperty("uuid",y.object);x!==void 0&&a.addLevel(x,y.distance,y.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new xn}})}}const Fie={UVMapping:Ru,CubeReflectionMapping:al,CubeRefractionMapping:ku,EquirectangularReflectionMapping:Sh,EquirectangularRefractionMapping:Q0,CubeUVReflectionMapping:cm},jO={RepeatWrapping:Nu,ClampToEdgeWrapping:Ai,MirroredRepeatWrapping:ey},zO={NearestFilter:Tr,NearestMipmapNearestFilter:wR,NearestMipmapLinearFilter:Jf,LinearFilter:On,LinearMipmapNearestFilter:Zg,LinearMipmapLinearFilter:Ko},kT=new WeakMap;class Uie extends Yi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=$l.get(e);if(a!==void 0){if(s.manager.itemStart(e),a.then){a.then(c=>{if(kT.has(a)===!0)r&&r(kT.get(a)),s.manager.itemError(e),s.manager.itemEnd(e);else return t&&t(c),s.manager.itemEnd(e),c});return}return setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader;const l=fetch(e,o).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return $l.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),kT.set(l,c),$l.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});$l.add(e,l),s.manager.itemStart(e)}}let M_;class nk{static getContext(){return M_===void 0&&(M_=new(window.AudioContext||window.webkitAudioContext)),M_}static setContext(e){M_=e}}class jie extends Yi{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new qr(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{const c=l.slice(0);nk.getContext().decodeAudioData(c,function(d){t(d)}).catch(o)}catch(c){o(c)}},i,r);function o(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const BO=new wt,HO=new wt,pd=new wt;class zie{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ir,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ir,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,pd.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,a=t.near*Math.tan(ih*t.fov*.5)/t.zoom;let o,l;HO.elements[12]=-r,BO.elements[12]=r,o=-a*t.aspect+s,l=a*t.aspect+s,pd.elements[0]=2*t.near/(l-o),pd.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(pd),o=-a*t.aspect-s,l=a*t.aspect-s,pd.elements[0]=2*t.near/(l-o),pd.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(pd)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(HO),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(BO)}}class Y6 extends ir{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class ik{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=VO(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=VO();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function VO(){return performance.now()}const md=new Z,NT=new Ei,Bie=new Z,gd=new Z,yd=new Z;class Hie extends xn{constructor(){super(),this.type="AudioListener",this.context=nk.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new ik}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(md,NT,Bie),gd.set(0,0,-1).applyQuaternion(NT),yd.set(0,1,0).applyQuaternion(NT),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(md.x,i),t.positionY.linearRampToValueAtTime(md.y,i),t.positionZ.linearRampToValueAtTime(md.z,i),t.forwardX.linearRampToValueAtTime(gd.x,i),t.forwardY.linearRampToValueAtTime(gd.y,i),t.forwardZ.linearRampToValueAtTime(gd.z,i),t.upX.linearRampToValueAtTime(yd.x,i),t.upY.linearRampToValueAtTime(yd.y,i),t.upZ.linearRampToValueAtTime(yd.z,i)}else t.setPosition(md.x,md.y,md.z),t.setOrientation(gd.x,gd.y,gd.z,yd.x,yd.y,yd.z)}}class K6 extends xn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const vd=new Z,$O=new Ei,Vie=new Z,xd=new Z;class $ie extends K6{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(vd,$O,Vie),xd.set(0,0,1).applyQuaternion($O);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(vd.x,i),t.positionY.linearRampToValueAtTime(vd.y,i),t.positionZ.linearRampToValueAtTime(vd.z,i),t.orientationX.linearRampToValueAtTime(xd.x,i),t.orientationY.linearRampToValueAtTime(xd.y,i),t.orientationZ.linearRampToValueAtTime(xd.z,i)}else t.setPosition(vd.x,vd.y,vd.z),t.setOrientation(xd.x,xd.y,xd.z)}}class Wie{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class Z6{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,a;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==r;++o)i[s+o]=i[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(i,s,0,o,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}a>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){o.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,a=r;s!==a;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let a=0;a!==s;++a)e[t+a]=e[i+a]}_slerp(e,t,i,r){Ei.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const a=this._workIndex*s;Ei.multiplyQuaternionsFlat(e,a,e,t,e,i),Ei.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,i,r,s){const a=1-r;for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]*a+e[i+o]*r}}_lerpAdditive(e,t,i,r,s){for(let a=0;a!==s;++a){const o=t+a;e[o]=e[o]+e[i+a]*r}}}const rk="\\[\\]\\.:\\/",Gie=new RegExp("["+rk+"]","g"),sk="[^"+rk+"]",qie="[^"+rk.replace("\\.","")+"]",Xie=/((?:WC+[\/:])*)/.source.replace("WC",sk),Yie=/(WCOD+)?/.source.replace("WCOD",qie),Kie=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",sk),Zie=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",sk),Jie=new RegExp("^"+Xie+Yie+Kie+Zie+"$"),Qie=["material","materials","bones","map"];class ere{constructor(e,t,i){const r=i||vn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class vn{constructor(e,t,i){this.path=t,this.parsedPath=i||vn.parseTrackName(t),this.node=vn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new vn.Composite(e,t,i):new vn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Gie,"")}static parseTrackName(e){const t=Jie.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);Qie.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===t||o.uuid===t)return o;const l=i(o.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=vn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const a=e[r];if(a===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}vn.Composite=ere;vn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};vn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};vn.prototype.GetterByBindingType=[vn.prototype._getValue_direct,vn.prototype._getValue_array,vn.prototype._getValue_arrayElement,vn.prototype._getValue_toArray];vn.prototype.SetterByBindingTypeAndVersioning=[[vn.prototype._setValue_direct,vn.prototype._setValue_direct_setNeedsUpdate,vn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[vn.prototype._setValue_array,vn.prototype._setValue_array_setNeedsUpdate,vn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[vn.prototype._setValue_arrayElement,vn.prototype._setValue_arrayElement_setNeedsUpdate,vn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[vn.prototype._setValue_fromArray,vn.prototype._setValue_fromArray_setNeedsUpdate,vn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class tre{constructor(){this.isAnimationObjectGroup=!0,this.uuid=oa(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length;let o,l=e.length,c=this.nCachedObjects_;for(let u=0,d=arguments.length;u!==d;++u){const h=arguments[u],p=h.uuid;let y=t[p];if(y===void 0){y=l++,t[p]=y,e.push(h);for(let x=0,_=a;x!==_;++x)s[x].push(new vn(h,i[x],r[x]))}else if(y<c){o=e[y];const x=--c,_=e[x];t[_.uuid]=y,e[y]=_,t[p]=x,e[x]=h;for(let v=0,b=a;v!==b;++v){const w=s[v],S=w[x];let A=w[y];w[y]=S,A===void 0&&(A=new vn(h,i[v],r[v])),w[x]=A}}else e[y]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const l=arguments[a],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const d=s++,h=e[d];t[h.uuid]=u,e[u]=h,t[c]=d,e[d]=l;for(let p=0,y=r;p!==y;++p){const x=i[p],_=x[d],v=x[u];x[u]=_,x[d]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,a=e.length;for(let o=0,l=arguments.length;o!==l;++o){const c=arguments[o],u=c.uuid,d=t[u];if(d!==void 0)if(delete t[u],d<s){const h=--s,p=e[h],y=--a,x=e[y];t[p.uuid]=d,e[d]=p,t[x.uuid]=h,e[h]=x,e.pop();for(let _=0,v=r;_!==v;++_){const b=i[_],w=b[h],S=b[y];b[d]=w,b[h]=S,b.pop()}}else{const h=--a,p=e[h];h>0&&(t[p.uuid]=d),e[d]=p,e.pop();for(let y=0,x=r;y!==x;++y){const _=i[y];_[d]=_[h],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const a=this._paths,o=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,d=new Array(c);r=s.length,i[e]=r,a.push(e),o.push(t),s.push(d);for(let h=u,p=l.length;h!==p;++h){const y=l[h];d[h]=new vn(y,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,a=this._bindings,o=a.length-1,l=a[o],c=e[o];t[c]=i,a[i]=l,a.pop(),s[i]=s[o],s.pop(),r[i]=r[o],r.pop()}}}class J6{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,a=s.length,o=new Array(a),l={endingStart:Hd,endingEnd:Hd};for(let c=0;c!==a;++c){const u=s[c].createInterpolant(null);o[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=qB,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const r=this._clip.duration,s=e._clip.duration,a=s/r,o=r/s;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/a,c[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case AR:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(a),c[u].accumulateAdditive(o);break;case gS:default:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(a),c[u].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const a=i===XB;if(e===0)return s===-1?r:a&&(s&1)===1?t-r:r;if(i===GB){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=t||r<0){const o=Math.floor(r/t);r-=t*o,s+=Math.abs(o);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Vd,r.endingEnd=Vd):(e?r.endingStart=this.zeroSlopeAtStart?Vd:Hd:r.endingStart=ny,t?r.endingEnd=this.zeroSlopeAtEnd?Vd:Hd:r.endingEnd=ny)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,l[0]=t,o[1]=s+e,l[1]=i,this}}const nre=new Float32Array(1);class ire extends ul{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,a=e._propertyBindings,o=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let d=0;d!==s;++d){const h=r[d],p=h.name;let y=u[p];if(y!==void 0)++y.referenceCount,a[d]=y;else{if(y=a[d],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,l,p));continue}const x=t&&t._propertyBindings[d].binding.parsedPath;y=new Z6(vn.create(i,p,x),h.ValueTypeName,h.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,l,p),a[d]=y}o[d].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],l=o.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const d=o.actionByRoot,h=(e._localRoot||this._root).uuid;delete d[h],l.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let a=r[t];a===void 0&&(a={},r[t]=a),a[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,a=this._bindingsByRootAndName,o=a[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete o[s],Object.keys(o).length===0&&delete a[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new qR(new Float32Array(2),new Float32Array(2),1,nre),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let a=typeof e=="string"?Wp.findByName(r,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let c=null;if(i===void 0&&(a!==null?i=a.blendMode:i=gS),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===i)return d;c=l.knownActions[0],a===null&&(a=c._clip)}if(a===null)return null;const u=new J6(this,a,t,i);return this._bindAction(u,c),this._addInactiveAction(u,o,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Wp.findByName(i,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,a);const o=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)o[c].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const a=s.knownActions;for(let o=0,l=a.length;o!==l;++o){const c=a[o];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const a in i){const o=i[a].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class rre extends kR{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new vS(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class ak{constructor(e){this.value=e}clone(){return new ak(this.value.clone===void 0?this.value:this.value.clone())}}let sre=0;class are extends ul{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:sre++}),this.name="",this.usage=ry,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let a=0;a<s.length;a++)this.uniforms.push(s[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class ore extends wS{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class lre{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const WO=new wt;class ok{constructor(e,t,i=0,r=1/0){this.ray=new um(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new rh,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return WO.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(WO),this}intersectObject(e,t=!0,i=[]){return rA(e,this,i,t),i.sort(GO),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)rA(e[r],this,i,t);return i.sort(GO),i}}function GO(n,e){return n.distance-e.distance}function rA(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let a=0,o=s.length;a<o;a++)rA(s[a],e,t,!0)}}class cre{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Yt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Yt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class ure{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class lk{constructor(e,t,i,r){lk.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const qO=new Ye;class dre{constructor(e=new Ye(1/0,1/0),t=new Ye(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=qO.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,qO).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const XO=new Z,E_=new Z;class hre{constructor(e=new Z,t=new Z){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){XO.subVectors(e,this.start),E_.subVectors(this.end,this.start);const i=E_.dot(E_);let s=E_.dot(XO)/i;return t&&(s=Yt(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const YO=new Z;class fre extends xn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Wt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,l=32;a<l;a++,o++){const c=a/l*Math.PI*2,u=o/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new mt(r,3));const s=new ar({fog:!1,toneMapped:!1});this.cone=new Ka(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),YO.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(YO),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Rc=new Z,T_=new wt,IT=new wt;class pre extends Ka{constructor(e){const t=Q6(e),i=new Wt,r=[],s=[],a=new ct(0,0,1),o=new ct(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(a.r,a.g,a.b),s.push(o.r,o.g,o.b))}i.setAttribute("position",new mt(r,3)),i.setAttribute("color",new mt(s,3));const l=new ar({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");IT.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<t.length;s++){const o=t[s];o.parent&&o.parent.isBone&&(T_.multiplyMatrices(IT,o.matrixWorld),Rc.setFromMatrixPosition(T_),r.setXYZ(a,Rc.x,Rc.y,Rc.z),T_.multiplyMatrices(IT,o.parent.matrixWorld),Rc.setFromMatrixPosition(T_),r.setXYZ(a+1,Rc.x,Rc.y,Rc.z),a+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Q6(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...Q6(n.children[t]));return e}class mre extends Zn{constructor(e,t,i){const r=new iv(t,4,2),s=new fc({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const gre=new Z,KO=new ct,ZO=new ct;class yre extends xn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new nv(t);r.rotateY(Math.PI*.5),this.material=new fc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),a=new Float32Array(s.count*3);r.setAttribute("color",new zn(a,3)),this.add(new Zn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");KO.copy(this.light.color),ZO.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?KO:ZO;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(gre.setFromMatrixPosition(this.light.matrixWorld).negate())}}class vre extends Ka{constructor(e=10,t=10,i=4473924,r=8947848){i=new ct(i),r=new ct(r);const s=t/2,a=e/t,o=e/2,l=[],c=[];for(let h=0,p=0,y=-o;h<=t;h++,y+=a){l.push(-o,0,y,o,0,y),l.push(y,0,-o,y,0,o);const x=h===s?i:r;x.toArray(c,p),p+=3,x.toArray(c,p),p+=3,x.toArray(c,p),p+=3,x.toArray(c,p),p+=3}const u=new Wt;u.setAttribute("position",new mt(l,3)),u.setAttribute("color",new mt(c,3));const d=new ar({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class xre extends Ka{constructor(e=10,t=16,i=8,r=64,s=4473924,a=8947848){s=new ct(s),a=new ct(a);const o=[],l=[];if(t>1)for(let d=0;d<t;d++){const h=d/t*(Math.PI*2),p=Math.sin(h)*e,y=Math.cos(h)*e;o.push(0,0,0),o.push(p,0,y);const x=d&1?s:a;l.push(x.r,x.g,x.b),l.push(x.r,x.g,x.b)}for(let d=0;d<i;d++){const h=d&1?s:a,p=e-e/i*d;for(let y=0;y<r;y++){let x=y/r*(Math.PI*2),_=Math.sin(x)*p,v=Math.cos(x)*p;o.push(_,0,v),l.push(h.r,h.g,h.b),x=(y+1)/r*(Math.PI*2),_=Math.sin(x)*p,v=Math.cos(x)*p,o.push(_,0,v),l.push(h.r,h.g,h.b)}}const c=new Wt;c.setAttribute("position",new mt(o,3)),c.setAttribute("color",new mt(l,3));const u=new ar({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const JO=new Z,C_=new Z,QO=new Z;class _re extends xn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Wt;r.setAttribute("position",new mt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new ar({fog:!1,toneMapped:!1});this.lightPlane=new nc(r,s),this.add(this.lightPlane),r=new Wt,r.setAttribute("position",new mt([0,0,0,0,0,1],3)),this.targetLine=new nc(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),JO.setFromMatrixPosition(this.light.matrixWorld),C_.setFromMatrixPosition(this.light.target.matrixWorld),QO.subVectors(C_,JO),this.lightPlane.lookAt(C_),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(C_),this.targetLine.scale.z=QO.length()}}const A_=new Z,Si=new Yy;class bre extends Ka{constructor(e){const t=new Wt,i=new ar({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(y,x){l(y),l(x)}function l(y){r.push(0,0,0),s.push(0,0,0),a[y]===void 0&&(a[y]=[]),a[y].push(r.length/3-1)}t.setAttribute("position",new mt(r,3)),t.setAttribute("color",new mt(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const c=new ct(16755200),u=new ct(16711680),d=new ct(43775),h=new ct(16777215),p=new ct(3355443);this.setColors(c,u,d,h,p)}setColors(e,t,i,r,s){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,i.r,i.g,i.b),o.setXYZ(33,i.r,i.g,i.b),o.setXYZ(34,i.r,i.g,i.b),o.setXYZ(35,i.r,i.g,i.b),o.setXYZ(36,i.r,i.g,i.b),o.setXYZ(37,i.r,i.g,i.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,s.r,s.g,s.b),o.setXYZ(41,s.r,s.g,s.b),o.setXYZ(42,s.r,s.g,s.b),o.setXYZ(43,s.r,s.g,s.b),o.setXYZ(44,s.r,s.g,s.b),o.setXYZ(45,s.r,s.g,s.b),o.setXYZ(46,s.r,s.g,s.b),o.setXYZ(47,s.r,s.g,s.b),o.setXYZ(48,s.r,s.g,s.b),o.setXYZ(49,s.r,s.g,s.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;Si.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===ja?-1:0;ki("c",t,e,Si,0,0,s),ki("t",t,e,Si,0,0,1),ki("n1",t,e,Si,-1,-1,s),ki("n2",t,e,Si,i,-1,s),ki("n3",t,e,Si,-1,r,s),ki("n4",t,e,Si,i,r,s),ki("f1",t,e,Si,-1,-1,1),ki("f2",t,e,Si,i,-1,1),ki("f3",t,e,Si,-1,r,1),ki("f4",t,e,Si,i,r,1),ki("u1",t,e,Si,i*.7,r*1.1,s),ki("u2",t,e,Si,-1*.7,r*1.1,s),ki("u3",t,e,Si,0,r*2,s),ki("cf1",t,e,Si,-1,0,1),ki("cf2",t,e,Si,i,0,1),ki("cf3",t,e,Si,0,-1,1),ki("cf4",t,e,Si,0,r,1),ki("cn1",t,e,Si,-1,0,s),ki("cn2",t,e,Si,i,0,s),ki("cn3",t,e,Si,0,-1,s),ki("cn4",t,e,Si,0,r,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ki(n,e,t,i,r,s,a){A_.set(r,s,a).unproject(i);const o=e[n];if(o!==void 0){const l=t.getAttribute("position");for(let c=0,u=o.length;c<u;c++)l.setXYZ(o[c],A_.x,A_.y,A_.z)}}const P_=new Gr;class wre extends Ka{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Wt;s.setIndex(new zn(i,1)),s.setAttribute("position",new zn(r,3)),super(s,new ar({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&P_.setFromObject(this.object),P_.isEmpty())return;const e=P_.min,t=P_.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Sre extends Ka{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Wt;s.setIndex(new zn(i,1)),s.setAttribute("position",new mt(r,3)),super(s,new ar({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Mre extends nc{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new Wt;a.setAttribute("position",new mt(s,3)),a.computeBoundingSphere(),super(a,new ar({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Wt;l.setAttribute("position",new mt(o,3)),l.computeBoundingSphere(),this.add(new Zn(l,new fc({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const eF=new Z;let R_,DT;class Ere extends xn{constructor(e=new Z(0,0,1),t=new Z(0,0,0),i=1,r=16776960,s=i*.2,a=s*.2){super(),this.type="ArrowHelper",R_===void 0&&(R_=new Wt,R_.setAttribute("position",new mt([0,0,0,0,1,0],3)),DT=new ev(.5,1,5,1),DT.translate(0,-.5,0)),this.position.copy(t),this.line=new nc(R_,new ar({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Zn(DT,new fc({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{eF.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(eF,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Tre extends Ka{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Wt;r.setAttribute("position",new mt(t,3)),r.setAttribute("color",new mt(i,3));const s=new ar({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new ct,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Cre{constructor(){this.type="ShapePath",this.color=new ct,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new sw,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,a){return this.currentPath.bezierCurveTo(e,t,i,r,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(v){const b=[];for(let w=0,S=v.length;w<S;w++){const A=v[w],P=new sh;P.curves=A.curves,b.push(P)}return b}function i(v,b){const w=b.length;let S=!1;for(let A=w-1,P=0;P<w;A=P++){let k=b[A],T=b[P],E=T.x-k.x,R=T.y-k.y;if(Math.abs(R)>Number.EPSILON){if(R<0&&(k=b[P],E=-E,T=b[A],R=-R),v.y<k.y||v.y>T.y)continue;if(v.y===k.y){if(v.x===k.x)return!0}else{const I=R*(v.x-k.x)-E*(v.y-k.y);if(I===0)return!0;if(I<0)continue;S=!S}}else{if(v.y!==k.y)continue;if(T.x<=v.x&&v.x<=k.x||k.x<=v.x&&v.x<=T.x)return!0}}return S}const r=za.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,o,l;const c=[];if(s.length===1)return o=s[0],l=new sh,l.curves=o.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const d=[],h=[];let p=[],y=0,x;h[y]=void 0,p[y]=[];for(let v=0,b=s.length;v<b;v++)o=s[v],x=o.getPoints(),a=r(x),a=e?!a:a,a?(!u&&h[y]&&y++,h[y]={s:new sh,p:x},h[y].s.curves=o.curves,u&&y++,p[y]=[]):p[y].push({h:o,p:x[0]});if(!h[0])return t(s);if(h.length>1){let v=!1,b=0;for(let w=0,S=h.length;w<S;w++)d[w]=[];for(let w=0,S=h.length;w<S;w++){const A=p[w];for(let P=0;P<A.length;P++){const k=A[P];let T=!0;for(let E=0;E<h.length;E++)i(k.p,h[E].p)&&(w!==E&&b++,T?(T=!1,d[E].push(k)):v=!0);T&&d[w].push(k)}}b>0&&v===!1&&(p=d)}let _;for(let v=0,b=h.length;v<b;v++){l=h[v].s,c.push(l),_=p[v];for(let w=0,S=_.length;w<S;w++)l.holes.push(_[w].h)}return c}}class Are extends ul{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function Pre(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function Rre(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function kre(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function sA(n,e,t,i){const r=Nre(i);switch(t){case MR:return n*e;case qy:return n*e/r.components*r.byteLength;case Xy:return n*e/r.components*r.byteLength;case TR:return n*e*2/r.components*r.byteLength;case pS:return n*e*2/r.components*r.byteLength;case ER:return n*e*3/r.components*r.byteLength;case Fi:return n*e*4/r.components*r.byteLength;case mS:return n*e*4/r.components*r.byteLength;case Jg:case Qg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case e0:case t0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Rb:case Nb:return Math.max(n,16)*Math.max(e,8)/4;case Pb:case kb:return Math.max(n,8)*Math.max(e,8)/2;case Ib:case Db:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Lb:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Ob:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Fb:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case Ub:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case jb:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case zb:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Bb:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case Hb:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Vb:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case $b:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case Wb:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case Gb:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case qb:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case Xb:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case Yb:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case n0:case Kb:case Zb:return Math.ceil(n/4)*Math.ceil(e/4)*16;case CR:case Jb:return Math.ceil(n/4)*Math.ceil(e/4)*8;case Qb:case ew:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Nre(n){switch(n){case gs:case uS:return{byteLength:1,components:1};case Lp:case dS:case vr:return{byteLength:2,components:1};case hS:case fS:return{byteLength:2,components:4};case ol:case Gy:case yi:return{byteLength:4,components:1};case SR:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class Ire{static contain(e,t){return Pre(e,t)}static cover(e,t){return Rre(e,t)}static fill(e){return kre(e)}static getByteLength(e,t,i,r){return sA(e,t,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:$y}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=$y);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function e8(){let n=null,e=!1,t=null,i=null;function r(s,a){t(s,a),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Dre(n){const e=new WeakMap;function t(o,l){const c=o.array,u=o.usage,d=c.byteLength,h=n.createBuffer();n.bindBuffer(l,h),n.bufferData(l,c,u),o.onUploadCallback();let p;if(c instanceof Float32Array)p=n.FLOAT;else if(c instanceof Uint16Array)o.isFloat16BufferAttribute?p=n.HALF_FLOAT:p=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)p=n.SHORT;else if(c instanceof Uint32Array)p=n.UNSIGNED_INT;else if(c instanceof Int32Array)p=n.INT;else if(c instanceof Int8Array)p=n.BYTE;else if(c instanceof Uint8Array)p=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)p=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:h,type:p,bytesPerElement:c.BYTES_PER_ELEMENT,version:o.version,size:d}}function i(o,l,c){const u=l.array,d=l.updateRanges;if(n.bindBuffer(c,o),d.length===0)n.bufferSubData(c,0,u);else{d.sort((p,y)=>p.start-y.start);let h=0;for(let p=1;p<d.length;p++){const y=d[h],x=d[p];x.start<=y.start+y.count+1?y.count=Math.max(y.count,x.start+x.count-y.start):(++h,d[h]=x)}d.length=h+1;for(let p=0,y=d.length;p<y;p++){const x=d[p];n.bufferSubData(c,x.start*u.BYTES_PER_ELEMENT,u,x.start,x.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(n.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const u=e.get(o);(!u||u.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const c=e.get(o);if(c===void 0)e.set(o,t(o,l));else if(c.version<o.version){if(c.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,o,l),c.version=o.version}}return{get:r,remove:s,update:a}}var Lre=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Ore=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Fre=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Ure=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,jre=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,zre=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Bre=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Hre=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Vre=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,$re=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Wre=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Gre=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,qre=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Xre=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Yre=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Kre=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Zre=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Jre=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Qre=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,ese=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,tse=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,nse=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,ise=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,rse=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,sse=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,ase=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,ose=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,lse=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,cse=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,use=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,dse="gl_FragColor = linearToOutputTexel( gl_FragColor );",hse=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,fse=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,pse=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,mse=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,gse=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,yse=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,vse=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,xse=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,_se=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,bse=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,wse=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Sse=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Mse=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Ese=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Tse=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Cse=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Ase=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Pse=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Rse=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,kse=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Nse=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Ise=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Dse=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Lse=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Ose=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Fse=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Use=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,jse=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,zse=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Bse=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Hse=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Vse=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,$se=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Wse=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Gse=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,qse=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Xse=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Yse=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Kse=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Zse=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Jse=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Qse=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,eae=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,tae=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,nae=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,iae=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,rae=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,sae=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,aae=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,oae=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,lae=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,cae=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,uae=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,dae=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,hae=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,fae=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,pae=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,mae=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,gae=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,yae=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,vae=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,xae=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,_ae=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,bae=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,wae=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Sae=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Mae=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Eae=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Tae=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Cae=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Aae=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Pae=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Rae=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,kae=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Nae=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Iae=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Dae=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Lae=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Oae=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Fae=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Uae=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,jae=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,zae=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Bae=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Hae=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Vae=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,$ae=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Wae=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Gae=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,qae=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Xae=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Yae=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Kae=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Zae=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Jae=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Qae=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eoe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,toe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,noe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ioe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,roe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,soe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aoe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ooe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,loe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,coe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,uoe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,doe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,hoe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,foe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,rn={alphahash_fragment:Lre,alphahash_pars_fragment:Ore,alphamap_fragment:Fre,alphamap_pars_fragment:Ure,alphatest_fragment:jre,alphatest_pars_fragment:zre,aomap_fragment:Bre,aomap_pars_fragment:Hre,batching_pars_vertex:Vre,batching_vertex:$re,begin_vertex:Wre,beginnormal_vertex:Gre,bsdfs:qre,iridescence_fragment:Xre,bumpmap_pars_fragment:Yre,clipping_planes_fragment:Kre,clipping_planes_pars_fragment:Zre,clipping_planes_pars_vertex:Jre,clipping_planes_vertex:Qre,color_fragment:ese,color_pars_fragment:tse,color_pars_vertex:nse,color_vertex:ise,common:rse,cube_uv_reflection_fragment:sse,defaultnormal_vertex:ase,displacementmap_pars_vertex:ose,displacementmap_vertex:lse,emissivemap_fragment:cse,emissivemap_pars_fragment:use,colorspace_fragment:dse,colorspace_pars_fragment:hse,envmap_fragment:fse,envmap_common_pars_fragment:pse,envmap_pars_fragment:mse,envmap_pars_vertex:gse,envmap_physical_pars_fragment:Cse,envmap_vertex:yse,fog_vertex:vse,fog_pars_vertex:xse,fog_fragment:_se,fog_pars_fragment:bse,gradientmap_pars_fragment:wse,lightmap_pars_fragment:Sse,lights_lambert_fragment:Mse,lights_lambert_pars_fragment:Ese,lights_pars_begin:Tse,lights_toon_fragment:Ase,lights_toon_pars_fragment:Pse,lights_phong_fragment:Rse,lights_phong_pars_fragment:kse,lights_physical_fragment:Nse,lights_physical_pars_fragment:Ise,lights_fragment_begin:Dse,lights_fragment_maps:Lse,lights_fragment_end:Ose,logdepthbuf_fragment:Fse,logdepthbuf_pars_fragment:Use,logdepthbuf_pars_vertex:jse,logdepthbuf_vertex:zse,map_fragment:Bse,map_pars_fragment:Hse,map_particle_fragment:Vse,map_particle_pars_fragment:$se,metalnessmap_fragment:Wse,metalnessmap_pars_fragment:Gse,morphinstance_vertex:qse,morphcolor_vertex:Xse,morphnormal_vertex:Yse,morphtarget_pars_vertex:Kse,morphtarget_vertex:Zse,normal_fragment_begin:Jse,normal_fragment_maps:Qse,normal_pars_fragment:eae,normal_pars_vertex:tae,normal_vertex:nae,normalmap_pars_fragment:iae,clearcoat_normal_fragment_begin:rae,clearcoat_normal_fragment_maps:sae,clearcoat_pars_fragment:aae,iridescence_pars_fragment:oae,opaque_fragment:lae,packing:cae,premultiplied_alpha_fragment:uae,project_vertex:dae,dithering_fragment:hae,dithering_pars_fragment:fae,roughnessmap_fragment:pae,roughnessmap_pars_fragment:mae,shadowmap_pars_fragment:gae,shadowmap_pars_vertex:yae,shadowmap_vertex:vae,shadowmask_pars_fragment:xae,skinbase_vertex:_ae,skinning_pars_vertex:bae,skinning_vertex:wae,skinnormal_vertex:Sae,specularmap_fragment:Mae,specularmap_pars_fragment:Eae,tonemapping_fragment:Tae,tonemapping_pars_fragment:Cae,transmission_fragment:Aae,transmission_pars_fragment:Pae,uv_pars_fragment:Rae,uv_pars_vertex:kae,uv_vertex:Nae,worldpos_vertex:Iae,background_vert:Dae,background_frag:Lae,backgroundCube_vert:Oae,backgroundCube_frag:Fae,cube_vert:Uae,cube_frag:jae,depth_vert:zae,depth_frag:Bae,distanceRGBA_vert:Hae,distanceRGBA_frag:Vae,equirect_vert:$ae,equirect_frag:Wae,linedashed_vert:Gae,linedashed_frag:qae,meshbasic_vert:Xae,meshbasic_frag:Yae,meshlambert_vert:Kae,meshlambert_frag:Zae,meshmatcap_vert:Jae,meshmatcap_frag:Qae,meshnormal_vert:eoe,meshnormal_frag:toe,meshphong_vert:noe,meshphong_frag:ioe,meshphysical_vert:roe,meshphysical_frag:soe,meshtoon_vert:aoe,meshtoon_frag:ooe,points_vert:loe,points_frag:coe,shadow_vert:uoe,shadow_frag:doe,sprite_vert:hoe,sprite_frag:foe},pt={common:{diffuse:{value:new ct(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Xt},alphaMap:{value:null},alphaMapTransform:{value:new Xt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Xt}},envmap:{envMap:{value:null},envMapRotation:{value:new Xt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Xt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Xt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Xt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Xt},normalScale:{value:new Ye(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Xt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Xt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Xt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Xt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ct(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ct(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Xt},alphaTest:{value:0},uvTransform:{value:new Xt}},sprite:{diffuse:{value:new ct(16777215)},opacity:{value:1},center:{value:new Ye(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Xt},alphaMap:{value:null},alphaMapTransform:{value:new Xt},alphaTest:{value:0}}},yo={basic:{uniforms:rs([pt.common,pt.specularmap,pt.envmap,pt.aomap,pt.lightmap,pt.fog]),vertexShader:rn.meshbasic_vert,fragmentShader:rn.meshbasic_frag},lambert:{uniforms:rs([pt.common,pt.specularmap,pt.envmap,pt.aomap,pt.lightmap,pt.emissivemap,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.fog,pt.lights,{emissive:{value:new ct(0)}}]),vertexShader:rn.meshlambert_vert,fragmentShader:rn.meshlambert_frag},phong:{uniforms:rs([pt.common,pt.specularmap,pt.envmap,pt.aomap,pt.lightmap,pt.emissivemap,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.fog,pt.lights,{emissive:{value:new ct(0)},specular:{value:new ct(1118481)},shininess:{value:30}}]),vertexShader:rn.meshphong_vert,fragmentShader:rn.meshphong_frag},standard:{uniforms:rs([pt.common,pt.envmap,pt.aomap,pt.lightmap,pt.emissivemap,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.roughnessmap,pt.metalnessmap,pt.fog,pt.lights,{emissive:{value:new ct(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:rn.meshphysical_vert,fragmentShader:rn.meshphysical_frag},toon:{uniforms:rs([pt.common,pt.aomap,pt.lightmap,pt.emissivemap,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.gradientmap,pt.fog,pt.lights,{emissive:{value:new ct(0)}}]),vertexShader:rn.meshtoon_vert,fragmentShader:rn.meshtoon_frag},matcap:{uniforms:rs([pt.common,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.fog,{matcap:{value:null}}]),vertexShader:rn.meshmatcap_vert,fragmentShader:rn.meshmatcap_frag},points:{uniforms:rs([pt.points,pt.fog]),vertexShader:rn.points_vert,fragmentShader:rn.points_frag},dashed:{uniforms:rs([pt.common,pt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:rn.linedashed_vert,fragmentShader:rn.linedashed_frag},depth:{uniforms:rs([pt.common,pt.displacementmap]),vertexShader:rn.depth_vert,fragmentShader:rn.depth_frag},normal:{uniforms:rs([pt.common,pt.bumpmap,pt.normalmap,pt.displacementmap,{opacity:{value:1}}]),vertexShader:rn.meshnormal_vert,fragmentShader:rn.meshnormal_frag},sprite:{uniforms:rs([pt.sprite,pt.fog]),vertexShader:rn.sprite_vert,fragmentShader:rn.sprite_frag},background:{uniforms:{uvTransform:{value:new Xt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:rn.background_vert,fragmentShader:rn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Xt}},vertexShader:rn.backgroundCube_vert,fragmentShader:rn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:rn.cube_vert,fragmentShader:rn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:rn.equirect_vert,fragmentShader:rn.equirect_frag},distanceRGBA:{uniforms:rs([pt.common,pt.displacementmap,{referencePosition:{value:new Z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:rn.distanceRGBA_vert,fragmentShader:rn.distanceRGBA_frag},shadow:{uniforms:rs([pt.lights,pt.fog,{color:{value:new ct(0)},opacity:{value:1}}]),vertexShader:rn.shadow_vert,fragmentShader:rn.shadow_frag}};yo.physical={uniforms:rs([yo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Xt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Xt},clearcoatNormalScale:{value:new Ye(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Xt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Xt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Xt},sheen:{value:0},sheenColor:{value:new ct(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Xt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Xt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Xt},transmissionSamplerSize:{value:new Ye},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Xt},attenuationDistance:{value:0},attenuationColor:{value:new ct(0)},specularColor:{value:new ct(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Xt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Xt},anisotropyVector:{value:new Ye},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Xt}}]),vertexShader:rn.meshphysical_vert,fragmentShader:rn.meshphysical_frag};const k_={r:0,b:0,g:0},_d=new qi,poe=new wt;function moe(n,e,t,i,r,s,a){const o=new ct(0);let l=s===!0?0:1,c,u,d=null,h=0,p=null;function y(w){let S=w.isScene===!0?w.background:null;return S&&S.isTexture&&(S=(w.backgroundBlurriness>0?t:e).get(S)),S}function x(w){let S=!1;const A=y(w);A===null?v(o,l):A&&A.isColor&&(v(A,1),S=!0);const P=n.xr.getEnvironmentBlendMode();P==="additive"?i.buffers.color.setClear(0,0,0,1,a):P==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,a),(n.autoClear||S)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function _(w,S){const A=y(S);A&&(A.isCubeTexture||A.mapping===cm)?(u===void 0&&(u=new Zn(new Oh(1,1,1),new js({name:"BackgroundCubeMaterial",uniforms:zp(yo.backgroundCube.uniforms),vertexShader:yo.backgroundCube.vertexShader,fragmentShader:yo.backgroundCube.fragmentShader,side:ms,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(P,k,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),_d.copy(S.backgroundRotation),_d.x*=-1,_d.y*=-1,_d.z*=-1,A.isCubeTexture&&A.isRenderTargetTexture===!1&&(_d.y*=-1,_d.z*=-1),u.material.uniforms.envMap.value=A,u.material.uniforms.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(poe.makeRotationFromEuler(_d)),u.material.toneMapped=qt.getTransfer(A.colorSpace)!==Dn,(d!==A||h!==A.version||p!==n.toneMapping)&&(u.material.needsUpdate=!0,d=A,h=A.version,p=n.toneMapping),u.layers.enableAll(),w.unshift(u,u.geometry,u.material,0,0,null)):A&&A.isTexture&&(c===void 0&&(c=new Zn(new $u(2,2),new js({name:"BackgroundMaterial",uniforms:zp(yo.background.uniforms),vertexShader:yo.background.vertexShader,fragmentShader:yo.background.fragmentShader,side:sl,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=A,c.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,c.material.toneMapped=qt.getTransfer(A.colorSpace)!==Dn,A.matrixAutoUpdate===!0&&A.updateMatrix(),c.material.uniforms.uvTransform.value.copy(A.matrix),(d!==A||h!==A.version||p!==n.toneMapping)&&(c.material.needsUpdate=!0,d=A,h=A.version,p=n.toneMapping),c.layers.enableAll(),w.unshift(c,c.geometry,c.material,0,0,null))}function v(w,S){w.getRGB(k_,c6(n)),i.buffers.color.setClear(k_.r,k_.g,k_.b,S,a)}function b(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return o},setClearColor:function(w,S=1){o.set(w),l=S,v(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(w){l=w,v(o,l)},render:x,addToRenderList:_,dispose:b}}function goe(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=h(null);let s=r,a=!1;function o(R,I,D,B,G){let Y=!1;const X=d(B,D,I);s!==X&&(s=X,c(s.object)),Y=p(R,B,D,G),Y&&y(R,B,D,G),G!==null&&e.update(G,n.ELEMENT_ARRAY_BUFFER),(Y||a)&&(a=!1,S(R,I,D,B),G!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(G).buffer))}function l(){return n.createVertexArray()}function c(R){return n.bindVertexArray(R)}function u(R){return n.deleteVertexArray(R)}function d(R,I,D){const B=D.wireframe===!0;let G=i[R.id];G===void 0&&(G={},i[R.id]=G);let Y=G[I.id];Y===void 0&&(Y={},G[I.id]=Y);let X=Y[B];return X===void 0&&(X=h(l()),Y[B]=X),X}function h(R){const I=[],D=[],B=[];for(let G=0;G<t;G++)I[G]=0,D[G]=0,B[G]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:I,enabledAttributes:D,attributeDivisors:B,object:R,attributes:{},index:null}}function p(R,I,D,B){const G=s.attributes,Y=I.attributes;let X=0;const Q=D.getAttributes();for(const L in Q)if(Q[L].location>=0){const j=G[L];let te=Y[L];if(te===void 0&&(L==="instanceMatrix"&&R.instanceMatrix&&(te=R.instanceMatrix),L==="instanceColor"&&R.instanceColor&&(te=R.instanceColor)),j===void 0||j.attribute!==te||te&&j.data!==te.data)return!0;X++}return s.attributesNum!==X||s.index!==B}function y(R,I,D,B){const G={},Y=I.attributes;let X=0;const Q=D.getAttributes();for(const L in Q)if(Q[L].location>=0){let j=Y[L];j===void 0&&(L==="instanceMatrix"&&R.instanceMatrix&&(j=R.instanceMatrix),L==="instanceColor"&&R.instanceColor&&(j=R.instanceColor));const te={};te.attribute=j,j&&j.data&&(te.data=j.data),G[L]=te,X++}s.attributes=G,s.attributesNum=X,s.index=B}function x(){const R=s.newAttributes;for(let I=0,D=R.length;I<D;I++)R[I]=0}function _(R){v(R,0)}function v(R,I){const D=s.newAttributes,B=s.enabledAttributes,G=s.attributeDivisors;D[R]=1,B[R]===0&&(n.enableVertexAttribArray(R),B[R]=1),G[R]!==I&&(n.vertexAttribDivisor(R,I),G[R]=I)}function b(){const R=s.newAttributes,I=s.enabledAttributes;for(let D=0,B=I.length;D<B;D++)I[D]!==R[D]&&(n.disableVertexAttribArray(D),I[D]=0)}function w(R,I,D,B,G,Y,X){X===!0?n.vertexAttribIPointer(R,I,D,G,Y):n.vertexAttribPointer(R,I,D,B,G,Y)}function S(R,I,D,B){x();const G=B.attributes,Y=D.getAttributes(),X=I.defaultAttributeValues;for(const Q in Y){const L=Y[Q];if(L.location>=0){let W=G[Q];if(W===void 0&&(Q==="instanceMatrix"&&R.instanceMatrix&&(W=R.instanceMatrix),Q==="instanceColor"&&R.instanceColor&&(W=R.instanceColor)),W!==void 0){const j=W.normalized,te=W.itemSize,ae=e.get(W);if(ae===void 0)continue;const me=ae.buffer,K=ae.type,re=ae.bytesPerElement,oe=K===n.INT||K===n.UNSIGNED_INT||W.gpuType===Gy;if(W.isInterleavedBufferAttribute){const _e=W.data,Ce=_e.stride,Ee=W.offset;if(_e.isInstancedInterleavedBuffer){for(let Pe=0;Pe<L.locationSize;Pe++)v(L.location+Pe,_e.meshPerAttribute);R.isInstancedMesh!==!0&&B._maxInstanceCount===void 0&&(B._maxInstanceCount=_e.meshPerAttribute*_e.count)}else for(let Pe=0;Pe<L.locationSize;Pe++)_(L.location+Pe);n.bindBuffer(n.ARRAY_BUFFER,me);for(let Pe=0;Pe<L.locationSize;Pe++)w(L.location+Pe,te/L.locationSize,K,j,Ce*re,(Ee+te/L.locationSize*Pe)*re,oe)}else{if(W.isInstancedBufferAttribute){for(let _e=0;_e<L.locationSize;_e++)v(L.location+_e,W.meshPerAttribute);R.isInstancedMesh!==!0&&B._maxInstanceCount===void 0&&(B._maxInstanceCount=W.meshPerAttribute*W.count)}else for(let _e=0;_e<L.locationSize;_e++)_(L.location+_e);n.bindBuffer(n.ARRAY_BUFFER,me);for(let _e=0;_e<L.locationSize;_e++)w(L.location+_e,te/L.locationSize,K,j,te*re,te/L.locationSize*_e*re,oe)}}else if(X!==void 0){const j=X[Q];if(j!==void 0)switch(j.length){case 2:n.vertexAttrib2fv(L.location,j);break;case 3:n.vertexAttrib3fv(L.location,j);break;case 4:n.vertexAttrib4fv(L.location,j);break;default:n.vertexAttrib1fv(L.location,j)}}}}b()}function A(){T();for(const R in i){const I=i[R];for(const D in I){const B=I[D];for(const G in B)u(B[G].object),delete B[G];delete I[D]}delete i[R]}}function P(R){if(i[R.id]===void 0)return;const I=i[R.id];for(const D in I){const B=I[D];for(const G in B)u(B[G].object),delete B[G];delete I[D]}delete i[R.id]}function k(R){for(const I in i){const D=i[I];if(D[R.id]===void 0)continue;const B=D[R.id];for(const G in B)u(B[G].object),delete B[G];delete D[R.id]}}function T(){E(),a=!0,s!==r&&(s=r,c(s.object))}function E(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:o,reset:T,resetDefaultState:E,dispose:A,releaseStatesOfGeometry:P,releaseStatesOfProgram:k,initAttributes:x,enableAttribute:_,disableUnusedAttributes:b}}function yoe(n,e,t){let i;function r(c){i=c}function s(c,u){n.drawArrays(i,c,u),t.update(u,i,1)}function a(c,u,d){d!==0&&(n.drawArraysInstanced(i,c,u,d),t.update(u,i,d))}function o(c,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,u,0,d);let p=0;for(let y=0;y<d;y++)p+=u[y];t.update(p,i,1)}function l(c,u,d,h){if(d===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let y=0;y<c.length;y++)a(c[y],u[y],h[y]);else{p.multiDrawArraysInstancedWEBGL(i,c,0,u,0,h,0,d);let y=0;for(let x=0;x<d;x++)y+=u[x]*h[x];t.update(y,i,1)}}this.setMode=r,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function voe(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const k=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(k){return!(k!==Fi&&i.convert(k)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(k){const T=k===vr&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(k!==gs&&i.convert(k)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&k!==yi&&!T)}function l(k){if(k==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";k="mediump"}return k==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const d=t.logarithmicDepthBuffer===!0,h=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),y=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_TEXTURE_SIZE),_=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),v=n.getParameter(n.MAX_VERTEX_ATTRIBS),b=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),w=n.getParameter(n.MAX_VARYING_VECTORS),S=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),A=y>0,P=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:c,logarithmicDepthBuffer:d,reverseDepthBuffer:h,maxTextures:p,maxVertexTextures:y,maxTextureSize:x,maxCubemapSize:_,maxAttributes:v,maxVertexUniforms:b,maxVaryings:w,maxFragmentUniforms:S,vertexTextures:A,maxSamples:P}}function xoe(n){const e=this;let t=null,i=0,r=!1,s=!1;const a=new zc,o=new Xt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){const p=d.length!==0||h||i!==0||r;return r=h,i=d.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,h){t=u(d,h,0)},this.setState=function(d,h,p){const y=d.clippingPlanes,x=d.clipIntersection,_=d.clipShadows,v=n.get(d);if(!r||y===null||y.length===0||s&&!_)s?u(null):c();else{const b=s?0:i,w=b*4;let S=v.clippingState||null;l.value=S,S=u(y,h,w,p);for(let A=0;A!==w;++A)S[A]=t[A];v.clippingState=S,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=b}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,h,p,y){const x=d!==null?d.length:0;let _=null;if(x!==0){if(_=l.value,y!==!0||_===null){const v=p+x*4,b=h.matrixWorldInverse;o.getNormalMatrix(b),(_===null||_.length<v)&&(_=new Float32Array(v));for(let w=0,S=p;w!==x;++w,S+=4)a.copy(d[w]).applyMatrix4(b,o),a.normal.toArray(_,S),_[S+3]=a.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,_}}function _oe(n){let e=new WeakMap;function t(a,o){return o===Sh?a.mapping=al:o===Q0&&(a.mapping=ku),a}function i(a){if(a&&a.isTexture){const o=a.mapping;if(o===Sh||o===Q0)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new IR(l.height);return c.fromEquirectangularTexture(n,a),e.set(a,c),a.addEventListener("dispose",r),t(c.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const ep=4,tF=[.125,.215,.35,.446,.526,.582],Ld=20,LT=new hm,nF=new ct;let OT=null,FT=0,UT=0,jT=!1;const Rd=(1+Math.sqrt(5))/2,Ef=1/Rd,iF=[new Z(-Rd,Ef,0),new Z(Rd,Ef,0),new Z(-Ef,0,Rd),new Z(Ef,0,Rd),new Z(0,Rd,-Ef),new Z(0,Rd,Ef),new Z(-1,1,-1),new Z(1,1,-1),new Z(-1,1,1),new Z(1,1,1)],boe=new Z;class aA{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,s={}){const{size:a=256,position:o=boe}=s;OT=this._renderer.getRenderTarget(),FT=this._renderer.getActiveCubeFace(),UT=this._renderer.getActiveMipmapLevel(),jT=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,r,l,o),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=aF(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=sF(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(OT,FT,UT),this._renderer.xr.enabled=jT,e.scissorTest=!1,N_(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===al||e.mapping===ku?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),OT=this._renderer.getRenderTarget(),FT=this._renderer.getActiveCubeFace(),UT=this._renderer.getActiveMipmapLevel(),jT=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:On,minFilter:On,generateMipmaps:!1,type:vr,format:Fi,colorSpace:ll,depthBuffer:!1},r=rF(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=rF(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=woe(s)),this._blurMaterial=Soe(s,e,t)}return r}_compileMaterial(e){const t=new Zn(this._lodPlanes[0],e);this._renderer.compile(t,LT)}_sceneToCubeUV(e,t,i,r,s){const l=new ir(90,1,t,i),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,p=d.toneMapping;d.getClearColor(nF),d.toneMapping=il,d.autoClear=!1;const y=new fc({name:"PMREM.Background",side:ms,depthWrite:!1,depthTest:!1}),x=new Zn(new Oh,y);let _=!1;const v=e.background;v?v.isColor&&(y.color.copy(v),e.background=null,_=!0):(y.color.copy(nF),_=!0);for(let b=0;b<6;b++){const w=b%3;w===0?(l.up.set(0,c[b],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+u[b],s.y,s.z)):w===1?(l.up.set(0,0,c[b]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+u[b],s.z)):(l.up.set(0,c[b],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+u[b]));const S=this._cubeSize;N_(r,w*S,b>2?S:0,S,S),d.setRenderTarget(r),_&&d.render(x,l),d.render(e,l)}x.geometry.dispose(),x.material.dispose(),d.toneMapping=p,d.autoClear=h,e.background=v}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===al||e.mapping===ku;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=aF()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=sF());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new Zn(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;N_(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(a,LT)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=iF[(r-s-1)%iF.length];this._blur(e,s-1,s,a,o)}t.autoClear=i}_blur(e,t,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new Zn(this._lodPlanes[r],c),h=c.uniforms,p=this._sizeLods[i]-1,y=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*Ld-1),x=s/y,_=isFinite(s)?1+Math.floor(u*x):Ld;_>Ld&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${Ld}`);const v=[];let b=0;for(let k=0;k<Ld;++k){const T=k/x,E=Math.exp(-T*T/2);v.push(E),k===0?b+=E:k<_&&(b+=2*E)}for(let k=0;k<v.length;k++)v[k]=v[k]/b;h.envMap.value=e.texture,h.samples.value=_,h.weights.value=v,h.latitudinal.value=a==="latitudinal",o&&(h.poleAxis.value=o);const{_lodMax:w}=this;h.dTheta.value=y,h.mipInt.value=w-i;const S=this._sizeLods[r],A=3*S*(r>w-ep?r-w+ep:0),P=4*(this._cubeSize-S);N_(t,A,P,3*S,2*S),l.setRenderTarget(t),l.render(d,LT)}}function woe(n){const e=[],t=[],i=[];let r=n;const s=n-ep+1+tF.length;for(let a=0;a<s;a++){const o=Math.pow(2,r);t.push(o);let l=1/o;a>n-ep?l=tF[a-n+ep-1]:a===0&&(l=0),i.push(l);const c=1/(o-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],p=6,y=6,x=3,_=2,v=1,b=new Float32Array(x*y*p),w=new Float32Array(_*y*p),S=new Float32Array(v*y*p);for(let P=0;P<p;P++){const k=P%3*2/3-1,T=P>2?0:-1,E=[k,T,0,k+2/3,T,0,k+2/3,T+1,0,k,T,0,k+2/3,T+1,0,k,T+1,0];b.set(E,x*y*P),w.set(h,_*y*P);const R=[P,P,P,P,P,P];S.set(R,v*y*P)}const A=new Wt;A.setAttribute("position",new zn(b,x)),A.setAttribute("uv",new zn(w,_)),A.setAttribute("faceIndex",new zn(S,v)),e.push(A),r>ep&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function rF(n,e,t){const i=new Ya(n,e,t);return i.texture.mapping=cm,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function N_(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function Soe(n,e,t){const i=new Float32Array(Ld),r=new Z(0,1,0);return new js({name:"SphericalGaussianBlur",defines:{n:Ld,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:ck(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:nl,depthTest:!1,depthWrite:!1})}function sF(){return new js({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ck(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:nl,depthTest:!1,depthWrite:!1})}function aF(){return new js({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ck(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:nl,depthTest:!1,depthWrite:!1})}function ck(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Moe(n){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture){const l=o.mapping,c=l===Sh||l===Q0,u=l===al||l===ku;if(c||u){let d=e.get(o);const h=d!==void 0?d.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==h)return t===null&&(t=new aA(n)),d=c?t.fromEquirectangular(o,d):t.fromCubemap(o,d),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),d.texture;if(d!==void 0)return d.texture;{const p=o.image;return c&&p&&p.height>0||u&&p&&r(p)?(t===null&&(t=new aA(n)),d=c?t.fromEquirectangular(o):t.fromCubemap(o),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),o.addEventListener("dispose",s),d.texture):null}}}return o}function r(o){let l=0;const c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:a}}function Eoe(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&pp("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Toe(n,e,t,i){const r={},s=new WeakMap;function a(d){const h=d.target;h.index!==null&&e.remove(h.index);for(const y in h.attributes)e.remove(h.attributes[y]);h.removeEventListener("dispose",a),delete r[h.id];const p=s.get(h);p&&(e.remove(p),s.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function o(d,h){return r[h.id]===!0||(h.addEventListener("dispose",a),r[h.id]=!0,t.memory.geometries++),h}function l(d){const h=d.attributes;for(const p in h)e.update(h[p],n.ARRAY_BUFFER)}function c(d){const h=[],p=d.index,y=d.attributes.position;let x=0;if(p!==null){const b=p.array;x=p.version;for(let w=0,S=b.length;w<S;w+=3){const A=b[w+0],P=b[w+1],k=b[w+2];h.push(A,P,P,k,k,A)}}else if(y!==void 0){const b=y.array;x=y.version;for(let w=0,S=b.length/3-1;w<S;w+=3){const A=w+0,P=w+1,k=w+2;h.push(A,P,P,k,k,A)}}else return;const _=new(s6(h)?NR:xS)(h,1);_.version=x;const v=s.get(d);v&&e.remove(v),s.set(d,_)}function u(d){const h=s.get(d);if(h){const p=d.index;p!==null&&h.version<p.version&&c(d)}else c(d);return s.get(d)}return{get:o,update:l,getWireframeAttribute:u}}function Coe(n,e,t){let i;function r(h){i=h}let s,a;function o(h){s=h.type,a=h.bytesPerElement}function l(h,p){n.drawElements(i,p,s,h*a),t.update(p,i,1)}function c(h,p,y){y!==0&&(n.drawElementsInstanced(i,p,s,h*a,y),t.update(p,i,y))}function u(h,p,y){if(y===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,p,0,s,h,0,y);let _=0;for(let v=0;v<y;v++)_+=p[v];t.update(_,i,1)}function d(h,p,y,x){if(y===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let v=0;v<h.length;v++)c(h[v]/a,p[v],x[v]);else{_.multiDrawElementsInstancedWEBGL(i,p,0,s,h,0,x,0,y);let v=0;for(let b=0;b<y;b++)v+=p[b]*x[b];t.update(v,i,1)}}this.setMode=r,this.setIndex=o,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function Aoe(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(t.calls++,a){case n.TRIANGLES:t.triangles+=o*(s/3);break;case n.LINES:t.lines+=o*(s/2);break;case n.LINE_STRIP:t.lines+=o*(s-1);break;case n.LINE_LOOP:t.lines+=o*s;break;case n.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function Poe(n,e,t){const i=new WeakMap,r=new mn;function s(a,o,l){const c=a.morphTargetInfluences,u=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,d=u!==void 0?u.length:0;let h=i.get(o);if(h===void 0||h.count!==d){let R=function(){T.dispose(),i.delete(o),o.removeEventListener("dispose",R)};var p=R;h!==void 0&&h.texture.dispose();const y=o.morphAttributes.position!==void 0,x=o.morphAttributes.normal!==void 0,_=o.morphAttributes.color!==void 0,v=o.morphAttributes.position||[],b=o.morphAttributes.normal||[],w=o.morphAttributes.color||[];let S=0;y===!0&&(S=1),x===!0&&(S=2),_===!0&&(S=3);let A=o.attributes.position.count*S,P=1;A>e.maxTextureSize&&(P=Math.ceil(A/e.maxTextureSize),A=e.maxTextureSize);const k=new Float32Array(A*P*4*d),T=new yS(k,A,P,d);T.type=yi,T.needsUpdate=!0;const E=S*4;for(let I=0;I<d;I++){const D=v[I],B=b[I],G=w[I],Y=A*P*4*I;for(let X=0;X<D.count;X++){const Q=X*E;y===!0&&(r.fromBufferAttribute(D,X),k[Y+Q+0]=r.x,k[Y+Q+1]=r.y,k[Y+Q+2]=r.z,k[Y+Q+3]=0),x===!0&&(r.fromBufferAttribute(B,X),k[Y+Q+4]=r.x,k[Y+Q+5]=r.y,k[Y+Q+6]=r.z,k[Y+Q+7]=0),_===!0&&(r.fromBufferAttribute(G,X),k[Y+Q+8]=r.x,k[Y+Q+9]=r.y,k[Y+Q+10]=r.z,k[Y+Q+11]=G.itemSize===4?r.w:1)}}h={count:d,texture:T,size:new Ye(A,P)},i.set(o,h),o.addEventListener("dispose",R)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",a.morphTexture,t);else{let y=0;for(let _=0;_<c.length;_++)y+=c[_];const x=o.morphTargetsRelative?1:1-y;l.getUniforms().setValue(n,"morphTargetBaseInfluence",x),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",h.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}return{update:s}}function Roe(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,d=e.get(l,u);if(r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const h=l.skeleton;r.get(h)!==c&&(h.update(),r.set(h,c))}return d}function a(){r=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:a}}const t8=new Fn,oF=new OR(1,1),n8=new yS,i8=new vS,r8=new Ky,lF=[],cF=[],uF=new Float32Array(16),dF=new Float32Array(9),hF=new Float32Array(4);function fm(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=lF[r];if(s===void 0&&(s=new Float32Array(r),lF[r]=s),e!==0){i.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(s,o)}return s}function or(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function lr(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function zS(n,e){let t=cF[e];t===void 0&&(t=new Int32Array(e),cF[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function koe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Noe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(or(t,e))return;n.uniform2fv(this.addr,e),lr(t,e)}}function Ioe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(or(t,e))return;n.uniform3fv(this.addr,e),lr(t,e)}}function Doe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(or(t,e))return;n.uniform4fv(this.addr,e),lr(t,e)}}function Loe(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(or(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),lr(t,e)}else{if(or(t,i))return;hF.set(i),n.uniformMatrix2fv(this.addr,!1,hF),lr(t,i)}}function Ooe(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(or(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),lr(t,e)}else{if(or(t,i))return;dF.set(i),n.uniformMatrix3fv(this.addr,!1,dF),lr(t,i)}}function Foe(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(or(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),lr(t,e)}else{if(or(t,i))return;uF.set(i),n.uniformMatrix4fv(this.addr,!1,uF),lr(t,i)}}function Uoe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function joe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(or(t,e))return;n.uniform2iv(this.addr,e),lr(t,e)}}function zoe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(or(t,e))return;n.uniform3iv(this.addr,e),lr(t,e)}}function Boe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(or(t,e))return;n.uniform4iv(this.addr,e),lr(t,e)}}function Hoe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Voe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(or(t,e))return;n.uniform2uiv(this.addr,e),lr(t,e)}}function $oe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(or(t,e))return;n.uniform3uiv(this.addr,e),lr(t,e)}}function Woe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(or(t,e))return;n.uniform4uiv(this.addr,e),lr(t,e)}}function Goe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(oF.compareFunction=PR,s=oF):s=t8,t.setTexture2D(e||s,r)}function qoe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||i8,r)}function Xoe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||r8,r)}function Yoe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||n8,r)}function Koe(n){switch(n){case 5126:return koe;case 35664:return Noe;case 35665:return Ioe;case 35666:return Doe;case 35674:return Loe;case 35675:return Ooe;case 35676:return Foe;case 5124:case 35670:return Uoe;case 35667:case 35671:return joe;case 35668:case 35672:return zoe;case 35669:case 35673:return Boe;case 5125:return Hoe;case 36294:return Voe;case 36295:return $oe;case 36296:return Woe;case 35678:case 36198:case 36298:case 36306:case 35682:return Goe;case 35679:case 36299:case 36307:return qoe;case 35680:case 36300:case 36308:case 36293:return Xoe;case 36289:case 36303:case 36311:case 36292:return Yoe}}function Zoe(n,e){n.uniform1fv(this.addr,e)}function Joe(n,e){const t=fm(e,this.size,2);n.uniform2fv(this.addr,t)}function Qoe(n,e){const t=fm(e,this.size,3);n.uniform3fv(this.addr,t)}function ele(n,e){const t=fm(e,this.size,4);n.uniform4fv(this.addr,t)}function tle(n,e){const t=fm(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function nle(n,e){const t=fm(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function ile(n,e){const t=fm(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function rle(n,e){n.uniform1iv(this.addr,e)}function sle(n,e){n.uniform2iv(this.addr,e)}function ale(n,e){n.uniform3iv(this.addr,e)}function ole(n,e){n.uniform4iv(this.addr,e)}function lle(n,e){n.uniform1uiv(this.addr,e)}function cle(n,e){n.uniform2uiv(this.addr,e)}function ule(n,e){n.uniform3uiv(this.addr,e)}function dle(n,e){n.uniform4uiv(this.addr,e)}function hle(n,e,t){const i=this.cache,r=e.length,s=zS(t,r);or(i,s)||(n.uniform1iv(this.addr,s),lr(i,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||t8,s[a])}function fle(n,e,t){const i=this.cache,r=e.length,s=zS(t,r);or(i,s)||(n.uniform1iv(this.addr,s),lr(i,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||i8,s[a])}function ple(n,e,t){const i=this.cache,r=e.length,s=zS(t,r);or(i,s)||(n.uniform1iv(this.addr,s),lr(i,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||r8,s[a])}function mle(n,e,t){const i=this.cache,r=e.length,s=zS(t,r);or(i,s)||(n.uniform1iv(this.addr,s),lr(i,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||n8,s[a])}function gle(n){switch(n){case 5126:return Zoe;case 35664:return Joe;case 35665:return Qoe;case 35666:return ele;case 35674:return tle;case 35675:return nle;case 35676:return ile;case 5124:case 35670:return rle;case 35667:case 35671:return sle;case 35668:case 35672:return ale;case 35669:case 35673:return ole;case 5125:return lle;case 36294:return cle;case 36295:return ule;case 36296:return dle;case 35678:case 36198:case 36298:case 36306:case 35682:return hle;case 35679:case 36299:case 36307:return fle;case 35680:case 36300:case 36308:case 36293:return ple;case 36289:case 36303:case 36311:case 36292:return mle}}class yle{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=Koe(t.type)}}class vle{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=gle(t.type)}}class xle{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const o=r[s];o.setValue(e,t[o.id],i)}}}const zT=/(\w+)(\])?(\[|\.)?/g;function fF(n,e){n.seq.push(e),n.map[e.id]=e}function _le(n,e,t){const i=n.name,r=i.length;for(zT.lastIndex=0;;){const s=zT.exec(i),a=zT.lastIndex;let o=s[1];const l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===r){fF(t,c===void 0?new yle(o,n,e):new vle(o,n,e));break}else{let d=t.map[o];d===void 0&&(d=new xle(o),fF(t,d)),t=d}}}class _1{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);_le(s,a,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&i.push(a)}return i}}function pF(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const ble=37297;let wle=0;function Sle(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const o=a+1;i.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return i.join(`
`)}const mF=new Xt;function Mle(n){qt._getMatrix(mF,qt.workingColorSpace,n);const e=`mat3( ${mF.elements.map(t=>t.toFixed(4))} )`;switch(qt.getTransfer(n)){case iy:return[e,"LinearTransferOETF"];case Dn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function gF(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+Sle(n.getShaderSource(e),a)}else return r}function Ele(n,e){const t=Mle(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Tle(n,e){let t;switch(e){case jB:t="Linear";break;case zB:t="Reinhard";break;case BB:t="Cineon";break;case bR:t="ACESFilmic";break;case VB:t="AgX";break;case $B:t="Neutral";break;case HB:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const I_=new Z;function Cle(){qt.getLuminanceCoefficients(I_);const n=I_.x.toFixed(4),e=I_.y.toFixed(4),t=I_.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Ale(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Eg).join(`
`)}function Ple(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Rle(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),a=s.name;let o=1;s.type===n.FLOAT_MAT2&&(o=2),s.type===n.FLOAT_MAT3&&(o=3),s.type===n.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:o}}return t}function Eg(n){return n!==""}function yF(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function vF(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const kle=/^[ \t]*#include +<([\w\d./]+)>/gm;function oA(n){return n.replace(kle,Ile)}const Nle=new Map;function Ile(n,e){let t=rn[e];if(t===void 0){const i=Nle.get(e);if(i!==void 0)t=rn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return oA(t)}const Dle=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function xF(n){return n.replace(Dle,Lle)}function Lle(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function _F(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Ole(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===cS?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Kg?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===ho&&(e="SHADOWMAP_TYPE_VSM"),e}function Fle(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case al:case ku:e="ENVMAP_TYPE_CUBE";break;case cm:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Ule(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case ku:e="ENVMAP_MODE_REFRACTION";break}return e}function jle(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Wy:e="ENVMAP_BLENDING_MULTIPLY";break;case FB:e="ENVMAP_BLENDING_MIX";break;case UB:e="ENVMAP_BLENDING_ADD";break}return e}function zle(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function Ble(n,e,t,i){const r=n.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=Ole(t),c=Fle(t),u=Ule(t),d=jle(t),h=zle(t),p=Ale(t),y=Ple(s),x=r.createProgram();let _,v,b=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y].filter(Eg).join(`
`),_.length>0&&(_+=`
`),v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y].filter(Eg).join(`
`),v.length>0&&(v+=`
`)):(_=[_F(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Eg).join(`
`),v=[_F(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==il?"#define TONE_MAPPING":"",t.toneMapping!==il?rn.tonemapping_pars_fragment:"",t.toneMapping!==il?Tle("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",rn.colorspace_pars_fragment,Ele("linearToOutputTexel",t.outputColorSpace),Cle(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Eg).join(`
`)),a=oA(a),a=yF(a,t),a=vF(a,t),o=oA(o),o=yF(o,t),o=vF(o,t),a=xF(a),o=xF(o),t.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,_=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,v=["#define varying in",t.glslVersion===QC?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===QC?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const w=b+_+a,S=b+v+o,A=pF(r,r.VERTEX_SHADER,w),P=pF(r,r.FRAGMENT_SHADER,S);r.attachShader(x,A),r.attachShader(x,P),t.index0AttributeName!==void 0?r.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(x,0,"position"),r.linkProgram(x);function k(I){if(n.debug.checkShaderErrors){const D=r.getProgramInfoLog(x).trim(),B=r.getShaderInfoLog(A).trim(),G=r.getShaderInfoLog(P).trim();let Y=!0,X=!0;if(r.getProgramParameter(x,r.LINK_STATUS)===!1)if(Y=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,x,A,P);else{const Q=gF(r,A,"vertex"),L=gF(r,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(x,r.VALIDATE_STATUS)+`

Material Name: `+I.name+`
Material Type: `+I.type+`

Program Info Log: `+D+`
`+Q+`
`+L)}else D!==""?console.warn("THREE.WebGLProgram: Program Info Log:",D):(B===""||G==="")&&(X=!1);X&&(I.diagnostics={runnable:Y,programLog:D,vertexShader:{log:B,prefix:_},fragmentShader:{log:G,prefix:v}})}r.deleteShader(A),r.deleteShader(P),T=new _1(r,x),E=Rle(r,x)}let T;this.getUniforms=function(){return T===void 0&&k(this),T};let E;this.getAttributes=function(){return E===void 0&&k(this),E};let R=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return R===!1&&(R=r.getProgramParameter(x,ble)),R},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=wle++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=A,this.fragmentShader=P,this}let Hle=0;class Vle{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new $le(e),t.set(e,i)),i}}class $le{constructor(e){this.id=Hle++,this.code=e,this.usedTimes=0}}function Wle(n,e,t,i,r,s,a){const o=new rh,l=new Vle,c=new Set,u=[],d=r.logarithmicDepthBuffer,h=r.vertexTextures;let p=r.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(E){return c.add(E),E===0?"uv":`uv${E}`}function _(E,R,I,D,B){const G=D.fog,Y=B.geometry,X=E.isMeshStandardMaterial?D.environment:null,Q=(E.isMeshStandardMaterial?t:e).get(E.envMap||X),L=Q&&Q.mapping===cm?Q.image.height:null,W=y[E.type];E.precision!==null&&(p=r.getMaxPrecision(E.precision),p!==E.precision&&console.warn("THREE.WebGLProgram.getParameters:",E.precision,"not supported, using",p,"instead."));const j=Y.morphAttributes.position||Y.morphAttributes.normal||Y.morphAttributes.color,te=j!==void 0?j.length:0;let ae=0;Y.morphAttributes.position!==void 0&&(ae=1),Y.morphAttributes.normal!==void 0&&(ae=2),Y.morphAttributes.color!==void 0&&(ae=3);let me,K,re,oe;if(W){const ft=yo[W];me=ft.vertexShader,K=ft.fragmentShader}else me=E.vertexShader,K=E.fragmentShader,l.update(E),re=l.getVertexShaderID(E),oe=l.getFragmentShaderID(E);const _e=n.getRenderTarget(),Ce=n.state.buffers.depth.getReversed(),Ee=B.isInstancedMesh===!0,Pe=B.isBatchedMesh===!0,De=!!E.map,xe=!!E.matcap,we=!!Q,$=!!E.aoMap,Se=!!E.lightMap,de=!!E.bumpMap,J=!!E.normalMap,ue=!!E.displacementMap,je=!!E.emissiveMap,Le=!!E.metalnessMap,Xe=!!E.roughnessMap,gt=E.anisotropy>0,V=E.clearcoat>0,O=E.dispersion>0,ee=E.iridescence>0,le=E.sheen>0,ge=E.transmission>0,ye=gt&&!!E.anisotropyMap,Oe=V&&!!E.clearcoatMap,Te=V&&!!E.clearcoatNormalMap,ze=V&&!!E.clearcoatRoughnessMap,Je=ee&&!!E.iridescenceMap,He=ee&&!!E.iridescenceThicknessMap,nt=le&&!!E.sheenColorMap,Tt=le&&!!E.sheenRoughnessMap,st=!!E.specularMap,We=!!E.specularColorMap,vt=!!E.specularIntensityMap,ce=ge&&!!E.transmissionMap,ke=ge&&!!E.thicknessMap,Ge=!!E.gradientMap,ht=!!E.alphaMap,Qe=E.alphaTest>0,Ve=!!E.alphaHash,xt=!!E.extensions;let Ot=il;E.toneMapped&&(_e===null||_e.isXRRenderTarget===!0)&&(Ot=n.toneMapping);const bn={shaderID:W,shaderType:E.type,shaderName:E.name,vertexShader:me,fragmentShader:K,defines:E.defines,customVertexShaderID:re,customFragmentShaderID:oe,isRawShaderMaterial:E.isRawShaderMaterial===!0,glslVersion:E.glslVersion,precision:p,batching:Pe,batchingColor:Pe&&B._colorsTexture!==null,instancing:Ee,instancingColor:Ee&&B.instanceColor!==null,instancingMorph:Ee&&B.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:_e===null?n.outputColorSpace:_e.isXRRenderTarget===!0?_e.texture.colorSpace:ll,alphaToCoverage:!!E.alphaToCoverage,map:De,matcap:xe,envMap:we,envMapMode:we&&Q.mapping,envMapCubeUVHeight:L,aoMap:$,lightMap:Se,bumpMap:de,normalMap:J,displacementMap:h&&ue,emissiveMap:je,normalMapObjectSpace:J&&E.normalMapType===ZB,normalMapTangentSpace:J&&E.normalMapType===Hu,metalnessMap:Le,roughnessMap:Xe,anisotropy:gt,anisotropyMap:ye,clearcoat:V,clearcoatMap:Oe,clearcoatNormalMap:Te,clearcoatRoughnessMap:ze,dispersion:O,iridescence:ee,iridescenceMap:Je,iridescenceThicknessMap:He,sheen:le,sheenColorMap:nt,sheenRoughnessMap:Tt,specularMap:st,specularColorMap:We,specularIntensityMap:vt,transmission:ge,transmissionMap:ce,thicknessMap:ke,gradientMap:Ge,opaque:E.transparent===!1&&E.blending===nh&&E.alphaToCoverage===!1,alphaMap:ht,alphaTest:Qe,alphaHash:Ve,combine:E.combine,mapUv:De&&x(E.map.channel),aoMapUv:$&&x(E.aoMap.channel),lightMapUv:Se&&x(E.lightMap.channel),bumpMapUv:de&&x(E.bumpMap.channel),normalMapUv:J&&x(E.normalMap.channel),displacementMapUv:ue&&x(E.displacementMap.channel),emissiveMapUv:je&&x(E.emissiveMap.channel),metalnessMapUv:Le&&x(E.metalnessMap.channel),roughnessMapUv:Xe&&x(E.roughnessMap.channel),anisotropyMapUv:ye&&x(E.anisotropyMap.channel),clearcoatMapUv:Oe&&x(E.clearcoatMap.channel),clearcoatNormalMapUv:Te&&x(E.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ze&&x(E.clearcoatRoughnessMap.channel),iridescenceMapUv:Je&&x(E.iridescenceMap.channel),iridescenceThicknessMapUv:He&&x(E.iridescenceThicknessMap.channel),sheenColorMapUv:nt&&x(E.sheenColorMap.channel),sheenRoughnessMapUv:Tt&&x(E.sheenRoughnessMap.channel),specularMapUv:st&&x(E.specularMap.channel),specularColorMapUv:We&&x(E.specularColorMap.channel),specularIntensityMapUv:vt&&x(E.specularIntensityMap.channel),transmissionMapUv:ce&&x(E.transmissionMap.channel),thicknessMapUv:ke&&x(E.thicknessMap.channel),alphaMapUv:ht&&x(E.alphaMap.channel),vertexTangents:!!Y.attributes.tangent&&(J||gt),vertexColors:E.vertexColors,vertexAlphas:E.vertexColors===!0&&!!Y.attributes.color&&Y.attributes.color.itemSize===4,pointsUvs:B.isPoints===!0&&!!Y.attributes.uv&&(De||ht),fog:!!G,useFog:E.fog===!0,fogExp2:!!G&&G.isFogExp2,flatShading:E.flatShading===!0,sizeAttenuation:E.sizeAttenuation===!0,logarithmicDepthBuffer:d,reverseDepthBuffer:Ce,skinning:B.isSkinnedMesh===!0,morphTargets:Y.morphAttributes.position!==void 0,morphNormals:Y.morphAttributes.normal!==void 0,morphColors:Y.morphAttributes.color!==void 0,morphTargetsCount:te,morphTextureStride:ae,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numLightProbes:R.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:E.dithering,shadowMapEnabled:n.shadowMap.enabled&&I.length>0,shadowMapType:n.shadowMap.type,toneMapping:Ot,decodeVideoTexture:De&&E.map.isVideoTexture===!0&&qt.getTransfer(E.map.colorSpace)===Dn,decodeVideoTextureEmissive:je&&E.emissiveMap.isVideoTexture===!0&&qt.getTransfer(E.emissiveMap.colorSpace)===Dn,premultipliedAlpha:E.premultipliedAlpha,doubleSided:E.side===xo,flipSided:E.side===ms,useDepthPacking:E.depthPacking>=0,depthPacking:E.depthPacking||0,index0AttributeName:E.index0AttributeName,extensionClipCullDistance:xt&&E.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(xt&&E.extensions.multiDraw===!0||Pe)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:E.customProgramCacheKey()};return bn.vertexUv1s=c.has(1),bn.vertexUv2s=c.has(2),bn.vertexUv3s=c.has(3),c.clear(),bn}function v(E){const R=[];if(E.shaderID?R.push(E.shaderID):(R.push(E.customVertexShaderID),R.push(E.customFragmentShaderID)),E.defines!==void 0)for(const I in E.defines)R.push(I),R.push(E.defines[I]);return E.isRawShaderMaterial===!1&&(b(R,E),w(R,E),R.push(n.outputColorSpace)),R.push(E.customProgramCacheKey),R.join()}function b(E,R){E.push(R.precision),E.push(R.outputColorSpace),E.push(R.envMapMode),E.push(R.envMapCubeUVHeight),E.push(R.mapUv),E.push(R.alphaMapUv),E.push(R.lightMapUv),E.push(R.aoMapUv),E.push(R.bumpMapUv),E.push(R.normalMapUv),E.push(R.displacementMapUv),E.push(R.emissiveMapUv),E.push(R.metalnessMapUv),E.push(R.roughnessMapUv),E.push(R.anisotropyMapUv),E.push(R.clearcoatMapUv),E.push(R.clearcoatNormalMapUv),E.push(R.clearcoatRoughnessMapUv),E.push(R.iridescenceMapUv),E.push(R.iridescenceThicknessMapUv),E.push(R.sheenColorMapUv),E.push(R.sheenRoughnessMapUv),E.push(R.specularMapUv),E.push(R.specularColorMapUv),E.push(R.specularIntensityMapUv),E.push(R.transmissionMapUv),E.push(R.thicknessMapUv),E.push(R.combine),E.push(R.fogExp2),E.push(R.sizeAttenuation),E.push(R.morphTargetsCount),E.push(R.morphAttributeCount),E.push(R.numDirLights),E.push(R.numPointLights),E.push(R.numSpotLights),E.push(R.numSpotLightMaps),E.push(R.numHemiLights),E.push(R.numRectAreaLights),E.push(R.numDirLightShadows),E.push(R.numPointLightShadows),E.push(R.numSpotLightShadows),E.push(R.numSpotLightShadowsWithMaps),E.push(R.numLightProbes),E.push(R.shadowMapType),E.push(R.toneMapping),E.push(R.numClippingPlanes),E.push(R.numClipIntersection),E.push(R.depthPacking)}function w(E,R){o.disableAll(),R.supportsVertexTextures&&o.enable(0),R.instancing&&o.enable(1),R.instancingColor&&o.enable(2),R.instancingMorph&&o.enable(3),R.matcap&&o.enable(4),R.envMap&&o.enable(5),R.normalMapObjectSpace&&o.enable(6),R.normalMapTangentSpace&&o.enable(7),R.clearcoat&&o.enable(8),R.iridescence&&o.enable(9),R.alphaTest&&o.enable(10),R.vertexColors&&o.enable(11),R.vertexAlphas&&o.enable(12),R.vertexUv1s&&o.enable(13),R.vertexUv2s&&o.enable(14),R.vertexUv3s&&o.enable(15),R.vertexTangents&&o.enable(16),R.anisotropy&&o.enable(17),R.alphaHash&&o.enable(18),R.batching&&o.enable(19),R.dispersion&&o.enable(20),R.batchingColor&&o.enable(21),E.push(o.mask),o.disableAll(),R.fog&&o.enable(0),R.useFog&&o.enable(1),R.flatShading&&o.enable(2),R.logarithmicDepthBuffer&&o.enable(3),R.reverseDepthBuffer&&o.enable(4),R.skinning&&o.enable(5),R.morphTargets&&o.enable(6),R.morphNormals&&o.enable(7),R.morphColors&&o.enable(8),R.premultipliedAlpha&&o.enable(9),R.shadowMapEnabled&&o.enable(10),R.doubleSided&&o.enable(11),R.flipSided&&o.enable(12),R.useDepthPacking&&o.enable(13),R.dithering&&o.enable(14),R.transmission&&o.enable(15),R.sheen&&o.enable(16),R.opaque&&o.enable(17),R.pointsUvs&&o.enable(18),R.decodeVideoTexture&&o.enable(19),R.decodeVideoTextureEmissive&&o.enable(20),R.alphaToCoverage&&o.enable(21),E.push(o.mask)}function S(E){const R=y[E.type];let I;if(R){const D=yo[R];I=u6.clone(D.uniforms)}else I=E.uniforms;return I}function A(E,R){let I;for(let D=0,B=u.length;D<B;D++){const G=u[D];if(G.cacheKey===R){I=G,++I.usedTimes;break}}return I===void 0&&(I=new Ble(n,R,E,s),u.push(I)),I}function P(E){if(--E.usedTimes===0){const R=u.indexOf(E);u[R]=u[u.length-1],u.pop(),E.destroy()}}function k(E){l.remove(E)}function T(){l.dispose()}return{getParameters:_,getProgramCacheKey:v,getUniforms:S,acquireProgram:A,releaseProgram:P,releaseShaderCache:k,programs:u,dispose:T}}function Gle(){let n=new WeakMap;function e(a){return n.has(a)}function t(a){let o=n.get(a);return o===void 0&&(o={},n.set(a,o)),o}function i(a){n.delete(a)}function r(a,o,l){n.get(a)[o]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function qle(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function bF(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function wF(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function a(d,h,p,y,x,_){let v=n[e];return v===void 0?(v={id:d.id,object:d,geometry:h,material:p,groupOrder:y,renderOrder:d.renderOrder,z:x,group:_},n[e]=v):(v.id=d.id,v.object=d,v.geometry=h,v.material=p,v.groupOrder=y,v.renderOrder=d.renderOrder,v.z=x,v.group=_),e++,v}function o(d,h,p,y,x,_){const v=a(d,h,p,y,x,_);p.transmission>0?i.push(v):p.transparent===!0?r.push(v):t.push(v)}function l(d,h,p,y,x,_){const v=a(d,h,p,y,x,_);p.transmission>0?i.unshift(v):p.transparent===!0?r.unshift(v):t.unshift(v)}function c(d,h){t.length>1&&t.sort(d||qle),i.length>1&&i.sort(h||bF),r.length>1&&r.sort(h||bF)}function u(){for(let d=e,h=n.length;d<h;d++){const p=n[d];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:o,unshift:l,finish:u,sort:c}}function Xle(){let n=new WeakMap;function e(i,r){const s=n.get(i);let a;return s===void 0?(a=new wF,n.set(i,[a])):r>=s.length?(a=new wF,s.push(a)):a=s[r],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function Yle(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Z,color:new ct};break;case"SpotLight":t={position:new Z,direction:new Z,color:new ct,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Z,color:new ct,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Z,skyColor:new ct,groundColor:new ct};break;case"RectAreaLight":t={color:new ct,position:new Z,halfWidth:new Z,halfHeight:new Z};break}return n[e.id]=t,t}}}function Kle(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let Zle=0;function Jle(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Qle(n){const e=new Yle,t=Kle(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new Z);const r=new Z,s=new wt,a=new wt;function o(c){let u=0,d=0,h=0;for(let E=0;E<9;E++)i.probe[E].set(0,0,0);let p=0,y=0,x=0,_=0,v=0,b=0,w=0,S=0,A=0,P=0,k=0;c.sort(Jle);for(let E=0,R=c.length;E<R;E++){const I=c[E],D=I.color,B=I.intensity,G=I.distance,Y=I.shadow&&I.shadow.map?I.shadow.map.texture:null;if(I.isAmbientLight)u+=D.r*B,d+=D.g*B,h+=D.b*B;else if(I.isLightProbe){for(let X=0;X<9;X++)i.probe[X].addScaledVector(I.sh.coefficients[X],B);k++}else if(I.isDirectionalLight){const X=e.get(I);if(X.color.copy(I.color).multiplyScalar(I.intensity),I.castShadow){const Q=I.shadow,L=t.get(I);L.shadowIntensity=Q.intensity,L.shadowBias=Q.bias,L.shadowNormalBias=Q.normalBias,L.shadowRadius=Q.radius,L.shadowMapSize=Q.mapSize,i.directionalShadow[p]=L,i.directionalShadowMap[p]=Y,i.directionalShadowMatrix[p]=I.shadow.matrix,b++}i.directional[p]=X,p++}else if(I.isSpotLight){const X=e.get(I);X.position.setFromMatrixPosition(I.matrixWorld),X.color.copy(D).multiplyScalar(B),X.distance=G,X.coneCos=Math.cos(I.angle),X.penumbraCos=Math.cos(I.angle*(1-I.penumbra)),X.decay=I.decay,i.spot[x]=X;const Q=I.shadow;if(I.map&&(i.spotLightMap[A]=I.map,A++,Q.updateMatrices(I),I.castShadow&&P++),i.spotLightMatrix[x]=Q.matrix,I.castShadow){const L=t.get(I);L.shadowIntensity=Q.intensity,L.shadowBias=Q.bias,L.shadowNormalBias=Q.normalBias,L.shadowRadius=Q.radius,L.shadowMapSize=Q.mapSize,i.spotShadow[x]=L,i.spotShadowMap[x]=Y,S++}x++}else if(I.isRectAreaLight){const X=e.get(I);X.color.copy(D).multiplyScalar(B),X.halfWidth.set(I.width*.5,0,0),X.halfHeight.set(0,I.height*.5,0),i.rectArea[_]=X,_++}else if(I.isPointLight){const X=e.get(I);if(X.color.copy(I.color).multiplyScalar(I.intensity),X.distance=I.distance,X.decay=I.decay,I.castShadow){const Q=I.shadow,L=t.get(I);L.shadowIntensity=Q.intensity,L.shadowBias=Q.bias,L.shadowNormalBias=Q.normalBias,L.shadowRadius=Q.radius,L.shadowMapSize=Q.mapSize,L.shadowCameraNear=Q.camera.near,L.shadowCameraFar=Q.camera.far,i.pointShadow[y]=L,i.pointShadowMap[y]=Y,i.pointShadowMatrix[y]=I.shadow.matrix,w++}i.point[y]=X,y++}else if(I.isHemisphereLight){const X=e.get(I);X.skyColor.copy(I.color).multiplyScalar(B),X.groundColor.copy(I.groundColor).multiplyScalar(B),i.hemi[v]=X,v++}}_>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=pt.LTC_FLOAT_1,i.rectAreaLTC2=pt.LTC_FLOAT_2):(i.rectAreaLTC1=pt.LTC_HALF_1,i.rectAreaLTC2=pt.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=d,i.ambient[2]=h;const T=i.hash;(T.directionalLength!==p||T.pointLength!==y||T.spotLength!==x||T.rectAreaLength!==_||T.hemiLength!==v||T.numDirectionalShadows!==b||T.numPointShadows!==w||T.numSpotShadows!==S||T.numSpotMaps!==A||T.numLightProbes!==k)&&(i.directional.length=p,i.spot.length=x,i.rectArea.length=_,i.point.length=y,i.hemi.length=v,i.directionalShadow.length=b,i.directionalShadowMap.length=b,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=S,i.spotShadowMap.length=S,i.directionalShadowMatrix.length=b,i.pointShadowMatrix.length=w,i.spotLightMatrix.length=S+A-P,i.spotLightMap.length=A,i.numSpotLightShadowsWithMaps=P,i.numLightProbes=k,T.directionalLength=p,T.pointLength=y,T.spotLength=x,T.rectAreaLength=_,T.hemiLength=v,T.numDirectionalShadows=b,T.numPointShadows=w,T.numSpotShadows=S,T.numSpotMaps=A,T.numLightProbes=k,i.version=Zle++)}function l(c,u){let d=0,h=0,p=0,y=0,x=0;const _=u.matrixWorldInverse;for(let v=0,b=c.length;v<b;v++){const w=c[v];if(w.isDirectionalLight){const S=i.directional[d];S.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),S.direction.sub(r),S.direction.transformDirection(_),d++}else if(w.isSpotLight){const S=i.spot[p];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(_),S.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),S.direction.sub(r),S.direction.transformDirection(_),p++}else if(w.isRectAreaLight){const S=i.rectArea[y];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(_),a.identity(),s.copy(w.matrixWorld),s.premultiply(_),a.extractRotation(s),S.halfWidth.set(w.width*.5,0,0),S.halfHeight.set(0,w.height*.5,0),S.halfWidth.applyMatrix4(a),S.halfHeight.applyMatrix4(a),y++}else if(w.isPointLight){const S=i.point[h];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(_),h++}else if(w.isHemisphereLight){const S=i.hemi[x];S.direction.setFromMatrixPosition(w.matrixWorld),S.direction.transformDirection(_),x++}}}return{setup:o,setupView:l,state:i}}function SF(n){const e=new Qle(n),t=[],i=[];function r(u){c.camera=u,t.length=0,i.length=0}function s(u){t.push(u)}function a(u){i.push(u)}function o(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:o,setupLightsView:l,pushLight:s,pushShadow:a}}function ece(n){let e=new WeakMap;function t(r,s=0){const a=e.get(r);let o;return a===void 0?(o=new SF(n),e.set(r,[o])):s>=a.length?(o=new SF(n),a.push(o)):o=a[s],o}function i(){e=new WeakMap}return{get:t,dispose:i}}const tce=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,nce=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function ice(n,e,t){let i=new dm;const r=new Ye,s=new Ye,a=new mn,o=new $R({depthPacking:KB}),l=new WR,c={},u=t.maxTextureSize,d={[sl]:ms,[ms]:sl,[xo]:xo},h=new js({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ye},radius:{value:4}},vertexShader:tce,fragmentShader:nce}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const y=new Wt;y.setAttribute("position",new zn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new Zn(y,h),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=cS;let v=this.type;this.render=function(P,k,T){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||P.length===0)return;const E=n.getRenderTarget(),R=n.getActiveCubeFace(),I=n.getActiveMipmapLevel(),D=n.state;D.setBlending(nl),D.buffers.color.setClear(1,1,1,1),D.buffers.depth.setTest(!0),D.setScissorTest(!1);const B=v!==ho&&this.type===ho,G=v===ho&&this.type!==ho;for(let Y=0,X=P.length;Y<X;Y++){const Q=P[Y],L=Q.shadow;if(L===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if(L.autoUpdate===!1&&L.needsUpdate===!1)continue;r.copy(L.mapSize);const W=L.getFrameExtents();if(r.multiply(W),s.copy(L.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/W.x),r.x=s.x*W.x,L.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/W.y),r.y=s.y*W.y,L.mapSize.y=s.y)),L.map===null||B===!0||G===!0){const te=this.type!==ho?{minFilter:Tr,magFilter:Tr}:{};L.map!==null&&L.map.dispose(),L.map=new Ya(r.x,r.y,te),L.map.texture.name=Q.name+".shadowMap",L.camera.updateProjectionMatrix()}n.setRenderTarget(L.map),n.clear();const j=L.getViewportCount();for(let te=0;te<j;te++){const ae=L.getViewport(te);a.set(s.x*ae.x,s.y*ae.y,s.x*ae.z,s.y*ae.w),D.viewport(a),L.updateMatrices(Q,te),i=L.getFrustum(),S(k,T,L.camera,Q,this.type)}L.isPointLightShadow!==!0&&this.type===ho&&b(L,T),L.needsUpdate=!1}v=this.type,_.needsUpdate=!1,n.setRenderTarget(E,R,I)};function b(P,k){const T=e.update(x);h.defines.VSM_SAMPLES!==P.blurSamples&&(h.defines.VSM_SAMPLES=P.blurSamples,p.defines.VSM_SAMPLES=P.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),P.mapPass===null&&(P.mapPass=new Ya(r.x,r.y)),h.uniforms.shadow_pass.value=P.map.texture,h.uniforms.resolution.value=P.mapSize,h.uniforms.radius.value=P.radius,n.setRenderTarget(P.mapPass),n.clear(),n.renderBufferDirect(k,null,T,h,x,null),p.uniforms.shadow_pass.value=P.mapPass.texture,p.uniforms.resolution.value=P.mapSize,p.uniforms.radius.value=P.radius,n.setRenderTarget(P.map),n.clear(),n.renderBufferDirect(k,null,T,p,x,null)}function w(P,k,T,E){let R=null;const I=T.isPointLight===!0?P.customDistanceMaterial:P.customDepthMaterial;if(I!==void 0)R=I;else if(R=T.isPointLight===!0?l:o,n.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0||k.alphaToCoverage===!0){const D=R.uuid,B=k.uuid;let G=c[D];G===void 0&&(G={},c[D]=G);let Y=G[B];Y===void 0&&(Y=R.clone(),G[B]=Y,k.addEventListener("dispose",A)),R=Y}if(R.visible=k.visible,R.wireframe=k.wireframe,E===ho?R.side=k.shadowSide!==null?k.shadowSide:k.side:R.side=k.shadowSide!==null?k.shadowSide:d[k.side],R.alphaMap=k.alphaMap,R.alphaTest=k.alphaToCoverage===!0?.5:k.alphaTest,R.map=k.map,R.clipShadows=k.clipShadows,R.clippingPlanes=k.clippingPlanes,R.clipIntersection=k.clipIntersection,R.displacementMap=k.displacementMap,R.displacementScale=k.displacementScale,R.displacementBias=k.displacementBias,R.wireframeLinewidth=k.wireframeLinewidth,R.linewidth=k.linewidth,T.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const D=n.properties.get(R);D.light=T}return R}function S(P,k,T,E,R){if(P.visible===!1)return;if(P.layers.test(k.layers)&&(P.isMesh||P.isLine||P.isPoints)&&(P.castShadow||P.receiveShadow&&R===ho)&&(!P.frustumCulled||i.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices(T.matrixWorldInverse,P.matrixWorld);const B=e.update(P),G=P.material;if(Array.isArray(G)){const Y=B.groups;for(let X=0,Q=Y.length;X<Q;X++){const L=Y[X],W=G[L.materialIndex];if(W&&W.visible){const j=w(P,W,E,R);P.onBeforeShadow(n,P,k,T,B,j,L),n.renderBufferDirect(T,null,B,j,P,L),P.onAfterShadow(n,P,k,T,B,j,L)}}}else if(G.visible){const Y=w(P,G,E,R);P.onBeforeShadow(n,P,k,T,B,Y,null),n.renderBufferDirect(T,null,B,Y,P,null),P.onAfterShadow(n,P,k,T,B,Y,null)}}const D=P.children;for(let B=0,G=D.length;B<G;B++)S(D[B],k,T,E,R)}function A(P){P.target.removeEventListener("dispose",A);for(const T in c){const E=c[T],R=P.target.uuid;R in E&&(E[R].dispose(),delete E[R])}}}const rce={[wb]:Sb,[Mb]:Cb,[Eb]:Ab,[wh]:Tb,[Sb]:wb,[Cb]:Mb,[Ab]:Eb,[Tb]:wh};function sce(n,e){function t(){let ce=!1;const ke=new mn;let Ge=null;const ht=new mn(0,0,0,0);return{setMask:function(Qe){Ge!==Qe&&!ce&&(n.colorMask(Qe,Qe,Qe,Qe),Ge=Qe)},setLocked:function(Qe){ce=Qe},setClear:function(Qe,Ve,xt,Ot,bn){bn===!0&&(Qe*=Ot,Ve*=Ot,xt*=Ot),ke.set(Qe,Ve,xt,Ot),ht.equals(ke)===!1&&(n.clearColor(Qe,Ve,xt,Ot),ht.copy(ke))},reset:function(){ce=!1,Ge=null,ht.set(-1,0,0,0)}}}function i(){let ce=!1,ke=!1,Ge=null,ht=null,Qe=null;return{setReversed:function(Ve){if(ke!==Ve){const xt=e.get("EXT_clip_control");Ve?xt.clipControlEXT(xt.LOWER_LEFT_EXT,xt.ZERO_TO_ONE_EXT):xt.clipControlEXT(xt.LOWER_LEFT_EXT,xt.NEGATIVE_ONE_TO_ONE_EXT),ke=Ve;const Ot=Qe;Qe=null,this.setClear(Ot)}},getReversed:function(){return ke},setTest:function(Ve){Ve?_e(n.DEPTH_TEST):Ce(n.DEPTH_TEST)},setMask:function(Ve){Ge!==Ve&&!ce&&(n.depthMask(Ve),Ge=Ve)},setFunc:function(Ve){if(ke&&(Ve=rce[Ve]),ht!==Ve){switch(Ve){case wb:n.depthFunc(n.NEVER);break;case Sb:n.depthFunc(n.ALWAYS);break;case Mb:n.depthFunc(n.LESS);break;case wh:n.depthFunc(n.LEQUAL);break;case Eb:n.depthFunc(n.EQUAL);break;case Tb:n.depthFunc(n.GEQUAL);break;case Cb:n.depthFunc(n.GREATER);break;case Ab:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ht=Ve}},setLocked:function(Ve){ce=Ve},setClear:function(Ve){Qe!==Ve&&(ke&&(Ve=1-Ve),n.clearDepth(Ve),Qe=Ve)},reset:function(){ce=!1,Ge=null,ht=null,Qe=null,ke=!1}}}function r(){let ce=!1,ke=null,Ge=null,ht=null,Qe=null,Ve=null,xt=null,Ot=null,bn=null;return{setTest:function(ft){ce||(ft?_e(n.STENCIL_TEST):Ce(n.STENCIL_TEST))},setMask:function(ft){ke!==ft&&!ce&&(n.stencilMask(ft),ke=ft)},setFunc:function(ft,Ct,Gt){(Ge!==ft||ht!==Ct||Qe!==Gt)&&(n.stencilFunc(ft,Ct,Gt),Ge=ft,ht=Ct,Qe=Gt)},setOp:function(ft,Ct,Gt){(Ve!==ft||xt!==Ct||Ot!==Gt)&&(n.stencilOp(ft,Ct,Gt),Ve=ft,xt=Ct,Ot=Gt)},setLocked:function(ft){ce=ft},setClear:function(ft){bn!==ft&&(n.clearStencil(ft),bn=ft)},reset:function(){ce=!1,ke=null,Ge=null,ht=null,Qe=null,Ve=null,xt=null,Ot=null,bn=null}}}const s=new t,a=new i,o=new r,l=new WeakMap,c=new WeakMap;let u={},d={},h=new WeakMap,p=[],y=null,x=!1,_=null,v=null,b=null,w=null,S=null,A=null,P=null,k=new ct(0,0,0),T=0,E=!1,R=null,I=null,D=null,B=null,G=null;const Y=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let X=!1,Q=0;const L=n.getParameter(n.VERSION);L.indexOf("WebGL")!==-1?(Q=parseFloat(/^WebGL (\d)/.exec(L)[1]),X=Q>=1):L.indexOf("OpenGL ES")!==-1&&(Q=parseFloat(/^OpenGL ES (\d)/.exec(L)[1]),X=Q>=2);let W=null,j={};const te=n.getParameter(n.SCISSOR_BOX),ae=n.getParameter(n.VIEWPORT),me=new mn().fromArray(te),K=new mn().fromArray(ae);function re(ce,ke,Ge,ht){const Qe=new Uint8Array(4),Ve=n.createTexture();n.bindTexture(ce,Ve),n.texParameteri(ce,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ce,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let xt=0;xt<Ge;xt++)ce===n.TEXTURE_3D||ce===n.TEXTURE_2D_ARRAY?n.texImage3D(ke,0,n.RGBA,1,1,ht,0,n.RGBA,n.UNSIGNED_BYTE,Qe):n.texImage2D(ke+xt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Qe);return Ve}const oe={};oe[n.TEXTURE_2D]=re(n.TEXTURE_2D,n.TEXTURE_2D,1),oe[n.TEXTURE_CUBE_MAP]=re(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),oe[n.TEXTURE_2D_ARRAY]=re(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),oe[n.TEXTURE_3D]=re(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),o.setClear(0),_e(n.DEPTH_TEST),a.setFunc(wh),de(!1),J(GC),_e(n.CULL_FACE),$(nl);function _e(ce){u[ce]!==!0&&(n.enable(ce),u[ce]=!0)}function Ce(ce){u[ce]!==!1&&(n.disable(ce),u[ce]=!1)}function Ee(ce,ke){return d[ce]!==ke?(n.bindFramebuffer(ce,ke),d[ce]=ke,ce===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=ke),ce===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=ke),!0):!1}function Pe(ce,ke){let Ge=p,ht=!1;if(ce){Ge=h.get(ke),Ge===void 0&&(Ge=[],h.set(ke,Ge));const Qe=ce.textures;if(Ge.length!==Qe.length||Ge[0]!==n.COLOR_ATTACHMENT0){for(let Ve=0,xt=Qe.length;Ve<xt;Ve++)Ge[Ve]=n.COLOR_ATTACHMENT0+Ve;Ge.length=Qe.length,ht=!0}}else Ge[0]!==n.BACK&&(Ge[0]=n.BACK,ht=!0);ht&&n.drawBuffers(Ge)}function De(ce){return y!==ce?(n.useProgram(ce),y=ce,!0):!1}const xe={[Wc]:n.FUNC_ADD,[_B]:n.FUNC_SUBTRACT,[bB]:n.FUNC_REVERSE_SUBTRACT};xe[wB]=n.MIN,xe[SB]=n.MAX;const we={[MB]:n.ZERO,[EB]:n.ONE,[TB]:n.SRC_COLOR,[_b]:n.SRC_ALPHA,[NB]:n.SRC_ALPHA_SATURATE,[RB]:n.DST_COLOR,[AB]:n.DST_ALPHA,[CB]:n.ONE_MINUS_SRC_COLOR,[bb]:n.ONE_MINUS_SRC_ALPHA,[kB]:n.ONE_MINUS_DST_COLOR,[PB]:n.ONE_MINUS_DST_ALPHA,[IB]:n.CONSTANT_COLOR,[DB]:n.ONE_MINUS_CONSTANT_COLOR,[LB]:n.CONSTANT_ALPHA,[OB]:n.ONE_MINUS_CONSTANT_ALPHA};function $(ce,ke,Ge,ht,Qe,Ve,xt,Ot,bn,ft){if(ce===nl){x===!0&&(Ce(n.BLEND),x=!1);return}if(x===!1&&(_e(n.BLEND),x=!0),ce!==xB){if(ce!==_||ft!==E){if((v!==Wc||S!==Wc)&&(n.blendEquation(n.FUNC_ADD),v=Wc,S=Wc),ft)switch(ce){case nh:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case qC:n.blendFunc(n.ONE,n.ONE);break;case XC:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case YC:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ce);break}else switch(ce){case nh:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case qC:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case XC:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case YC:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ce);break}b=null,w=null,A=null,P=null,k.set(0,0,0),T=0,_=ce,E=ft}return}Qe=Qe||ke,Ve=Ve||Ge,xt=xt||ht,(ke!==v||Qe!==S)&&(n.blendEquationSeparate(xe[ke],xe[Qe]),v=ke,S=Qe),(Ge!==b||ht!==w||Ve!==A||xt!==P)&&(n.blendFuncSeparate(we[Ge],we[ht],we[Ve],we[xt]),b=Ge,w=ht,A=Ve,P=xt),(Ot.equals(k)===!1||bn!==T)&&(n.blendColor(Ot.r,Ot.g,Ot.b,bn),k.copy(Ot),T=bn),_=ce,E=!1}function Se(ce,ke){ce.side===xo?Ce(n.CULL_FACE):_e(n.CULL_FACE);let Ge=ce.side===ms;ke&&(Ge=!Ge),de(Ge),ce.blending===nh&&ce.transparent===!1?$(nl):$(ce.blending,ce.blendEquation,ce.blendSrc,ce.blendDst,ce.blendEquationAlpha,ce.blendSrcAlpha,ce.blendDstAlpha,ce.blendColor,ce.blendAlpha,ce.premultipliedAlpha),a.setFunc(ce.depthFunc),a.setTest(ce.depthTest),a.setMask(ce.depthWrite),s.setMask(ce.colorWrite);const ht=ce.stencilWrite;o.setTest(ht),ht&&(o.setMask(ce.stencilWriteMask),o.setFunc(ce.stencilFunc,ce.stencilRef,ce.stencilFuncMask),o.setOp(ce.stencilFail,ce.stencilZFail,ce.stencilZPass)),je(ce.polygonOffset,ce.polygonOffsetFactor,ce.polygonOffsetUnits),ce.alphaToCoverage===!0?_e(n.SAMPLE_ALPHA_TO_COVERAGE):Ce(n.SAMPLE_ALPHA_TO_COVERAGE)}function de(ce){R!==ce&&(ce?n.frontFace(n.CW):n.frontFace(n.CCW),R=ce)}function J(ce){ce!==gB?(_e(n.CULL_FACE),ce!==I&&(ce===GC?n.cullFace(n.BACK):ce===yB?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ce(n.CULL_FACE),I=ce}function ue(ce){ce!==D&&(X&&n.lineWidth(ce),D=ce)}function je(ce,ke,Ge){ce?(_e(n.POLYGON_OFFSET_FILL),(B!==ke||G!==Ge)&&(n.polygonOffset(ke,Ge),B=ke,G=Ge)):Ce(n.POLYGON_OFFSET_FILL)}function Le(ce){ce?_e(n.SCISSOR_TEST):Ce(n.SCISSOR_TEST)}function Xe(ce){ce===void 0&&(ce=n.TEXTURE0+Y-1),W!==ce&&(n.activeTexture(ce),W=ce)}function gt(ce,ke,Ge){Ge===void 0&&(W===null?Ge=n.TEXTURE0+Y-1:Ge=W);let ht=j[Ge];ht===void 0&&(ht={type:void 0,texture:void 0},j[Ge]=ht),(ht.type!==ce||ht.texture!==ke)&&(W!==Ge&&(n.activeTexture(Ge),W=Ge),n.bindTexture(ce,ke||oe[ce]),ht.type=ce,ht.texture=ke)}function V(){const ce=j[W];ce!==void 0&&ce.type!==void 0&&(n.bindTexture(ce.type,null),ce.type=void 0,ce.texture=void 0)}function O(){try{n.compressedTexImage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function ee(){try{n.compressedTexImage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function le(){try{n.texSubImage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function ge(){try{n.texSubImage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function ye(){try{n.compressedTexSubImage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Oe(){try{n.compressedTexSubImage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Te(){try{n.texStorage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function ze(){try{n.texStorage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Je(){try{n.texImage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function He(){try{n.texImage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function nt(ce){me.equals(ce)===!1&&(n.scissor(ce.x,ce.y,ce.z,ce.w),me.copy(ce))}function Tt(ce){K.equals(ce)===!1&&(n.viewport(ce.x,ce.y,ce.z,ce.w),K.copy(ce))}function st(ce,ke){let Ge=c.get(ke);Ge===void 0&&(Ge=new WeakMap,c.set(ke,Ge));let ht=Ge.get(ce);ht===void 0&&(ht=n.getUniformBlockIndex(ke,ce.name),Ge.set(ce,ht))}function We(ce,ke){const ht=c.get(ke).get(ce);l.get(ke)!==ht&&(n.uniformBlockBinding(ke,ht,ce.__bindingPointIndex),l.set(ke,ht))}function vt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),a.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},W=null,j={},d={},h=new WeakMap,p=[],y=null,x=!1,_=null,v=null,b=null,w=null,S=null,A=null,P=null,k=new ct(0,0,0),T=0,E=!1,R=null,I=null,D=null,B=null,G=null,me.set(0,0,n.canvas.width,n.canvas.height),K.set(0,0,n.canvas.width,n.canvas.height),s.reset(),a.reset(),o.reset()}return{buffers:{color:s,depth:a,stencil:o},enable:_e,disable:Ce,bindFramebuffer:Ee,drawBuffers:Pe,useProgram:De,setBlending:$,setMaterial:Se,setFlipSided:de,setCullFace:J,setLineWidth:ue,setPolygonOffset:je,setScissorTest:Le,activeTexture:Xe,bindTexture:gt,unbindTexture:V,compressedTexImage2D:O,compressedTexImage3D:ee,texImage2D:Je,texImage3D:He,updateUBOMapping:st,uniformBlockBinding:We,texStorage2D:Te,texStorage3D:ze,texSubImage2D:le,texSubImage3D:ge,compressedTexSubImage2D:ye,compressedTexSubImage3D:Oe,scissor:nt,viewport:Tt,reset:vt}}function ace(n,e,t,i,r,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Ye,u=new WeakMap;let d;const h=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(V,O){return p?new OffscreenCanvas(V,O):ay("canvas")}function x(V,O,ee){let le=1;const ge=gt(V);if((ge.width>ee||ge.height>ee)&&(le=ee/Math.max(ge.width,ge.height)),le<1)if(typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&V instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&V instanceof ImageBitmap||typeof VideoFrame<"u"&&V instanceof VideoFrame){const ye=Math.floor(le*ge.width),Oe=Math.floor(le*ge.height);d===void 0&&(d=y(ye,Oe));const Te=O?y(ye,Oe):d;return Te.width=ye,Te.height=Oe,Te.getContext("2d").drawImage(V,0,0,ye,Oe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ge.width+"x"+ge.height+") to ("+ye+"x"+Oe+")."),Te}else return"data"in V&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ge.width+"x"+ge.height+")."),V;return V}function _(V){return V.generateMipmaps}function v(V){n.generateMipmap(V)}function b(V){return V.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:V.isWebGL3DRenderTarget?n.TEXTURE_3D:V.isWebGLArrayRenderTarget||V.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function w(V,O,ee,le,ge=!1){if(V!==null){if(n[V]!==void 0)return n[V];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+V+"'")}let ye=O;if(O===n.RED&&(ee===n.FLOAT&&(ye=n.R32F),ee===n.HALF_FLOAT&&(ye=n.R16F),ee===n.UNSIGNED_BYTE&&(ye=n.R8)),O===n.RED_INTEGER&&(ee===n.UNSIGNED_BYTE&&(ye=n.R8UI),ee===n.UNSIGNED_SHORT&&(ye=n.R16UI),ee===n.UNSIGNED_INT&&(ye=n.R32UI),ee===n.BYTE&&(ye=n.R8I),ee===n.SHORT&&(ye=n.R16I),ee===n.INT&&(ye=n.R32I)),O===n.RG&&(ee===n.FLOAT&&(ye=n.RG32F),ee===n.HALF_FLOAT&&(ye=n.RG16F),ee===n.UNSIGNED_BYTE&&(ye=n.RG8)),O===n.RG_INTEGER&&(ee===n.UNSIGNED_BYTE&&(ye=n.RG8UI),ee===n.UNSIGNED_SHORT&&(ye=n.RG16UI),ee===n.UNSIGNED_INT&&(ye=n.RG32UI),ee===n.BYTE&&(ye=n.RG8I),ee===n.SHORT&&(ye=n.RG16I),ee===n.INT&&(ye=n.RG32I)),O===n.RGB_INTEGER&&(ee===n.UNSIGNED_BYTE&&(ye=n.RGB8UI),ee===n.UNSIGNED_SHORT&&(ye=n.RGB16UI),ee===n.UNSIGNED_INT&&(ye=n.RGB32UI),ee===n.BYTE&&(ye=n.RGB8I),ee===n.SHORT&&(ye=n.RGB16I),ee===n.INT&&(ye=n.RGB32I)),O===n.RGBA_INTEGER&&(ee===n.UNSIGNED_BYTE&&(ye=n.RGBA8UI),ee===n.UNSIGNED_SHORT&&(ye=n.RGBA16UI),ee===n.UNSIGNED_INT&&(ye=n.RGBA32UI),ee===n.BYTE&&(ye=n.RGBA8I),ee===n.SHORT&&(ye=n.RGBA16I),ee===n.INT&&(ye=n.RGBA32I)),O===n.RGB&&ee===n.UNSIGNED_INT_5_9_9_9_REV&&(ye=n.RGB9_E5),O===n.RGBA){const Oe=ge?iy:qt.getTransfer(le);ee===n.FLOAT&&(ye=n.RGBA32F),ee===n.HALF_FLOAT&&(ye=n.RGBA16F),ee===n.UNSIGNED_BYTE&&(ye=Oe===Dn?n.SRGB8_ALPHA8:n.RGBA8),ee===n.UNSIGNED_SHORT_4_4_4_4&&(ye=n.RGBA4),ee===n.UNSIGNED_SHORT_5_5_5_1&&(ye=n.RGB5_A1)}return(ye===n.R16F||ye===n.R32F||ye===n.RG16F||ye===n.RG32F||ye===n.RGBA16F||ye===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ye}function S(V,O){let ee;return V?O===null||O===ol||O===Op?ee=n.DEPTH24_STENCIL8:O===yi?ee=n.DEPTH32F_STENCIL8:O===Lp&&(ee=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):O===null||O===ol||O===Op?ee=n.DEPTH_COMPONENT24:O===yi?ee=n.DEPTH_COMPONENT32F:O===Lp&&(ee=n.DEPTH_COMPONENT16),ee}function A(V,O){return _(V)===!0||V.isFramebufferTexture&&V.minFilter!==Tr&&V.minFilter!==On?Math.log2(Math.max(O.width,O.height))+1:V.mipmaps!==void 0&&V.mipmaps.length>0?V.mipmaps.length:V.isCompressedTexture&&Array.isArray(V.image)?O.mipmaps.length:1}function P(V){const O=V.target;O.removeEventListener("dispose",P),T(O),O.isVideoTexture&&u.delete(O)}function k(V){const O=V.target;O.removeEventListener("dispose",k),R(O)}function T(V){const O=i.get(V);if(O.__webglInit===void 0)return;const ee=V.source,le=h.get(ee);if(le){const ge=le[O.__cacheKey];ge.usedTimes--,ge.usedTimes===0&&E(V),Object.keys(le).length===0&&h.delete(ee)}i.remove(V)}function E(V){const O=i.get(V);n.deleteTexture(O.__webglTexture);const ee=V.source,le=h.get(ee);delete le[O.__cacheKey],a.memory.textures--}function R(V){const O=i.get(V);if(V.depthTexture&&(V.depthTexture.dispose(),i.remove(V.depthTexture)),V.isWebGLCubeRenderTarget)for(let le=0;le<6;le++){if(Array.isArray(O.__webglFramebuffer[le]))for(let ge=0;ge<O.__webglFramebuffer[le].length;ge++)n.deleteFramebuffer(O.__webglFramebuffer[le][ge]);else n.deleteFramebuffer(O.__webglFramebuffer[le]);O.__webglDepthbuffer&&n.deleteRenderbuffer(O.__webglDepthbuffer[le])}else{if(Array.isArray(O.__webglFramebuffer))for(let le=0;le<O.__webglFramebuffer.length;le++)n.deleteFramebuffer(O.__webglFramebuffer[le]);else n.deleteFramebuffer(O.__webglFramebuffer);if(O.__webglDepthbuffer&&n.deleteRenderbuffer(O.__webglDepthbuffer),O.__webglMultisampledFramebuffer&&n.deleteFramebuffer(O.__webglMultisampledFramebuffer),O.__webglColorRenderbuffer)for(let le=0;le<O.__webglColorRenderbuffer.length;le++)O.__webglColorRenderbuffer[le]&&n.deleteRenderbuffer(O.__webglColorRenderbuffer[le]);O.__webglDepthRenderbuffer&&n.deleteRenderbuffer(O.__webglDepthRenderbuffer)}const ee=V.textures;for(let le=0,ge=ee.length;le<ge;le++){const ye=i.get(ee[le]);ye.__webglTexture&&(n.deleteTexture(ye.__webglTexture),a.memory.textures--),i.remove(ee[le])}i.remove(V)}let I=0;function D(){I=0}function B(){const V=I;return V>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+V+" texture units while this GPU supports only "+r.maxTextures),I+=1,V}function G(V){const O=[];return O.push(V.wrapS),O.push(V.wrapT),O.push(V.wrapR||0),O.push(V.magFilter),O.push(V.minFilter),O.push(V.anisotropy),O.push(V.internalFormat),O.push(V.format),O.push(V.type),O.push(V.generateMipmaps),O.push(V.premultiplyAlpha),O.push(V.flipY),O.push(V.unpackAlignment),O.push(V.colorSpace),O.join()}function Y(V,O){const ee=i.get(V);if(V.isVideoTexture&&Le(V),V.isRenderTargetTexture===!1&&V.version>0&&ee.__version!==V.version){const le=V.image;if(le===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(le.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{oe(ee,V,O);return}}t.bindTexture(n.TEXTURE_2D,ee.__webglTexture,n.TEXTURE0+O)}function X(V,O){const ee=i.get(V);if(V.version>0&&ee.__version!==V.version){oe(ee,V,O);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ee.__webglTexture,n.TEXTURE0+O)}function Q(V,O){const ee=i.get(V);if(V.version>0&&ee.__version!==V.version){oe(ee,V,O);return}t.bindTexture(n.TEXTURE_3D,ee.__webglTexture,n.TEXTURE0+O)}function L(V,O){const ee=i.get(V);if(V.version>0&&ee.__version!==V.version){_e(ee,V,O);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ee.__webglTexture,n.TEXTURE0+O)}const W={[Nu]:n.REPEAT,[Ai]:n.CLAMP_TO_EDGE,[ey]:n.MIRRORED_REPEAT},j={[Tr]:n.NEAREST,[wR]:n.NEAREST_MIPMAP_NEAREST,[Jf]:n.NEAREST_MIPMAP_LINEAR,[On]:n.LINEAR,[Zg]:n.LINEAR_MIPMAP_NEAREST,[Ko]:n.LINEAR_MIPMAP_LINEAR},te={[JB]:n.NEVER,[r6]:n.ALWAYS,[QB]:n.LESS,[PR]:n.LEQUAL,[e6]:n.EQUAL,[i6]:n.GEQUAL,[t6]:n.GREATER,[n6]:n.NOTEQUAL};function ae(V,O){if(O.type===yi&&e.has("OES_texture_float_linear")===!1&&(O.magFilter===On||O.magFilter===Zg||O.magFilter===Jf||O.magFilter===Ko||O.minFilter===On||O.minFilter===Zg||O.minFilter===Jf||O.minFilter===Ko)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(V,n.TEXTURE_WRAP_S,W[O.wrapS]),n.texParameteri(V,n.TEXTURE_WRAP_T,W[O.wrapT]),(V===n.TEXTURE_3D||V===n.TEXTURE_2D_ARRAY)&&n.texParameteri(V,n.TEXTURE_WRAP_R,W[O.wrapR]),n.texParameteri(V,n.TEXTURE_MAG_FILTER,j[O.magFilter]),n.texParameteri(V,n.TEXTURE_MIN_FILTER,j[O.minFilter]),O.compareFunction&&(n.texParameteri(V,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(V,n.TEXTURE_COMPARE_FUNC,te[O.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(O.magFilter===Tr||O.minFilter!==Jf&&O.minFilter!==Ko||O.type===yi&&e.has("OES_texture_float_linear")===!1)return;if(O.anisotropy>1||i.get(O).__currentAnisotropy){const ee=e.get("EXT_texture_filter_anisotropic");n.texParameterf(V,ee.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(O.anisotropy,r.getMaxAnisotropy())),i.get(O).__currentAnisotropy=O.anisotropy}}}function me(V,O){let ee=!1;V.__webglInit===void 0&&(V.__webglInit=!0,O.addEventListener("dispose",P));const le=O.source;let ge=h.get(le);ge===void 0&&(ge={},h.set(le,ge));const ye=G(O);if(ye!==V.__cacheKey){ge[ye]===void 0&&(ge[ye]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,ee=!0),ge[ye].usedTimes++;const Oe=ge[V.__cacheKey];Oe!==void 0&&(ge[V.__cacheKey].usedTimes--,Oe.usedTimes===0&&E(O)),V.__cacheKey=ye,V.__webglTexture=ge[ye].texture}return ee}function K(V,O,ee){return Math.floor(Math.floor(V/ee)/O)}function re(V,O,ee,le){const ye=V.updateRanges;if(ye.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,O.width,O.height,ee,le,O.data);else{ye.sort((He,nt)=>He.start-nt.start);let Oe=0;for(let He=1;He<ye.length;He++){const nt=ye[Oe],Tt=ye[He],st=nt.start+nt.count,We=K(Tt.start,O.width,4),vt=K(nt.start,O.width,4);Tt.start<=st+1&&We===vt&&K(Tt.start+Tt.count-1,O.width,4)===We?nt.count=Math.max(nt.count,Tt.start+Tt.count-nt.start):(++Oe,ye[Oe]=Tt)}ye.length=Oe+1;const Te=n.getParameter(n.UNPACK_ROW_LENGTH),ze=n.getParameter(n.UNPACK_SKIP_PIXELS),Je=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,O.width);for(let He=0,nt=ye.length;He<nt;He++){const Tt=ye[He],st=Math.floor(Tt.start/4),We=Math.ceil(Tt.count/4),vt=st%O.width,ce=Math.floor(st/O.width),ke=We,Ge=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,vt),n.pixelStorei(n.UNPACK_SKIP_ROWS,ce),t.texSubImage2D(n.TEXTURE_2D,0,vt,ce,ke,Ge,ee,le,O.data)}V.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,Te),n.pixelStorei(n.UNPACK_SKIP_PIXELS,ze),n.pixelStorei(n.UNPACK_SKIP_ROWS,Je)}}function oe(V,O,ee){let le=n.TEXTURE_2D;(O.isDataArrayTexture||O.isCompressedArrayTexture)&&(le=n.TEXTURE_2D_ARRAY),O.isData3DTexture&&(le=n.TEXTURE_3D);const ge=me(V,O),ye=O.source;t.bindTexture(le,V.__webglTexture,n.TEXTURE0+ee);const Oe=i.get(ye);if(ye.version!==Oe.__version||ge===!0){t.activeTexture(n.TEXTURE0+ee);const Te=qt.getPrimaries(qt.workingColorSpace),ze=O.colorSpace===Ol?null:qt.getPrimaries(O.colorSpace),Je=O.colorSpace===Ol||Te===ze?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,O.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,O.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Je);let He=x(O.image,!1,r.maxTextureSize);He=Xe(O,He);const nt=s.convert(O.format,O.colorSpace),Tt=s.convert(O.type);let st=w(O.internalFormat,nt,Tt,O.colorSpace,O.isVideoTexture);ae(le,O);let We;const vt=O.mipmaps,ce=O.isVideoTexture!==!0,ke=Oe.__version===void 0||ge===!0,Ge=ye.dataReady,ht=A(O,He);if(O.isDepthTexture)st=S(O.format===Up,O.type),ke&&(ce?t.texStorage2D(n.TEXTURE_2D,1,st,He.width,He.height):t.texImage2D(n.TEXTURE_2D,0,st,He.width,He.height,0,nt,Tt,null));else if(O.isDataTexture)if(vt.length>0){ce&&ke&&t.texStorage2D(n.TEXTURE_2D,ht,st,vt[0].width,vt[0].height);for(let Qe=0,Ve=vt.length;Qe<Ve;Qe++)We=vt[Qe],ce?Ge&&t.texSubImage2D(n.TEXTURE_2D,Qe,0,0,We.width,We.height,nt,Tt,We.data):t.texImage2D(n.TEXTURE_2D,Qe,st,We.width,We.height,0,nt,Tt,We.data);O.generateMipmaps=!1}else ce?(ke&&t.texStorage2D(n.TEXTURE_2D,ht,st,He.width,He.height),Ge&&re(O,He,nt,Tt)):t.texImage2D(n.TEXTURE_2D,0,st,He.width,He.height,0,nt,Tt,He.data);else if(O.isCompressedTexture)if(O.isCompressedArrayTexture){ce&&ke&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ht,st,vt[0].width,vt[0].height,He.depth);for(let Qe=0,Ve=vt.length;Qe<Ve;Qe++)if(We=vt[Qe],O.format!==Fi)if(nt!==null)if(ce){if(Ge)if(O.layerUpdates.size>0){const xt=sA(We.width,We.height,O.format,O.type);for(const Ot of O.layerUpdates){const bn=We.data.subarray(Ot*xt/We.data.BYTES_PER_ELEMENT,(Ot+1)*xt/We.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Qe,0,0,Ot,We.width,We.height,1,nt,bn)}O.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Qe,0,0,0,We.width,We.height,He.depth,nt,We.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Qe,st,We.width,We.height,He.depth,0,We.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ce?Ge&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Qe,0,0,0,We.width,We.height,He.depth,nt,Tt,We.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Qe,st,We.width,We.height,He.depth,0,nt,Tt,We.data)}else{ce&&ke&&t.texStorage2D(n.TEXTURE_2D,ht,st,vt[0].width,vt[0].height);for(let Qe=0,Ve=vt.length;Qe<Ve;Qe++)We=vt[Qe],O.format!==Fi?nt!==null?ce?Ge&&t.compressedTexSubImage2D(n.TEXTURE_2D,Qe,0,0,We.width,We.height,nt,We.data):t.compressedTexImage2D(n.TEXTURE_2D,Qe,st,We.width,We.height,0,We.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ce?Ge&&t.texSubImage2D(n.TEXTURE_2D,Qe,0,0,We.width,We.height,nt,Tt,We.data):t.texImage2D(n.TEXTURE_2D,Qe,st,We.width,We.height,0,nt,Tt,We.data)}else if(O.isDataArrayTexture)if(ce){if(ke&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ht,st,He.width,He.height,He.depth),Ge)if(O.layerUpdates.size>0){const Qe=sA(He.width,He.height,O.format,O.type);for(const Ve of O.layerUpdates){const xt=He.data.subarray(Ve*Qe/He.data.BYTES_PER_ELEMENT,(Ve+1)*Qe/He.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Ve,He.width,He.height,1,nt,Tt,xt)}O.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,He.width,He.height,He.depth,nt,Tt,He.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,st,He.width,He.height,He.depth,0,nt,Tt,He.data);else if(O.isData3DTexture)ce?(ke&&t.texStorage3D(n.TEXTURE_3D,ht,st,He.width,He.height,He.depth),Ge&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,He.width,He.height,He.depth,nt,Tt,He.data)):t.texImage3D(n.TEXTURE_3D,0,st,He.width,He.height,He.depth,0,nt,Tt,He.data);else if(O.isFramebufferTexture){if(ke)if(ce)t.texStorage2D(n.TEXTURE_2D,ht,st,He.width,He.height);else{let Qe=He.width,Ve=He.height;for(let xt=0;xt<ht;xt++)t.texImage2D(n.TEXTURE_2D,xt,st,Qe,Ve,0,nt,Tt,null),Qe>>=1,Ve>>=1}}else if(vt.length>0){if(ce&&ke){const Qe=gt(vt[0]);t.texStorage2D(n.TEXTURE_2D,ht,st,Qe.width,Qe.height)}for(let Qe=0,Ve=vt.length;Qe<Ve;Qe++)We=vt[Qe],ce?Ge&&t.texSubImage2D(n.TEXTURE_2D,Qe,0,0,nt,Tt,We):t.texImage2D(n.TEXTURE_2D,Qe,st,nt,Tt,We);O.generateMipmaps=!1}else if(ce){if(ke){const Qe=gt(He);t.texStorage2D(n.TEXTURE_2D,ht,st,Qe.width,Qe.height)}Ge&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,nt,Tt,He)}else t.texImage2D(n.TEXTURE_2D,0,st,nt,Tt,He);_(O)&&v(le),Oe.__version=ye.version,O.onUpdate&&O.onUpdate(O)}V.__version=O.version}function _e(V,O,ee){if(O.image.length!==6)return;const le=me(V,O),ge=O.source;t.bindTexture(n.TEXTURE_CUBE_MAP,V.__webglTexture,n.TEXTURE0+ee);const ye=i.get(ge);if(ge.version!==ye.__version||le===!0){t.activeTexture(n.TEXTURE0+ee);const Oe=qt.getPrimaries(qt.workingColorSpace),Te=O.colorSpace===Ol?null:qt.getPrimaries(O.colorSpace),ze=O.colorSpace===Ol||Oe===Te?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,O.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,O.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ze);const Je=O.isCompressedTexture||O.image[0].isCompressedTexture,He=O.image[0]&&O.image[0].isDataTexture,nt=[];for(let Ve=0;Ve<6;Ve++)!Je&&!He?nt[Ve]=x(O.image[Ve],!0,r.maxCubemapSize):nt[Ve]=He?O.image[Ve].image:O.image[Ve],nt[Ve]=Xe(O,nt[Ve]);const Tt=nt[0],st=s.convert(O.format,O.colorSpace),We=s.convert(O.type),vt=w(O.internalFormat,st,We,O.colorSpace),ce=O.isVideoTexture!==!0,ke=ye.__version===void 0||le===!0,Ge=ge.dataReady;let ht=A(O,Tt);ae(n.TEXTURE_CUBE_MAP,O);let Qe;if(Je){ce&&ke&&t.texStorage2D(n.TEXTURE_CUBE_MAP,ht,vt,Tt.width,Tt.height);for(let Ve=0;Ve<6;Ve++){Qe=nt[Ve].mipmaps;for(let xt=0;xt<Qe.length;xt++){const Ot=Qe[xt];O.format!==Fi?st!==null?ce?Ge&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,xt,0,0,Ot.width,Ot.height,st,Ot.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,xt,vt,Ot.width,Ot.height,0,Ot.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ce?Ge&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,xt,0,0,Ot.width,Ot.height,st,We,Ot.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,xt,vt,Ot.width,Ot.height,0,st,We,Ot.data)}}}else{if(Qe=O.mipmaps,ce&&ke){Qe.length>0&&ht++;const Ve=gt(nt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,ht,vt,Ve.width,Ve.height)}for(let Ve=0;Ve<6;Ve++)if(He){ce?Ge&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0,0,0,nt[Ve].width,nt[Ve].height,st,We,nt[Ve].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0,vt,nt[Ve].width,nt[Ve].height,0,st,We,nt[Ve].data);for(let xt=0;xt<Qe.length;xt++){const bn=Qe[xt].image[Ve].image;ce?Ge&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,xt+1,0,0,bn.width,bn.height,st,We,bn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,xt+1,vt,bn.width,bn.height,0,st,We,bn.data)}}else{ce?Ge&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0,0,0,st,We,nt[Ve]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0,vt,st,We,nt[Ve]);for(let xt=0;xt<Qe.length;xt++){const Ot=Qe[xt];ce?Ge&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,xt+1,0,0,st,We,Ot.image[Ve]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,xt+1,vt,st,We,Ot.image[Ve])}}}_(O)&&v(n.TEXTURE_CUBE_MAP),ye.__version=ge.version,O.onUpdate&&O.onUpdate(O)}V.__version=O.version}function Ce(V,O,ee,le,ge,ye){const Oe=s.convert(ee.format,ee.colorSpace),Te=s.convert(ee.type),ze=w(ee.internalFormat,Oe,Te,ee.colorSpace),Je=i.get(O),He=i.get(ee);if(He.__renderTarget=O,!Je.__hasExternalTextures){const nt=Math.max(1,O.width>>ye),Tt=Math.max(1,O.height>>ye);ge===n.TEXTURE_3D||ge===n.TEXTURE_2D_ARRAY?t.texImage3D(ge,ye,ze,nt,Tt,O.depth,0,Oe,Te,null):t.texImage2D(ge,ye,ze,nt,Tt,0,Oe,Te,null)}t.bindFramebuffer(n.FRAMEBUFFER,V),je(O)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,le,ge,He.__webglTexture,0,ue(O)):(ge===n.TEXTURE_2D||ge>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ge<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,le,ge,He.__webglTexture,ye),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ee(V,O,ee){if(n.bindRenderbuffer(n.RENDERBUFFER,V),O.depthBuffer){const le=O.depthTexture,ge=le&&le.isDepthTexture?le.type:null,ye=S(O.stencilBuffer,ge),Oe=O.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Te=ue(O);je(O)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Te,ye,O.width,O.height):ee?n.renderbufferStorageMultisample(n.RENDERBUFFER,Te,ye,O.width,O.height):n.renderbufferStorage(n.RENDERBUFFER,ye,O.width,O.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Oe,n.RENDERBUFFER,V)}else{const le=O.textures;for(let ge=0;ge<le.length;ge++){const ye=le[ge],Oe=s.convert(ye.format,ye.colorSpace),Te=s.convert(ye.type),ze=w(ye.internalFormat,Oe,Te,ye.colorSpace),Je=ue(O);ee&&je(O)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Je,ze,O.width,O.height):je(O)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Je,ze,O.width,O.height):n.renderbufferStorage(n.RENDERBUFFER,ze,O.width,O.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Pe(V,O){if(O&&O.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,V),!(O.depthTexture&&O.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const le=i.get(O.depthTexture);le.__renderTarget=O,(!le.__webglTexture||O.depthTexture.image.width!==O.width||O.depthTexture.image.height!==O.height)&&(O.depthTexture.image.width=O.width,O.depthTexture.image.height=O.height,O.depthTexture.needsUpdate=!0),Y(O.depthTexture,0);const ge=le.__webglTexture,ye=ue(O);if(O.depthTexture.format===Fp)je(O)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ge,0,ye):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ge,0);else if(O.depthTexture.format===Up)je(O)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ge,0,ye):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ge,0);else throw new Error("Unknown depthTexture format")}function De(V){const O=i.get(V),ee=V.isWebGLCubeRenderTarget===!0;if(O.__boundDepthTexture!==V.depthTexture){const le=V.depthTexture;if(O.__depthDisposeCallback&&O.__depthDisposeCallback(),le){const ge=()=>{delete O.__boundDepthTexture,delete O.__depthDisposeCallback,le.removeEventListener("dispose",ge)};le.addEventListener("dispose",ge),O.__depthDisposeCallback=ge}O.__boundDepthTexture=le}if(V.depthTexture&&!O.__autoAllocateDepthBuffer){if(ee)throw new Error("target.depthTexture not supported in Cube render targets");const le=V.texture.mipmaps;le&&le.length>0?Pe(O.__webglFramebuffer[0],V):Pe(O.__webglFramebuffer,V)}else if(ee){O.__webglDepthbuffer=[];for(let le=0;le<6;le++)if(t.bindFramebuffer(n.FRAMEBUFFER,O.__webglFramebuffer[le]),O.__webglDepthbuffer[le]===void 0)O.__webglDepthbuffer[le]=n.createRenderbuffer(),Ee(O.__webglDepthbuffer[le],V,!1);else{const ge=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ye=O.__webglDepthbuffer[le];n.bindRenderbuffer(n.RENDERBUFFER,ye),n.framebufferRenderbuffer(n.FRAMEBUFFER,ge,n.RENDERBUFFER,ye)}}else{const le=V.texture.mipmaps;if(le&&le.length>0?t.bindFramebuffer(n.FRAMEBUFFER,O.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,O.__webglFramebuffer),O.__webglDepthbuffer===void 0)O.__webglDepthbuffer=n.createRenderbuffer(),Ee(O.__webglDepthbuffer,V,!1);else{const ge=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ye=O.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,ye),n.framebufferRenderbuffer(n.FRAMEBUFFER,ge,n.RENDERBUFFER,ye)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function xe(V,O,ee){const le=i.get(V);O!==void 0&&Ce(le.__webglFramebuffer,V,V.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ee!==void 0&&De(V)}function we(V){const O=V.texture,ee=i.get(V),le=i.get(O);V.addEventListener("dispose",k);const ge=V.textures,ye=V.isWebGLCubeRenderTarget===!0,Oe=ge.length>1;if(Oe||(le.__webglTexture===void 0&&(le.__webglTexture=n.createTexture()),le.__version=O.version,a.memory.textures++),ye){ee.__webglFramebuffer=[];for(let Te=0;Te<6;Te++)if(O.mipmaps&&O.mipmaps.length>0){ee.__webglFramebuffer[Te]=[];for(let ze=0;ze<O.mipmaps.length;ze++)ee.__webglFramebuffer[Te][ze]=n.createFramebuffer()}else ee.__webglFramebuffer[Te]=n.createFramebuffer()}else{if(O.mipmaps&&O.mipmaps.length>0){ee.__webglFramebuffer=[];for(let Te=0;Te<O.mipmaps.length;Te++)ee.__webglFramebuffer[Te]=n.createFramebuffer()}else ee.__webglFramebuffer=n.createFramebuffer();if(Oe)for(let Te=0,ze=ge.length;Te<ze;Te++){const Je=i.get(ge[Te]);Je.__webglTexture===void 0&&(Je.__webglTexture=n.createTexture(),a.memory.textures++)}if(V.samples>0&&je(V)===!1){ee.__webglMultisampledFramebuffer=n.createFramebuffer(),ee.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ee.__webglMultisampledFramebuffer);for(let Te=0;Te<ge.length;Te++){const ze=ge[Te];ee.__webglColorRenderbuffer[Te]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ee.__webglColorRenderbuffer[Te]);const Je=s.convert(ze.format,ze.colorSpace),He=s.convert(ze.type),nt=w(ze.internalFormat,Je,He,ze.colorSpace,V.isXRRenderTarget===!0),Tt=ue(V);n.renderbufferStorageMultisample(n.RENDERBUFFER,Tt,nt,V.width,V.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Te,n.RENDERBUFFER,ee.__webglColorRenderbuffer[Te])}n.bindRenderbuffer(n.RENDERBUFFER,null),V.depthBuffer&&(ee.__webglDepthRenderbuffer=n.createRenderbuffer(),Ee(ee.__webglDepthRenderbuffer,V,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ye){t.bindTexture(n.TEXTURE_CUBE_MAP,le.__webglTexture),ae(n.TEXTURE_CUBE_MAP,O);for(let Te=0;Te<6;Te++)if(O.mipmaps&&O.mipmaps.length>0)for(let ze=0;ze<O.mipmaps.length;ze++)Ce(ee.__webglFramebuffer[Te][ze],V,O,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,ze);else Ce(ee.__webglFramebuffer[Te],V,O,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0);_(O)&&v(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Oe){for(let Te=0,ze=ge.length;Te<ze;Te++){const Je=ge[Te],He=i.get(Je);t.bindTexture(n.TEXTURE_2D,He.__webglTexture),ae(n.TEXTURE_2D,Je),Ce(ee.__webglFramebuffer,V,Je,n.COLOR_ATTACHMENT0+Te,n.TEXTURE_2D,0),_(Je)&&v(n.TEXTURE_2D)}t.unbindTexture()}else{let Te=n.TEXTURE_2D;if((V.isWebGL3DRenderTarget||V.isWebGLArrayRenderTarget)&&(Te=V.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Te,le.__webglTexture),ae(Te,O),O.mipmaps&&O.mipmaps.length>0)for(let ze=0;ze<O.mipmaps.length;ze++)Ce(ee.__webglFramebuffer[ze],V,O,n.COLOR_ATTACHMENT0,Te,ze);else Ce(ee.__webglFramebuffer,V,O,n.COLOR_ATTACHMENT0,Te,0);_(O)&&v(Te),t.unbindTexture()}V.depthBuffer&&De(V)}function $(V){const O=V.textures;for(let ee=0,le=O.length;ee<le;ee++){const ge=O[ee];if(_(ge)){const ye=b(V),Oe=i.get(ge).__webglTexture;t.bindTexture(ye,Oe),v(ye),t.unbindTexture()}}}const Se=[],de=[];function J(V){if(V.samples>0){if(je(V)===!1){const O=V.textures,ee=V.width,le=V.height;let ge=n.COLOR_BUFFER_BIT;const ye=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Oe=i.get(V),Te=O.length>1;if(Te)for(let Je=0;Je<O.length;Je++)t.bindFramebuffer(n.FRAMEBUFFER,Oe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Oe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Oe.__webglMultisampledFramebuffer);const ze=V.texture.mipmaps;ze&&ze.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Oe.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Oe.__webglFramebuffer);for(let Je=0;Je<O.length;Je++){if(V.resolveDepthBuffer&&(V.depthBuffer&&(ge|=n.DEPTH_BUFFER_BIT),V.stencilBuffer&&V.resolveStencilBuffer&&(ge|=n.STENCIL_BUFFER_BIT)),Te){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Oe.__webglColorRenderbuffer[Je]);const He=i.get(O[Je]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,He,0)}n.blitFramebuffer(0,0,ee,le,0,0,ee,le,ge,n.NEAREST),l===!0&&(Se.length=0,de.length=0,Se.push(n.COLOR_ATTACHMENT0+Je),V.depthBuffer&&V.resolveDepthBuffer===!1&&(Se.push(ye),de.push(ye),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,de)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Se))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Te)for(let Je=0;Je<O.length;Je++){t.bindFramebuffer(n.FRAMEBUFFER,Oe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.RENDERBUFFER,Oe.__webglColorRenderbuffer[Je]);const He=i.get(O[Je]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Oe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.TEXTURE_2D,He,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Oe.__webglMultisampledFramebuffer)}else if(V.depthBuffer&&V.resolveDepthBuffer===!1&&l){const O=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[O])}}}function ue(V){return Math.min(r.maxSamples,V.samples)}function je(V){const O=i.get(V);return V.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&O.__useRenderToTexture!==!1}function Le(V){const O=a.render.frame;u.get(V)!==O&&(u.set(V,O),V.update())}function Xe(V,O){const ee=V.colorSpace,le=V.format,ge=V.type;return V.isCompressedTexture===!0||V.isVideoTexture===!0||ee!==ll&&ee!==Ol&&(qt.getTransfer(ee)===Dn?(le!==Fi||ge!==gs)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ee)),O}function gt(V){return typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement?(c.width=V.naturalWidth||V.width,c.height=V.naturalHeight||V.height):typeof VideoFrame<"u"&&V instanceof VideoFrame?(c.width=V.displayWidth,c.height=V.displayHeight):(c.width=V.width,c.height=V.height),c}this.allocateTextureUnit=B,this.resetTextureUnits=D,this.setTexture2D=Y,this.setTexture2DArray=X,this.setTexture3D=Q,this.setTextureCube=L,this.rebindTextures=xe,this.setupRenderTarget=we,this.updateRenderTargetMipmap=$,this.updateMultisampleRenderTarget=J,this.setupDepthRenderbuffer=De,this.setupFrameBufferTexture=Ce,this.useMultisampledRTT=je}function s8(n,e){function t(i,r=Ol){let s;const a=qt.getTransfer(r);if(i===gs)return n.UNSIGNED_BYTE;if(i===hS)return n.UNSIGNED_SHORT_4_4_4_4;if(i===fS)return n.UNSIGNED_SHORT_5_5_5_1;if(i===SR)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===uS)return n.BYTE;if(i===dS)return n.SHORT;if(i===Lp)return n.UNSIGNED_SHORT;if(i===Gy)return n.INT;if(i===ol)return n.UNSIGNED_INT;if(i===yi)return n.FLOAT;if(i===vr)return n.HALF_FLOAT;if(i===MR)return n.ALPHA;if(i===ER)return n.RGB;if(i===Fi)return n.RGBA;if(i===Fp)return n.DEPTH_COMPONENT;if(i===Up)return n.DEPTH_STENCIL;if(i===qy)return n.RED;if(i===Xy)return n.RED_INTEGER;if(i===TR)return n.RG;if(i===pS)return n.RG_INTEGER;if(i===mS)return n.RGBA_INTEGER;if(i===Jg||i===Qg||i===e0||i===t0)if(a===Dn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===Jg)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Qg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===e0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===t0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===Jg)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Qg)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===e0)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===t0)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Pb||i===Rb||i===kb||i===Nb)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===Pb)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Rb)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===kb)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Nb)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Ib||i===Db||i===Lb)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===Ib||i===Db)return a===Dn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===Lb)return a===Dn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===Ob||i===Fb||i===Ub||i===jb||i===zb||i===Bb||i===Hb||i===Vb||i===$b||i===Wb||i===Gb||i===qb||i===Xb||i===Yb)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===Ob)return a===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Fb)return a===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Ub)return a===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===jb)return a===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===zb)return a===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Bb)return a===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Hb)return a===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Vb)return a===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===$b)return a===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Wb)return a===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Gb)return a===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===qb)return a===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Xb)return a===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Yb)return a===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===n0||i===Kb||i===Zb)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===n0)return a===Dn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Kb)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Zb)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===CR||i===Jb||i===Qb||i===ew)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===n0)return s.COMPRESSED_RED_RGTC1_EXT;if(i===Jb)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Qb)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===ew)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Op?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const oce=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,lce=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class cce{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new Fn,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new js({vertexShader:oce,fragmentShader:lce,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Zn(new $u(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class uce extends ul{constructor(e,t){super();const i=this;let r=null,s=1,a=null,o="local-floor",l=1,c=null,u=null,d=null,h=null,p=null,y=null;const x=new cce,_=t.getContextAttributes();let v=null,b=null;const w=[],S=[],A=new Ye;let P=null;const k=new ir;k.viewport=new mn;const T=new ir;T.viewport=new mn;const E=[k,T],R=new Y6;let I=null,D=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(K){let re=w[K];return re===void 0&&(re=new x1,w[K]=re),re.getTargetRaySpace()},this.getControllerGrip=function(K){let re=w[K];return re===void 0&&(re=new x1,w[K]=re),re.getGripSpace()},this.getHand=function(K){let re=w[K];return re===void 0&&(re=new x1,w[K]=re),re.getHandSpace()};function B(K){const re=S.indexOf(K.inputSource);if(re===-1)return;const oe=w[re];oe!==void 0&&(oe.update(K.inputSource,K.frame,c||a),oe.dispatchEvent({type:K.type,data:K.inputSource}))}function G(){r.removeEventListener("select",B),r.removeEventListener("selectstart",B),r.removeEventListener("selectend",B),r.removeEventListener("squeeze",B),r.removeEventListener("squeezestart",B),r.removeEventListener("squeezeend",B),r.removeEventListener("end",G),r.removeEventListener("inputsourceschange",Y);for(let K=0;K<w.length;K++){const re=S[K];re!==null&&(S[K]=null,w[K].disconnect(re))}I=null,D=null,x.reset(),e.setRenderTarget(v),p=null,h=null,d=null,r=null,b=null,me.stop(),i.isPresenting=!1,e.setPixelRatio(P),e.setSize(A.width,A.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(K){s=K,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(K){o=K,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(K){c=K},this.getBaseLayer=function(){return h!==null?h:p},this.getBinding=function(){return d},this.getFrame=function(){return y},this.getSession=function(){return r},this.setSession=async function(K){if(r=K,r!==null){if(v=e.getRenderTarget(),r.addEventListener("select",B),r.addEventListener("selectstart",B),r.addEventListener("selectend",B),r.addEventListener("squeeze",B),r.addEventListener("squeezestart",B),r.addEventListener("squeezeend",B),r.addEventListener("end",G),r.addEventListener("inputsourceschange",Y),_.xrCompatible!==!0&&await t.makeXRCompatible(),P=e.getPixelRatio(),e.getSize(A),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let oe=null,_e=null,Ce=null;_.depth&&(Ce=_.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,oe=_.stencil?Up:Fp,_e=_.stencil?Op:ol);const Ee={colorFormat:t.RGBA8,depthFormat:Ce,scaleFactor:s};d=new XRWebGLBinding(r,t),h=d.createProjectionLayer(Ee),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),b=new Ya(h.textureWidth,h.textureHeight,{format:Fi,type:gs,depthTexture:new OR(h.textureWidth,h.textureHeight,_e,void 0,void 0,void 0,void 0,void 0,void 0,oe),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1,resolveStencilBuffer:h.ignoreDepthValues===!1})}else{const oe={antialias:_.antialias,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(r,t,oe),r.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),b=new Ya(p.framebufferWidth,p.framebufferHeight,{format:Fi,type:gs,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil,resolveDepthBuffer:p.ignoreDepthValues===!1,resolveStencilBuffer:p.ignoreDepthValues===!1})}b.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await r.requestReferenceSpace(o),me.setContext(r),me.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return x.getDepthTexture()};function Y(K){for(let re=0;re<K.removed.length;re++){const oe=K.removed[re],_e=S.indexOf(oe);_e>=0&&(S[_e]=null,w[_e].disconnect(oe))}for(let re=0;re<K.added.length;re++){const oe=K.added[re];let _e=S.indexOf(oe);if(_e===-1){for(let Ee=0;Ee<w.length;Ee++)if(Ee>=S.length){S.push(oe),_e=Ee;break}else if(S[Ee]===null){S[Ee]=oe,_e=Ee;break}if(_e===-1)break}const Ce=w[_e];Ce&&Ce.connect(oe)}}const X=new Z,Q=new Z;function L(K,re,oe){X.setFromMatrixPosition(re.matrixWorld),Q.setFromMatrixPosition(oe.matrixWorld);const _e=X.distanceTo(Q),Ce=re.projectionMatrix.elements,Ee=oe.projectionMatrix.elements,Pe=Ce[14]/(Ce[10]-1),De=Ce[14]/(Ce[10]+1),xe=(Ce[9]+1)/Ce[5],we=(Ce[9]-1)/Ce[5],$=(Ce[8]-1)/Ce[0],Se=(Ee[8]+1)/Ee[0],de=Pe*$,J=Pe*Se,ue=_e/(-$+Se),je=ue*-$;if(re.matrixWorld.decompose(K.position,K.quaternion,K.scale),K.translateX(je),K.translateZ(ue),K.matrixWorld.compose(K.position,K.quaternion,K.scale),K.matrixWorldInverse.copy(K.matrixWorld).invert(),Ce[10]===-1)K.projectionMatrix.copy(re.projectionMatrix),K.projectionMatrixInverse.copy(re.projectionMatrixInverse);else{const Le=Pe+ue,Xe=De+ue,gt=de-je,V=J+(_e-je),O=xe*De/Xe*Le,ee=we*De/Xe*Le;K.projectionMatrix.makePerspective(gt,V,O,ee,Le,Xe),K.projectionMatrixInverse.copy(K.projectionMatrix).invert()}}function W(K,re){re===null?K.matrixWorld.copy(K.matrix):K.matrixWorld.multiplyMatrices(re.matrixWorld,K.matrix),K.matrixWorldInverse.copy(K.matrixWorld).invert()}this.updateCamera=function(K){if(r===null)return;let re=K.near,oe=K.far;x.texture!==null&&(x.depthNear>0&&(re=x.depthNear),x.depthFar>0&&(oe=x.depthFar)),R.near=T.near=k.near=re,R.far=T.far=k.far=oe,(I!==R.near||D!==R.far)&&(r.updateRenderState({depthNear:R.near,depthFar:R.far}),I=R.near,D=R.far),k.layers.mask=K.layers.mask|2,T.layers.mask=K.layers.mask|4,R.layers.mask=k.layers.mask|T.layers.mask;const _e=K.parent,Ce=R.cameras;W(R,_e);for(let Ee=0;Ee<Ce.length;Ee++)W(Ce[Ee],_e);Ce.length===2?L(R,k,T):R.projectionMatrix.copy(k.projectionMatrix),j(K,R,_e)};function j(K,re,oe){oe===null?K.matrix.copy(re.matrixWorld):(K.matrix.copy(oe.matrixWorld),K.matrix.invert(),K.matrix.multiply(re.matrixWorld)),K.matrix.decompose(K.position,K.quaternion,K.scale),K.updateMatrixWorld(!0),K.projectionMatrix.copy(re.projectionMatrix),K.projectionMatrixInverse.copy(re.projectionMatrixInverse),K.isPerspectiveCamera&&(K.fov=jp*2*Math.atan(1/K.projectionMatrix.elements[5]),K.zoom=1)}this.getCamera=function(){return R},this.getFoveation=function(){if(!(h===null&&p===null))return l},this.setFoveation=function(K){l=K,h!==null&&(h.fixedFoveation=K),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=K)},this.hasDepthSensing=function(){return x.texture!==null},this.getDepthSensingMesh=function(){return x.getMesh(R)};let te=null;function ae(K,re){if(u=re.getViewerPose(c||a),y=re,u!==null){const oe=u.views;p!==null&&(e.setRenderTargetFramebuffer(b,p.framebuffer),e.setRenderTarget(b));let _e=!1;oe.length!==R.cameras.length&&(R.cameras.length=0,_e=!0);for(let Pe=0;Pe<oe.length;Pe++){const De=oe[Pe];let xe=null;if(p!==null)xe=p.getViewport(De);else{const $=d.getViewSubImage(h,De);xe=$.viewport,Pe===0&&(e.setRenderTargetTextures(b,$.colorTexture,$.depthStencilTexture),e.setRenderTarget(b))}let we=E[Pe];we===void 0&&(we=new ir,we.layers.enable(Pe),we.viewport=new mn,E[Pe]=we),we.matrix.fromArray(De.transform.matrix),we.matrix.decompose(we.position,we.quaternion,we.scale),we.projectionMatrix.fromArray(De.projectionMatrix),we.projectionMatrixInverse.copy(we.projectionMatrix).invert(),we.viewport.set(xe.x,xe.y,xe.width,xe.height),Pe===0&&(R.matrix.copy(we.matrix),R.matrix.decompose(R.position,R.quaternion,R.scale)),_e===!0&&R.cameras.push(we)}const Ce=r.enabledFeatures;if(Ce&&Ce.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&d){const Pe=d.getDepthInformation(oe[0]);Pe&&Pe.isValid&&Pe.texture&&x.init(e,Pe,r.renderState)}}for(let oe=0;oe<w.length;oe++){const _e=S[oe],Ce=w[oe];_e!==null&&Ce!==void 0&&Ce.update(_e,re,c||a)}te&&te(K,re),re.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:re}),y=null}const me=new e8;me.setAnimationLoop(ae),this.setAnimationLoop=function(K){te=K},this.dispose=function(){}}}const bd=new qi,dce=new wt;function hce(n,e){function t(_,v){_.matrixAutoUpdate===!0&&_.updateMatrix(),v.value.copy(_.matrix)}function i(_,v){v.color.getRGB(_.fogColor.value,c6(n)),v.isFog?(_.fogNear.value=v.near,_.fogFar.value=v.far):v.isFogExp2&&(_.fogDensity.value=v.density)}function r(_,v,b,w,S){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(_,v):v.isMeshToonMaterial?(s(_,v),d(_,v)):v.isMeshPhongMaterial?(s(_,v),u(_,v)):v.isMeshStandardMaterial?(s(_,v),h(_,v),v.isMeshPhysicalMaterial&&p(_,v,S)):v.isMeshMatcapMaterial?(s(_,v),y(_,v)):v.isMeshDepthMaterial?s(_,v):v.isMeshDistanceMaterial?(s(_,v),x(_,v)):v.isMeshNormalMaterial?s(_,v):v.isLineBasicMaterial?(a(_,v),v.isLineDashedMaterial&&o(_,v)):v.isPointsMaterial?l(_,v,b,w):v.isSpriteMaterial?c(_,v):v.isShadowMaterial?(_.color.value.copy(v.color),_.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function s(_,v){_.opacity.value=v.opacity,v.color&&_.diffuse.value.copy(v.color),v.emissive&&_.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(_.map.value=v.map,t(v.map,_.mapTransform)),v.alphaMap&&(_.alphaMap.value=v.alphaMap,t(v.alphaMap,_.alphaMapTransform)),v.bumpMap&&(_.bumpMap.value=v.bumpMap,t(v.bumpMap,_.bumpMapTransform),_.bumpScale.value=v.bumpScale,v.side===ms&&(_.bumpScale.value*=-1)),v.normalMap&&(_.normalMap.value=v.normalMap,t(v.normalMap,_.normalMapTransform),_.normalScale.value.copy(v.normalScale),v.side===ms&&_.normalScale.value.negate()),v.displacementMap&&(_.displacementMap.value=v.displacementMap,t(v.displacementMap,_.displacementMapTransform),_.displacementScale.value=v.displacementScale,_.displacementBias.value=v.displacementBias),v.emissiveMap&&(_.emissiveMap.value=v.emissiveMap,t(v.emissiveMap,_.emissiveMapTransform)),v.specularMap&&(_.specularMap.value=v.specularMap,t(v.specularMap,_.specularMapTransform)),v.alphaTest>0&&(_.alphaTest.value=v.alphaTest);const b=e.get(v),w=b.envMap,S=b.envMapRotation;w&&(_.envMap.value=w,bd.copy(S),bd.x*=-1,bd.y*=-1,bd.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(bd.y*=-1,bd.z*=-1),_.envMapRotation.value.setFromMatrix4(dce.makeRotationFromEuler(bd)),_.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=v.reflectivity,_.ior.value=v.ior,_.refractionRatio.value=v.refractionRatio),v.lightMap&&(_.lightMap.value=v.lightMap,_.lightMapIntensity.value=v.lightMapIntensity,t(v.lightMap,_.lightMapTransform)),v.aoMap&&(_.aoMap.value=v.aoMap,_.aoMapIntensity.value=v.aoMapIntensity,t(v.aoMap,_.aoMapTransform))}function a(_,v){_.diffuse.value.copy(v.color),_.opacity.value=v.opacity,v.map&&(_.map.value=v.map,t(v.map,_.mapTransform))}function o(_,v){_.dashSize.value=v.dashSize,_.totalSize.value=v.dashSize+v.gapSize,_.scale.value=v.scale}function l(_,v,b,w){_.diffuse.value.copy(v.color),_.opacity.value=v.opacity,_.size.value=v.size*b,_.scale.value=w*.5,v.map&&(_.map.value=v.map,t(v.map,_.uvTransform)),v.alphaMap&&(_.alphaMap.value=v.alphaMap,t(v.alphaMap,_.alphaMapTransform)),v.alphaTest>0&&(_.alphaTest.value=v.alphaTest)}function c(_,v){_.diffuse.value.copy(v.color),_.opacity.value=v.opacity,_.rotation.value=v.rotation,v.map&&(_.map.value=v.map,t(v.map,_.mapTransform)),v.alphaMap&&(_.alphaMap.value=v.alphaMap,t(v.alphaMap,_.alphaMapTransform)),v.alphaTest>0&&(_.alphaTest.value=v.alphaTest)}function u(_,v){_.specular.value.copy(v.specular),_.shininess.value=Math.max(v.shininess,1e-4)}function d(_,v){v.gradientMap&&(_.gradientMap.value=v.gradientMap)}function h(_,v){_.metalness.value=v.metalness,v.metalnessMap&&(_.metalnessMap.value=v.metalnessMap,t(v.metalnessMap,_.metalnessMapTransform)),_.roughness.value=v.roughness,v.roughnessMap&&(_.roughnessMap.value=v.roughnessMap,t(v.roughnessMap,_.roughnessMapTransform)),v.envMap&&(_.envMapIntensity.value=v.envMapIntensity)}function p(_,v,b){_.ior.value=v.ior,v.sheen>0&&(_.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),_.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(_.sheenColorMap.value=v.sheenColorMap,t(v.sheenColorMap,_.sheenColorMapTransform)),v.sheenRoughnessMap&&(_.sheenRoughnessMap.value=v.sheenRoughnessMap,t(v.sheenRoughnessMap,_.sheenRoughnessMapTransform))),v.clearcoat>0&&(_.clearcoat.value=v.clearcoat,_.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(_.clearcoatMap.value=v.clearcoatMap,t(v.clearcoatMap,_.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,t(v.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(_.clearcoatNormalMap.value=v.clearcoatNormalMap,t(v.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===ms&&_.clearcoatNormalScale.value.negate())),v.dispersion>0&&(_.dispersion.value=v.dispersion),v.iridescence>0&&(_.iridescence.value=v.iridescence,_.iridescenceIOR.value=v.iridescenceIOR,_.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(_.iridescenceMap.value=v.iridescenceMap,t(v.iridescenceMap,_.iridescenceMapTransform)),v.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=v.iridescenceThicknessMap,t(v.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),v.transmission>0&&(_.transmission.value=v.transmission,_.transmissionSamplerMap.value=b.texture,_.transmissionSamplerSize.value.set(b.width,b.height),v.transmissionMap&&(_.transmissionMap.value=v.transmissionMap,t(v.transmissionMap,_.transmissionMapTransform)),_.thickness.value=v.thickness,v.thicknessMap&&(_.thicknessMap.value=v.thicknessMap,t(v.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=v.attenuationDistance,_.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(_.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(_.anisotropyMap.value=v.anisotropyMap,t(v.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=v.specularIntensity,_.specularColor.value.copy(v.specularColor),v.specularColorMap&&(_.specularColorMap.value=v.specularColorMap,t(v.specularColorMap,_.specularColorMapTransform)),v.specularIntensityMap&&(_.specularIntensityMap.value=v.specularIntensityMap,t(v.specularIntensityMap,_.specularIntensityMapTransform))}function y(_,v){v.matcap&&(_.matcap.value=v.matcap)}function x(_,v){const b=e.get(v).light;_.referencePosition.value.setFromMatrixPosition(b.matrixWorld),_.nearDistance.value=b.shadow.camera.near,_.farDistance.value=b.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function fce(n,e,t,i){let r={},s={},a=[];const o=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(b,w){const S=w.program;i.uniformBlockBinding(b,S)}function c(b,w){let S=r[b.id];S===void 0&&(y(b),S=u(b),r[b.id]=S,b.addEventListener("dispose",_));const A=w.program;i.updateUBOMapping(b,A);const P=e.render.frame;s[b.id]!==P&&(h(b),s[b.id]=P)}function u(b){const w=d();b.__bindingPointIndex=w;const S=n.createBuffer(),A=b.__size,P=b.usage;return n.bindBuffer(n.UNIFORM_BUFFER,S),n.bufferData(n.UNIFORM_BUFFER,A,P),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,w,S),S}function d(){for(let b=0;b<o;b++)if(a.indexOf(b)===-1)return a.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(b){const w=r[b.id],S=b.uniforms,A=b.__cache;n.bindBuffer(n.UNIFORM_BUFFER,w);for(let P=0,k=S.length;P<k;P++){const T=Array.isArray(S[P])?S[P]:[S[P]];for(let E=0,R=T.length;E<R;E++){const I=T[E];if(p(I,P,E,A)===!0){const D=I.__offset,B=Array.isArray(I.value)?I.value:[I.value];let G=0;for(let Y=0;Y<B.length;Y++){const X=B[Y],Q=x(X);typeof X=="number"||typeof X=="boolean"?(I.__data[0]=X,n.bufferSubData(n.UNIFORM_BUFFER,D+G,I.__data)):X.isMatrix3?(I.__data[0]=X.elements[0],I.__data[1]=X.elements[1],I.__data[2]=X.elements[2],I.__data[3]=0,I.__data[4]=X.elements[3],I.__data[5]=X.elements[4],I.__data[6]=X.elements[5],I.__data[7]=0,I.__data[8]=X.elements[6],I.__data[9]=X.elements[7],I.__data[10]=X.elements[8],I.__data[11]=0):(X.toArray(I.__data,G),G+=Q.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,D,I.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function p(b,w,S,A){const P=b.value,k=w+"_"+S;if(A[k]===void 0)return typeof P=="number"||typeof P=="boolean"?A[k]=P:A[k]=P.clone(),!0;{const T=A[k];if(typeof P=="number"||typeof P=="boolean"){if(T!==P)return A[k]=P,!0}else if(T.equals(P)===!1)return T.copy(P),!0}return!1}function y(b){const w=b.uniforms;let S=0;const A=16;for(let k=0,T=w.length;k<T;k++){const E=Array.isArray(w[k])?w[k]:[w[k]];for(let R=0,I=E.length;R<I;R++){const D=E[R],B=Array.isArray(D.value)?D.value:[D.value];for(let G=0,Y=B.length;G<Y;G++){const X=B[G],Q=x(X),L=S%A,W=L%Q.boundary,j=L+W;S+=W,j!==0&&A-j<Q.storage&&(S+=A-j),D.__data=new Float32Array(Q.storage/Float32Array.BYTES_PER_ELEMENT),D.__offset=S,S+=Q.storage}}}const P=S%A;return P>0&&(S+=A-P),b.__size=S,b.__cache={},this}function x(b){const w={boundary:0,storage:0};return typeof b=="number"||typeof b=="boolean"?(w.boundary=4,w.storage=4):b.isVector2?(w.boundary=8,w.storage=8):b.isVector3||b.isColor?(w.boundary=16,w.storage=12):b.isVector4?(w.boundary=16,w.storage=16):b.isMatrix3?(w.boundary=48,w.storage=48):b.isMatrix4?(w.boundary=64,w.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),w}function _(b){const w=b.target;w.removeEventListener("dispose",_);const S=a.indexOf(w.__bindingPointIndex);a.splice(S,1),n.deleteBuffer(r[w.id]),delete r[w.id],delete s[w.id]}function v(){for(const b in r)n.deleteBuffer(r[b]);a=[],r={},s={}}return{bind:l,update:c,dispose:v}}class uk{constructor(e={}){const{canvas:t=a6(),context:i=null,depth:r=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let p;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=i.getContextAttributes().alpha}else p=a;const y=new Uint32Array(4),x=new Int32Array(4);let _=null,v=null;const b=[],w=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=il,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const S=this;let A=!1;this._outputColorSpace=Mn;let P=0,k=0,T=null,E=-1,R=null;const I=new mn,D=new mn;let B=null;const G=new ct(0);let Y=0,X=t.width,Q=t.height,L=1,W=null,j=null;const te=new mn(0,0,X,Q),ae=new mn(0,0,X,Q);let me=!1;const K=new dm;let re=!1,oe=!1;const _e=new wt,Ce=new wt,Ee=new Z,Pe=new mn,De={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let xe=!1;function we(){return T===null?L:1}let $=i;function Se(H,ne){return t.getContext(H,ne)}try{const H={alpha:!0,depth:r,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${$y}`),t.addEventListener("webglcontextlost",ht,!1),t.addEventListener("webglcontextrestored",Qe,!1),t.addEventListener("webglcontextcreationerror",Ve,!1),$===null){const ne="webgl2";if($=Se(ne,H),$===null)throw Se(ne)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(H){throw console.error("THREE.WebGLRenderer: "+H.message),H}let de,J,ue,je,Le,Xe,gt,V,O,ee,le,ge,ye,Oe,Te,ze,Je,He,nt,Tt,st,We,vt,ce;function ke(){de=new Eoe($),de.init(),We=new s8($,de),J=new voe($,de,e,We),ue=new sce($,de),J.reverseDepthBuffer&&h&&ue.buffers.depth.setReversed(!0),je=new Aoe($),Le=new Gle,Xe=new ace($,de,ue,Le,J,We,je),gt=new _oe(S),V=new Moe(S),O=new Dre($),vt=new goe($,O),ee=new Toe($,O,je,vt),le=new Roe($,ee,O,je),nt=new Poe($,J,Xe),ze=new xoe(Le),ge=new Wle(S,gt,V,de,J,vt,ze),ye=new hce(S,Le),Oe=new Xle,Te=new ece(de),He=new moe(S,gt,V,ue,le,p,l),Je=new ice(S,le,J),ce=new fce($,je,J,ue),Tt=new yoe($,de,je),st=new Coe($,de,je),je.programs=ge.programs,S.capabilities=J,S.extensions=de,S.properties=Le,S.renderLists=Oe,S.shadowMap=Je,S.state=ue,S.info=je}ke();const Ge=new uce(S,$);this.xr=Ge,this.getContext=function(){return $},this.getContextAttributes=function(){return $.getContextAttributes()},this.forceContextLoss=function(){const H=de.get("WEBGL_lose_context");H&&H.loseContext()},this.forceContextRestore=function(){const H=de.get("WEBGL_lose_context");H&&H.restoreContext()},this.getPixelRatio=function(){return L},this.setPixelRatio=function(H){H!==void 0&&(L=H,this.setSize(X,Q,!1))},this.getSize=function(H){return H.set(X,Q)},this.setSize=function(H,ne,he=!0){if(Ge.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}X=H,Q=ne,t.width=Math.floor(H*L),t.height=Math.floor(ne*L),he===!0&&(t.style.width=H+"px",t.style.height=ne+"px"),this.setViewport(0,0,H,ne)},this.getDrawingBufferSize=function(H){return H.set(X*L,Q*L).floor()},this.setDrawingBufferSize=function(H,ne,he){X=H,Q=ne,L=he,t.width=Math.floor(H*he),t.height=Math.floor(ne*he),this.setViewport(0,0,H,ne)},this.getCurrentViewport=function(H){return H.copy(I)},this.getViewport=function(H){return H.copy(te)},this.setViewport=function(H,ne,he,se){H.isVector4?te.set(H.x,H.y,H.z,H.w):te.set(H,ne,he,se),ue.viewport(I.copy(te).multiplyScalar(L).round())},this.getScissor=function(H){return H.copy(ae)},this.setScissor=function(H,ne,he,se){H.isVector4?ae.set(H.x,H.y,H.z,H.w):ae.set(H,ne,he,se),ue.scissor(D.copy(ae).multiplyScalar(L).round())},this.getScissorTest=function(){return me},this.setScissorTest=function(H){ue.setScissorTest(me=H)},this.setOpaqueSort=function(H){W=H},this.setTransparentSort=function(H){j=H},this.getClearColor=function(H){return H.copy(He.getClearColor())},this.setClearColor=function(){He.setClearColor(...arguments)},this.getClearAlpha=function(){return He.getClearAlpha()},this.setClearAlpha=function(){He.setClearAlpha(...arguments)},this.clear=function(H=!0,ne=!0,he=!0){let se=0;if(H){let pe=!1;if(T!==null){const Ae=T.texture.format;pe=Ae===mS||Ae===pS||Ae===Xy}if(pe){const Ae=T.texture.type,Ue=Ae===gs||Ae===ol||Ae===Lp||Ae===Op||Ae===hS||Ae===fS,Ze=He.getClearColor(),qe=He.getClearAlpha(),it=Ze.r,at=Ze.g,et=Ze.b;Ue?(y[0]=it,y[1]=at,y[2]=et,y[3]=qe,$.clearBufferuiv($.COLOR,0,y)):(x[0]=it,x[1]=at,x[2]=et,x[3]=qe,$.clearBufferiv($.COLOR,0,x))}else se|=$.COLOR_BUFFER_BIT}ne&&(se|=$.DEPTH_BUFFER_BIT),he&&(se|=$.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),$.clear(se)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ht,!1),t.removeEventListener("webglcontextrestored",Qe,!1),t.removeEventListener("webglcontextcreationerror",Ve,!1),He.dispose(),Oe.dispose(),Te.dispose(),Le.dispose(),gt.dispose(),V.dispose(),le.dispose(),vt.dispose(),ce.dispose(),ge.dispose(),Ge.dispose(),Ge.removeEventListener("sessionstart",dt),Ge.removeEventListener("sessionend",Bt),Mt.stop()};function ht(H){H.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function Qe(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;const H=je.autoReset,ne=Je.enabled,he=Je.autoUpdate,se=Je.needsUpdate,pe=Je.type;ke(),je.autoReset=H,Je.enabled=ne,Je.autoUpdate=he,Je.needsUpdate=se,Je.type=pe}function Ve(H){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",H.statusMessage)}function xt(H){const ne=H.target;ne.removeEventListener("dispose",xt),Ot(ne)}function Ot(H){bn(H),Le.remove(H)}function bn(H){const ne=Le.get(H).programs;ne!==void 0&&(ne.forEach(function(he){ge.releaseProgram(he)}),H.isShaderMaterial&&ge.releaseShaderCache(H))}this.renderBufferDirect=function(H,ne,he,se,pe,Ae){ne===null&&(ne=De);const Ue=pe.isMesh&&pe.matrixWorld.determinant()<0,Ze=fe(H,ne,he,se,pe);ue.setMaterial(se,Ue);let qe=he.index,it=1;if(se.wireframe===!0){if(qe=ee.getWireframeAttribute(he),qe===void 0)return;it=2}const at=he.drawRange,et=he.attributes.position;let lt=at.start*it,Pt=(at.start+at.count)*it;Ae!==null&&(lt=Math.max(lt,Ae.start*it),Pt=Math.min(Pt,(Ae.start+Ae.count)*it)),qe!==null?(lt=Math.max(lt,0),Pt=Math.min(Pt,qe.count)):et!=null&&(lt=Math.max(lt,0),Pt=Math.min(Pt,et.count));const zt=Pt-lt;if(zt<0||zt===1/0)return;vt.setup(pe,se,Ze,he,qe);let It,Dt=Tt;if(qe!==null&&(It=O.get(qe),Dt=st,Dt.setIndex(It)),pe.isMesh)se.wireframe===!0?(ue.setLineWidth(se.wireframeLinewidth*we()),Dt.setMode($.LINES)):Dt.setMode($.TRIANGLES);else if(pe.isLine){let Et=se.linewidth;Et===void 0&&(Et=1),ue.setLineWidth(Et*we()),pe.isLineSegments?Dt.setMode($.LINES):pe.isLineLoop?Dt.setMode($.LINE_LOOP):Dt.setMode($.LINE_STRIP)}else pe.isPoints?Dt.setMode($.POINTS):pe.isSprite&&Dt.setMode($.TRIANGLES);if(pe.isBatchedMesh)if(pe._multiDrawInstances!==null)pp("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Dt.renderMultiDrawInstances(pe._multiDrawStarts,pe._multiDrawCounts,pe._multiDrawCount,pe._multiDrawInstances);else if(de.get("WEBGL_multi_draw"))Dt.renderMultiDraw(pe._multiDrawStarts,pe._multiDrawCounts,pe._multiDrawCount);else{const Et=pe._multiDrawStarts,dn=pe._multiDrawCounts,$t=pe._multiDrawCount,en=qe?O.get(qe).bytesPerElement:1,$n=Le.get(se).currentProgram.getUniforms();for(let Zt=0;Zt<$t;Zt++)$n.setValue($,"_gl_DrawID",Zt),Dt.render(Et[Zt]/en,dn[Zt])}else if(pe.isInstancedMesh)Dt.renderInstances(lt,zt,pe.count);else if(he.isInstancedBufferGeometry){const Et=he._maxInstanceCount!==void 0?he._maxInstanceCount:1/0,dn=Math.min(he.instanceCount,Et);Dt.renderInstances(lt,zt,dn)}else Dt.render(lt,zt)};function ft(H,ne,he){H.transparent===!0&&H.side===xo&&H.forceSinglePass===!1?(H.side=ms,H.needsUpdate=!0,Rn(H,ne,he),H.side=sl,H.needsUpdate=!0,Rn(H,ne,he),H.side=xo):Rn(H,ne,he)}this.compile=function(H,ne,he=null){he===null&&(he=H),v=Te.get(he),v.init(ne),w.push(v),he.traverseVisible(function(pe){pe.isLight&&pe.layers.test(ne.layers)&&(v.pushLight(pe),pe.castShadow&&v.pushShadow(pe))}),H!==he&&H.traverseVisible(function(pe){pe.isLight&&pe.layers.test(ne.layers)&&(v.pushLight(pe),pe.castShadow&&v.pushShadow(pe))}),v.setupLights();const se=new Set;return H.traverse(function(pe){if(!(pe.isMesh||pe.isPoints||pe.isLine||pe.isSprite))return;const Ae=pe.material;if(Ae)if(Array.isArray(Ae))for(let Ue=0;Ue<Ae.length;Ue++){const Ze=Ae[Ue];ft(Ze,he,pe),se.add(Ze)}else ft(Ae,he,pe),se.add(Ae)}),v=w.pop(),se},this.compileAsync=function(H,ne,he=null){const se=this.compile(H,ne,he);return new Promise(pe=>{function Ae(){if(se.forEach(function(Ue){Le.get(Ue).currentProgram.isReady()&&se.delete(Ue)}),se.size===0){pe(H);return}setTimeout(Ae,10)}de.get("KHR_parallel_shader_compile")!==null?Ae():setTimeout(Ae,10)})};let Ct=null;function Gt(H){Ct&&Ct(H)}function dt(){Mt.stop()}function Bt(){Mt.start()}const Mt=new e8;Mt.setAnimationLoop(Gt),typeof self<"u"&&Mt.setContext(self),this.setAnimationLoop=function(H){Ct=H,Ge.setAnimationLoop(H),H===null?Mt.stop():Mt.start()},Ge.addEventListener("sessionstart",dt),Ge.addEventListener("sessionend",Bt),this.render=function(H,ne){if(ne!==void 0&&ne.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(A===!0)return;if(H.matrixWorldAutoUpdate===!0&&H.updateMatrixWorld(),ne.parent===null&&ne.matrixWorldAutoUpdate===!0&&ne.updateMatrixWorld(),Ge.enabled===!0&&Ge.isPresenting===!0&&(Ge.cameraAutoUpdate===!0&&Ge.updateCamera(ne),ne=Ge.getCamera()),H.isScene===!0&&H.onBeforeRender(S,H,ne,T),v=Te.get(H,w.length),v.init(ne),w.push(v),Ce.multiplyMatrices(ne.projectionMatrix,ne.matrixWorldInverse),K.setFromProjectionMatrix(Ce),oe=this.localClippingEnabled,re=ze.init(this.clippingPlanes,oe),_=Oe.get(H,b.length),_.init(),b.push(_),Ge.enabled===!0&&Ge.isPresenting===!0){const Ae=S.xr.getDepthSensingMesh();Ae!==null&&Ut(Ae,ne,-1/0,S.sortObjects)}Ut(H,ne,0,S.sortObjects),_.finish(),S.sortObjects===!0&&_.sort(W,j),xe=Ge.enabled===!1||Ge.isPresenting===!1||Ge.hasDepthSensing()===!1,xe&&He.addToRenderList(_,H),this.info.render.frame++,re===!0&&ze.beginShadows();const he=v.state.shadowsArray;Je.render(he,H,ne),re===!0&&ze.endShadows(),this.info.autoReset===!0&&this.info.reset();const se=_.opaque,pe=_.transmissive;if(v.setupLights(),ne.isArrayCamera){const Ae=ne.cameras;if(pe.length>0)for(let Ue=0,Ze=Ae.length;Ue<Ze;Ue++){const qe=Ae[Ue];Ht(se,pe,H,qe)}xe&&He.render(H);for(let Ue=0,Ze=Ae.length;Ue<Ze;Ue++){const qe=Ae[Ue];In(_,H,qe,qe.viewport)}}else pe.length>0&&Ht(se,pe,H,ne),xe&&He.render(H),In(_,H,ne);T!==null&&k===0&&(Xe.updateMultisampleRenderTarget(T),Xe.updateRenderTargetMipmap(T)),H.isScene===!0&&H.onAfterRender(S,H,ne),vt.resetDefaultState(),E=-1,R=null,w.pop(),w.length>0?(v=w[w.length-1],re===!0&&ze.setGlobalState(S.clippingPlanes,v.state.camera)):v=null,b.pop(),b.length>0?_=b[b.length-1]:_=null};function Ut(H,ne,he,se){if(H.visible===!1)return;if(H.layers.test(ne.layers)){if(H.isGroup)he=H.renderOrder;else if(H.isLOD)H.autoUpdate===!0&&H.update(ne);else if(H.isLight)v.pushLight(H),H.castShadow&&v.pushShadow(H);else if(H.isSprite){if(!H.frustumCulled||K.intersectsSprite(H)){se&&Pe.setFromMatrixPosition(H.matrixWorld).applyMatrix4(Ce);const Ue=le.update(H),Ze=H.material;Ze.visible&&_.push(H,Ue,Ze,he,Pe.z,null)}}else if((H.isMesh||H.isLine||H.isPoints)&&(!H.frustumCulled||K.intersectsObject(H))){const Ue=le.update(H),Ze=H.material;if(se&&(H.boundingSphere!==void 0?(H.boundingSphere===null&&H.computeBoundingSphere(),Pe.copy(H.boundingSphere.center)):(Ue.boundingSphere===null&&Ue.computeBoundingSphere(),Pe.copy(Ue.boundingSphere.center)),Pe.applyMatrix4(H.matrixWorld).applyMatrix4(Ce)),Array.isArray(Ze)){const qe=Ue.groups;for(let it=0,at=qe.length;it<at;it++){const et=qe[it],lt=Ze[et.materialIndex];lt&&lt.visible&&_.push(H,Ue,lt,he,Pe.z,et)}}else Ze.visible&&_.push(H,Ue,Ze,he,Pe.z,null)}}const Ae=H.children;for(let Ue=0,Ze=Ae.length;Ue<Ze;Ue++)Ut(Ae[Ue],ne,he,se)}function In(H,ne,he,se){const pe=H.opaque,Ae=H.transmissive,Ue=H.transparent;v.setupLightsView(he),re===!0&&ze.setGlobalState(S.clippingPlanes,he),se&&ue.viewport(I.copy(se)),pe.length>0&&Nt(pe,ne,he),Ae.length>0&&Nt(Ae,ne,he),Ue.length>0&&Nt(Ue,ne,he),ue.buffers.depth.setTest(!0),ue.buffers.depth.setMask(!0),ue.buffers.color.setMask(!0),ue.setPolygonOffset(!1)}function Ht(H,ne,he,se){if((he.isScene===!0?he.overrideMaterial:null)!==null)return;v.state.transmissionRenderTarget[se.id]===void 0&&(v.state.transmissionRenderTarget[se.id]=new Ya(1,1,{generateMipmaps:!0,type:de.has("EXT_color_buffer_half_float")||de.has("EXT_color_buffer_float")?vr:gs,minFilter:Ko,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:qt.workingColorSpace}));const Ae=v.state.transmissionRenderTarget[se.id],Ue=se.viewport||I;Ae.setSize(Ue.z*S.transmissionResolutionScale,Ue.w*S.transmissionResolutionScale);const Ze=S.getRenderTarget();S.setRenderTarget(Ae),S.getClearColor(G),Y=S.getClearAlpha(),Y<1&&S.setClearColor(16777215,.5),S.clear(),xe&&He.render(he);const qe=S.toneMapping;S.toneMapping=il;const it=se.viewport;if(se.viewport!==void 0&&(se.viewport=void 0),v.setupLightsView(se),re===!0&&ze.setGlobalState(S.clippingPlanes,se),Nt(H,he,se),Xe.updateMultisampleRenderTarget(Ae),Xe.updateRenderTargetMipmap(Ae),de.has("WEBGL_multisampled_render_to_texture")===!1){let at=!1;for(let et=0,lt=ne.length;et<lt;et++){const Pt=ne[et],zt=Pt.object,It=Pt.geometry,Dt=Pt.material,Et=Pt.group;if(Dt.side===xo&&zt.layers.test(se.layers)){const dn=Dt.side;Dt.side=ms,Dt.needsUpdate=!0,si(zt,he,se,It,Dt,Et),Dt.side=dn,Dt.needsUpdate=!0,at=!0}}at===!0&&(Xe.updateMultisampleRenderTarget(Ae),Xe.updateRenderTargetMipmap(Ae))}S.setRenderTarget(Ze),S.setClearColor(G,Y),it!==void 0&&(se.viewport=it),S.toneMapping=qe}function Nt(H,ne,he){const se=ne.isScene===!0?ne.overrideMaterial:null;for(let pe=0,Ae=H.length;pe<Ae;pe++){const Ue=H[pe],Ze=Ue.object,qe=Ue.geometry,it=Ue.group;let at=Ue.material;at.allowOverride===!0&&se!==null&&(at=se),Ze.layers.test(he.layers)&&si(Ze,ne,he,qe,at,it)}}function si(H,ne,he,se,pe,Ae){H.onBeforeRender(S,ne,he,se,pe,Ae),H.modelViewMatrix.multiplyMatrices(he.matrixWorldInverse,H.matrixWorld),H.normalMatrix.getNormalMatrix(H.modelViewMatrix),pe.onBeforeRender(S,ne,he,se,H,Ae),pe.transparent===!0&&pe.side===xo&&pe.forceSinglePass===!1?(pe.side=ms,pe.needsUpdate=!0,S.renderBufferDirect(he,ne,se,pe,H,Ae),pe.side=sl,pe.needsUpdate=!0,S.renderBufferDirect(he,ne,se,pe,H,Ae),pe.side=xo):S.renderBufferDirect(he,ne,se,pe,H,Ae),H.onAfterRender(S,ne,he,se,pe,Ae)}function Rn(H,ne,he){ne.isScene!==!0&&(ne=De);const se=Le.get(H),pe=v.state.lights,Ae=v.state.shadowsArray,Ue=pe.state.version,Ze=ge.getParameters(H,pe.state,Ae,ne,he),qe=ge.getProgramCacheKey(Ze);let it=se.programs;se.environment=H.isMeshStandardMaterial?ne.environment:null,se.fog=ne.fog,se.envMap=(H.isMeshStandardMaterial?V:gt).get(H.envMap||se.environment),se.envMapRotation=se.environment!==null&&H.envMap===null?ne.environmentRotation:H.envMapRotation,it===void 0&&(H.addEventListener("dispose",xt),it=new Map,se.programs=it);let at=it.get(qe);if(at!==void 0){if(se.currentProgram===at&&se.lightsStateVersion===Ue)return q(H,Ze),at}else Ze.uniforms=ge.getUniforms(H),H.onBeforeCompile(Ze,S),at=ge.acquireProgram(Ze,qe),it.set(qe,at),se.uniforms=Ze.uniforms;const et=se.uniforms;return(!H.isShaderMaterial&&!H.isRawShaderMaterial||H.clipping===!0)&&(et.clippingPlanes=ze.uniform),q(H,Ze),se.needsLights=Ne(H),se.lightsStateVersion=Ue,se.needsLights&&(et.ambientLightColor.value=pe.state.ambient,et.lightProbe.value=pe.state.probe,et.directionalLights.value=pe.state.directional,et.directionalLightShadows.value=pe.state.directionalShadow,et.spotLights.value=pe.state.spot,et.spotLightShadows.value=pe.state.spotShadow,et.rectAreaLights.value=pe.state.rectArea,et.ltc_1.value=pe.state.rectAreaLTC1,et.ltc_2.value=pe.state.rectAreaLTC2,et.pointLights.value=pe.state.point,et.pointLightShadows.value=pe.state.pointShadow,et.hemisphereLights.value=pe.state.hemi,et.directionalShadowMap.value=pe.state.directionalShadowMap,et.directionalShadowMatrix.value=pe.state.directionalShadowMatrix,et.spotShadowMap.value=pe.state.spotShadowMap,et.spotLightMatrix.value=pe.state.spotLightMatrix,et.spotLightMap.value=pe.state.spotLightMap,et.pointShadowMap.value=pe.state.pointShadowMap,et.pointShadowMatrix.value=pe.state.pointShadowMatrix),se.currentProgram=at,se.uniformsList=null,at}function z(H){if(H.uniformsList===null){const ne=H.currentProgram.getUniforms();H.uniformsList=_1.seqWithValue(ne.seq,H.uniforms)}return H.uniformsList}function q(H,ne){const he=Le.get(H);he.outputColorSpace=ne.outputColorSpace,he.batching=ne.batching,he.batchingColor=ne.batchingColor,he.instancing=ne.instancing,he.instancingColor=ne.instancingColor,he.instancingMorph=ne.instancingMorph,he.skinning=ne.skinning,he.morphTargets=ne.morphTargets,he.morphNormals=ne.morphNormals,he.morphColors=ne.morphColors,he.morphTargetsCount=ne.morphTargetsCount,he.numClippingPlanes=ne.numClippingPlanes,he.numIntersection=ne.numClipIntersection,he.vertexAlphas=ne.vertexAlphas,he.vertexTangents=ne.vertexTangents,he.toneMapping=ne.toneMapping}function fe(H,ne,he,se,pe){ne.isScene!==!0&&(ne=De),Xe.resetTextureUnits();const Ae=ne.fog,Ue=se.isMeshStandardMaterial?ne.environment:null,Ze=T===null?S.outputColorSpace:T.isXRRenderTarget===!0?T.texture.colorSpace:ll,qe=(se.isMeshStandardMaterial?V:gt).get(se.envMap||Ue),it=se.vertexColors===!0&&!!he.attributes.color&&he.attributes.color.itemSize===4,at=!!he.attributes.tangent&&(!!se.normalMap||se.anisotropy>0),et=!!he.morphAttributes.position,lt=!!he.morphAttributes.normal,Pt=!!he.morphAttributes.color;let zt=il;se.toneMapped&&(T===null||T.isXRRenderTarget===!0)&&(zt=S.toneMapping);const It=he.morphAttributes.position||he.morphAttributes.normal||he.morphAttributes.color,Dt=It!==void 0?It.length:0,Et=Le.get(se),dn=v.state.lights;if(re===!0&&(oe===!0||H!==R)){const Wn=H===R&&se.id===E;ze.setState(se,H,Wn)}let $t=!1;se.version===Et.__version?(Et.needsLights&&Et.lightsStateVersion!==dn.state.version||Et.outputColorSpace!==Ze||pe.isBatchedMesh&&Et.batching===!1||!pe.isBatchedMesh&&Et.batching===!0||pe.isBatchedMesh&&Et.batchingColor===!0&&pe.colorTexture===null||pe.isBatchedMesh&&Et.batchingColor===!1&&pe.colorTexture!==null||pe.isInstancedMesh&&Et.instancing===!1||!pe.isInstancedMesh&&Et.instancing===!0||pe.isSkinnedMesh&&Et.skinning===!1||!pe.isSkinnedMesh&&Et.skinning===!0||pe.isInstancedMesh&&Et.instancingColor===!0&&pe.instanceColor===null||pe.isInstancedMesh&&Et.instancingColor===!1&&pe.instanceColor!==null||pe.isInstancedMesh&&Et.instancingMorph===!0&&pe.morphTexture===null||pe.isInstancedMesh&&Et.instancingMorph===!1&&pe.morphTexture!==null||Et.envMap!==qe||se.fog===!0&&Et.fog!==Ae||Et.numClippingPlanes!==void 0&&(Et.numClippingPlanes!==ze.numPlanes||Et.numIntersection!==ze.numIntersection)||Et.vertexAlphas!==it||Et.vertexTangents!==at||Et.morphTargets!==et||Et.morphNormals!==lt||Et.morphColors!==Pt||Et.toneMapping!==zt||Et.morphTargetsCount!==Dt)&&($t=!0):($t=!0,Et.__version=se.version);let en=Et.currentProgram;$t===!0&&(en=Rn(se,ne,pe));let $n=!1,Zt=!1,hn=!1;const Vt=en.getUniforms(),bi=Et.uniforms;if(ue.useProgram(en.program)&&($n=!0,Zt=!0,hn=!0),se.id!==E&&(E=se.id,Zt=!0),$n||R!==H){ue.buffers.depth.getReversed()?(_e.copy(H.projectionMatrix),sne(_e),ane(_e),Vt.setValue($,"projectionMatrix",_e)):Vt.setValue($,"projectionMatrix",H.projectionMatrix),Vt.setValue($,"viewMatrix",H.matrixWorldInverse);const Ji=Vt.map.cameraPosition;Ji!==void 0&&Ji.setValue($,Ee.setFromMatrixPosition(H.matrixWorld)),J.logarithmicDepthBuffer&&Vt.setValue($,"logDepthBufFC",2/(Math.log(H.far+1)/Math.LN2)),(se.isMeshPhongMaterial||se.isMeshToonMaterial||se.isMeshLambertMaterial||se.isMeshBasicMaterial||se.isMeshStandardMaterial||se.isShaderMaterial)&&Vt.setValue($,"isOrthographic",H.isOrthographicCamera===!0),R!==H&&(R=H,Zt=!0,hn=!0)}if(pe.isSkinnedMesh){Vt.setOptional($,pe,"bindMatrix"),Vt.setOptional($,pe,"bindMatrixInverse");const Wn=pe.skeleton;Wn&&(Wn.boneTexture===null&&Wn.computeBoneTexture(),Vt.setValue($,"boneTexture",Wn.boneTexture,Xe))}pe.isBatchedMesh&&(Vt.setOptional($,pe,"batchingTexture"),Vt.setValue($,"batchingTexture",pe._matricesTexture,Xe),Vt.setOptional($,pe,"batchingIdTexture"),Vt.setValue($,"batchingIdTexture",pe._indirectTexture,Xe),Vt.setOptional($,pe,"batchingColorTexture"),pe._colorsTexture!==null&&Vt.setValue($,"batchingColorTexture",pe._colorsTexture,Xe));const jn=he.morphAttributes;if((jn.position!==void 0||jn.normal!==void 0||jn.color!==void 0)&&nt.update(pe,he,en),(Zt||Et.receiveShadow!==pe.receiveShadow)&&(Et.receiveShadow=pe.receiveShadow,Vt.setValue($,"receiveShadow",pe.receiveShadow)),se.isMeshGouraudMaterial&&se.envMap!==null&&(bi.envMap.value=qe,bi.flipEnvMap.value=qe.isCubeTexture&&qe.isRenderTargetTexture===!1?-1:1),se.isMeshStandardMaterial&&se.envMap===null&&ne.environment!==null&&(bi.envMapIntensity.value=ne.environmentIntensity),Zt&&(Vt.setValue($,"toneMappingExposure",S.toneMappingExposure),Et.needsLights&&Me(bi,hn),Ae&&se.fog===!0&&ye.refreshFogUniforms(bi,Ae),ye.refreshMaterialUniforms(bi,se,L,Q,v.state.transmissionRenderTarget[H.id]),_1.upload($,z(Et),bi,Xe)),se.isShaderMaterial&&se.uniformsNeedUpdate===!0&&(_1.upload($,z(Et),bi,Xe),se.uniformsNeedUpdate=!1),se.isSpriteMaterial&&Vt.setValue($,"center",pe.center),Vt.setValue($,"modelViewMatrix",pe.modelViewMatrix),Vt.setValue($,"normalMatrix",pe.normalMatrix),Vt.setValue($,"modelMatrix",pe.matrixWorld),se.isShaderMaterial||se.isRawShaderMaterial){const Wn=se.uniformsGroups;for(let Ji=0,pc=Wn.length;Ji<pc;Ji++){const Hs=Wn[Ji];ce.update(Hs,en),ce.bind(Hs,en)}}return en}function Me(H,ne){H.ambientLightColor.needsUpdate=ne,H.lightProbe.needsUpdate=ne,H.directionalLights.needsUpdate=ne,H.directionalLightShadows.needsUpdate=ne,H.pointLights.needsUpdate=ne,H.pointLightShadows.needsUpdate=ne,H.spotLights.needsUpdate=ne,H.spotLightShadows.needsUpdate=ne,H.rectAreaLights.needsUpdate=ne,H.hemisphereLights.needsUpdate=ne}function Ne(H){return H.isMeshLambertMaterial||H.isMeshToonMaterial||H.isMeshPhongMaterial||H.isMeshStandardMaterial||H.isShadowMaterial||H.isShaderMaterial&&H.lights===!0}this.getActiveCubeFace=function(){return P},this.getActiveMipmapLevel=function(){return k},this.getRenderTarget=function(){return T},this.setRenderTargetTextures=function(H,ne,he){const se=Le.get(H);se.__autoAllocateDepthBuffer=H.resolveDepthBuffer===!1,se.__autoAllocateDepthBuffer===!1&&(se.__useRenderToTexture=!1),Le.get(H.texture).__webglTexture=ne,Le.get(H.depthTexture).__webglTexture=se.__autoAllocateDepthBuffer?void 0:he,se.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(H,ne){const he=Le.get(H);he.__webglFramebuffer=ne,he.__useDefaultFramebuffer=ne===void 0};const Ie=$.createFramebuffer();this.setRenderTarget=function(H,ne=0,he=0){T=H,P=ne,k=he;let se=!0,pe=null,Ae=!1,Ue=!1;if(H){const qe=Le.get(H);if(qe.__useDefaultFramebuffer!==void 0)ue.bindFramebuffer($.FRAMEBUFFER,null),se=!1;else if(qe.__webglFramebuffer===void 0)Xe.setupRenderTarget(H);else if(qe.__hasExternalTextures)Xe.rebindTextures(H,Le.get(H.texture).__webglTexture,Le.get(H.depthTexture).__webglTexture);else if(H.depthBuffer){const et=H.depthTexture;if(qe.__boundDepthTexture!==et){if(et!==null&&Le.has(et)&&(H.width!==et.image.width||H.height!==et.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Xe.setupDepthRenderbuffer(H)}}const it=H.texture;(it.isData3DTexture||it.isDataArrayTexture||it.isCompressedArrayTexture)&&(Ue=!0);const at=Le.get(H).__webglFramebuffer;H.isWebGLCubeRenderTarget?(Array.isArray(at[ne])?pe=at[ne][he]:pe=at[ne],Ae=!0):H.samples>0&&Xe.useMultisampledRTT(H)===!1?pe=Le.get(H).__webglMultisampledFramebuffer:Array.isArray(at)?pe=at[he]:pe=at,I.copy(H.viewport),D.copy(H.scissor),B=H.scissorTest}else I.copy(te).multiplyScalar(L).floor(),D.copy(ae).multiplyScalar(L).floor(),B=me;if(he!==0&&(pe=Ie),ue.bindFramebuffer($.FRAMEBUFFER,pe)&&se&&ue.drawBuffers(H,pe),ue.viewport(I),ue.scissor(D),ue.setScissorTest(B),Ae){const qe=Le.get(H.texture);$.framebufferTexture2D($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_CUBE_MAP_POSITIVE_X+ne,qe.__webglTexture,he)}else if(Ue){const qe=Le.get(H.texture),it=ne;$.framebufferTextureLayer($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,qe.__webglTexture,he,it)}else if(H!==null&&he!==0){const qe=Le.get(H.texture);$.framebufferTexture2D($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_2D,qe.__webglTexture,he)}E=-1},this.readRenderTargetPixels=function(H,ne,he,se,pe,Ae,Ue,Ze=0){if(!(H&&H.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let qe=Le.get(H).__webglFramebuffer;if(H.isWebGLCubeRenderTarget&&Ue!==void 0&&(qe=qe[Ue]),qe){ue.bindFramebuffer($.FRAMEBUFFER,qe);try{const it=H.textures[Ze],at=it.format,et=it.type;if(!J.textureFormatReadable(at)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!J.textureTypeReadable(et)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ne>=0&&ne<=H.width-se&&he>=0&&he<=H.height-pe&&(H.textures.length>1&&$.readBuffer($.COLOR_ATTACHMENT0+Ze),$.readPixels(ne,he,se,pe,We.convert(at),We.convert(et),Ae))}finally{const it=T!==null?Le.get(T).__webglFramebuffer:null;ue.bindFramebuffer($.FRAMEBUFFER,it)}}},this.readRenderTargetPixelsAsync=async function(H,ne,he,se,pe,Ae,Ue,Ze=0){if(!(H&&H.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let qe=Le.get(H).__webglFramebuffer;if(H.isWebGLCubeRenderTarget&&Ue!==void 0&&(qe=qe[Ue]),qe)if(ne>=0&&ne<=H.width-se&&he>=0&&he<=H.height-pe){ue.bindFramebuffer($.FRAMEBUFFER,qe);const it=H.textures[Ze],at=it.format,et=it.type;if(!J.textureFormatReadable(at))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!J.textureTypeReadable(et))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const lt=$.createBuffer();$.bindBuffer($.PIXEL_PACK_BUFFER,lt),$.bufferData($.PIXEL_PACK_BUFFER,Ae.byteLength,$.STREAM_READ),H.textures.length>1&&$.readBuffer($.COLOR_ATTACHMENT0+Ze),$.readPixels(ne,he,se,pe,We.convert(at),We.convert(et),0);const Pt=T!==null?Le.get(T).__webglFramebuffer:null;ue.bindFramebuffer($.FRAMEBUFFER,Pt);const zt=$.fenceSync($.SYNC_GPU_COMMANDS_COMPLETE,0);return $.flush(),await rne($,zt,4),$.bindBuffer($.PIXEL_PACK_BUFFER,lt),$.getBufferSubData($.PIXEL_PACK_BUFFER,0,Ae),$.deleteBuffer(lt),$.deleteSync(zt),Ae}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(H,ne=null,he=0){const se=Math.pow(2,-he),pe=Math.floor(H.image.width*se),Ae=Math.floor(H.image.height*se),Ue=ne!==null?ne.x:0,Ze=ne!==null?ne.y:0;Xe.setTexture2D(H,0),$.copyTexSubImage2D($.TEXTURE_2D,he,0,0,Ue,Ze,pe,Ae),ue.unbindTexture()};const Ke=$.createFramebuffer(),$e=$.createFramebuffer();this.copyTextureToTexture=function(H,ne,he=null,se=null,pe=0,Ae=null){Ae===null&&(pe!==0?(pp("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ae=pe,pe=0):Ae=0);let Ue,Ze,qe,it,at,et,lt,Pt,zt;const It=H.isCompressedTexture?H.mipmaps[Ae]:H.image;if(he!==null)Ue=he.max.x-he.min.x,Ze=he.max.y-he.min.y,qe=he.isBox3?he.max.z-he.min.z:1,it=he.min.x,at=he.min.y,et=he.isBox3?he.min.z:0;else{const jn=Math.pow(2,-pe);Ue=Math.floor(It.width*jn),Ze=Math.floor(It.height*jn),H.isDataArrayTexture?qe=It.depth:H.isData3DTexture?qe=Math.floor(It.depth*jn):qe=1,it=0,at=0,et=0}se!==null?(lt=se.x,Pt=se.y,zt=se.z):(lt=0,Pt=0,zt=0);const Dt=We.convert(ne.format),Et=We.convert(ne.type);let dn;ne.isData3DTexture?(Xe.setTexture3D(ne,0),dn=$.TEXTURE_3D):ne.isDataArrayTexture||ne.isCompressedArrayTexture?(Xe.setTexture2DArray(ne,0),dn=$.TEXTURE_2D_ARRAY):(Xe.setTexture2D(ne,0),dn=$.TEXTURE_2D),$.pixelStorei($.UNPACK_FLIP_Y_WEBGL,ne.flipY),$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ne.premultiplyAlpha),$.pixelStorei($.UNPACK_ALIGNMENT,ne.unpackAlignment);const $t=$.getParameter($.UNPACK_ROW_LENGTH),en=$.getParameter($.UNPACK_IMAGE_HEIGHT),$n=$.getParameter($.UNPACK_SKIP_PIXELS),Zt=$.getParameter($.UNPACK_SKIP_ROWS),hn=$.getParameter($.UNPACK_SKIP_IMAGES);$.pixelStorei($.UNPACK_ROW_LENGTH,It.width),$.pixelStorei($.UNPACK_IMAGE_HEIGHT,It.height),$.pixelStorei($.UNPACK_SKIP_PIXELS,it),$.pixelStorei($.UNPACK_SKIP_ROWS,at),$.pixelStorei($.UNPACK_SKIP_IMAGES,et);const Vt=H.isDataArrayTexture||H.isData3DTexture,bi=ne.isDataArrayTexture||ne.isData3DTexture;if(H.isDepthTexture){const jn=Le.get(H),Wn=Le.get(ne),Ji=Le.get(jn.__renderTarget),pc=Le.get(Wn.__renderTarget);ue.bindFramebuffer($.READ_FRAMEBUFFER,Ji.__webglFramebuffer),ue.bindFramebuffer($.DRAW_FRAMEBUFFER,pc.__webglFramebuffer);for(let Hs=0;Hs<qe;Hs++)Vt&&($.framebufferTextureLayer($.READ_FRAMEBUFFER,$.COLOR_ATTACHMENT0,Le.get(H).__webglTexture,pe,et+Hs),$.framebufferTextureLayer($.DRAW_FRAMEBUFFER,$.COLOR_ATTACHMENT0,Le.get(ne).__webglTexture,Ae,zt+Hs)),$.blitFramebuffer(it,at,Ue,Ze,lt,Pt,Ue,Ze,$.DEPTH_BUFFER_BIT,$.NEAREST);ue.bindFramebuffer($.READ_FRAMEBUFFER,null),ue.bindFramebuffer($.DRAW_FRAMEBUFFER,null)}else if(pe!==0||H.isRenderTargetTexture||Le.has(H)){const jn=Le.get(H),Wn=Le.get(ne);ue.bindFramebuffer($.READ_FRAMEBUFFER,Ke),ue.bindFramebuffer($.DRAW_FRAMEBUFFER,$e);for(let Ji=0;Ji<qe;Ji++)Vt?$.framebufferTextureLayer($.READ_FRAMEBUFFER,$.COLOR_ATTACHMENT0,jn.__webglTexture,pe,et+Ji):$.framebufferTexture2D($.READ_FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_2D,jn.__webglTexture,pe),bi?$.framebufferTextureLayer($.DRAW_FRAMEBUFFER,$.COLOR_ATTACHMENT0,Wn.__webglTexture,Ae,zt+Ji):$.framebufferTexture2D($.DRAW_FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_2D,Wn.__webglTexture,Ae),pe!==0?$.blitFramebuffer(it,at,Ue,Ze,lt,Pt,Ue,Ze,$.COLOR_BUFFER_BIT,$.NEAREST):bi?$.copyTexSubImage3D(dn,Ae,lt,Pt,zt+Ji,it,at,Ue,Ze):$.copyTexSubImage2D(dn,Ae,lt,Pt,it,at,Ue,Ze);ue.bindFramebuffer($.READ_FRAMEBUFFER,null),ue.bindFramebuffer($.DRAW_FRAMEBUFFER,null)}else bi?H.isDataTexture||H.isData3DTexture?$.texSubImage3D(dn,Ae,lt,Pt,zt,Ue,Ze,qe,Dt,Et,It.data):ne.isCompressedArrayTexture?$.compressedTexSubImage3D(dn,Ae,lt,Pt,zt,Ue,Ze,qe,Dt,It.data):$.texSubImage3D(dn,Ae,lt,Pt,zt,Ue,Ze,qe,Dt,Et,It):H.isDataTexture?$.texSubImage2D($.TEXTURE_2D,Ae,lt,Pt,Ue,Ze,Dt,Et,It.data):H.isCompressedTexture?$.compressedTexSubImage2D($.TEXTURE_2D,Ae,lt,Pt,It.width,It.height,Dt,It.data):$.texSubImage2D($.TEXTURE_2D,Ae,lt,Pt,Ue,Ze,Dt,Et,It);$.pixelStorei($.UNPACK_ROW_LENGTH,$t),$.pixelStorei($.UNPACK_IMAGE_HEIGHT,en),$.pixelStorei($.UNPACK_SKIP_PIXELS,$n),$.pixelStorei($.UNPACK_SKIP_ROWS,Zt),$.pixelStorei($.UNPACK_SKIP_IMAGES,hn),Ae===0&&ne.generateMipmaps&&$.generateMipmap(dn),ue.unbindTexture()},this.copyTextureToTexture3D=function(H,ne,he=null,se=null,pe=0){return pp('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(H,ne,he,se,pe)},this.initRenderTarget=function(H){Le.get(H).__webglFramebuffer===void 0&&Xe.setupRenderTarget(H)},this.initTexture=function(H){H.isCubeTexture?Xe.setTextureCube(H,0):H.isData3DTexture?Xe.setTexture3D(H,0):H.isDataArrayTexture||H.isCompressedArrayTexture?Xe.setTexture2DArray(H,0):Xe.setTexture2D(H,0),ue.unbindTexture()},this.resetState=function(){P=0,k=0,T=null,ue.reset(),vt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ja}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=qt._getDrawingBufferColorSpace(e),t.unpackColorSpace=qt._getUnpackColorSpace()}}const a8=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:bR,AddEquation:Wc,AddOperation:UB,AdditiveAnimationBlendMode:AR,AdditiveBlending:qC,AgXToneMapping:VB,AlphaFormat:MR,AlwaysCompare:r6,AlwaysDepth:Sb,AlwaysStencilFunc:JC,AmbientLight:tk,AnimationAction:J6,AnimationClip:Wp,AnimationLoader:kie,AnimationMixer:ire,AnimationObjectGroup:tre,AnimationUtils:Cie,ArcCurve:_6,ArrayCamera:Y6,ArrowHelper:Ere,AttachedBindMode:KC,Audio:K6,AudioAnalyser:Wie,AudioContext:nk,AudioListener:Hie,AudioLoader:jie,AxesHelper:Tre,BackSide:ms,BasicDepthPacking:YB,BasicShadowMap:vB,BatchedMesh:g6,Bone:oy,BooleanKeyframeTrack:Fh,Box2:dre,Box3:Gr,Box3Helper:Sre,BoxGeometry:Oh,BoxHelper:wre,BufferAttribute:zn,BufferGeometry:Wt,BufferGeometryLoader:X6,ByteType:uS,Cache:$l,Camera:Yy,CameraHelper:bre,CanvasTexture:Kne,CapsuleGeometry:ES,CatmullRomCurve3:b6,CineonToneMapping:BB,CircleGeometry:TS,ClampToEdgeWrapping:Ai,Clock:ik,Color:ct,ColorKeyframeTrack:XR,ColorManagement:qt,CompressedArrayTexture:Xne,CompressedCubeTexture:Yne,CompressedTexture:MS,CompressedTextureLoader:Nie,ConeGeometry:ev,ConstantAlphaFactor:LB,ConstantColorFactor:IB,Controls:Are,CubeCamera:d6,CubeReflectionMapping:al,CubeRefractionMapping:ku,CubeTexture:Ky,CubeTextureLoader:H6,CubeUVReflectionMapping:cm,CubicBezierCurve:UR,CubicBezierCurve3:w6,CubicInterpolant:j6,CullFaceBack:GC,CullFaceFront:yB,CullFaceFrontBack:ste,CullFaceNone:gB,Curve:Ja,CurvePath:M6,CustomBlending:xB,CustomToneMapping:HB,CylinderGeometry:Qy,Cylindrical:ure,Data3DTexture:vS,DataArrayTexture:yS,DataTexture:So,DataTextureLoader:KR,DataUtils:$d,DecrementStencilOp:vte,DecrementWrapStencilOp:_te,DefaultLoadingManager:YR,DepthFormat:Fp,DepthStencilFormat:Up,DepthTexture:OR,DetachedBindMode:WB,DirectionalLight:ek,DirectionalLightHelper:_re,DiscreteInterpolant:z6,DodecahedronGeometry:CS,DoubleSide:xo,DstAlphaFactor:AB,DstColorFactor:RB,DynamicCopyUsage:Lte,DynamicDrawUsage:Pte,DynamicReadUsage:Nte,EdgesGeometry:x6,EllipseCurve:AS,EqualCompare:e6,EqualDepth:Eb,EqualStencilFunc:Mte,EquirectangularReflectionMapping:Sh,EquirectangularRefractionMapping:Q0,Euler:qi,EventDispatcher:ul,ExtrudeGeometry:PS,FileLoader:qr,Float16BufferAttribute:Cne,Float32BufferAttribute:mt,FloatType:yi,Fog:bS,FogExp2:_S,FramebufferTexture:qne,FrontSide:sl,Frustum:dm,FrustumArray:SS,GLBufferAttribute:lre,GLSL1:Fte,GLSL3:QC,GreaterCompare:t6,GreaterDepth:Cb,GreaterEqualCompare:i6,GreaterEqualDepth:Tb,GreaterEqualStencilFunc:Ate,GreaterStencilFunc:Tte,GridHelper:vre,Group:Vl,HalfFloatType:vr,HemisphereLight:V6,HemisphereLightHelper:yre,IcosahedronGeometry:tv,ImageBitmapLoader:Uie,ImageLoader:dy,ImageUtils:o6,IncrementStencilOp:yte,IncrementWrapStencilOp:xte,InstancedBufferAttribute:Bp,InstancedBufferGeometry:q6,InstancedInterleavedBuffer:ore,InstancedMesh:m6,Int16BufferAttribute:Ene,Int32BufferAttribute:Tne,Int8BufferAttribute:wne,IntType:Gy,InterleavedBuffer:wS,InterleavedBufferAttribute:Mh,Interpolant:rv,InterpolateDiscrete:ty,InterpolateLinear:tw,InterpolateSmooth:v1,InterpolationSamplingMode:zte,InterpolationSamplingType:jte,InvertStencilOp:bte,KeepStencilOp:Pd,KeyframeTrack:Qa,LOD:p6,LatheGeometry:RS,Layers:rh,LessCompare:QB,LessDepth:Mb,LessEqualCompare:PR,LessEqualDepth:wh,LessEqualStencilFunc:Ete,LessStencilFunc:Ste,Light:Wu,LightProbe:G6,Line:nc,Line3:hre,LineBasicMaterial:ar,LineCurve:jR,LineCurve3:S6,LineDashedMaterial:O6,LineLoop:y6,LineSegments:Ka,LinearFilter:On,LinearInterpolant:qR,LinearMipMapLinearFilter:ZC,LinearMipMapNearestFilter:lte,LinearMipmapLinearFilter:Ko,LinearMipmapNearestFilter:Zg,LinearSRGBColorSpace:ll,LinearToneMapping:jB,LinearTransfer:iy,Loader:Yi,LoaderUtils:hy,LoadingManager:US,LoopOnce:GB,LoopPingPong:XB,LoopRepeat:qB,MOUSE:ite,Material:_r,MaterialLoader:jS,MathUtils:Ii,Matrix2:lk,Matrix3:Xt,Matrix4:wt,MaxEquation:SB,Mesh:Zn,MeshBasicMaterial:fc,MeshDepthMaterial:$R,MeshDistanceMaterial:WR,MeshLambertMaterial:VR,MeshMatcapMaterial:L6,MeshNormalMaterial:D6,MeshPhongMaterial:tu,MeshPhysicalMaterial:N6,MeshStandardMaterial:FS,MeshToonMaterial:I6,MinEquation:wB,MirroredRepeatWrapping:ey,MixOperation:FB,MultiplyBlending:YC,MultiplyOperation:Wy,NearestFilter:Tr,NearestMipMapLinearFilter:ote,NearestMipMapNearestFilter:ate,NearestMipmapLinearFilter:Jf,NearestMipmapNearestFilter:wR,NeutralToneMapping:$B,NeverCompare:JB,NeverDepth:wb,NeverStencilFunc:wte,NoBlending:nl,NoColorSpace:Ol,NoToneMapping:il,NormalAnimationBlendMode:gS,NormalBlending:nh,NotEqualCompare:n6,NotEqualDepth:Ab,NotEqualStencilFunc:Cte,NumberKeyframeTrack:Vp,Object3D:xn,ObjectLoader:Oie,ObjectSpaceNormalMap:ZB,OctahedronGeometry:nv,OneFactor:EB,OneMinusConstantAlphaFactor:OB,OneMinusConstantColorFactor:DB,OneMinusDstAlphaFactor:PB,OneMinusDstColorFactor:kB,OneMinusSrcAlphaFactor:bb,OneMinusSrcColorFactor:CB,OrthographicCamera:hm,PCFShadowMap:cS,PCFSoftShadowMap:Kg,PMREMGenerator:aA,Path:sw,PerspectiveCamera:ir,Plane:zc,PlaneGeometry:$u,PlaneHelper:Mre,PointLight:aw,PointLightHelper:mre,Points:r0,PointsMaterial:Wd,PolarGridHelper:xre,PolyhedronGeometry:Vu,PositionalAudio:$ie,PropertyBinding:vn,PropertyMixer:Z6,QuadraticBezierCurve:zR,QuadraticBezierCurve3:BR,Quaternion:Ei,QuaternionKeyframeTrack:Th,QuaternionLinearInterpolant:B6,RED_GREEN_RGTC2_Format:Qb,RED_RGTC1_Format:CR,REVISION:$y,RGBADepthPacking:KB,RGBAFormat:Fi,RGBAIntegerFormat:mS,RGBA_ASTC_10x10_Format:qb,RGBA_ASTC_10x5_Format:$b,RGBA_ASTC_10x6_Format:Wb,RGBA_ASTC_10x8_Format:Gb,RGBA_ASTC_12x10_Format:Xb,RGBA_ASTC_12x12_Format:Yb,RGBA_ASTC_4x4_Format:Ob,RGBA_ASTC_5x4_Format:Fb,RGBA_ASTC_5x5_Format:Ub,RGBA_ASTC_6x5_Format:jb,RGBA_ASTC_6x6_Format:zb,RGBA_ASTC_8x5_Format:Bb,RGBA_ASTC_8x6_Format:Hb,RGBA_ASTC_8x8_Format:Vb,RGBA_BPTC_Format:n0,RGBA_ETC2_EAC_Format:Lb,RGBA_PVRTC_2BPPV1_Format:Nb,RGBA_PVRTC_4BPPV1_Format:kb,RGBA_S3TC_DXT1_Format:Qg,RGBA_S3TC_DXT3_Format:e0,RGBA_S3TC_DXT5_Format:t0,RGBDepthPacking:fte,RGBFormat:ER,RGBIntegerFormat:cte,RGB_BPTC_SIGNED_Format:Kb,RGB_BPTC_UNSIGNED_Format:Zb,RGB_ETC1_Format:Ib,RGB_ETC2_Format:Db,RGB_PVRTC_2BPPV1_Format:Rb,RGB_PVRTC_4BPPV1_Format:Pb,RGB_S3TC_DXT1_Format:Jg,RGDepthPacking:pte,RGFormat:TR,RGIntegerFormat:pS,RawShaderMaterial:k6,Ray:um,Raycaster:ok,RectAreaLight:$6,RedFormat:qy,RedIntegerFormat:Xy,ReinhardToneMapping:zB,RenderTarget:kR,RenderTarget3D:rre,RepeatWrapping:Nu,ReplaceStencilOp:gte,ReverseSubtractEquation:bB,RingGeometry:kS,SIGNED_RED_GREEN_RGTC2_Format:ew,SIGNED_RED_RGTC1_Format:Jb,SRGBColorSpace:Mn,SRGBTransfer:Dn,Scene:Zy,ShaderChunk:rn,ShaderLib:yo,ShaderMaterial:js,ShadowMaterial:R6,Shape:sh,ShapeGeometry:NS,ShapePath:Cre,ShapeUtils:za,ShortType:dS,Skeleton:Jy,SkeletonHelper:pre,SkinnedMesh:LR,Source:eu,Sphere:Cr,SphereGeometry:iv,Spherical:cre,SphericalHarmonics3:W6,SplineCurve:HR,SpotLight:QR,SpotLightHelper:fre,Sprite:f6,SpriteMaterial:DR,SrcAlphaFactor:_b,SrcAlphaSaturateFactor:NB,SrcColorFactor:TB,StaticCopyUsage:Dte,StaticDrawUsage:ry,StaticReadUsage:kte,StereoCamera:zie,StreamCopyUsage:Ote,StreamDrawUsage:Rte,StreamReadUsage:Ite,StringKeyframeTrack:Uh,SubtractEquation:_B,SubtractiveBlending:XC,TOUCH:rte,TangentSpaceNormalMap:Hu,TetrahedronGeometry:IS,Texture:Fn,TextureLoader:ZR,TextureUtils:Ire,TimestampQuery:Ute,TorusGeometry:DS,TorusKnotGeometry:LS,Triangle:Rs,TriangleFanDrawMode:hte,TriangleStripDrawMode:dte,TrianglesDrawMode:ute,TubeGeometry:OS,UVMapping:Ru,Uint16BufferAttribute:xS,Uint32BufferAttribute:NR,Uint8BufferAttribute:Sne,Uint8ClampedBufferAttribute:Mne,Uniform:ak,UniformsGroup:are,UniformsLib:pt,UniformsUtils:u6,UnsignedByteType:gs,UnsignedInt248Type:Op,UnsignedInt5999Type:SR,UnsignedIntType:ol,UnsignedShort4444Type:hS,UnsignedShort5551Type:fS,UnsignedShortType:Lp,VSMShadowMap:ho,Vector2:Ye,Vector3:Z,Vector4:mn,VectorKeyframeTrack:$p,VideoFrameTexture:Gne,VideoTexture:v6,WebGL3DRenderTarget:dne,WebGLArrayRenderTarget:une,WebGLCoordinateSystem:ja,WebGLCubeRenderTarget:IR,WebGLRenderTarget:Ya,WebGLRenderer:uk,WebGLUtils:s8,WebGPUCoordinateSystem:sy,WebXRController:x1,WireframeGeometry:P6,WrapAroundEnding:ny,ZeroCurvatureEnding:Hd,ZeroFactor:MB,ZeroSlopeEnding:Vd,ZeroStencilOp:mte,createCanvasElement:a6},Symbol.toStringTag,{value:"Module"}));var o8={exports:{}},jh={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */jh.ConcurrentRoot=1;jh.ContinuousEventPriority=4;jh.DefaultEventPriority=16;jh.DiscreteEventPriority=1;jh.IdleEventPriority=536870912;jh.LegacyRoot=0;o8.exports=jh;var tp=o8.exports;function pce(n){let e;const t=new Set,i=(c,u)=>{const d=typeof c=="function"?c(e):c;if(d!==e){const h=e;e=u?d:Object.assign({},e,d),t.forEach(p=>p(e,h))}},r=()=>e,s=(c,u=r,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=u(e);function p(){const y=u(e);if(!d(h,y)){const x=h;c(h=y,x)}}return t.add(p),()=>t.delete(p)},l={setState:i,getState:r,subscribe:(c,u,d)=>u||d?s(c,u,d):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,r,l),l}const mce=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),MF=mce?F.useEffect:F.useLayoutEffect;function l8(n){const e=typeof n=="function"?pce(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=F.useReducer(_=>_+1,0),a=e.getState(),o=F.useRef(a),l=F.useRef(i),c=F.useRef(r),u=F.useRef(!1),d=F.useRef();d.current===void 0&&(d.current=i(a));let h,p=!1;(o.current!==a||l.current!==i||c.current!==r||u.current)&&(h=i(a),p=!r(d.current,h)),MF(()=>{p&&(d.current=h),o.current=a,l.current=i,c.current=r,u.current=!1});const y=F.useRef(a);MF(()=>{const _=()=>{try{const b=e.getState(),w=l.current(b);c.current(d.current,w)||(o.current=b,d.current=w,s())}catch{u.current=!0,s()}},v=e.subscribe(_);return e.getState()!==y.current&&_(),v},[]);const x=p?h:d.current;return F.useDebugValue(x),x};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}const gce=n=>typeof n=="object"&&typeof n.then=="function",qd=[];function c8(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function u8(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of qd)if(c8(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=qd.indexOf(r);s!==-1&&qd.splice(s,1)},promise:(gce(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(qd.push(r),!t)throw r.promise}const yce=(n,e,t)=>u8(n,e,!1,t),vce=(n,e,t)=>void u8(n,e,!0,t),xce=n=>{if(n===void 0||n.length===0)qd.splice(0,qd.length);else{const e=qd.find(t=>c8(n,t.keys,t.equal));e&&e.remove()}};var d8={exports:{}},h8={exports:{}},f8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(L,W){var j=L.length;L.push(W);e:for(;0<j;){var te=j-1>>>1,ae=L[te];if(0<r(ae,W))L[te]=W,L[j]=ae,j=te;else break e}}function t(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var W=L[0],j=L.pop();if(j!==W){L[0]=j;e:for(var te=0,ae=L.length,me=ae>>>1;te<me;){var K=2*(te+1)-1,re=L[K],oe=K+1,_e=L[oe];if(0>r(re,j))oe<ae&&0>r(_e,re)?(L[te]=_e,L[oe]=j,te=oe):(L[te]=re,L[K]=j,te=K);else if(oe<ae&&0>r(_e,j))L[te]=_e,L[oe]=j,te=oe;else break e}}return W}function r(L,W){var j=L.sortIndex-W.sortIndex;return j!==0?j:L.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,p=!1,y=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(L){for(var W=t(c);W!==null;){if(W.callback===null)i(c);else if(W.startTime<=L)i(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=t(c)}}function S(L){if(x=!1,w(L),!y)if(t(l)!==null)y=!0,X(A);else{var W=t(c);W!==null&&Q(S,W.startTime-L)}}function A(L,W){y=!1,x&&(x=!1,v(T),T=-1),p=!0;var j=h;try{for(w(W),d=t(l);d!==null&&(!(d.expirationTime>W)||L&&!I());){var te=d.callback;if(typeof te=="function"){d.callback=null,h=d.priorityLevel;var ae=te(d.expirationTime<=W);W=n.unstable_now(),typeof ae=="function"?d.callback=ae:d===t(l)&&i(l),w(W)}else i(l);d=t(l)}if(d!==null)var me=!0;else{var K=t(c);K!==null&&Q(S,K.startTime-W),me=!1}return me}finally{d=null,h=j,p=!1}}var P=!1,k=null,T=-1,E=5,R=-1;function I(){return!(n.unstable_now()-R<E)}function D(){if(k!==null){var L=n.unstable_now();R=L;var W=!0;try{W=k(!0,L)}finally{W?B():(P=!1,k=null)}}else P=!1}var B;if(typeof b=="function")B=function(){b(D)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Y=G.port2;G.port1.onmessage=D,B=function(){Y.postMessage(null)}}else B=function(){_(D,0)};function X(L){k=L,P||(P=!0,B())}function Q(L,W){T=_(function(){L(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){y||p||(y=!0,X(A))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(L){switch(h){case 1:case 2:case 3:var W=3;break;default:W=h}var j=h;h=W;try{return L()}finally{h=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,W){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var j=h;h=L;try{return W()}finally{h=j}},n.unstable_scheduleCallback=function(L,W,j){var te=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?te+j:te):j=te,L){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=j+ae,L={id:u++,callback:W,priorityLevel:L,startTime:j,expirationTime:ae,sortIndex:-1},j>te?(L.sortIndex=j,e(c,L),t(l)===null&&L===t(c)&&(x?(v(T),T=-1):x=!0,Q(S,j-te))):(L.sortIndex=ae,e(l,L),y||p||(y=!0,X(A))),L},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(L){var W=h;return function(){var j=h;h=W;try{return L.apply(this,arguments)}finally{h=j}}}})(f8);h8.exports=f8;var lA=h8.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _ce=function(e){var t={},i=F,r=lA,s=Object.assign;function a(f){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+f,M=1;M<arguments.length;M++)m+="&args[]="+encodeURIComponent(arguments[M]);return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),y=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),S=Symbol.for("react.offscreen"),A=Symbol.iterator;function P(f){return f===null||typeof f!="object"?null:(f=A&&f[A]||f["@@iterator"],typeof f=="function"?f:null)}function k(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case u:return"Fragment";case c:return"Portal";case h:return"Profiler";case d:return"StrictMode";case _:return"Suspense";case v:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case y:return(f.displayName||"Context")+".Consumer";case p:return(f._context.displayName||"Context")+".Provider";case x:var m=f.render;return f=f.displayName,f||(f=m.displayName||m.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case b:return m=f.displayName||null,m!==null?m:k(f.type)||"Memo";case w:m=f._payload,f=f._init;try{return k(f(m))}catch{}}return null}function T(f){var m=f.type;switch(f.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=m.render,f=f.displayName||f.name||"",m.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return k(m);case 8:return m===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function E(f){var m=f,M=f;if(f.alternate)for(;m.return;)m=m.return;else{f=m;do m=f,m.flags&4098&&(M=m.return),f=m.return;while(f)}return m.tag===3?M:null}function R(f){if(E(f)!==f)throw Error(a(188))}function I(f){var m=f.alternate;if(!m){if(m=E(f),m===null)throw Error(a(188));return m!==f?null:f}for(var M=f,C=m;;){var N=M.return;if(N===null)break;var U=N.alternate;if(U===null){if(C=N.return,C!==null){M=C;continue}break}if(N.child===U.child){for(U=N.child;U;){if(U===M)return R(N),f;if(U===C)return R(N),m;U=U.sibling}throw Error(a(188))}if(M.return!==C.return)M=N,C=U;else{for(var ie=!1,ve=N.child;ve;){if(ve===M){ie=!0,M=N,C=U;break}if(ve===C){ie=!0,C=N,M=U;break}ve=ve.sibling}if(!ie){for(ve=U.child;ve;){if(ve===M){ie=!0,M=U,C=N;break}if(ve===C){ie=!0,C=U,M=N;break}ve=ve.sibling}if(!ie)throw Error(a(189))}}if(M.alternate!==C)throw Error(a(190))}if(M.tag!==3)throw Error(a(188));return M.stateNode.current===M?f:m}function D(f){return f=I(f),f!==null?B(f):null}function B(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var m=B(f);if(m!==null)return m;f=f.sibling}return null}function G(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){if(f.tag!==4){var m=G(f);if(m!==null)return m}f=f.sibling}return null}var Y=Array.isArray,X=e.getPublicInstance,Q=e.getRootHostContext,L=e.getChildHostContext,W=e.prepareForCommit,j=e.resetAfterCommit,te=e.createInstance,ae=e.appendInitialChild,me=e.finalizeInitialChildren,K=e.prepareUpdate,re=e.shouldSetTextContent,oe=e.createTextInstance,_e=e.scheduleTimeout,Ce=e.cancelTimeout,Ee=e.noTimeout,Pe=e.isPrimaryRenderer,De=e.supportsMutation,xe=e.supportsPersistence,we=e.supportsHydration,$=e.getInstanceFromNode,Se=e.preparePortalMount,de=e.getCurrentEventPriority,J=e.detachDeletedInstance,ue=e.supportsMicrotasks,je=e.scheduleMicrotask,Le=e.supportsTestSelectors,Xe=e.findFiberRoot,gt=e.getBoundingRect,V=e.getTextContent,O=e.isHiddenSubtree,ee=e.matchAccessibilityRole,le=e.setFocusIfFocusable,ge=e.setupIntersectionObserver,ye=e.appendChild,Oe=e.appendChildToContainer,Te=e.commitTextUpdate,ze=e.commitMount,Je=e.commitUpdate,He=e.insertBefore,nt=e.insertInContainerBefore,Tt=e.removeChild,st=e.removeChildFromContainer,We=e.resetTextContent,vt=e.hideInstance,ce=e.hideTextInstance,ke=e.unhideInstance,Ge=e.unhideTextInstance,ht=e.clearContainer,Qe=e.cloneInstance,Ve=e.createContainerChildSet,xt=e.appendChildToContainerChildSet,Ot=e.finalizeContainerChildren,bn=e.replaceContainerChildren,ft=e.cloneHiddenInstance,Ct=e.cloneHiddenTextInstance,Gt=e.canHydrateInstance,dt=e.canHydrateTextInstance,Bt=e.canHydrateSuspenseInstance,Mt=e.isSuspenseInstancePending,Ut=e.isSuspenseInstanceFallback,In=e.registerSuspenseInstanceRetry,Ht=e.getNextHydratableSibling,Nt=e.getFirstHydratableChild,si=e.getFirstHydratableChildWithinContainer,Rn=e.getFirstHydratableChildWithinSuspenseInstance,z=e.hydrateInstance,q=e.hydrateTextInstance,fe=e.hydrateSuspenseInstance,Me=e.getNextHydratableInstanceAfterSuspenseInstance,Ne=e.commitHydratedContainer,Ie=e.commitHydratedSuspenseInstance,Ke=e.clearSuspenseBoundary,$e=e.clearSuspenseBoundaryFromContainer,H=e.shouldDeleteUnhydratedTailInstances,ne=e.didNotMatchHydratedContainerTextInstance,he=e.didNotMatchHydratedTextInstance,se;function pe(f){if(se===void 0)try{throw Error()}catch(M){var m=M.stack.trim().match(/\n( *(at )?)/);se=m&&m[1]||""}return`
`+se+f}var Ae=!1;function Ue(f,m){if(!f||Ae)return"";Ae=!0;var M=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(ot){var C=ot}Reflect.construct(f,[],m)}else{try{m.call()}catch(ot){C=ot}f.call(m.prototype)}else{try{throw Error()}catch(ot){C=ot}f()}}catch(ot){if(ot&&C&&typeof ot.stack=="string"){for(var N=ot.stack.split(`
`),U=C.stack.split(`
`),ie=N.length-1,ve=U.length-1;1<=ie&&0<=ve&&N[ie]!==U[ve];)ve--;for(;1<=ie&&0<=ve;ie--,ve--)if(N[ie]!==U[ve]){if(ie!==1||ve!==1)do if(ie--,ve--,0>ve||N[ie]!==U[ve]){var Be=`
`+N[ie].replace(" at new "," at ");return f.displayName&&Be.includes("<anonymous>")&&(Be=Be.replace("<anonymous>",f.displayName)),Be}while(1<=ie&&0<=ve);break}}}finally{Ae=!1,Error.prepareStackTrace=M}return(f=f?f.displayName||f.name:"")?pe(f):""}var Ze=Object.prototype.hasOwnProperty,qe=[],it=-1;function at(f){return{current:f}}function et(f){0>it||(f.current=qe[it],qe[it]=null,it--)}function lt(f,m){it++,qe[it]=f.current,f.current=m}var Pt={},zt=at(Pt),It=at(!1),Dt=Pt;function Et(f,m){var M=f.type.contextTypes;if(!M)return Pt;var C=f.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===m)return C.__reactInternalMemoizedMaskedChildContext;var N={},U;for(U in M)N[U]=m[U];return C&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=m,f.__reactInternalMemoizedMaskedChildContext=N),N}function dn(f){return f=f.childContextTypes,f!=null}function $t(){et(It),et(zt)}function en(f,m,M){if(zt.current!==Pt)throw Error(a(168));lt(zt,m),lt(It,M)}function $n(f,m,M){var C=f.stateNode;if(m=m.childContextTypes,typeof C.getChildContext!="function")return M;C=C.getChildContext();for(var N in C)if(!(N in m))throw Error(a(108,T(f)||"Unknown",N));return s({},M,C)}function Zt(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||Pt,Dt=zt.current,lt(zt,f),lt(It,It.current),!0}function hn(f,m,M){var C=f.stateNode;if(!C)throw Error(a(169));M?(f=$n(f,m,Dt),C.__reactInternalMemoizedMergedChildContext=f,et(It),et(zt),lt(zt,f)):et(It),lt(It,M)}var Vt=Math.clz32?Math.clz32:Wn,bi=Math.log,jn=Math.LN2;function Wn(f){return f>>>=0,f===0?32:31-(bi(f)/jn|0)|0}var Ji=64,pc=4194304;function Hs(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function gv(f,m){var M=f.pendingLanes;if(M===0)return 0;var C=0,N=f.suspendedLanes,U=f.pingedLanes,ie=M&268435455;if(ie!==0){var ve=ie&~N;ve!==0?C=Hs(ve):(U&=ie,U!==0&&(C=Hs(U)))}else ie=M&~N,ie!==0?C=Hs(ie):U!==0&&(C=Hs(U));if(C===0)return 0;if(m!==0&&m!==C&&!(m&N)&&(N=C&-C,U=m&-m,N>=U||N===16&&(U&4194240)!==0))return m;if(C&4&&(C|=M&16),m=f.entangledLanes,m!==0)for(f=f.entanglements,m&=C;0<m;)M=31-Vt(m),N=1<<M,C|=f[M],m&=~N;return C}function h$(f,m){switch(f){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function f$(f,m){for(var M=f.suspendedLanes,C=f.pingedLanes,N=f.expirationTimes,U=f.pendingLanes;0<U;){var ie=31-Vt(U),ve=1<<ie,Be=N[ie];Be===-1?(!(ve&M)||ve&C)&&(N[ie]=h$(ve,m)):Be<=m&&(f.expiredLanes|=ve),U&=~ve}}function nM(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function iM(f){for(var m=[],M=0;31>M;M++)m.push(f);return m}function pm(f,m,M){f.pendingLanes|=m,m!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,m=31-Vt(m),f[m]=M}function p$(f,m){var M=f.pendingLanes&~m;f.pendingLanes=m,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=m,f.mutableReadLanes&=m,f.entangledLanes&=m,m=f.entanglements;var C=f.eventTimes;for(f=f.expirationTimes;0<M;){var N=31-Vt(M),U=1<<N;m[N]=0,C[N]=-1,f[N]=-1,M&=~U}}function rM(f,m){var M=f.entangledLanes|=m;for(f=f.entanglements;M;){var C=31-Vt(M),N=1<<C;N&m|f[C]&m&&(f[C]|=m),M&=~N}}var Cn=0;function d3(f){return f&=-f,1<f?4<f?f&268435455?16:536870912:4:1}var sM=r.unstable_scheduleCallback,h3=r.unstable_cancelCallback,m$=r.unstable_shouldYield,g$=r.unstable_requestPaint,cr=r.unstable_now,aM=r.unstable_ImmediatePriority,y$=r.unstable_UserBlockingPriority,oM=r.unstable_NormalPriority,v$=r.unstable_IdlePriority,yv=null,Ro=null;function x$(f){if(Ro&&typeof Ro.onCommitFiberRoot=="function")try{Ro.onCommitFiberRoot(yv,f,void 0,(f.current.flags&128)===128)}catch{}}function _$(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var ko=typeof Object.is=="function"?Object.is:_$,dl=null,vv=!1,lM=!1;function f3(f){dl===null?dl=[f]:dl.push(f)}function b$(f){vv=!0,f3(f)}function No(){if(!lM&&dl!==null){lM=!0;var f=0,m=Cn;try{var M=dl;for(Cn=1;f<M.length;f++){var C=M[f];do C=C(!0);while(C!==null)}dl=null,vv=!1}catch(N){throw dl!==null&&(dl=dl.slice(f+1)),sM(aM,No),N}finally{Cn=m,lM=!1}}return null}var w$=o.ReactCurrentBatchConfig;function xv(f,m){if(ko(f,m))return!0;if(typeof f!="object"||f===null||typeof m!="object"||m===null)return!1;var M=Object.keys(f),C=Object.keys(m);if(M.length!==C.length)return!1;for(C=0;C<M.length;C++){var N=M[C];if(!Ze.call(m,N)||!ko(f[N],m[N]))return!1}return!0}function S$(f){switch(f.tag){case 5:return pe(f.type);case 16:return pe("Lazy");case 13:return pe("Suspense");case 19:return pe("SuspenseList");case 0:case 2:case 15:return f=Ue(f.type,!1),f;case 11:return f=Ue(f.type.render,!1),f;case 1:return f=Ue(f.type,!0),f;default:return""}}function eo(f,m){if(f&&f.defaultProps){m=s({},m),f=f.defaultProps;for(var M in f)m[M]===void 0&&(m[M]=f[M]);return m}return m}var _v=at(null),bv=null,Hh=null,cM=null;function uM(){cM=Hh=bv=null}function p3(f,m,M){Pe?(lt(_v,m._currentValue),m._currentValue=M):(lt(_v,m._currentValue2),m._currentValue2=M)}function dM(f){var m=_v.current;et(_v),Pe?f._currentValue=m:f._currentValue2=m}function hM(f,m,M){for(;f!==null;){var C=f.alternate;if((f.childLanes&m)!==m?(f.childLanes|=m,C!==null&&(C.childLanes|=m)):C!==null&&(C.childLanes&m)!==m&&(C.childLanes|=m),f===M)break;f=f.return}}function Vh(f,m){bv=f,cM=Hh=null,f=f.dependencies,f!==null&&f.firstContext!==null&&(f.lanes&m&&(Ws=!0),f.firstContext=null)}function ma(f){var m=Pe?f._currentValue:f._currentValue2;if(cM!==f)if(f={context:f,memoizedValue:m,next:null},Hh===null){if(bv===null)throw Error(a(308));Hh=f,bv.dependencies={lanes:0,firstContext:f}}else Hh=Hh.next=f;return m}var Io=null,mc=!1;function fM(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function m3(f,m){f=f.updateQueue,m.updateQueue===f&&(m.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function hl(f,m){return{eventTime:f,lane:m,tag:0,payload:null,callback:null,next:null}}function gc(f,m){var M=f.updateQueue;M!==null&&(M=M.shared,zi!==null&&f.mode&1&&!(on&2)?(f=M.interleaved,f===null?(m.next=m,Io===null?Io=[M]:Io.push(M)):(m.next=f.next,f.next=m),M.interleaved=m):(f=M.pending,f===null?m.next=m:(m.next=f.next,f.next=m),M.pending=m))}function wv(f,m,M){if(m=m.updateQueue,m!==null&&(m=m.shared,(M&4194240)!==0)){var C=m.lanes;C&=f.pendingLanes,M|=C,m.lanes=M,rM(f,M)}}function g3(f,m){var M=f.updateQueue,C=f.alternate;if(C!==null&&(C=C.updateQueue,M===C)){var N=null,U=null;if(M=M.firstBaseUpdate,M!==null){do{var ie={eventTime:M.eventTime,lane:M.lane,tag:M.tag,payload:M.payload,callback:M.callback,next:null};U===null?N=U=ie:U=U.next=ie,M=M.next}while(M!==null);U===null?N=U=m:U=U.next=m}else N=U=m;M={baseState:C.baseState,firstBaseUpdate:N,lastBaseUpdate:U,shared:C.shared,effects:C.effects},f.updateQueue=M;return}f=M.lastBaseUpdate,f===null?M.firstBaseUpdate=m:f.next=m,M.lastBaseUpdate=m}function Sv(f,m,M,C){var N=f.updateQueue;mc=!1;var U=N.firstBaseUpdate,ie=N.lastBaseUpdate,ve=N.shared.pending;if(ve!==null){N.shared.pending=null;var Be=ve,ot=Be.next;Be.next=null,ie===null?U=ot:ie.next=ot,ie=Be;var Rt=f.alternate;Rt!==null&&(Rt=Rt.updateQueue,ve=Rt.lastBaseUpdate,ve!==ie&&(ve===null?Rt.firstBaseUpdate=ot:ve.next=ot,Rt.lastBaseUpdate=Be))}if(U!==null){var Jt=N.baseState;ie=0,Rt=ot=Be=null,ve=U;do{var jt=ve.lane,Bn=ve.eventTime;if((C&jt)===jt){Rt!==null&&(Rt=Rt.next={eventTime:Bn,lane:0,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null});e:{var Ft=f,Ir=ve;switch(jt=m,Bn=M,Ir.tag){case 1:if(Ft=Ir.payload,typeof Ft=="function"){Jt=Ft.call(Bn,Jt,jt);break e}Jt=Ft;break e;case 3:Ft.flags=Ft.flags&-65537|128;case 0:if(Ft=Ir.payload,jt=typeof Ft=="function"?Ft.call(Bn,Jt,jt):Ft,jt==null)break e;Jt=s({},Jt,jt);break e;case 2:mc=!0}}ve.callback!==null&&ve.lane!==0&&(f.flags|=64,jt=N.effects,jt===null?N.effects=[ve]:jt.push(ve))}else Bn={eventTime:Bn,lane:jt,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null},Rt===null?(ot=Rt=Bn,Be=Jt):Rt=Rt.next=Bn,ie|=jt;if(ve=ve.next,ve===null){if(ve=N.shared.pending,ve===null)break;jt=ve,ve=jt.next,jt.next=null,N.lastBaseUpdate=jt,N.shared.pending=null}}while(1);if(Rt===null&&(Be=Jt),N.baseState=Be,N.firstBaseUpdate=ot,N.lastBaseUpdate=Rt,m=N.shared.interleaved,m!==null){N=m;do ie|=N.lane,N=N.next;while(N!==m)}else U===null&&(N.shared.lanes=0);Jh|=ie,f.lanes=ie,f.memoizedState=Jt}}function y3(f,m,M){if(f=m.effects,m.effects=null,f!==null)for(m=0;m<f.length;m++){var C=f[m],N=C.callback;if(N!==null){if(C.callback=null,C=M,typeof N!="function")throw Error(a(191,N));N.call(C)}}}var v3=new i.Component().refs;function pM(f,m,M,C){m=f.memoizedState,M=M(C,m),M=M==null?m:s({},m,M),f.memoizedState=M,f.lanes===0&&(f.updateQueue.baseState=M)}var Mv={isMounted:function(f){return(f=f._reactInternals)?E(f)===f:!1},enqueueSetState:function(f,m,M){f=f._reactInternals;var C=Jr(),N=xc(f),U=hl(C,N);U.payload=m,M!=null&&(U.callback=M),gc(f,U),m=_a(f,N,C),m!==null&&wv(m,f,N)},enqueueReplaceState:function(f,m,M){f=f._reactInternals;var C=Jr(),N=xc(f),U=hl(C,N);U.tag=1,U.payload=m,M!=null&&(U.callback=M),gc(f,U),m=_a(f,N,C),m!==null&&wv(m,f,N)},enqueueForceUpdate:function(f,m){f=f._reactInternals;var M=Jr(),C=xc(f),N=hl(M,C);N.tag=2,m!=null&&(N.callback=m),gc(f,N),m=_a(f,C,M),m!==null&&wv(m,f,C)}};function x3(f,m,M,C,N,U,ie){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(C,U,ie):m.prototype&&m.prototype.isPureReactComponent?!xv(M,C)||!xv(N,U):!0}function _3(f,m,M){var C=!1,N=Pt,U=m.contextType;return typeof U=="object"&&U!==null?U=ma(U):(N=dn(m)?Dt:zt.current,C=m.contextTypes,U=(C=C!=null)?Et(f,N):Pt),m=new m(M,U),f.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Mv,f.stateNode=m,m._reactInternals=f,C&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=N,f.__reactInternalMemoizedMaskedChildContext=U),m}function b3(f,m,M,C){f=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(M,C),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(M,C),m.state!==f&&Mv.enqueueReplaceState(m,m.state,null)}function mM(f,m,M,C){var N=f.stateNode;N.props=M,N.state=f.memoizedState,N.refs=v3,fM(f);var U=m.contextType;typeof U=="object"&&U!==null?N.context=ma(U):(U=dn(m)?Dt:zt.current,N.context=Et(f,U)),N.state=f.memoizedState,U=m.getDerivedStateFromProps,typeof U=="function"&&(pM(f,m,U,M),N.state=f.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(m=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),m!==N.state&&Mv.enqueueReplaceState(N,N.state,null),Sv(f,M,N,C),N.state=f.memoizedState),typeof N.componentDidMount=="function"&&(f.flags|=4194308)}var $h=[],Wh=0,Ev=null,Tv=0,ga=[],ya=0,Xu=null,fl=1,pl="";function Yu(f,m){$h[Wh++]=Tv,$h[Wh++]=Ev,Ev=f,Tv=m}function w3(f,m,M){ga[ya++]=fl,ga[ya++]=pl,ga[ya++]=Xu,Xu=f;var C=fl;f=pl;var N=32-Vt(C)-1;C&=~(1<<N),M+=1;var U=32-Vt(m)+N;if(30<U){var ie=N-N%5;U=(C&(1<<ie)-1).toString(32),C>>=ie,N-=ie,fl=1<<32-Vt(m)+N|M<<N|C,pl=U+f}else fl=1<<U|M<<N|C,pl=f}function gM(f){f.return!==null&&(Yu(f,1),w3(f,1,0))}function yM(f){for(;f===Ev;)Ev=$h[--Wh],$h[Wh]=null,Tv=$h[--Wh],$h[Wh]=null;for(;f===Xu;)Xu=ga[--ya],ga[ya]=null,pl=ga[--ya],ga[ya]=null,fl=ga[--ya],ga[ya]=null}var Vs=null,$s=null,ai=!1,mm=!1,to=null;function S3(f,m){var M=ba(5,null,null,0);M.elementType="DELETED",M.stateNode=m,M.return=f,m=f.deletions,m===null?(f.deletions=[M],f.flags|=16):m.push(M)}function M3(f,m){switch(f.tag){case 5:return m=Gt(m,f.type,f.pendingProps),m!==null?(f.stateNode=m,Vs=f,$s=Nt(m),!0):!1;case 6:return m=dt(m,f.pendingProps),m!==null?(f.stateNode=m,Vs=f,$s=null,!0):!1;case 13:if(m=Bt(m),m!==null){var M=Xu!==null?{id:fl,overflow:pl}:null;return f.memoizedState={dehydrated:m,treeContext:M,retryLane:1073741824},M=ba(18,null,null,0),M.stateNode=m,M.return=f,f.child=M,Vs=f,$s=null,!0}return!1;default:return!1}}function vM(f){return(f.mode&1)!==0&&(f.flags&128)===0}function xM(f){if(ai){var m=$s;if(m){var M=m;if(!M3(f,m)){if(vM(f))throw Error(a(418));m=Ht(M);var C=Vs;m&&M3(f,m)?S3(C,M):(f.flags=f.flags&-4097|2,ai=!1,Vs=f)}}else{if(vM(f))throw Error(a(418));f.flags=f.flags&-4097|2,ai=!1,Vs=f}}}function E3(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;Vs=f}function gm(f){if(!we||f!==Vs)return!1;if(!ai)return E3(f),ai=!0,!1;if(f.tag!==3&&(f.tag!==5||H(f.type)&&!re(f.type,f.memoizedProps))){var m=$s;if(m){if(vM(f)){for(f=$s;f;)f=Ht(f);throw Error(a(418))}for(;m;)S3(f,m),m=Ht(m)}}if(E3(f),f.tag===13){if(!we)throw Error(a(316));if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));$s=Me(f)}else $s=Vs?Ht(f.stateNode):null;return!0}function Gh(){we&&($s=Vs=null,mm=ai=!1)}function _M(f){to===null?to=[f]:to.push(f)}function ym(f,m,M){if(f=M.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(M._owner){if(M=M._owner,M){if(M.tag!==1)throw Error(a(309));var C=M.stateNode}if(!C)throw Error(a(147,f));var N=C,U=""+f;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===U?m.ref:(m=function(ie){var ve=N.refs;ve===v3&&(ve=N.refs={}),ie===null?delete ve[U]:ve[U]=ie},m._stringRef=U,m)}if(typeof f!="string")throw Error(a(284));if(!M._owner)throw Error(a(290,f))}return f}function Cv(f,m){throw f=Object.prototype.toString.call(m),Error(a(31,f==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":f))}function T3(f){var m=f._init;return m(f._payload)}function C3(f){function m(Re,be){if(f){var Fe=Re.deletions;Fe===null?(Re.deletions=[be],Re.flags|=16):Fe.push(be)}}function M(Re,be){if(!f)return null;for(;be!==null;)m(Re,be),be=be.sibling;return null}function C(Re,be){for(Re=new Map;be!==null;)be.key!==null?Re.set(be.key,be):Re.set(be.index,be),be=be.sibling;return Re}function N(Re,be){return Re=bc(Re,be),Re.index=0,Re.sibling=null,Re}function U(Re,be,Fe){return Re.index=Fe,f?(Fe=Re.alternate,Fe!==null?(Fe=Fe.index,Fe<be?(Re.flags|=2,be):Fe):(Re.flags|=2,be)):(Re.flags|=1048576,be)}function ie(Re){return f&&Re.alternate===null&&(Re.flags|=2),Re}function ve(Re,be,Fe,_t){return be===null||be.tag!==6?(be=iE(Fe,Re.mode,_t),be.return=Re,be):(be=N(be,Fe),be.return=Re,be)}function Be(Re,be,Fe,_t){var Lt=Fe.type;return Lt===u?Rt(Re,be,Fe.props.children,_t,Fe.key):be!==null&&(be.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===w&&T3(Lt)===be.type)?(_t=N(be,Fe.props),_t.ref=ym(Re,be,Fe),_t.return=Re,_t):(_t=rx(Fe.type,Fe.key,Fe.props,null,Re.mode,_t),_t.ref=ym(Re,be,Fe),_t.return=Re,_t)}function ot(Re,be,Fe,_t){return be===null||be.tag!==4||be.stateNode.containerInfo!==Fe.containerInfo||be.stateNode.implementation!==Fe.implementation?(be=rE(Fe,Re.mode,_t),be.return=Re,be):(be=N(be,Fe.children||[]),be.return=Re,be)}function Rt(Re,be,Fe,_t,Lt){return be===null||be.tag!==7?(be=nd(Fe,Re.mode,_t,Lt),be.return=Re,be):(be=N(be,Fe),be.return=Re,be)}function Jt(Re,be,Fe){if(typeof be=="string"&&be!==""||typeof be=="number")return be=iE(""+be,Re.mode,Fe),be.return=Re,be;if(typeof be=="object"&&be!==null){switch(be.$$typeof){case l:return Fe=rx(be.type,be.key,be.props,null,Re.mode,Fe),Fe.ref=ym(Re,null,be),Fe.return=Re,Fe;case c:return be=rE(be,Re.mode,Fe),be.return=Re,be;case w:var _t=be._init;return Jt(Re,_t(be._payload),Fe)}if(Y(be)||P(be))return be=nd(be,Re.mode,Fe,null),be.return=Re,be;Cv(Re,be)}return null}function jt(Re,be,Fe,_t){var Lt=be!==null?be.key:null;if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return Lt!==null?null:ve(Re,be,""+Fe,_t);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case l:return Fe.key===Lt?Be(Re,be,Fe,_t):null;case c:return Fe.key===Lt?ot(Re,be,Fe,_t):null;case w:return Lt=Fe._init,jt(Re,be,Lt(Fe._payload),_t)}if(Y(Fe)||P(Fe))return Lt!==null?null:Rt(Re,be,Fe,_t,null);Cv(Re,Fe)}return null}function Bn(Re,be,Fe,_t,Lt){if(typeof _t=="string"&&_t!==""||typeof _t=="number")return Re=Re.get(Fe)||null,ve(be,Re,""+_t,Lt);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case l:return Re=Re.get(_t.key===null?Fe:_t.key)||null,Be(be,Re,_t,Lt);case c:return Re=Re.get(_t.key===null?Fe:_t.key)||null,ot(be,Re,_t,Lt);case w:var an=_t._init;return Bn(Re,be,Fe,an(_t._payload),Lt)}if(Y(_t)||P(_t))return Re=Re.get(Fe)||null,Rt(be,Re,_t,Lt,null);Cv(be,_t)}return null}function Ft(Re,be,Fe,_t){for(var Lt=null,an=null,Qt=be,An=be=0,dr=null;Qt!==null&&An<Fe.length;An++){Qt.index>An?(dr=Qt,Qt=null):dr=Qt.sibling;var Pn=jt(Re,Qt,Fe[An],_t);if(Pn===null){Qt===null&&(Qt=dr);break}f&&Qt&&Pn.alternate===null&&m(Re,Qt),be=U(Pn,be,An),an===null?Lt=Pn:an.sibling=Pn,an=Pn,Qt=dr}if(An===Fe.length)return M(Re,Qt),ai&&Yu(Re,An),Lt;if(Qt===null){for(;An<Fe.length;An++)Qt=Jt(Re,Fe[An],_t),Qt!==null&&(be=U(Qt,be,An),an===null?Lt=Qt:an.sibling=Qt,an=Qt);return ai&&Yu(Re,An),Lt}for(Qt=C(Re,Qt);An<Fe.length;An++)dr=Bn(Qt,Re,An,Fe[An],_t),dr!==null&&(f&&dr.alternate!==null&&Qt.delete(dr.key===null?An:dr.key),be=U(dr,be,An),an===null?Lt=dr:an.sibling=dr,an=dr);return f&&Qt.forEach(function(wc){return m(Re,wc)}),ai&&Yu(Re,An),Lt}function Ir(Re,be,Fe,_t){var Lt=P(Fe);if(typeof Lt!="function")throw Error(a(150));if(Fe=Lt.call(Fe),Fe==null)throw Error(a(151));for(var an=Lt=null,Qt=be,An=be=0,dr=null,Pn=Fe.next();Qt!==null&&!Pn.done;An++,Pn=Fe.next()){Qt.index>An?(dr=Qt,Qt=null):dr=Qt.sibling;var wc=jt(Re,Qt,Pn.value,_t);if(wc===null){Qt===null&&(Qt=dr);break}f&&Qt&&wc.alternate===null&&m(Re,Qt),be=U(wc,be,An),an===null?Lt=wc:an.sibling=wc,an=wc,Qt=dr}if(Pn.done)return M(Re,Qt),ai&&Yu(Re,An),Lt;if(Qt===null){for(;!Pn.done;An++,Pn=Fe.next())Pn=Jt(Re,Pn.value,_t),Pn!==null&&(be=U(Pn,be,An),an===null?Lt=Pn:an.sibling=Pn,an=Pn);return ai&&Yu(Re,An),Lt}for(Qt=C(Re,Qt);!Pn.done;An++,Pn=Fe.next())Pn=Bn(Qt,Re,An,Pn.value,_t),Pn!==null&&(f&&Pn.alternate!==null&&Qt.delete(Pn.key===null?An:Pn.key),be=U(Pn,be,An),an===null?Lt=Pn:an.sibling=Pn,an=Pn);return f&&Qt.forEach(function(Q$){return m(Re,Q$)}),ai&&Yu(Re,An),Lt}function wa(Re,be,Fe,_t){if(typeof Fe=="object"&&Fe!==null&&Fe.type===u&&Fe.key===null&&(Fe=Fe.props.children),typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case l:e:{for(var Lt=Fe.key,an=be;an!==null;){if(an.key===Lt){if(Lt=Fe.type,Lt===u){if(an.tag===7){M(Re,an.sibling),be=N(an,Fe.props.children),be.return=Re,Re=be;break e}}else if(an.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===w&&T3(Lt)===an.type){M(Re,an.sibling),be=N(an,Fe.props),be.ref=ym(Re,an,Fe),be.return=Re,Re=be;break e}M(Re,an);break}else m(Re,an);an=an.sibling}Fe.type===u?(be=nd(Fe.props.children,Re.mode,_t,Fe.key),be.return=Re,Re=be):(_t=rx(Fe.type,Fe.key,Fe.props,null,Re.mode,_t),_t.ref=ym(Re,be,Fe),_t.return=Re,Re=_t)}return ie(Re);case c:e:{for(an=Fe.key;be!==null;){if(be.key===an)if(be.tag===4&&be.stateNode.containerInfo===Fe.containerInfo&&be.stateNode.implementation===Fe.implementation){M(Re,be.sibling),be=N(be,Fe.children||[]),be.return=Re,Re=be;break e}else{M(Re,be);break}else m(Re,be);be=be.sibling}be=rE(Fe,Re.mode,_t),be.return=Re,Re=be}return ie(Re);case w:return an=Fe._init,wa(Re,be,an(Fe._payload),_t)}if(Y(Fe))return Ft(Re,be,Fe,_t);if(P(Fe))return Ir(Re,be,Fe,_t);Cv(Re,Fe)}return typeof Fe=="string"&&Fe!==""||typeof Fe=="number"?(Fe=""+Fe,be!==null&&be.tag===6?(M(Re,be.sibling),be=N(be,Fe),be.return=Re,Re=be):(M(Re,be),be=iE(Fe,Re.mode,_t),be.return=Re,Re=be),ie(Re)):M(Re,be)}return wa}var qh=C3(!0),A3=C3(!1),vm={},va=at(vm),xm=at(vm),Xh=at(vm);function Do(f){if(f===vm)throw Error(a(174));return f}function bM(f,m){lt(Xh,m),lt(xm,f),lt(va,vm),f=Q(m),et(va),lt(va,f)}function Yh(){et(va),et(xm),et(Xh)}function P3(f){var m=Do(Xh.current),M=Do(va.current);m=L(M,f.type,m),M!==m&&(lt(xm,f),lt(va,m))}function wM(f){xm.current===f&&(et(va),et(xm))}var di=at(0);function Av(f){for(var m=f;m!==null;){if(m.tag===13){var M=m.memoizedState;if(M!==null&&(M=M.dehydrated,M===null||Mt(M)||Ut(M)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if(m.flags&128)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var SM=[];function MM(){for(var f=0;f<SM.length;f++){var m=SM[f];Pe?m._workInProgressVersionPrimary=null:m._workInProgressVersionSecondary=null}SM.length=0}var Pv=o.ReactCurrentDispatcher,xa=o.ReactCurrentBatchConfig,Kh=0,wi=null,Rr=null,ur=null,Rv=!1,_m=!1,bm=0,M$=0;function kr(){throw Error(a(321))}function EM(f,m){if(m===null)return!1;for(var M=0;M<m.length&&M<f.length;M++)if(!ko(f[M],m[M]))return!1;return!0}function TM(f,m,M,C,N,U){if(Kh=U,wi=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,Pv.current=f===null||f.memoizedState===null?A$:P$,f=M(C,N),_m){U=0;do{if(_m=!1,bm=0,25<=U)throw Error(a(301));U+=1,ur=Rr=null,m.updateQueue=null,Pv.current=R$,f=M(C,N)}while(_m)}if(Pv.current=Lv,m=Rr!==null&&Rr.next!==null,Kh=0,ur=Rr=wi=null,Rv=!1,m)throw Error(a(300));return f}function CM(){var f=bm!==0;return bm=0,f}function ml(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ur===null?wi.memoizedState=ur=f:ur=ur.next=f,ur}function Lo(){if(Rr===null){var f=wi.alternate;f=f!==null?f.memoizedState:null}else f=Rr.next;var m=ur===null?wi.memoizedState:ur.next;if(m!==null)ur=m,Rr=f;else{if(f===null)throw Error(a(310));Rr=f,f={memoizedState:Rr.memoizedState,baseState:Rr.baseState,baseQueue:Rr.baseQueue,queue:Rr.queue,next:null},ur===null?wi.memoizedState=ur=f:ur=ur.next=f}return ur}function Ku(f,m){return typeof m=="function"?m(f):m}function kv(f){var m=Lo(),M=m.queue;if(M===null)throw Error(a(311));M.lastRenderedReducer=f;var C=Rr,N=C.baseQueue,U=M.pending;if(U!==null){if(N!==null){var ie=N.next;N.next=U.next,U.next=ie}C.baseQueue=N=U,M.pending=null}if(N!==null){U=N.next,C=C.baseState;var ve=ie=null,Be=null,ot=U;do{var Rt=ot.lane;if((Kh&Rt)===Rt)Be!==null&&(Be=Be.next={lane:0,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null}),C=ot.hasEagerState?ot.eagerState:f(C,ot.action);else{var Jt={lane:Rt,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null};Be===null?(ve=Be=Jt,ie=C):Be=Be.next=Jt,wi.lanes|=Rt,Jh|=Rt}ot=ot.next}while(ot!==null&&ot!==U);Be===null?ie=C:Be.next=ve,ko(C,m.memoizedState)||(Ws=!0),m.memoizedState=C,m.baseState=ie,m.baseQueue=Be,M.lastRenderedState=C}if(f=M.interleaved,f!==null){N=f;do U=N.lane,wi.lanes|=U,Jh|=U,N=N.next;while(N!==f)}else N===null&&(M.lanes=0);return[m.memoizedState,M.dispatch]}function Nv(f){var m=Lo(),M=m.queue;if(M===null)throw Error(a(311));M.lastRenderedReducer=f;var C=M.dispatch,N=M.pending,U=m.memoizedState;if(N!==null){M.pending=null;var ie=N=N.next;do U=f(U,ie.action),ie=ie.next;while(ie!==N);ko(U,m.memoizedState)||(Ws=!0),m.memoizedState=U,m.baseQueue===null&&(m.baseState=U),M.lastRenderedState=U}return[U,C]}function R3(){}function k3(f,m){var M=wi,C=Lo(),N=m(),U=!ko(C.memoizedState,N);if(U&&(C.memoizedState=N,Ws=!0),C=C.queue,Sm(D3.bind(null,M,C,f),[f]),C.getSnapshot!==m||U||ur!==null&&ur.memoizedState.tag&1){if(M.flags|=2048,wm(9,I3.bind(null,M,C,N,m),void 0,null),zi===null)throw Error(a(349));Kh&30||N3(M,m,N)}return N}function N3(f,m,M){f.flags|=16384,f={getSnapshot:m,value:M},m=wi.updateQueue,m===null?(m={lastEffect:null,stores:null},wi.updateQueue=m,m.stores=[f]):(M=m.stores,M===null?m.stores=[f]:M.push(f))}function I3(f,m,M,C){m.value=M,m.getSnapshot=C,L3(m)&&_a(f,1,-1)}function D3(f,m,M){return M(function(){L3(m)&&_a(f,1,-1)})}function L3(f){var m=f.getSnapshot;f=f.value;try{var M=m();return!ko(f,M)}catch{return!0}}function AM(f){var m=ml();return typeof f=="function"&&(f=f()),m.memoizedState=m.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ku,lastRenderedState:f},m.queue=f,f=f.dispatch=C$.bind(null,wi,f),[m.memoizedState,f]}function wm(f,m,M,C){return f={tag:f,create:m,destroy:M,deps:C,next:null},m=wi.updateQueue,m===null?(m={lastEffect:null,stores:null},wi.updateQueue=m,m.lastEffect=f.next=f):(M=m.lastEffect,M===null?m.lastEffect=f.next=f:(C=M.next,M.next=f,f.next=C,m.lastEffect=f)),f}function O3(){return Lo().memoizedState}function Iv(f,m,M,C){var N=ml();wi.flags|=f,N.memoizedState=wm(1|m,M,void 0,C===void 0?null:C)}function Dv(f,m,M,C){var N=Lo();C=C===void 0?null:C;var U=void 0;if(Rr!==null){var ie=Rr.memoizedState;if(U=ie.destroy,C!==null&&EM(C,ie.deps)){N.memoizedState=wm(m,M,U,C);return}}wi.flags|=f,N.memoizedState=wm(1|m,M,U,C)}function PM(f,m){return Iv(8390656,8,f,m)}function Sm(f,m){return Dv(2048,8,f,m)}function F3(f,m){return Dv(4,2,f,m)}function U3(f,m){return Dv(4,4,f,m)}function j3(f,m){if(typeof m=="function")return f=f(),m(f),function(){m(null)};if(m!=null)return f=f(),m.current=f,function(){m.current=null}}function z3(f,m,M){return M=M!=null?M.concat([f]):null,Dv(4,4,j3.bind(null,m,f),M)}function RM(){}function B3(f,m){var M=Lo();m=m===void 0?null:m;var C=M.memoizedState;return C!==null&&m!==null&&EM(m,C[1])?C[0]:(M.memoizedState=[f,m],f)}function H3(f,m){var M=Lo();m=m===void 0?null:m;var C=M.memoizedState;return C!==null&&m!==null&&EM(m,C[1])?C[0]:(f=f(),M.memoizedState=[f,m],f)}function E$(f,m){var M=Cn;Cn=M!==0&&4>M?M:4,f(!0);var C=xa.transition;xa.transition={};try{f(!1),m()}finally{Cn=M,xa.transition=C}}function V3(){return Lo().memoizedState}function T$(f,m,M){var C=xc(f);M={lane:C,action:M,hasEagerState:!1,eagerState:null,next:null},$3(f)?W3(m,M):(G3(f,m,M),M=Jr(),f=_a(f,C,M),f!==null&&q3(f,m,C))}function C$(f,m,M){var C=xc(f),N={lane:C,action:M,hasEagerState:!1,eagerState:null,next:null};if($3(f))W3(m,N);else{G3(f,m,N);var U=f.alternate;if(f.lanes===0&&(U===null||U.lanes===0)&&(U=m.lastRenderedReducer,U!==null))try{var ie=m.lastRenderedState,ve=U(ie,M);if(N.hasEagerState=!0,N.eagerState=ve,ko(ve,ie))return}catch{}finally{}M=Jr(),f=_a(f,C,M),f!==null&&q3(f,m,C)}}function $3(f){var m=f.alternate;return f===wi||m!==null&&m===wi}function W3(f,m){_m=Rv=!0;var M=f.pending;M===null?m.next=m:(m.next=M.next,M.next=m),f.pending=m}function G3(f,m,M){zi!==null&&f.mode&1&&!(on&2)?(f=m.interleaved,f===null?(M.next=M,Io===null?Io=[m]:Io.push(m)):(M.next=f.next,f.next=M),m.interleaved=M):(f=m.pending,f===null?M.next=M:(M.next=f.next,f.next=M),m.pending=M)}function q3(f,m,M){if(M&4194240){var C=m.lanes;C&=f.pendingLanes,M|=C,m.lanes=M,rM(f,M)}}var Lv={readContext:ma,useCallback:kr,useContext:kr,useEffect:kr,useImperativeHandle:kr,useInsertionEffect:kr,useLayoutEffect:kr,useMemo:kr,useReducer:kr,useRef:kr,useState:kr,useDebugValue:kr,useDeferredValue:kr,useTransition:kr,useMutableSource:kr,useSyncExternalStore:kr,useId:kr,unstable_isNewReconciler:!1},A$={readContext:ma,useCallback:function(f,m){return ml().memoizedState=[f,m===void 0?null:m],f},useContext:ma,useEffect:PM,useImperativeHandle:function(f,m,M){return M=M!=null?M.concat([f]):null,Iv(4194308,4,j3.bind(null,m,f),M)},useLayoutEffect:function(f,m){return Iv(4194308,4,f,m)},useInsertionEffect:function(f,m){return Iv(4,2,f,m)},useMemo:function(f,m){var M=ml();return m=m===void 0?null:m,f=f(),M.memoizedState=[f,m],f},useReducer:function(f,m,M){var C=ml();return m=M!==void 0?M(m):m,C.memoizedState=C.baseState=m,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:m},C.queue=f,f=f.dispatch=T$.bind(null,wi,f),[C.memoizedState,f]},useRef:function(f){var m=ml();return f={current:f},m.memoizedState=f},useState:AM,useDebugValue:RM,useDeferredValue:function(f){var m=AM(f),M=m[0],C=m[1];return PM(function(){var N=xa.transition;xa.transition={};try{C(f)}finally{xa.transition=N}},[f]),M},useTransition:function(){var f=AM(!1),m=f[0];return f=E$.bind(null,f[1]),ml().memoizedState=f,[m,f]},useMutableSource:function(){},useSyncExternalStore:function(f,m,M){var C=wi,N=ml();if(ai){if(M===void 0)throw Error(a(407));M=M()}else{if(M=m(),zi===null)throw Error(a(349));Kh&30||N3(C,m,M)}N.memoizedState=M;var U={value:M,getSnapshot:m};return N.queue=U,PM(D3.bind(null,C,U,f),[f]),C.flags|=2048,wm(9,I3.bind(null,C,U,M,m),void 0,null),M},useId:function(){var f=ml(),m=zi.identifierPrefix;if(ai){var M=pl,C=fl;M=(C&~(1<<32-Vt(C)-1)).toString(32)+M,m=":"+m+"R"+M,M=bm++,0<M&&(m+="H"+M.toString(32)),m+=":"}else M=M$++,m=":"+m+"r"+M.toString(32)+":";return f.memoizedState=m},unstable_isNewReconciler:!1},P$={readContext:ma,useCallback:B3,useContext:ma,useEffect:Sm,useImperativeHandle:z3,useInsertionEffect:F3,useLayoutEffect:U3,useMemo:H3,useReducer:kv,useRef:O3,useState:function(){return kv(Ku)},useDebugValue:RM,useDeferredValue:function(f){var m=kv(Ku),M=m[0],C=m[1];return Sm(function(){var N=xa.transition;xa.transition={};try{C(f)}finally{xa.transition=N}},[f]),M},useTransition:function(){var f=kv(Ku)[0],m=Lo().memoizedState;return[f,m]},useMutableSource:R3,useSyncExternalStore:k3,useId:V3,unstable_isNewReconciler:!1},R$={readContext:ma,useCallback:B3,useContext:ma,useEffect:Sm,useImperativeHandle:z3,useInsertionEffect:F3,useLayoutEffect:U3,useMemo:H3,useReducer:Nv,useRef:O3,useState:function(){return Nv(Ku)},useDebugValue:RM,useDeferredValue:function(f){var m=Nv(Ku),M=m[0],C=m[1];return Sm(function(){var N=xa.transition;xa.transition={};try{C(f)}finally{xa.transition=N}},[f]),M},useTransition:function(){var f=Nv(Ku)[0],m=Lo().memoizedState;return[f,m]},useMutableSource:R3,useSyncExternalStore:k3,useId:V3,unstable_isNewReconciler:!1};function kM(f,m){try{var M="",C=m;do M+=S$(C),C=C.return;while(C);var N=M}catch(U){N=`
Error generating stack: `+U.message+`
`+U.stack}return{value:f,source:m,stack:N}}function NM(f,m){try{console.error(m.value)}catch(M){setTimeout(function(){throw M})}}var k$=typeof WeakMap=="function"?WeakMap:Map;function X3(f,m,M){M=hl(-1,M),M.tag=3,M.payload={element:null};var C=m.value;return M.callback=function(){Zv||(Zv=!0,KM=C),NM(f,m)},M}function Y3(f,m,M){M=hl(-1,M),M.tag=3;var C=f.type.getDerivedStateFromError;if(typeof C=="function"){var N=m.value;M.payload=function(){return C(N)},M.callback=function(){NM(f,m)}}var U=f.stateNode;return U!==null&&typeof U.componentDidCatch=="function"&&(M.callback=function(){NM(f,m),typeof C!="function"&&(yc===null?yc=new Set([this]):yc.add(this));var ie=m.stack;this.componentDidCatch(m.value,{componentStack:ie!==null?ie:""})}),M}function K3(f,m,M){var C=f.pingCache;if(C===null){C=f.pingCache=new k$;var N=new Set;C.set(m,N)}else N=C.get(m),N===void 0&&(N=new Set,C.set(m,N));N.has(M)||(N.add(M),f=W$.bind(null,f,m,M),m.then(f,f))}function Z3(f){do{var m;if((m=f.tag===13)&&(m=f.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return f;f=f.return}while(f!==null);return null}function J3(f,m,M,C,N){return f.mode&1?(f.flags|=65536,f.lanes=N,f):(f===m?f.flags|=65536:(f.flags|=128,M.flags|=131072,M.flags&=-52805,M.tag===1&&(M.alternate===null?M.tag=17:(m=hl(-1,1),m.tag=2,gc(M,m))),M.lanes|=1),f)}function Oo(f){f.flags|=4}function Q3(f,m){if(f!==null&&f.child===m.child)return!0;if(m.flags&16)return!1;for(f=m.child;f!==null;){if(f.flags&12854||f.subtreeFlags&12854)return!1;f=f.sibling}return!0}var Mm,Em,Ov,Fv;if(De)Mm=function(f,m){for(var M=m.child;M!==null;){if(M.tag===5||M.tag===6)ae(f,M.stateNode);else if(M.tag!==4&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===m)break;for(;M.sibling===null;){if(M.return===null||M.return===m)return;M=M.return}M.sibling.return=M.return,M=M.sibling}},Em=function(){},Ov=function(f,m,M,C,N){if(f=f.memoizedProps,f!==C){var U=m.stateNode,ie=Do(va.current);M=K(U,M,f,C,N,ie),(m.updateQueue=M)&&Oo(m)}},Fv=function(f,m,M,C){M!==C&&Oo(m)};else if(xe){Mm=function(f,m,M,C){for(var N=m.child;N!==null;){if(N.tag===5){var U=N.stateNode;M&&C&&(U=ft(U,N.type,N.memoizedProps,N)),ae(f,U)}else if(N.tag===6)U=N.stateNode,M&&C&&(U=Ct(U,N.memoizedProps,N)),ae(f,U);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)U=N.child,U!==null&&(U.return=N),Mm(f,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===m)break;for(;N.sibling===null;){if(N.return===null||N.return===m)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};var eN=function(f,m,M,C){for(var N=m.child;N!==null;){if(N.tag===5){var U=N.stateNode;M&&C&&(U=ft(U,N.type,N.memoizedProps,N)),xt(f,U)}else if(N.tag===6)U=N.stateNode,M&&C&&(U=Ct(U,N.memoizedProps,N)),xt(f,U);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)U=N.child,U!==null&&(U.return=N),eN(f,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===m)break;for(;N.sibling===null;){if(N.return===null||N.return===m)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};Em=function(f,m){var M=m.stateNode;if(!Q3(f,m)){f=M.containerInfo;var C=Ve(f);eN(C,m,!1,!1),M.pendingChildren=C,Oo(m),Ot(f,C)}},Ov=function(f,m,M,C,N){var U=f.stateNode,ie=f.memoizedProps;if((f=Q3(f,m))&&ie===C)m.stateNode=U;else{var ve=m.stateNode,Be=Do(va.current),ot=null;ie!==C&&(ot=K(ve,M,ie,C,N,Be)),f&&ot===null?m.stateNode=U:(U=Qe(U,ot,M,ie,C,m,f,ve),me(U,M,C,N,Be)&&Oo(m),m.stateNode=U,f?Oo(m):Mm(U,m,!1,!1))}},Fv=function(f,m,M,C){M!==C?(f=Do(Xh.current),M=Do(va.current),m.stateNode=oe(C,f,M,m),Oo(m)):m.stateNode=f.stateNode}}else Em=function(){},Ov=function(){},Fv=function(){};function Tm(f,m){if(!ai)switch(f.tailMode){case"hidden":m=f.tail;for(var M=null;m!==null;)m.alternate!==null&&(M=m),m=m.sibling;M===null?f.tail=null:M.sibling=null;break;case"collapsed":M=f.tail;for(var C=null;M!==null;)M.alternate!==null&&(C=M),M=M.sibling;C===null?m||f.tail===null?f.tail=null:f.tail.sibling=null:C.sibling=null}}function Nr(f){var m=f.alternate!==null&&f.alternate.child===f.child,M=0,C=0;if(m)for(var N=f.child;N!==null;)M|=N.lanes|N.childLanes,C|=N.subtreeFlags&14680064,C|=N.flags&14680064,N.return=f,N=N.sibling;else for(N=f.child;N!==null;)M|=N.lanes|N.childLanes,C|=N.subtreeFlags,C|=N.flags,N.return=f,N=N.sibling;return f.subtreeFlags|=C,f.childLanes=M,m}function N$(f,m,M){var C=m.pendingProps;switch(yM(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nr(m),null;case 1:return dn(m.type)&&$t(),Nr(m),null;case 3:return C=m.stateNode,Yh(),et(It),et(zt),MM(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(f===null||f.child===null)&&(gm(m)?Oo(m):f===null||f.memoizedState.isDehydrated&&!(m.flags&256)||(m.flags|=1024,to!==null&&(QM(to),to=null))),Em(f,m),Nr(m),null;case 5:wM(m),M=Do(Xh.current);var N=m.type;if(f!==null&&m.stateNode!=null)Ov(f,m,N,C,M),f.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!C){if(m.stateNode===null)throw Error(a(166));return Nr(m),null}if(f=Do(va.current),gm(m)){if(!we)throw Error(a(175));f=z(m.stateNode,m.type,m.memoizedProps,M,f,m,!mm),m.updateQueue=f,f!==null&&Oo(m)}else{var U=te(N,C,M,f,m);Mm(U,m,!1,!1),m.stateNode=U,me(U,N,C,M,f)&&Oo(m)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return Nr(m),null;case 6:if(f&&m.stateNode!=null)Fv(f,m,f.memoizedProps,C);else{if(typeof C!="string"&&m.stateNode===null)throw Error(a(166));if(f=Do(Xh.current),M=Do(va.current),gm(m)){if(!we)throw Error(a(176));if(f=m.stateNode,C=m.memoizedProps,(M=q(f,C,m,!mm))&&(N=Vs,N!==null))switch(U=(N.mode&1)!==0,N.tag){case 3:ne(N.stateNode.containerInfo,f,C,U);break;case 5:he(N.type,N.memoizedProps,N.stateNode,f,C,U)}M&&Oo(m)}else m.stateNode=oe(C,f,M,m)}return Nr(m),null;case 13:if(et(di),C=m.memoizedState,ai&&$s!==null&&m.mode&1&&!(m.flags&128)){for(f=$s;f;)f=Ht(f);return Gh(),m.flags|=98560,m}if(C!==null&&C.dehydrated!==null){if(C=gm(m),f===null){if(!C)throw Error(a(318));if(!we)throw Error(a(344));if(f=m.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));fe(f,m)}else Gh(),!(m.flags&128)&&(m.memoizedState=null),m.flags|=4;return Nr(m),null}return to!==null&&(QM(to),to=null),m.flags&128?(m.lanes=M,m):(C=C!==null,M=!1,f===null?gm(m):M=f.memoizedState!==null,C&&!M&&(m.child.flags|=8192,m.mode&1&&(f===null||di.current&1?Qi===0&&(Qi=3):tE())),m.updateQueue!==null&&(m.flags|=4),Nr(m),null);case 4:return Yh(),Em(f,m),f===null&&Se(m.stateNode.containerInfo),Nr(m),null;case 10:return dM(m.type._context),Nr(m),null;case 17:return dn(m.type)&&$t(),Nr(m),null;case 19:if(et(di),N=m.memoizedState,N===null)return Nr(m),null;if(C=(m.flags&128)!==0,U=N.rendering,U===null)if(C)Tm(N,!1);else{if(Qi!==0||f!==null&&f.flags&128)for(f=m.child;f!==null;){if(U=Av(f),U!==null){for(m.flags|=128,Tm(N,!1),f=U.updateQueue,f!==null&&(m.updateQueue=f,m.flags|=4),m.subtreeFlags=0,f=M,C=m.child;C!==null;)M=C,N=f,M.flags&=14680066,U=M.alternate,U===null?(M.childLanes=0,M.lanes=N,M.child=null,M.subtreeFlags=0,M.memoizedProps=null,M.memoizedState=null,M.updateQueue=null,M.dependencies=null,M.stateNode=null):(M.childLanes=U.childLanes,M.lanes=U.lanes,M.child=U.child,M.subtreeFlags=0,M.deletions=null,M.memoizedProps=U.memoizedProps,M.memoizedState=U.memoizedState,M.updateQueue=U.updateQueue,M.type=U.type,N=U.dependencies,M.dependencies=N===null?null:{lanes:N.lanes,firstContext:N.firstContext}),C=C.sibling;return lt(di,di.current&1|2),m.child}f=f.sibling}N.tail!==null&&cr()>YM&&(m.flags|=128,C=!0,Tm(N,!1),m.lanes=4194304)}else{if(!C)if(f=Av(U),f!==null){if(m.flags|=128,C=!0,f=f.updateQueue,f!==null&&(m.updateQueue=f,m.flags|=4),Tm(N,!0),N.tail===null&&N.tailMode==="hidden"&&!U.alternate&&!ai)return Nr(m),null}else 2*cr()-N.renderingStartTime>YM&&M!==1073741824&&(m.flags|=128,C=!0,Tm(N,!1),m.lanes=4194304);N.isBackwards?(U.sibling=m.child,m.child=U):(f=N.last,f!==null?f.sibling=U:m.child=U,N.last=U)}return N.tail!==null?(m=N.tail,N.rendering=m,N.tail=m.sibling,N.renderingStartTime=cr(),m.sibling=null,f=di.current,lt(di,C?f&1|2:f&1),m):(Nr(m),null);case 22:case 23:return eE(),C=m.memoizedState!==null,f!==null&&f.memoizedState!==null!==C&&(m.flags|=8192),C&&m.mode&1?Gs&1073741824&&(Nr(m),De&&m.subtreeFlags&6&&(m.flags|=8192)):Nr(m),null;case 24:return null;case 25:return null}throw Error(a(156,m.tag))}var I$=o.ReactCurrentOwner,Ws=!1;function Zr(f,m,M,C){m.child=f===null?A3(m,null,M,C):qh(m,f.child,M,C)}function tN(f,m,M,C,N){M=M.render;var U=m.ref;return Vh(m,N),C=TM(f,m,M,C,U,N),M=CM(),f!==null&&!Ws?(m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~N,gl(f,m,N)):(ai&&M&&gM(m),m.flags|=1,Zr(f,m,C,N),m.child)}function nN(f,m,M,C,N){if(f===null){var U=M.type;return typeof U=="function"&&!nE(U)&&U.defaultProps===void 0&&M.compare===null&&M.defaultProps===void 0?(m.tag=15,m.type=U,iN(f,m,U,C,N)):(f=rx(M.type,null,C,m,m.mode,N),f.ref=m.ref,f.return=m,m.child=f)}if(U=f.child,!(f.lanes&N)){var ie=U.memoizedProps;if(M=M.compare,M=M!==null?M:xv,M(ie,C)&&f.ref===m.ref)return gl(f,m,N)}return m.flags|=1,f=bc(U,C),f.ref=m.ref,f.return=m,m.child=f}function iN(f,m,M,C,N){if(f!==null&&xv(f.memoizedProps,C)&&f.ref===m.ref)if(Ws=!1,(f.lanes&N)!==0)f.flags&131072&&(Ws=!0);else return m.lanes=f.lanes,gl(f,m,N);return IM(f,m,M,C,N)}function rN(f,m,M){var C=m.pendingProps,N=C.children,U=f!==null?f.memoizedState:null;if(C.mode==="hidden")if(!(m.mode&1))m.memoizedState={baseLanes:0,cachePool:null},lt(Zh,Gs),Gs|=M;else if(M&1073741824)m.memoizedState={baseLanes:0,cachePool:null},C=U!==null?U.baseLanes:M,lt(Zh,Gs),Gs|=C;else return f=U!==null?U.baseLanes|M:M,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:f,cachePool:null},m.updateQueue=null,lt(Zh,Gs),Gs|=f,null;else U!==null?(C=U.baseLanes|M,m.memoizedState=null):C=M,lt(Zh,Gs),Gs|=C;return Zr(f,m,N,M),m.child}function sN(f,m){var M=m.ref;(f===null&&M!==null||f!==null&&f.ref!==M)&&(m.flags|=512,m.flags|=2097152)}function IM(f,m,M,C,N){var U=dn(M)?Dt:zt.current;return U=Et(m,U),Vh(m,N),M=TM(f,m,M,C,U,N),C=CM(),f!==null&&!Ws?(m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~N,gl(f,m,N)):(ai&&C&&gM(m),m.flags|=1,Zr(f,m,M,N),m.child)}function aN(f,m,M,C,N){if(dn(M)){var U=!0;Zt(m)}else U=!1;if(Vh(m,N),m.stateNode===null)f!==null&&(f.alternate=null,m.alternate=null,m.flags|=2),_3(m,M,C),mM(m,M,C,N),C=!0;else if(f===null){var ie=m.stateNode,ve=m.memoizedProps;ie.props=ve;var Be=ie.context,ot=M.contextType;typeof ot=="object"&&ot!==null?ot=ma(ot):(ot=dn(M)?Dt:zt.current,ot=Et(m,ot));var Rt=M.getDerivedStateFromProps,Jt=typeof Rt=="function"||typeof ie.getSnapshotBeforeUpdate=="function";Jt||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(ve!==C||Be!==ot)&&b3(m,ie,C,ot),mc=!1;var jt=m.memoizedState;ie.state=jt,Sv(m,C,ie,N),Be=m.memoizedState,ve!==C||jt!==Be||It.current||mc?(typeof Rt=="function"&&(pM(m,M,Rt,C),Be=m.memoizedState),(ve=mc||x3(m,M,ve,C,jt,Be,ot))?(Jt||typeof ie.UNSAFE_componentWillMount!="function"&&typeof ie.componentWillMount!="function"||(typeof ie.componentWillMount=="function"&&ie.componentWillMount(),typeof ie.UNSAFE_componentWillMount=="function"&&ie.UNSAFE_componentWillMount()),typeof ie.componentDidMount=="function"&&(m.flags|=4194308)):(typeof ie.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=C,m.memoizedState=Be),ie.props=C,ie.state=Be,ie.context=ot,C=ve):(typeof ie.componentDidMount=="function"&&(m.flags|=4194308),C=!1)}else{ie=m.stateNode,m3(f,m),ve=m.memoizedProps,ot=m.type===m.elementType?ve:eo(m.type,ve),ie.props=ot,Jt=m.pendingProps,jt=ie.context,Be=M.contextType,typeof Be=="object"&&Be!==null?Be=ma(Be):(Be=dn(M)?Dt:zt.current,Be=Et(m,Be));var Bn=M.getDerivedStateFromProps;(Rt=typeof Bn=="function"||typeof ie.getSnapshotBeforeUpdate=="function")||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(ve!==Jt||jt!==Be)&&b3(m,ie,C,Be),mc=!1,jt=m.memoizedState,ie.state=jt,Sv(m,C,ie,N);var Ft=m.memoizedState;ve!==Jt||jt!==Ft||It.current||mc?(typeof Bn=="function"&&(pM(m,M,Bn,C),Ft=m.memoizedState),(ot=mc||x3(m,M,ot,C,jt,Ft,Be)||!1)?(Rt||typeof ie.UNSAFE_componentWillUpdate!="function"&&typeof ie.componentWillUpdate!="function"||(typeof ie.componentWillUpdate=="function"&&ie.componentWillUpdate(C,Ft,Be),typeof ie.UNSAFE_componentWillUpdate=="function"&&ie.UNSAFE_componentWillUpdate(C,Ft,Be)),typeof ie.componentDidUpdate=="function"&&(m.flags|=4),typeof ie.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof ie.componentDidUpdate!="function"||ve===f.memoizedProps&&jt===f.memoizedState||(m.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||ve===f.memoizedProps&&jt===f.memoizedState||(m.flags|=1024),m.memoizedProps=C,m.memoizedState=Ft),ie.props=C,ie.state=Ft,ie.context=Be,C=ot):(typeof ie.componentDidUpdate!="function"||ve===f.memoizedProps&&jt===f.memoizedState||(m.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||ve===f.memoizedProps&&jt===f.memoizedState||(m.flags|=1024),C=!1)}return DM(f,m,M,C,U,N)}function DM(f,m,M,C,N,U){sN(f,m);var ie=(m.flags&128)!==0;if(!C&&!ie)return N&&hn(m,M,!1),gl(f,m,U);C=m.stateNode,I$.current=m;var ve=ie&&typeof M.getDerivedStateFromError!="function"?null:C.render();return m.flags|=1,f!==null&&ie?(m.child=qh(m,f.child,null,U),m.child=qh(m,null,ve,U)):Zr(f,m,ve,U),m.memoizedState=C.state,N&&hn(m,M,!0),m.child}function oN(f){var m=f.stateNode;m.pendingContext?en(f,m.pendingContext,m.pendingContext!==m.context):m.context&&en(f,m.context,!1),bM(f,m.containerInfo)}function lN(f,m,M,C,N){return Gh(),_M(N),m.flags|=256,Zr(f,m,M,C),m.child}var Uv={dehydrated:null,treeContext:null,retryLane:0};function jv(f){return{baseLanes:f,cachePool:null}}function cN(f,m,M){var C=m.pendingProps,N=di.current,U=!1,ie=(m.flags&128)!==0,ve;if((ve=ie)||(ve=f!==null&&f.memoizedState===null?!1:(N&2)!==0),ve?(U=!0,m.flags&=-129):(f===null||f.memoizedState!==null)&&(N|=1),lt(di,N&1),f===null)return xM(m),f=m.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?(m.mode&1?Ut(f)?m.lanes=8:m.lanes=1073741824:m.lanes=1,null):(N=C.children,f=C.fallback,U?(C=m.mode,U=m.child,N={mode:"hidden",children:N},!(C&1)&&U!==null?(U.childLanes=0,U.pendingProps=N):U=sx(N,C,0,null),f=nd(f,C,M,null),U.return=m,f.return=m,U.sibling=f,m.child=U,m.child.memoizedState=jv(M),m.memoizedState=Uv,f):LM(m,N));if(N=f.memoizedState,N!==null){if(ve=N.dehydrated,ve!==null){if(ie)return m.flags&256?(m.flags&=-257,zv(f,m,M,Error(a(422)))):m.memoizedState!==null?(m.child=f.child,m.flags|=128,null):(U=C.fallback,N=m.mode,C=sx({mode:"visible",children:C.children},N,0,null),U=nd(U,N,M,null),U.flags|=2,C.return=m,U.return=m,C.sibling=U,m.child=C,m.mode&1&&qh(m,f.child,null,M),m.child.memoizedState=jv(M),m.memoizedState=Uv,U);if(!(m.mode&1))m=zv(f,m,M,null);else if(Ut(ve))m=zv(f,m,M,Error(a(419)));else if(C=(M&f.childLanes)!==0,Ws||C){if(C=zi,C!==null){switch(M&-M){case 4:U=2;break;case 16:U=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:U=32;break;case 536870912:U=268435456;break;default:U=0}C=U&(C.suspendedLanes|M)?0:U,C!==0&&C!==N.retryLane&&(N.retryLane=C,_a(f,C,-1))}tE(),m=zv(f,m,M,Error(a(421)))}else Mt(ve)?(m.flags|=128,m.child=f.child,m=G$.bind(null,f),In(ve,m),m=null):(M=N.treeContext,we&&($s=Rn(ve),Vs=m,ai=!0,to=null,mm=!1,M!==null&&(ga[ya++]=fl,ga[ya++]=pl,ga[ya++]=Xu,fl=M.id,pl=M.overflow,Xu=m)),m=LM(m,m.pendingProps.children),m.flags|=4096);return m}return U?(C=dN(f,m,C.children,C.fallback,M),U=m.child,N=f.child.memoizedState,U.memoizedState=N===null?jv(M):{baseLanes:N.baseLanes|M,cachePool:null},U.childLanes=f.childLanes&~M,m.memoizedState=Uv,C):(M=uN(f,m,C.children,M),m.memoizedState=null,M)}return U?(C=dN(f,m,C.children,C.fallback,M),U=m.child,N=f.child.memoizedState,U.memoizedState=N===null?jv(M):{baseLanes:N.baseLanes|M,cachePool:null},U.childLanes=f.childLanes&~M,m.memoizedState=Uv,C):(M=uN(f,m,C.children,M),m.memoizedState=null,M)}function LM(f,m){return m=sx({mode:"visible",children:m},f.mode,0,null),m.return=f,f.child=m}function uN(f,m,M,C){var N=f.child;return f=N.sibling,M=bc(N,{mode:"visible",children:M}),!(m.mode&1)&&(M.lanes=C),M.return=m,M.sibling=null,f!==null&&(C=m.deletions,C===null?(m.deletions=[f],m.flags|=16):C.push(f)),m.child=M}function dN(f,m,M,C,N){var U=m.mode;f=f.child;var ie=f.sibling,ve={mode:"hidden",children:M};return!(U&1)&&m.child!==f?(M=m.child,M.childLanes=0,M.pendingProps=ve,m.deletions=null):(M=bc(f,ve),M.subtreeFlags=f.subtreeFlags&14680064),ie!==null?C=bc(ie,C):(C=nd(C,U,N,null),C.flags|=2),C.return=m,M.return=m,M.sibling=C,m.child=M,C}function zv(f,m,M,C){return C!==null&&_M(C),qh(m,f.child,null,M),f=LM(m,m.pendingProps.children),f.flags|=2,m.memoizedState=null,f}function hN(f,m,M){f.lanes|=m;var C=f.alternate;C!==null&&(C.lanes|=m),hM(f.return,m,M)}function OM(f,m,M,C,N){var U=f.memoizedState;U===null?f.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:C,tail:M,tailMode:N}:(U.isBackwards=m,U.rendering=null,U.renderingStartTime=0,U.last=C,U.tail=M,U.tailMode=N)}function fN(f,m,M){var C=m.pendingProps,N=C.revealOrder,U=C.tail;if(Zr(f,m,C.children,M),C=di.current,C&2)C=C&1|2,m.flags|=128;else{if(f!==null&&f.flags&128)e:for(f=m.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&hN(f,M,m);else if(f.tag===19)hN(f,M,m);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===m)break e;for(;f.sibling===null;){if(f.return===null||f.return===m)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}C&=1}if(lt(di,C),!(m.mode&1))m.memoizedState=null;else switch(N){case"forwards":for(M=m.child,N=null;M!==null;)f=M.alternate,f!==null&&Av(f)===null&&(N=M),M=M.sibling;M=N,M===null?(N=m.child,m.child=null):(N=M.sibling,M.sibling=null),OM(m,!1,N,M,U);break;case"backwards":for(M=null,N=m.child,m.child=null;N!==null;){if(f=N.alternate,f!==null&&Av(f)===null){m.child=N;break}f=N.sibling,N.sibling=M,M=N,N=f}OM(m,!0,M,null,U);break;case"together":OM(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function gl(f,m,M){if(f!==null&&(m.dependencies=f.dependencies),Jh|=m.lanes,!(M&m.childLanes))return null;if(f!==null&&m.child!==f.child)throw Error(a(153));if(m.child!==null){for(f=m.child,M=bc(f,f.pendingProps),m.child=M,M.return=m;f.sibling!==null;)f=f.sibling,M=M.sibling=bc(f,f.pendingProps),M.return=m;M.sibling=null}return m.child}function D$(f,m,M){switch(m.tag){case 3:oN(m),Gh();break;case 5:P3(m);break;case 1:dn(m.type)&&Zt(m);break;case 4:bM(m,m.stateNode.containerInfo);break;case 10:p3(m,m.type._context,m.memoizedProps.value);break;case 13:var C=m.memoizedState;if(C!==null)return C.dehydrated!==null?(lt(di,di.current&1),m.flags|=128,null):M&m.child.childLanes?cN(f,m,M):(lt(di,di.current&1),f=gl(f,m,M),f!==null?f.sibling:null);lt(di,di.current&1);break;case 19:if(C=(M&m.childLanes)!==0,f.flags&128){if(C)return fN(f,m,M);m.flags|=128}var N=m.memoizedState;if(N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),lt(di,di.current),C)break;return null;case 22:case 23:return m.lanes=0,rN(f,m,M)}return gl(f,m,M)}function L$(f,m){switch(yM(m),m.tag){case 1:return dn(m.type)&&$t(),f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 3:return Yh(),et(It),et(zt),MM(),f=m.flags,f&65536&&!(f&128)?(m.flags=f&-65537|128,m):null;case 5:return wM(m),null;case 13:if(et(di),f=m.memoizedState,f!==null&&f.dehydrated!==null){if(m.alternate===null)throw Error(a(340));Gh()}return f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 19:return et(di),null;case 4:return Yh(),null;case 10:return dM(m.type._context),null;case 22:case 23:return eE(),null;case 24:return null;default:return null}}var Bv=!1,Zu=!1,O$=typeof WeakSet=="function"?WeakSet:Set,yt=null;function Hv(f,m){var M=f.ref;if(M!==null)if(typeof M=="function")try{M(null)}catch(C){bs(f,m,C)}else M.current=null}function FM(f,m,M){try{M()}catch(C){bs(f,m,C)}}var pN=!1;function F$(f,m){for(W(f.containerInfo),yt=m;yt!==null;)if(f=yt,m=f.child,(f.subtreeFlags&1028)!==0&&m!==null)m.return=f,yt=m;else for(;yt!==null;){f=yt;try{var M=f.alternate;if(f.flags&1024)switch(f.tag){case 0:case 11:case 15:break;case 1:if(M!==null){var C=M.memoizedProps,N=M.memoizedState,U=f.stateNode,ie=U.getSnapshotBeforeUpdate(f.elementType===f.type?C:eo(f.type,C),N);U.__reactInternalSnapshotBeforeUpdate=ie}break;case 3:De&&ht(f.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(ve){bs(f,f.return,ve)}if(m=f.sibling,m!==null){m.return=f.return,yt=m;break}yt=f.return}return M=pN,pN=!1,M}function Ju(f,m,M){var C=m.updateQueue;if(C=C!==null?C.lastEffect:null,C!==null){var N=C=C.next;do{if((N.tag&f)===f){var U=N.destroy;N.destroy=void 0,U!==void 0&&FM(m,M,U)}N=N.next}while(N!==C)}}function Cm(f,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var M=m=m.next;do{if((M.tag&f)===f){var C=M.create;M.destroy=C()}M=M.next}while(M!==m)}}function UM(f){var m=f.ref;if(m!==null){var M=f.stateNode;switch(f.tag){case 5:f=X(M);break;default:f=M}typeof m=="function"?m(f):m.current=f}}function mN(f,m,M){if(Ro&&typeof Ro.onCommitFiberUnmount=="function")try{Ro.onCommitFiberUnmount(yv,m)}catch{}switch(m.tag){case 0:case 11:case 14:case 15:if(f=m.updateQueue,f!==null&&(f=f.lastEffect,f!==null)){var C=f=f.next;do{var N=C,U=N.destroy;N=N.tag,U!==void 0&&(N&2||N&4)&&FM(m,M,U),C=C.next}while(C!==f)}break;case 1:if(Hv(m,M),f=m.stateNode,typeof f.componentWillUnmount=="function")try{f.props=m.memoizedProps,f.state=m.memoizedState,f.componentWillUnmount()}catch(ie){bs(m,M,ie)}break;case 5:Hv(m,M);break;case 4:De?bN(f,m,M):xe&&xe&&(m=m.stateNode.containerInfo,M=Ve(m),bn(m,M))}}function gN(f,m,M){for(var C=m;;)if(mN(f,C,M),C.child===null||De&&C.tag===4){if(C===m)break;for(;C.sibling===null;){if(C.return===null||C.return===m)return;C=C.return}C.sibling.return=C.return,C=C.sibling}else C.child.return=C,C=C.child}function yN(f){var m=f.alternate;m!==null&&(f.alternate=null,yN(m)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(m=f.stateNode,m!==null&&J(m)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function vN(f){return f.tag===5||f.tag===3||f.tag===4}function xN(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||vN(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function _N(f){if(De){e:{for(var m=f.return;m!==null;){if(vN(m))break e;m=m.return}throw Error(a(160))}var M=m;switch(M.tag){case 5:m=M.stateNode,M.flags&32&&(We(m),M.flags&=-33),M=xN(f),zM(f,M,m);break;case 3:case 4:m=M.stateNode.containerInfo,M=xN(f),jM(f,M,m);break;default:throw Error(a(161))}}}function jM(f,m,M){var C=f.tag;if(C===5||C===6)f=f.stateNode,m?nt(M,f,m):Oe(M,f);else if(C!==4&&(f=f.child,f!==null))for(jM(f,m,M),f=f.sibling;f!==null;)jM(f,m,M),f=f.sibling}function zM(f,m,M){var C=f.tag;if(C===5||C===6)f=f.stateNode,m?He(M,f,m):ye(M,f);else if(C!==4&&(f=f.child,f!==null))for(zM(f,m,M),f=f.sibling;f!==null;)zM(f,m,M),f=f.sibling}function bN(f,m,M){for(var C=m,N=!1,U,ie;;){if(!N){N=C.return;e:for(;;){if(N===null)throw Error(a(160));switch(U=N.stateNode,N.tag){case 5:ie=!1;break e;case 3:U=U.containerInfo,ie=!0;break e;case 4:U=U.containerInfo,ie=!0;break e}N=N.return}N=!0}if(C.tag===5||C.tag===6)gN(f,C,M),ie?st(U,C.stateNode):Tt(U,C.stateNode);else if(C.tag===18)ie?$e(U,C.stateNode):Ke(U,C.stateNode);else if(C.tag===4){if(C.child!==null){U=C.stateNode.containerInfo,ie=!0,C.child.return=C,C=C.child;continue}}else if(mN(f,C,M),C.child!==null){C.child.return=C,C=C.child;continue}if(C===m)break;for(;C.sibling===null;){if(C.return===null||C.return===m)return;C=C.return,C.tag===4&&(N=!1)}C.sibling.return=C.return,C=C.sibling}}function BM(f,m){if(De){switch(m.tag){case 0:case 11:case 14:case 15:Ju(3,m,m.return),Cm(3,m),Ju(5,m,m.return);return;case 1:return;case 5:var M=m.stateNode;if(M!=null){var C=m.memoizedProps;f=f!==null?f.memoizedProps:C;var N=m.type,U=m.updateQueue;m.updateQueue=null,U!==null&&Je(M,U,N,f,C,m)}return;case 6:if(m.stateNode===null)throw Error(a(162));M=m.memoizedProps,Te(m.stateNode,f!==null?f.memoizedProps:M,M);return;case 3:we&&f!==null&&f.memoizedState.isDehydrated&&Ne(m.stateNode.containerInfo);return;case 12:return;case 13:Vv(m);return;case 19:Vv(m);return;case 17:return}throw Error(a(163))}switch(m.tag){case 0:case 11:case 14:case 15:Ju(3,m,m.return),Cm(3,m),Ju(5,m,m.return);return;case 12:return;case 13:Vv(m);return;case 19:Vv(m);return;case 3:we&&f!==null&&f.memoizedState.isDehydrated&&Ne(m.stateNode.containerInfo);break;case 22:case 23:return}e:if(xe){switch(m.tag){case 1:case 5:case 6:break e;case 3:case 4:m=m.stateNode,bn(m.containerInfo,m.pendingChildren);break e}throw Error(a(163))}}function Vv(f){var m=f.updateQueue;if(m!==null){f.updateQueue=null;var M=f.stateNode;M===null&&(M=f.stateNode=new O$),m.forEach(function(C){var N=q$.bind(null,f,C);M.has(C)||(M.add(C),C.then(N,N))})}}function U$(f,m){for(yt=m;yt!==null;){m=yt;var M=m.deletions;if(M!==null)for(var C=0;C<M.length;C++){var N=M[C];try{var U=f;De?bN(U,N,m):gN(U,N,m);var ie=N.alternate;ie!==null&&(ie.return=null),N.return=null}catch(Lt){bs(N,m,Lt)}}if(M=m.child,m.subtreeFlags&12854&&M!==null)M.return=m,yt=M;else for(;yt!==null;){m=yt;try{var ve=m.flags;if(ve&32&&De&&We(m.stateNode),ve&512){var Be=m.alternate;if(Be!==null){var ot=Be.ref;ot!==null&&(typeof ot=="function"?ot(null):ot.current=null)}}if(ve&8192)switch(m.tag){case 13:if(m.memoizedState!==null){var Rt=m.alternate;(Rt===null||Rt.memoizedState===null)&&(XM=cr())}break;case 22:var Jt=m.memoizedState!==null,jt=m.alternate,Bn=jt!==null&&jt.memoizedState!==null;if(M=m,De){e:if(C=M,N=Jt,U=null,De)for(var Ft=C;;){if(Ft.tag===5){if(U===null){U=Ft;var Ir=Ft.stateNode;N?vt(Ir):ke(Ft.stateNode,Ft.memoizedProps)}}else if(Ft.tag===6){if(U===null){var wa=Ft.stateNode;N?ce(wa):Ge(wa,Ft.memoizedProps)}}else if((Ft.tag!==22&&Ft.tag!==23||Ft.memoizedState===null||Ft===C)&&Ft.child!==null){Ft.child.return=Ft,Ft=Ft.child;continue}if(Ft===C)break;for(;Ft.sibling===null;){if(Ft.return===null||Ft.return===C)break e;U===Ft&&(U=null),Ft=Ft.return}U===Ft&&(U=null),Ft.sibling.return=Ft.return,Ft=Ft.sibling}}if(Jt&&!Bn&&M.mode&1){yt=M;for(var Re=M.child;Re!==null;){for(M=yt=Re;yt!==null;){C=yt;var be=C.child;switch(C.tag){case 0:case 11:case 14:case 15:Ju(4,C,C.return);break;case 1:Hv(C,C.return);var Fe=C.stateNode;if(typeof Fe.componentWillUnmount=="function"){var _t=C.return;try{Fe.props=C.memoizedProps,Fe.state=C.memoizedState,Fe.componentWillUnmount()}catch(Lt){bs(C,_t,Lt)}}break;case 5:Hv(C,C.return);break;case 22:if(C.memoizedState!==null){MN(M);continue}}be!==null?(be.return=C,yt=be):MN(M)}Re=Re.sibling}}}switch(ve&4102){case 2:_N(m),m.flags&=-3;break;case 6:_N(m),m.flags&=-3,BM(m.alternate,m);break;case 4096:m.flags&=-4097;break;case 4100:m.flags&=-4097,BM(m.alternate,m);break;case 4:BM(m.alternate,m)}}catch(Lt){bs(m,m.return,Lt)}if(M=m.sibling,M!==null){M.return=m.return,yt=M;break}yt=m.return}}}function j$(f,m,M){yt=f,wN(f)}function wN(f,m,M){for(var C=(f.mode&1)!==0;yt!==null;){var N=yt,U=N.child;if(N.tag===22&&C){var ie=N.memoizedState!==null||Bv;if(!ie){var ve=N.alternate,Be=ve!==null&&ve.memoizedState!==null||Zu;ve=Bv;var ot=Zu;if(Bv=ie,(Zu=Be)&&!ot)for(yt=N;yt!==null;)ie=yt,Be=ie.child,ie.tag===22&&ie.memoizedState!==null?EN(N):Be!==null?(Be.return=ie,yt=Be):EN(N);for(;U!==null;)yt=U,wN(U),U=U.sibling;yt=N,Bv=ve,Zu=ot}SN(f)}else N.subtreeFlags&8772&&U!==null?(U.return=N,yt=U):SN(f)}}function SN(f){for(;yt!==null;){var m=yt;if(m.flags&8772){var M=m.alternate;try{if(m.flags&8772)switch(m.tag){case 0:case 11:case 15:Zu||Cm(5,m);break;case 1:var C=m.stateNode;if(m.flags&4&&!Zu)if(M===null)C.componentDidMount();else{var N=m.elementType===m.type?M.memoizedProps:eo(m.type,M.memoizedProps);C.componentDidUpdate(N,M.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var U=m.updateQueue;U!==null&&y3(m,U,C);break;case 3:var ie=m.updateQueue;if(ie!==null){if(M=null,m.child!==null)switch(m.child.tag){case 5:M=X(m.child.stateNode);break;case 1:M=m.child.stateNode}y3(m,ie,M)}break;case 5:var ve=m.stateNode;M===null&&m.flags&4&&ze(ve,m.type,m.memoizedProps,m);break;case 6:break;case 4:break;case 12:break;case 13:if(we&&m.memoizedState===null){var Be=m.alternate;if(Be!==null){var ot=Be.memoizedState;if(ot!==null){var Rt=ot.dehydrated;Rt!==null&&Ie(Rt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}Zu||m.flags&512&&UM(m)}catch(Jt){bs(m,m.return,Jt)}}if(m===f){yt=null;break}if(M=m.sibling,M!==null){M.return=m.return,yt=M;break}yt=m.return}}function MN(f){for(;yt!==null;){var m=yt;if(m===f){yt=null;break}var M=m.sibling;if(M!==null){M.return=m.return,yt=M;break}yt=m.return}}function EN(f){for(;yt!==null;){var m=yt;try{switch(m.tag){case 0:case 11:case 15:var M=m.return;try{Cm(4,m)}catch(Be){bs(m,M,Be)}break;case 1:var C=m.stateNode;if(typeof C.componentDidMount=="function"){var N=m.return;try{C.componentDidMount()}catch(Be){bs(m,N,Be)}}var U=m.return;try{UM(m)}catch(Be){bs(m,U,Be)}break;case 5:var ie=m.return;try{UM(m)}catch(Be){bs(m,ie,Be)}}}catch(Be){bs(m,m.return,Be)}if(m===f){yt=null;break}var ve=m.sibling;if(ve!==null){ve.return=m.return,yt=ve;break}yt=m.return}}var $v=0,Wv=1,Gv=2,qv=3,Xv=4;if(typeof Symbol=="function"&&Symbol.for){var Am=Symbol.for;$v=Am("selector.component"),Wv=Am("selector.has_pseudo_class"),Gv=Am("selector.role"),qv=Am("selector.test_id"),Xv=Am("selector.text")}function HM(f){var m=$(f);if(m!=null){if(typeof m.memoizedProps["data-testname"]!="string")throw Error(a(364));return m}if(f=Xe(f),f===null)throw Error(a(362));return f.stateNode.current}function VM(f,m){switch(m.$$typeof){case $v:if(f.type===m.value)return!0;break;case Wv:e:{m=m.value,f=[f,0];for(var M=0;M<f.length;){var C=f[M++],N=f[M++],U=m[N];if(C.tag!==5||!O(C)){for(;U!=null&&VM(C,U);)N++,U=m[N];if(N===m.length){m=!0;break e}else for(C=C.child;C!==null;)f.push(C,N),C=C.sibling}}m=!1}return m;case Gv:if(f.tag===5&&ee(f.stateNode,m.value))return!0;break;case Xv:if((f.tag===5||f.tag===6)&&(f=V(f),f!==null&&0<=f.indexOf(m.value)))return!0;break;case qv:if(f.tag===5&&(f=f.memoizedProps["data-testname"],typeof f=="string"&&f.toLowerCase()===m.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function $M(f){switch(f.$$typeof){case $v:return"<"+(k(f.value)||"Unknown")+">";case Wv:return":has("+($M(f)||"")+")";case Gv:return'[role="'+f.value+'"]';case Xv:return'"'+f.value+'"';case qv:return'[data-testname="'+f.value+'"]';default:throw Error(a(365))}}function TN(f,m){var M=[];f=[f,0];for(var C=0;C<f.length;){var N=f[C++],U=f[C++],ie=m[U];if(N.tag!==5||!O(N)){for(;ie!=null&&VM(N,ie);)U++,ie=m[U];if(U===m.length)M.push(N);else for(N=N.child;N!==null;)f.push(N,U),N=N.sibling}}return M}function WM(f,m){if(!Le)throw Error(a(363));f=HM(f),f=TN(f,m),m=[],f=Array.from(f);for(var M=0;M<f.length;){var C=f[M++];if(C.tag===5)O(C)||m.push(C.stateNode);else for(C=C.child;C!==null;)f.push(C),C=C.sibling}return m}var z$=Math.ceil,Yv=o.ReactCurrentDispatcher,GM=o.ReactCurrentOwner,Ri=o.ReactCurrentBatchConfig,on=0,zi=null,Bi=null,wr=0,Gs=0,Zh=at(0),Qi=0,Pm=null,Jh=0,Kv=0,qM=0,Rm=null,xs=null,XM=0,YM=1/0;function Qh(){YM=cr()+500}var Zv=!1,KM=null,yc=null,Jv=!1,vc=null,Qv=0,km=0,ZM=null,ex=-1,tx=0;function Jr(){return on&6?cr():ex!==-1?ex:ex=cr()}function xc(f){return f.mode&1?on&2&&wr!==0?wr&-wr:w$.transition!==null?(tx===0&&(f=Ji,Ji<<=1,!(Ji&4194240)&&(Ji=64),tx=f),tx):(f=Cn,f!==0?f:de()):1}function _a(f,m,M){if(50<km)throw km=0,ZM=null,Error(a(185));var C=nx(f,m);return C===null?null:(pm(C,m,M),(!(on&2)||C!==zi)&&(C===zi&&(!(on&2)&&(Kv|=m),Qi===4&&_c(C,wr)),_s(C,M),m===1&&on===0&&!(f.mode&1)&&(Qh(),vv&&No())),C)}function nx(f,m){f.lanes|=m;var M=f.alternate;for(M!==null&&(M.lanes|=m),M=f,f=f.return;f!==null;)f.childLanes|=m,M=f.alternate,M!==null&&(M.childLanes|=m),M=f,f=f.return;return M.tag===3?M.stateNode:null}function _s(f,m){var M=f.callbackNode;f$(f,m);var C=gv(f,f===zi?wr:0);if(C===0)M!==null&&h3(M),f.callbackNode=null,f.callbackPriority=0;else if(m=C&-C,f.callbackPriority!==m){if(M!=null&&h3(M),m===1)f.tag===0?b$(AN.bind(null,f)):f3(AN.bind(null,f)),ue?je(function(){on===0&&No()}):sM(aM,No),M=null;else{switch(d3(C)){case 1:M=aM;break;case 4:M=y$;break;case 16:M=oM;break;case 536870912:M=v$;break;default:M=oM}M=FN(M,CN.bind(null,f))}f.callbackPriority=m,f.callbackNode=M}}function CN(f,m){if(ex=-1,tx=0,on&6)throw Error(a(327));var M=f.callbackNode;if(td()&&f.callbackNode!==M)return null;var C=gv(f,f===zi?wr:0);if(C===0)return null;if(C&30||C&f.expiredLanes||m)m=ix(f,C);else{m=C;var N=on;on|=2;var U=kN();(zi!==f||wr!==m)&&(Qh(),Qu(f,m));do try{V$();break}catch(ve){RN(f,ve)}while(1);uM(),Yv.current=U,on=N,Bi!==null?m=0:(zi=null,wr=0,m=Qi)}if(m!==0){if(m===2&&(N=nM(f),N!==0&&(C=N,m=JM(f,N))),m===1)throw M=Pm,Qu(f,0),_c(f,C),_s(f,cr()),M;if(m===6)_c(f,C);else{if(N=f.current.alternate,!(C&30)&&!B$(N)&&(m=ix(f,C),m===2&&(U=nM(f),U!==0&&(C=U,m=JM(f,U))),m===1))throw M=Pm,Qu(f,0),_c(f,C),_s(f,cr()),M;switch(f.finishedWork=N,f.finishedLanes=C,m){case 0:case 1:throw Error(a(345));case 2:ed(f,xs);break;case 3:if(_c(f,C),(C&130023424)===C&&(m=XM+500-cr(),10<m)){if(gv(f,0)!==0)break;if(N=f.suspendedLanes,(N&C)!==C){Jr(),f.pingedLanes|=f.suspendedLanes&N;break}f.timeoutHandle=_e(ed.bind(null,f,xs),m);break}ed(f,xs);break;case 4:if(_c(f,C),(C&4194240)===C)break;for(m=f.eventTimes,N=-1;0<C;){var ie=31-Vt(C);U=1<<ie,ie=m[ie],ie>N&&(N=ie),C&=~U}if(C=N,C=cr()-C,C=(120>C?120:480>C?480:1080>C?1080:1920>C?1920:3e3>C?3e3:4320>C?4320:1960*z$(C/1960))-C,10<C){f.timeoutHandle=_e(ed.bind(null,f,xs),C);break}ed(f,xs);break;case 5:ed(f,xs);break;default:throw Error(a(329))}}}return _s(f,cr()),f.callbackNode===M?CN.bind(null,f):null}function JM(f,m){var M=Rm;return f.current.memoizedState.isDehydrated&&(Qu(f,m).flags|=256),f=ix(f,m),f!==2&&(m=xs,xs=M,m!==null&&QM(m)),f}function QM(f){xs===null?xs=f:xs.push.apply(xs,f)}function B$(f){for(var m=f;;){if(m.flags&16384){var M=m.updateQueue;if(M!==null&&(M=M.stores,M!==null))for(var C=0;C<M.length;C++){var N=M[C],U=N.getSnapshot;N=N.value;try{if(!ko(U(),N))return!1}catch{return!1}}}if(M=m.child,m.subtreeFlags&16384&&M!==null)M.return=m,m=M;else{if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function _c(f,m){for(m&=~qM,m&=~Kv,f.suspendedLanes|=m,f.pingedLanes&=~m,f=f.expirationTimes;0<m;){var M=31-Vt(m),C=1<<M;f[M]=-1,m&=~C}}function AN(f){if(on&6)throw Error(a(327));td();var m=gv(f,0);if(!(m&1))return _s(f,cr()),null;var M=ix(f,m);if(f.tag!==0&&M===2){var C=nM(f);C!==0&&(m=C,M=JM(f,C))}if(M===1)throw M=Pm,Qu(f,0),_c(f,m),_s(f,cr()),M;if(M===6)throw Error(a(345));return f.finishedWork=f.current.alternate,f.finishedLanes=m,ed(f,xs),_s(f,cr()),null}function PN(f){vc!==null&&vc.tag===0&&!(on&6)&&td();var m=on;on|=1;var M=Ri.transition,C=Cn;try{if(Ri.transition=null,Cn=1,f)return f()}finally{Cn=C,Ri.transition=M,on=m,!(on&6)&&No()}}function eE(){Gs=Zh.current,et(Zh)}function Qu(f,m){f.finishedWork=null,f.finishedLanes=0;var M=f.timeoutHandle;if(M!==Ee&&(f.timeoutHandle=Ee,Ce(M)),Bi!==null)for(M=Bi.return;M!==null;){var C=M;switch(yM(C),C.tag){case 1:C=C.type.childContextTypes,C!=null&&$t();break;case 3:Yh(),et(It),et(zt),MM();break;case 5:wM(C);break;case 4:Yh();break;case 13:et(di);break;case 19:et(di);break;case 10:dM(C.type._context);break;case 22:case 23:eE()}M=M.return}if(zi=f,Bi=f=bc(f.current,null),wr=Gs=m,Qi=0,Pm=null,qM=Kv=Jh=0,xs=Rm=null,Io!==null){for(m=0;m<Io.length;m++)if(M=Io[m],C=M.interleaved,C!==null){M.interleaved=null;var N=C.next,U=M.pending;if(U!==null){var ie=U.next;U.next=N,C.next=ie}M.pending=C}Io=null}return f}function RN(f,m){do{var M=Bi;try{if(uM(),Pv.current=Lv,Rv){for(var C=wi.memoizedState;C!==null;){var N=C.queue;N!==null&&(N.pending=null),C=C.next}Rv=!1}if(Kh=0,ur=Rr=wi=null,_m=!1,bm=0,GM.current=null,M===null||M.return===null){Qi=1,Pm=m,Bi=null;break}e:{var U=f,ie=M.return,ve=M,Be=m;if(m=wr,ve.flags|=32768,Be!==null&&typeof Be=="object"&&typeof Be.then=="function"){var ot=Be,Rt=ve,Jt=Rt.tag;if(!(Rt.mode&1)&&(Jt===0||Jt===11||Jt===15)){var jt=Rt.alternate;jt?(Rt.updateQueue=jt.updateQueue,Rt.memoizedState=jt.memoizedState,Rt.lanes=jt.lanes):(Rt.updateQueue=null,Rt.memoizedState=null)}var Bn=Z3(ie);if(Bn!==null){Bn.flags&=-257,J3(Bn,ie,ve,U,m),Bn.mode&1&&K3(U,ot,m),m=Bn,Be=ot;var Ft=m.updateQueue;if(Ft===null){var Ir=new Set;Ir.add(Be),m.updateQueue=Ir}else Ft.add(Be);break e}else{if(!(m&1)){K3(U,ot,m),tE();break e}Be=Error(a(426))}}else if(ai&&ve.mode&1){var wa=Z3(ie);if(wa!==null){!(wa.flags&65536)&&(wa.flags|=256),J3(wa,ie,ve,U,m),_M(Be);break e}}U=Be,Qi!==4&&(Qi=2),Rm===null?Rm=[U]:Rm.push(U),Be=kM(Be,ve),ve=ie;do{switch(ve.tag){case 3:ve.flags|=65536,m&=-m,ve.lanes|=m;var Re=X3(ve,Be,m);g3(ve,Re);break e;case 1:U=Be;var be=ve.type,Fe=ve.stateNode;if(!(ve.flags&128)&&(typeof be.getDerivedStateFromError=="function"||Fe!==null&&typeof Fe.componentDidCatch=="function"&&(yc===null||!yc.has(Fe)))){ve.flags|=65536,m&=-m,ve.lanes|=m;var _t=Y3(ve,U,m);g3(ve,_t);break e}}ve=ve.return}while(ve!==null)}IN(M)}catch(Lt){m=Lt,Bi===M&&M!==null&&(Bi=M=M.return);continue}break}while(1)}function kN(){var f=Yv.current;return Yv.current=Lv,f===null?Lv:f}function tE(){(Qi===0||Qi===3||Qi===2)&&(Qi=4),zi===null||!(Jh&268435455)&&!(Kv&268435455)||_c(zi,wr)}function ix(f,m){var M=on;on|=2;var C=kN();zi===f&&wr===m||Qu(f,m);do try{H$();break}catch(N){RN(f,N)}while(1);if(uM(),on=M,Yv.current=C,Bi!==null)throw Error(a(261));return zi=null,wr=0,Qi}function H$(){for(;Bi!==null;)NN(Bi)}function V$(){for(;Bi!==null&&!m$();)NN(Bi)}function NN(f){var m=ON(f.alternate,f,Gs);f.memoizedProps=f.pendingProps,m===null?IN(f):Bi=m,GM.current=null}function IN(f){var m=f;do{var M=m.alternate;if(f=m.return,m.flags&32768){if(M=L$(M,m),M!==null){M.flags&=32767,Bi=M;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{Qi=6,Bi=null;return}}else if(M=N$(M,m,Gs),M!==null){Bi=M;return}if(m=m.sibling,m!==null){Bi=m;return}Bi=m=f}while(m!==null);Qi===0&&(Qi=5)}function ed(f,m){var M=Cn,C=Ri.transition;try{Ri.transition=null,Cn=1,$$(f,m,M)}finally{Ri.transition=C,Cn=M}return null}function $$(f,m,M){do td();while(vc!==null);if(on&6)throw Error(a(327));var C=f.finishedWork,N=f.finishedLanes;if(C===null)return null;if(f.finishedWork=null,f.finishedLanes=0,C===f.current)throw Error(a(177));f.callbackNode=null,f.callbackPriority=0;var U=C.lanes|C.childLanes;if(p$(f,U),f===zi&&(Bi=zi=null,wr=0),!(C.subtreeFlags&2064)&&!(C.flags&2064)||Jv||(Jv=!0,FN(oM,function(){return td(),null})),U=(C.flags&15990)!==0,C.subtreeFlags&15990||U){U=Ri.transition,Ri.transition=null;var ie=Cn;Cn=1;var ve=on;on|=4,GM.current=null,F$(f,C),U$(f,C),j(f.containerInfo),f.current=C,j$(C),g$(),on=ve,Cn=ie,Ri.transition=U}else f.current=C;if(Jv&&(Jv=!1,vc=f,Qv=N),U=f.pendingLanes,U===0&&(yc=null),x$(C.stateNode),_s(f,cr()),m!==null)for(M=f.onRecoverableError,C=0;C<m.length;C++)M(m[C]);if(Zv)throw Zv=!1,f=KM,KM=null,f;return Qv&1&&f.tag!==0&&td(),U=f.pendingLanes,U&1?f===ZM?km++:(km=0,ZM=f):km=0,No(),null}function td(){if(vc!==null){var f=d3(Qv),m=Ri.transition,M=Cn;try{if(Ri.transition=null,Cn=16>f?16:f,vc===null)var C=!1;else{if(f=vc,vc=null,Qv=0,on&6)throw Error(a(331));var N=on;for(on|=4,yt=f.current;yt!==null;){var U=yt,ie=U.child;if(yt.flags&16){var ve=U.deletions;if(ve!==null){for(var Be=0;Be<ve.length;Be++){var ot=ve[Be];for(yt=ot;yt!==null;){var Rt=yt;switch(Rt.tag){case 0:case 11:case 15:Ju(8,Rt,U)}var Jt=Rt.child;if(Jt!==null)Jt.return=Rt,yt=Jt;else for(;yt!==null;){Rt=yt;var jt=Rt.sibling,Bn=Rt.return;if(yN(Rt),Rt===ot){yt=null;break}if(jt!==null){jt.return=Bn,yt=jt;break}yt=Bn}}}var Ft=U.alternate;if(Ft!==null){var Ir=Ft.child;if(Ir!==null){Ft.child=null;do{var wa=Ir.sibling;Ir.sibling=null,Ir=wa}while(Ir!==null)}}yt=U}}if(U.subtreeFlags&2064&&ie!==null)ie.return=U,yt=ie;else e:for(;yt!==null;){if(U=yt,U.flags&2048)switch(U.tag){case 0:case 11:case 15:Ju(9,U,U.return)}var Re=U.sibling;if(Re!==null){Re.return=U.return,yt=Re;break e}yt=U.return}}var be=f.current;for(yt=be;yt!==null;){ie=yt;var Fe=ie.child;if(ie.subtreeFlags&2064&&Fe!==null)Fe.return=ie,yt=Fe;else e:for(ie=be;yt!==null;){if(ve=yt,ve.flags&2048)try{switch(ve.tag){case 0:case 11:case 15:Cm(9,ve)}}catch(Lt){bs(ve,ve.return,Lt)}if(ve===ie){yt=null;break e}var _t=ve.sibling;if(_t!==null){_t.return=ve.return,yt=_t;break e}yt=ve.return}}if(on=N,No(),Ro&&typeof Ro.onPostCommitFiberRoot=="function")try{Ro.onPostCommitFiberRoot(yv,f)}catch{}C=!0}return C}finally{Cn=M,Ri.transition=m}}return!1}function DN(f,m,M){m=kM(M,m),m=X3(f,m,1),gc(f,m),m=Jr(),f=nx(f,1),f!==null&&(pm(f,1,m),_s(f,m))}function bs(f,m,M){if(f.tag===3)DN(f,f,M);else for(;m!==null;){if(m.tag===3){DN(m,f,M);break}else if(m.tag===1){var C=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(yc===null||!yc.has(C))){f=kM(M,f),f=Y3(m,f,1),gc(m,f),f=Jr(),m=nx(m,1),m!==null&&(pm(m,1,f),_s(m,f));break}}m=m.return}}function W$(f,m,M){var C=f.pingCache;C!==null&&C.delete(m),m=Jr(),f.pingedLanes|=f.suspendedLanes&M,zi===f&&(wr&M)===M&&(Qi===4||Qi===3&&(wr&130023424)===wr&&500>cr()-XM?Qu(f,0):qM|=M),_s(f,m)}function LN(f,m){m===0&&(f.mode&1?(m=pc,pc<<=1,!(pc&130023424)&&(pc=4194304)):m=1);var M=Jr();f=nx(f,m),f!==null&&(pm(f,m,M),_s(f,M))}function G$(f){var m=f.memoizedState,M=0;m!==null&&(M=m.retryLane),LN(f,M)}function q$(f,m){var M=0;switch(f.tag){case 13:var C=f.stateNode,N=f.memoizedState;N!==null&&(M=N.retryLane);break;case 19:C=f.stateNode;break;default:throw Error(a(314))}C!==null&&C.delete(m),LN(f,M)}var ON;ON=function(f,m,M){if(f!==null)if(f.memoizedProps!==m.pendingProps||It.current)Ws=!0;else{if(!(f.lanes&M)&&!(m.flags&128))return Ws=!1,D$(f,m,M);Ws=!!(f.flags&131072)}else Ws=!1,ai&&m.flags&1048576&&w3(m,Tv,m.index);switch(m.lanes=0,m.tag){case 2:var C=m.type;f!==null&&(f.alternate=null,m.alternate=null,m.flags|=2),f=m.pendingProps;var N=Et(m,zt.current);Vh(m,M),N=TM(null,m,C,f,N,M);var U=CM();return m.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,dn(C)?(U=!0,Zt(m)):U=!1,m.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,fM(m),N.updater=Mv,m.stateNode=N,N._reactInternals=m,mM(m,C,f,M),m=DM(null,m,C,!0,U,M)):(m.tag=0,ai&&U&&gM(m),Zr(null,m,N,M),m=m.child),m;case 16:C=m.elementType;e:{switch(f!==null&&(f.alternate=null,m.alternate=null,m.flags|=2),f=m.pendingProps,N=C._init,C=N(C._payload),m.type=C,N=m.tag=Y$(C),f=eo(C,f),N){case 0:m=IM(null,m,C,f,M);break e;case 1:m=aN(null,m,C,f,M);break e;case 11:m=tN(null,m,C,f,M);break e;case 14:m=nN(null,m,C,eo(C.type,f),M);break e}throw Error(a(306,C,""))}return m;case 0:return C=m.type,N=m.pendingProps,N=m.elementType===C?N:eo(C,N),IM(f,m,C,N,M);case 1:return C=m.type,N=m.pendingProps,N=m.elementType===C?N:eo(C,N),aN(f,m,C,N,M);case 3:e:{if(oN(m),f===null)throw Error(a(387));C=m.pendingProps,U=m.memoizedState,N=U.element,m3(f,m),Sv(m,C,null,M);var ie=m.memoizedState;if(C=ie.element,we&&U.isDehydrated)if(U={element:C,isDehydrated:!1,cache:ie.cache,transitions:ie.transitions},m.updateQueue.baseState=U,m.memoizedState=U,m.flags&256){N=Error(a(423)),m=lN(f,m,C,M,N);break e}else if(C!==N){N=Error(a(424)),m=lN(f,m,C,M,N);break e}else for(we&&($s=si(m.stateNode.containerInfo),Vs=m,ai=!0,to=null,mm=!1),M=A3(m,null,C,M),m.child=M;M;)M.flags=M.flags&-3|4096,M=M.sibling;else{if(Gh(),C===N){m=gl(f,m,M);break e}Zr(f,m,C,M)}m=m.child}return m;case 5:return P3(m),f===null&&xM(m),C=m.type,N=m.pendingProps,U=f!==null?f.memoizedProps:null,ie=N.children,re(C,N)?ie=null:U!==null&&re(C,U)&&(m.flags|=32),sN(f,m),Zr(f,m,ie,M),m.child;case 6:return f===null&&xM(m),null;case 13:return cN(f,m,M);case 4:return bM(m,m.stateNode.containerInfo),C=m.pendingProps,f===null?m.child=qh(m,null,C,M):Zr(f,m,C,M),m.child;case 11:return C=m.type,N=m.pendingProps,N=m.elementType===C?N:eo(C,N),tN(f,m,C,N,M);case 7:return Zr(f,m,m.pendingProps,M),m.child;case 8:return Zr(f,m,m.pendingProps.children,M),m.child;case 12:return Zr(f,m,m.pendingProps.children,M),m.child;case 10:e:{if(C=m.type._context,N=m.pendingProps,U=m.memoizedProps,ie=N.value,p3(m,C,ie),U!==null)if(ko(U.value,ie)){if(U.children===N.children&&!It.current){m=gl(f,m,M);break e}}else for(U=m.child,U!==null&&(U.return=m);U!==null;){var ve=U.dependencies;if(ve!==null){ie=U.child;for(var Be=ve.firstContext;Be!==null;){if(Be.context===C){if(U.tag===1){Be=hl(-1,M&-M),Be.tag=2;var ot=U.updateQueue;if(ot!==null){ot=ot.shared;var Rt=ot.pending;Rt===null?Be.next=Be:(Be.next=Rt.next,Rt.next=Be),ot.pending=Be}}U.lanes|=M,Be=U.alternate,Be!==null&&(Be.lanes|=M),hM(U.return,M,m),ve.lanes|=M;break}Be=Be.next}}else if(U.tag===10)ie=U.type===m.type?null:U.child;else if(U.tag===18){if(ie=U.return,ie===null)throw Error(a(341));ie.lanes|=M,ve=ie.alternate,ve!==null&&(ve.lanes|=M),hM(ie,M,m),ie=U.sibling}else ie=U.child;if(ie!==null)ie.return=U;else for(ie=U;ie!==null;){if(ie===m){ie=null;break}if(U=ie.sibling,U!==null){U.return=ie.return,ie=U;break}ie=ie.return}U=ie}Zr(f,m,N.children,M),m=m.child}return m;case 9:return N=m.type,C=m.pendingProps.children,Vh(m,M),N=ma(N),C=C(N),m.flags|=1,Zr(f,m,C,M),m.child;case 14:return C=m.type,N=eo(C,m.pendingProps),N=eo(C.type,N),nN(f,m,C,N,M);case 15:return iN(f,m,m.type,m.pendingProps,M);case 17:return C=m.type,N=m.pendingProps,N=m.elementType===C?N:eo(C,N),f!==null&&(f.alternate=null,m.alternate=null,m.flags|=2),m.tag=1,dn(C)?(f=!0,Zt(m)):f=!1,Vh(m,M),_3(m,C,N),mM(m,C,N,M),DM(null,m,C,!0,f,M);case 19:return fN(f,m,M);case 22:return rN(f,m,M)}throw Error(a(156,m.tag))};function FN(f,m){return sM(f,m)}function X$(f,m,M,C){this.tag=f,this.key=M,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ba(f,m,M,C){return new X$(f,m,M,C)}function nE(f){return f=f.prototype,!(!f||!f.isReactComponent)}function Y$(f){if(typeof f=="function")return nE(f)?1:0;if(f!=null){if(f=f.$$typeof,f===x)return 11;if(f===b)return 14}return 2}function bc(f,m){var M=f.alternate;return M===null?(M=ba(f.tag,m,f.key,f.mode),M.elementType=f.elementType,M.type=f.type,M.stateNode=f.stateNode,M.alternate=f,f.alternate=M):(M.pendingProps=m,M.type=f.type,M.flags=0,M.subtreeFlags=0,M.deletions=null),M.flags=f.flags&14680064,M.childLanes=f.childLanes,M.lanes=f.lanes,M.child=f.child,M.memoizedProps=f.memoizedProps,M.memoizedState=f.memoizedState,M.updateQueue=f.updateQueue,m=f.dependencies,M.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},M.sibling=f.sibling,M.index=f.index,M.ref=f.ref,M}function rx(f,m,M,C,N,U){var ie=2;if(C=f,typeof f=="function")nE(f)&&(ie=1);else if(typeof f=="string")ie=5;else e:switch(f){case u:return nd(M.children,N,U,m);case d:ie=8,N|=8;break;case h:return f=ba(12,M,m,N|2),f.elementType=h,f.lanes=U,f;case _:return f=ba(13,M,m,N),f.elementType=_,f.lanes=U,f;case v:return f=ba(19,M,m,N),f.elementType=v,f.lanes=U,f;case S:return sx(M,N,U,m);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case p:ie=10;break e;case y:ie=9;break e;case x:ie=11;break e;case b:ie=14;break e;case w:ie=16,C=null;break e}throw Error(a(130,f==null?f:typeof f,""))}return m=ba(ie,M,m,N),m.elementType=f,m.type=C,m.lanes=U,m}function nd(f,m,M,C){return f=ba(7,f,C,m),f.lanes=M,f}function sx(f,m,M,C){return f=ba(22,f,C,m),f.elementType=S,f.lanes=M,f.stateNode={},f}function iE(f,m,M){return f=ba(6,f,null,m),f.lanes=M,f}function rE(f,m,M){return m=ba(4,f.children!==null?f.children:[],f.key,m),m.lanes=M,m.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},m}function K$(f,m,M,C,N){this.tag=m,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ee,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=iM(0),this.expirationTimes=iM(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=iM(0),this.identifierPrefix=C,this.onRecoverableError=N,we&&(this.mutableSourceEagerHydrationData=null)}function UN(f,m,M,C,N,U,ie,ve,Be){return f=new K$(f,m,M,ve,Be),m===1?(m=1,U===!0&&(m|=8)):m=0,U=ba(3,null,null,m),f.current=U,U.stateNode=f,U.memoizedState={element:C,isDehydrated:M,cache:null,transitions:null},fM(U),f}function jN(f){if(!f)return Pt;f=f._reactInternals;e:{if(E(f)!==f||f.tag!==1)throw Error(a(170));var m=f;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(dn(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(a(171))}if(f.tag===1){var M=f.type;if(dn(M))return $n(f,M,m)}return m}function zN(f){var m=f._reactInternals;if(m===void 0)throw typeof f.render=="function"?Error(a(188)):(f=Object.keys(f).join(","),Error(a(268,f)));return f=D(m),f===null?null:f.stateNode}function BN(f,m){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var M=f.retryLane;f.retryLane=M!==0&&M<m?M:m}}function sE(f,m){BN(f,m),(f=f.alternate)&&BN(f,m)}function Z$(f){return f=D(f),f===null?null:f.stateNode}function J$(){return null}return t.attemptContinuousHydration=function(f){if(f.tag===13){var m=Jr();_a(f,134217728,m),sE(f,134217728)}},t.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13){var m=Jr(),M=xc(f);_a(f,M,m),sE(f,M)}},t.attemptSynchronousHydration=function(f){switch(f.tag){case 3:var m=f.stateNode;if(m.current.memoizedState.isDehydrated){var M=Hs(m.pendingLanes);M!==0&&(rM(m,M|1),_s(m,cr()),!(on&6)&&(Qh(),No()))}break;case 13:var C=Jr();PN(function(){return _a(f,1,C)}),sE(f,1)}},t.batchedUpdates=function(f,m){var M=on;on|=1;try{return f(m)}finally{on=M,on===0&&(Qh(),vv&&No())}},t.createComponentSelector=function(f){return{$$typeof:$v,value:f}},t.createContainer=function(f,m,M,C,N,U,ie){return UN(f,m,!1,null,M,C,N,U,ie)},t.createHasPseudoClassSelector=function(f){return{$$typeof:Wv,value:f}},t.createHydrationContainer=function(f,m,M,C,N,U,ie,ve,Be){return f=UN(M,C,!0,f,N,U,ie,ve,Be),f.context=jN(null),M=f.current,C=Jr(),N=xc(M),U=hl(C,N),U.callback=m??null,gc(M,U),f.current.lanes=N,pm(f,N,C),_s(f,C),f},t.createPortal=function(f,m,M){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:C==null?null:""+C,children:f,containerInfo:m,implementation:M}},t.createRoleSelector=function(f){return{$$typeof:Gv,value:f}},t.createTestNameSelector=function(f){return{$$typeof:qv,value:f}},t.createTextSelector=function(f){return{$$typeof:Xv,value:f}},t.deferredUpdates=function(f){var m=Cn,M=Ri.transition;try{return Ri.transition=null,Cn=16,f()}finally{Cn=m,Ri.transition=M}},t.discreteUpdates=function(f,m,M,C,N){var U=Cn,ie=Ri.transition;try{return Ri.transition=null,Cn=1,f(m,M,C,N)}finally{Cn=U,Ri.transition=ie,on===0&&Qh()}},t.findAllNodes=WM,t.findBoundingRects=function(f,m){if(!Le)throw Error(a(363));m=WM(f,m),f=[];for(var M=0;M<m.length;M++)f.push(gt(m[M]));for(m=f.length-1;0<m;m--){M=f[m];for(var C=M.x,N=C+M.width,U=M.y,ie=U+M.height,ve=m-1;0<=ve;ve--)if(m!==ve){var Be=f[ve],ot=Be.x,Rt=ot+Be.width,Jt=Be.y,jt=Jt+Be.height;if(C>=ot&&U>=Jt&&N<=Rt&&ie<=jt){f.splice(m,1);break}else if(C!==ot||M.width!==Be.width||jt<U||Jt>ie){if(!(U!==Jt||M.height!==Be.height||Rt<C||ot>N)){ot>C&&(Be.width+=ot-C,Be.x=C),Rt<N&&(Be.width=N-ot),f.splice(m,1);break}}else{Jt>U&&(Be.height+=Jt-U,Be.y=U),jt<ie&&(Be.height=ie-Jt),f.splice(m,1);break}}}return f},t.findHostInstance=zN,t.findHostInstanceWithNoPortals=function(f){return f=I(f),f=f!==null?G(f):null,f===null?null:f.stateNode},t.findHostInstanceWithWarning=function(f){return zN(f)},t.flushControlled=function(f){var m=on;on|=1;var M=Ri.transition,C=Cn;try{Ri.transition=null,Cn=1,f()}finally{Cn=C,Ri.transition=M,on=m,on===0&&(Qh(),No())}},t.flushPassiveEffects=td,t.flushSync=PN,t.focusWithin=function(f,m){if(!Le)throw Error(a(363));for(f=HM(f),m=TN(f,m),m=Array.from(m),f=0;f<m.length;){var M=m[f++];if(!O(M)){if(M.tag===5&&le(M.stateNode))return!0;for(M=M.child;M!==null;)m.push(M),M=M.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Cn},t.getFindAllNodesFailureDescription=function(f,m){if(!Le)throw Error(a(363));var M=0,C=[];f=[HM(f),0];for(var N=0;N<f.length;){var U=f[N++],ie=f[N++],ve=m[ie];if((U.tag!==5||!O(U))&&(VM(U,ve)&&(C.push($M(ve)),ie++,ie>M&&(M=ie)),ie<m.length))for(U=U.child;U!==null;)f.push(U,ie),U=U.sibling}if(M<m.length){for(f=[];M<m.length;M++)f.push($M(m[M]));return`findAllNodes was able to match part of the selector:
  `+(C.join(" > ")+`

No matching component was found for:
  `)+f.join(" > ")}return null},t.getPublicRootInstance=function(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return X(f.child.stateNode);default:return f.child.stateNode}},t.injectIntoDevTools=function(f){if(f={bundleType:f.bundleType,version:f.version,rendererPackageName:f.rendererPackageName,rendererConfig:f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:Z$,findFiberByHostInstance:f.findFiberByHostInstance||J$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(m.isDisabled||!m.supportsFiber)f=!0;else{try{yv=m.inject(f),Ro=m}catch{}f=!!m.checkDCE}}return f},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(f,m,M,C){if(!Le)throw Error(a(363));f=WM(f,m);var N=ge(f,M,C).disconnect;return{disconnect:function(){N()}}},t.registerMutableSourceForHydration=function(f,m){var M=m._getVersion;M=M(m._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[m,M]:f.mutableSourceEagerHydrationData.push(m,M)},t.runWithPriority=function(f,m){var M=Cn;try{return Cn=f,m()}finally{Cn=M}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(f,m,M,C){var N=m.current,U=Jr(),ie=xc(N);return M=jN(M),m.context===null?m.context=M:m.pendingContext=M,m=hl(U,ie),m.payload={element:f},C=C===void 0?null:C,C!==null&&(m.callback=C),gc(N,m),f=_a(N,ie,U),f!==null&&wv(f,N,ie),ie},t};d8.exports=_ce;var bce=d8.exports;const wce=eP(bce),dk={},p8=n=>void Object.assign(dk,n);function Sce(n,e){function t(u,{args:d=[],attach:h,...p},y){let x=`${u[0].toUpperCase()}${u.slice(1)}`,_;if(u==="primitive"){if(p.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const v=p.object;_=Lf(v,{type:u,root:y,attach:h,primitive:!0})}else{const v=dk[x];if(!v)throw new Error(`R3F: ${x} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");_=Lf(new v(...d),{type:u,root:y,attach:h,memoizedProps:{args:d}})}return _.__r3f.attach===void 0&&(_.isBufferGeometry?_.__r3f.attach="geometry":_.isMaterial&&(_.__r3f.attach="material")),x!=="inject"&&VT(_,p),_}function i(u,d){let h=!1;if(d){var p,y;(p=d.__r3f)!=null&&p.attach?HT(u,d,d.__r3f.attach):d.isObject3D&&u.isObject3D&&(u.add(d),h=!0),h||(y=u.__r3f)==null||y.objects.push(d),d.__r3f||Lf(d,{}),d.__r3f.parent=u,uA(d),Of(d)}}function r(u,d,h){let p=!1;if(d){var y,x;if((y=d.__r3f)!=null&&y.attach)HT(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){d.parent=u,d.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:d});const _=u.children.filter(b=>b!==d),v=_.indexOf(h);u.children=[..._.slice(0,v),d,..._.slice(v)],p=!0}p||(x=u.__r3f)==null||x.objects.push(d),d.__r3f||Lf(d,{}),d.__r3f.parent=u,uA(d),Of(d)}}function s(u,d,h=!1){u&&[...u].forEach(p=>a(d,p,h))}function a(u,d,h){if(d){var p,y,x;if(d.__r3f&&(d.__r3f.parent=null),(p=u.__r3f)!=null&&p.objects&&(u.__r3f.objects=u.__r3f.objects.filter(S=>S!==d)),(y=d.__r3f)!=null&&y.attach)PF(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){var _;u.remove(d),(_=d.__r3f)!=null&&_.root&&kce(b1(d),d)}const b=(x=d.__r3f)==null?void 0:x.primitive,w=!b&&(h===void 0?d.dispose!==null:h);if(!b){var v;s((v=d.__r3f)==null?void 0:v.objects,d,w),s(d.children,d,w)}if(delete d.__r3f,w&&d.dispose&&d.type!=="Scene"){const S=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?lA.unstable_scheduleCallback(lA.unstable_IdlePriority,S):S()}Of(u)}}function o(u,d,h,p){var y;const x=(y=u.__r3f)==null?void 0:y.parent;if(!x)return;const _=t(d,h,u.__r3f.root);if(u.children){for(const v of u.children)v.__r3f&&i(_,v);u.children=u.children.filter(v=>!v.__r3f)}u.__r3f.objects.forEach(v=>i(_,v)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||a(x,u),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),i(x,_),_.raycast&&_.__r3f.eventCount&&b1(_).getState().internal.interaction.push(_),[p,p.alternate].forEach(v=>{v!==null&&(v.stateNode=_,v.ref&&(typeof v.ref=="function"?v.ref(_):v.ref.current=_))})}const l=()=>{};return{reconciler:wce({createInstance:t,removeChild:a,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,d)=>{if(!d)return;const h=u.getState().scene;h.__r3f&&(h.__r3f.root=u,i(h,d))},removeChildFromContainer:(u,d)=>{d&&a(u.getState().scene,d)},insertInContainerBefore:(u,d,h)=>{if(!d||!h)return;const p=u.getState().scene;p.__r3f&&r(p,d,h)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var d;return!!((d=u==null?void 0:u.__r3f)!=null?d:{}).handlers},prepareUpdate(u,d,h,p){var y;if(((y=u==null?void 0:u.__r3f)!=null?y:{}).primitive&&p.object&&p.object!==u)return[!0];{const{args:_=[],children:v,...b}=p,{args:w=[],children:S,...A}=h;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((k,T)=>k!==w[T]))return[!0];const P=b8(u,b,A,!0);return P.changes.length?[!1,P]:null}},commitUpdate(u,[d,h],p,y,x,_){d?o(u,p,x,_):VT(u,h)},commitMount(u,d,h,p){var y;const x=(y=u.__r3f)!=null?y:{};u.raycast&&x.handlers&&x.eventCount&&b1(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>Lf(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var d;const{attach:h,parent:p}=(d=u.__r3f)!=null?d:{};h&&p&&PF(p,u,h),u.isObject3D&&(u.visible=!1),Of(u)},unhideInstance(u,d){var h;const{attach:p,parent:y}=(h=u.__r3f)!=null?h:{};p&&y&&HT(y,u,p),(u.isObject3D&&d.visible==null||d.visible)&&(u.visible=!0),Of(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():tp.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Yn.fun(performance.now)?performance.now:Yn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Yn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Yn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:VT}}var EF,TF;const BT=n=>"colorSpace"in n||"outputColorSpace"in n,m8=()=>{var n;return(n=dk.ColorManagement)!=null?n:null},g8=n=>n&&n.isOrthographicCamera,Mce=n=>n&&n.hasOwnProperty("current"),sv=typeof window<"u"&&((EF=window.document)!=null&&EF.createElement||((TF=window.navigator)==null?void 0:TF.product)==="ReactNative")?F.useLayoutEffect:F.useEffect;function y8(n){const e=F.useRef(n);return sv(()=>void(e.current=n),[n]),e}function Ece({set:n}){return sv(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class v8 extends F.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}v8.getDerivedStateFromError=()=>({error:!0});const x8="__default",CF=new Map,Tce=n=>n&&!!n.memoized&&!!n.changes;function _8(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const rg=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function b1(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Yn={obj:n=>n===Object(n)&&!Yn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Yn.str(n)||Yn.num(n)||Yn.boo(n))return n===e;const s=Yn.obj(n);if(s&&i==="reference")return n===e;const a=Yn.arr(n);if(a&&t==="reference")return n===e;if((a||s)&&n===e)return!0;let o;for(o in n)if(!(o in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(o in r?e:n)if(!Yn.equ(n[o],e[o],{strict:r,objects:"reference"}))return!1}else for(o in r?e:n)if(n[o]!==e[o])return!1;if(Yn.und(o)){if(a&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Cce(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function Ace(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Lf(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function cA(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,a)=>s[a],n),{target:t,key:r}}else return{target:t,key:e}}const AF=/-\d+$/;function HT(n,e,t){if(Yn.str(t)){if(AF.test(t)){const s=t.replace(AF,""),{target:a,key:o}=cA(n,s);Array.isArray(a[o])||(a[o]=[])}const{target:i,key:r}=cA(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function PF(n,e,t){var i,r;if(Yn.str(t)){const{target:s,key:a}=cA(n,t),o=e.__r3f.previousAttach;o===void 0?delete s[a]:s[a]=o}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function b8(n,{children:e,key:t,ref:i,...r},{children:s,key:a,ref:o,...l}={},c=!1){const u=n.__r3f,d=Object.entries(r),h=[];if(c){const y=Object.keys(l);for(let x=0;x<y.length;x++)r.hasOwnProperty(y[x])||d.unshift([y[x],x8+"remove"])}d.forEach(([y,x])=>{var _;if((_=n.__r3f)!=null&&_.primitive&&y==="object"||Yn.equ(x,l[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return h.push([y,x,!0,[]]);let v=[];y.includes("-")&&(v=y.split("-")),h.push([y,x,!1,v]);for(const b in r){const w=r[b];b.startsWith(`${y}-`)&&h.push([b,w,!1,b.split("-")])}});const p={...r};return u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.args&&(p.args=u.memoizedProps.args),u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.attach&&(p.attach=u.memoizedProps.attach),{memoized:p,changes:h}}const Pce=typeof process<"u"&&!1;function VT(n,e){var t;const i=n.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:a,changes:o}=Tce(e)?e:b8(n,e),l=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=a);for(let h=0;h<o.length;h++){let[p,y,x,_]=o[h];if(BT(n)){const S="srgb",A="srgb-linear";p==="encoding"?(p="colorSpace",y=y===3001?S:A):p==="outputEncoding"&&(p="outputColorSpace",y=y===3001?S:A)}let v=n,b=v[p];if(_.length&&(b=_.reduce((w,S)=>w[S],n),!(b&&b.set))){const[w,...S]=_.reverse();v=S.reverse().reduce((A,P)=>A[P],n),p=w}if(y===x8+"remove")if(v.constructor){let w=CF.get(v.constructor);w||(w=new v.constructor,CF.set(v.constructor,w)),y=w[p]}else y=0;if(x&&i)y?i.handlers[p]=y:delete i.handlers[p],i.eventCount=Object.keys(i.handlers).length;else if(b&&b.set&&(b.copy||b instanceof rh)){if(Array.isArray(y))b.fromArray?b.fromArray(y):b.set(...y);else if(b.copy&&y&&y.constructor&&(Pce?b.constructor.name===y.constructor.name:b.constructor===y.constructor))b.copy(y);else if(y!==void 0){var c;const w=(c=b)==null?void 0:c.isColor;!w&&b.setScalar?b.setScalar(y):b instanceof rh&&y instanceof rh?b.mask=y.mask:b.set(y),!m8()&&s&&!s.linear&&w&&b.convertSRGBToLinear()}}else{var u;if(v[p]=y,(u=v[p])!=null&&u.isTexture&&v[p].format===Fi&&v[p].type===gs&&s){const w=v[p];BT(w)&&BT(s.gl)?w.colorSpace=s.gl.outputColorSpace:w.encoding=s.gl.outputEncoding}}Of(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const h=b1(n).getState().internal,p=h.interaction.indexOf(n);p>-1&&h.interaction.splice(p,1),i.eventCount&&h.interaction.push(n)}return!(o.length===1&&o[0][0]==="onUpdate")&&o.length&&(t=n.__r3f)!=null&&t.parent&&uA(n),n}function Of(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function uA(n){n.onUpdate==null||n.onUpdate(n)}function w8(n,e){n.manual||(g8(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function D_(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Rce(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return tp.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return tp.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return tp.ContinuousEventPriority;default:return tp.DefaultEventPriority}}function S8(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function kce(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{S8(t.capturedMap,e,i,r)})}function Nce(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],d=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+d*d))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var d;return(d=c.__r3f)==null?void 0:d.handlers["onPointer"+u]}))}function i(l,c){const u=n.getState(),d=new Set,h=[],p=c?c(u.internal.interaction):u.internal.interaction;for(let v=0;v<p.length;v++){const b=rg(p[v]);b&&(b.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function y(v){const b=rg(v);if(!b||!b.events.enabled||b.raycaster.camera===null)return[];if(b.raycaster.camera===void 0){var w;b.events.compute==null||b.events.compute(l,b,(w=b.previousRoot)==null?void 0:w.getState()),b.raycaster.camera===void 0&&(b.raycaster.camera=null)}return b.raycaster.camera?b.raycaster.intersectObject(v,!0):[]}let x=p.flatMap(y).sort((v,b)=>{const w=rg(v.object),S=rg(b.object);return!w||!S?v.distance-b.distance:S.events.priority-w.events.priority||v.distance-b.distance}).filter(v=>{const b=D_(v);return d.has(b)?!1:(d.add(b),!0)});u.events.filter&&(x=u.events.filter(x,u));for(const v of x){let b=v.object;for(;b;){var _;(_=b.__r3f)!=null&&_.eventCount&&h.push({...v,eventObject:b}),b=b.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let v of u.internal.capturedMap.get(l.pointerId).values())d.has(D_(v.intersection))||h.push(v.intersection);return h}function r(l,c,u,d){const h=n.getState();if(l.length){const p={stopped:!1};for(const y of l){const x=rg(y.object)||h,{raycaster:_,pointer:v,camera:b,internal:w}=x,S=new Z(v.x,v.y,0).unproject(b),A=R=>{var I,D;return(I=(D=w.capturedMap.get(R))==null?void 0:D.has(y.eventObject))!=null?I:!1},P=R=>{const I={intersection:y,target:c.target};w.capturedMap.has(R)?w.capturedMap.get(R).set(y.eventObject,I):w.capturedMap.set(R,new Map([[y.eventObject,I]])),c.target.setPointerCapture(R)},k=R=>{const I=w.capturedMap.get(R);I&&S8(w.capturedMap,y.eventObject,I,R)};let T={};for(let R in c){let I=c[R];typeof I!="function"&&(T[R]=I)}let E={...y,...T,pointer:v,intersections:l,stopped:p.stopped,delta:u,unprojectedPoint:S,ray:_.ray,camera:b,stopPropagation(){const R="pointerId"in c&&w.capturedMap.get(c.pointerId);if((!R||R.has(y.eventObject))&&(E.stopped=p.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(I=>I.eventObject===y.eventObject))){const I=l.slice(0,l.indexOf(y));s([...I,y])}},target:{hasPointerCapture:A,setPointerCapture:P,releasePointerCapture:k},currentTarget:{hasPointerCapture:A,setPointerCapture:P,releasePointerCapture:k},nativeEvent:c};if(d(E),p.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(d=>d.object===u.object&&d.index===u.index&&d.instanceId===u.instanceId)){const h=u.eventObject.__r3f,p=h==null?void 0:h.handlers;if(c.hovered.delete(D_(u)),h!=null&&h.eventCount){const y={...u,intersections:l};p.onPointerOut==null||p.onPointerOut(y),p.onPointerLeave==null||p.onPointerLeave(y)}}}function a(l,c){for(let u=0;u<c.length;u++){const d=c[u].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function o(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:d,internal:h}=n.getState();h.lastEvent.current=u;const p=l==="onPointerMove",y=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=i(u,p?t:void 0),v=y?e(u):0;l==="onPointerDown"&&(h.initialClick=[u.offsetX,u.offsetY],h.initialHits=_.map(w=>w.eventObject)),y&&!_.length&&v<=2&&(a(u,h.interaction),d&&d(u)),p&&s(_);function b(w){const S=w.eventObject,A=S.__r3f,P=A==null?void 0:A.handlers;if(A!=null&&A.eventCount)if(p){if(P.onPointerOver||P.onPointerEnter||P.onPointerOut||P.onPointerLeave){const k=D_(w),T=h.hovered.get(k);T?T.stopped&&w.stopPropagation():(h.hovered.set(k,w),P.onPointerOver==null||P.onPointerOver(w),P.onPointerEnter==null||P.onPointerEnter(w))}P.onPointerMove==null||P.onPointerMove(w)}else{const k=P[l];k?(!y||h.initialHits.includes(S))&&(a(u,h.interaction.filter(T=>!h.initialHits.includes(T))),k(w)):y&&h.initialHits.includes(S)&&a(u,h.interaction.filter(T=>!h.initialHits.includes(T)))}}r(_,u,v,b)}}return{handlePointer:o}}const Ice=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],M8=n=>!!(n!=null&&n.render),hk=F.createContext(null),Dce=(n,e)=>{const t=l8((o,l)=>{const c=new Z,u=new Z,d=new Z;function h(v=l().camera,b=u,w=l().size){const{width:S,height:A,top:P,left:k}=w,T=S/A;b.isVector3?d.copy(b):d.set(...b);const E=v.getWorldPosition(c).distanceTo(d);if(g8(v))return{width:S/v.zoom,height:A/v.zoom,top:P,left:k,factor:1,distance:E,aspect:T};{const R=v.fov*Math.PI/180,I=2*Math.tan(R/2)*E,D=I*(S/A);return{width:D,height:I,top:P,left:k,factor:S/D,distance:E,aspect:T}}}let p;const y=v=>o(b=>({performance:{...b.performance,current:v}})),x=new Ye;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(v=1)=>n(l(),v),advance:(v,b)=>e(v,b,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new ik,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const v=l();p&&clearTimeout(p),v.performance.current!==v.performance.min&&y(v.performance.min),p=setTimeout(()=>y(l().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:v=>o(b=>({...b,events:{...b.events,...v}})),setSize:(v,b,w,S,A)=>{const P=l().camera,k={width:v,height:b,top:S||0,left:A||0,updateStyle:w};o(T=>({size:k,viewport:{...T.viewport,...h(P,u,k)}}))},setDpr:v=>o(b=>{const w=_8(v);return{viewport:{...b.viewport,dpr:w,initialDpr:b.viewport.initialDpr||w}}}),setFrameloop:(v="always")=>{const b=l().clock;b.stop(),b.elapsedTime=0,v!=="never"&&(b.start(),b.elapsedTime=0),o(()=>({frameloop:v}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:F.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(v,b,w)=>{const S=l().internal;return S.priority=S.priority+(b>0?1:0),S.subscribers.push({ref:v,priority:b,store:w}),S.subscribers=S.subscribers.sort((A,P)=>A.priority-P.priority),()=>{const A=l().internal;A!=null&&A.subscribers&&(A.priority=A.priority-(b>0?1:0),A.subscribers=A.subscribers.filter(P=>P.ref!==v))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,a=i.camera;return t.subscribe(()=>{const{camera:o,size:l,viewport:c,gl:u,set:d}=t.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==s){var h;r=l,s=c.dpr,w8(o,l),u.setPixelRatio(c.dpr);const p=(h=l.updateStyle)!=null?h:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,p)}o!==a&&(a=o,d(p=>({viewport:{...p.viewport,...p.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>n(o)),t};function Lce(n,e){const t={callback:n};return e.add(t),()=>void e.delete(t)}let L_,E8=new Set,Oce=new Set,Fce=new Set;const Uce=n=>Lce(n,E8);function $T(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function sg(n,e){switch(n){case"before":return $T(E8,e);case"after":return $T(Oce,e);case"tail":return $T(Fce,e)}}let WT,GT;function qT(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),WT=e.internal.subscribers,L_=0;L_<WT.length;L_++)GT=WT[L_],GT.ref.current(GT.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function jce(n){let e=!1,t=!1,i,r,s;function a(c){r=requestAnimationFrame(a),e=!0,i=0,sg("before",c),t=!0;for(const d of n.values()){var u;s=d.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((u=s.gl.xr)!=null&&u.isPresenting)&&(i+=qT(c,s))}if(t=!1,sg("after",c),i===0)return sg("tail",c),e=!1,cancelAnimationFrame(r)}function o(c,u=1){var d;if(!c)return n.forEach(h=>o(h.store.getState(),u));(d=c.gl.xr)!=null&&d.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):t?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(a)))}function l(c,u=!0,d,h){if(u&&sg("before",c),d)qT(c,d,h);else for(const p of n.values())qT(c,p.store.getState());u&&sg("after",c)}return{loop:a,invalidate:o,advance:l}}function fk(){const n=F.useContext(hk);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function bu(n=t=>t,e){return fk()(n,e)}function BS(n,e=0){const t=fk(),i=t.getState().internal.subscribe,r=y8(n);return sv(()=>i(r,e,t),[e,i,t]),null}const RF=new WeakMap;function T8(n,e){return function(t,...i){let r=RF.get(t);return r||(r=new t,RF.set(t,r)),n&&n(r),Promise.all(i.map(s=>new Promise((a,o)=>r.load(s,l=>{l.scene&&Object.assign(l,Cce(l.scene)),a(l)},e,l=>o(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function ic(n,e,t,i){const r=Array.isArray(e)?e:[e],s=yce(T8(t,i),[n,...r],{equal:Yn.equ});return Array.isArray(e)?s:s[0]}ic.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return vce(T8(t),[n,...i])};ic.clear=function(n,e){const t=Array.isArray(e)?e:[e];return xce([n,...t])};const Gp=new Map,{invalidate:kF,advance:NF}=jce(Gp),{reconciler:fy,applyProps:Dl}=Sce(Gp,Rce),Tf={objects:"shallow",strict:!1},zce=(n,e)=>{const t=typeof n=="function"?n(e):n;return M8(t)?t:new uk({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function Bce(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:a,updateStyle:o=t}=e;return{width:i,height:r,top:s,left:a,updateStyle:o}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:a}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:a,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function Hce(n){const e=Gp.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||Dce(kF,NF),a=t||fy.createContainer(s,tp.ConcurrentRoot,null,!1,null,"",r,null);e||Gp.set(n,{fiber:a,store:s});let o,l=!1,c;return{configure(u={}){let{gl:d,size:h,scene:p,events:y,onCreated:x,shadows:_=!1,linear:v=!1,flat:b=!1,legacy:w=!1,orthographic:S=!1,frameloop:A="always",dpr:P=[1,2],performance:k,raycaster:T,camera:E,onPointerMissed:R}=u,I=s.getState(),D=I.gl;I.gl||I.set({gl:D=zce(d,n)});let B=I.raycaster;B||I.set({raycaster:B=new ok});const{params:G,...Y}=T||{};if(Yn.equ(Y,B,Tf)||Dl(B,{...Y}),Yn.equ(G,B.params,Tf)||Dl(B,{params:{...B.params,...G}}),!I.camera||I.camera===c&&!Yn.equ(c,E,Tf)){c=E;const j=E instanceof Yy,te=j?E:S?new hm(0,0,0,0,.1,1e3):new ir(75,0,.1,1e3);j||(te.position.z=5,E&&(Dl(te,E),("aspect"in E||"left"in E||"right"in E||"bottom"in E||"top"in E)&&(te.manual=!0,te.updateProjectionMatrix())),!I.camera&&!(E!=null&&E.rotation)&&te.lookAt(0,0,0)),I.set({camera:te}),B.camera=te}if(!I.scene){let j;p!=null&&p.isScene?j=p:(j=new Zy,p&&Dl(j,p)),I.set({scene:Lf(j)})}if(!I.xr){var X;const j=(me,K)=>{const re=s.getState();re.frameloop!=="never"&&NF(me,!0,re,K)},te=()=>{const me=s.getState();me.gl.xr.enabled=me.gl.xr.isPresenting,me.gl.xr.setAnimationLoop(me.gl.xr.isPresenting?j:null),me.gl.xr.isPresenting||kF(me)},ae={connect(){const me=s.getState().gl;me.xr.addEventListener("sessionstart",te),me.xr.addEventListener("sessionend",te)},disconnect(){const me=s.getState().gl;me.xr.removeEventListener("sessionstart",te),me.xr.removeEventListener("sessionend",te)}};typeof((X=D.xr)==null?void 0:X.addEventListener)=="function"&&ae.connect(),I.set({xr:ae})}if(D.shadowMap){const j=D.shadowMap.enabled,te=D.shadowMap.type;if(D.shadowMap.enabled=!!_,Yn.boo(_))D.shadowMap.type=Kg;else if(Yn.str(_)){var Q;const ae={basic:vB,percentage:cS,soft:Kg,variance:ho};D.shadowMap.type=(Q=ae[_])!=null?Q:Kg}else Yn.obj(_)&&Object.assign(D.shadowMap,_);(j!==D.shadowMap.enabled||te!==D.shadowMap.type)&&(D.shadowMap.needsUpdate=!0)}const L=m8();L&&("enabled"in L?L.enabled=!w:"legacyMode"in L&&(L.legacyMode=w)),l||Dl(D,{outputEncoding:v?3e3:3001,toneMapping:b?il:bR}),I.legacy!==w&&I.set(()=>({legacy:w})),I.linear!==v&&I.set(()=>({linear:v})),I.flat!==b&&I.set(()=>({flat:b})),d&&!Yn.fun(d)&&!M8(d)&&!Yn.equ(d,D,Tf)&&Dl(D,d),y&&!I.events.handlers&&I.set({events:y(s)});const W=Bce(n,h);return Yn.equ(W,I.size,Tf)||I.setSize(W.width,W.height,W.updateStyle,W.top,W.left),P&&I.viewport.dpr!==_8(P)&&I.setDpr(P),I.frameloop!==A&&I.setFrameloop(A),I.onPointerMissed||I.set({onPointerMissed:R}),k&&!Yn.equ(k,I.performance,Tf)&&I.set(j=>({performance:{...j.performance,...k}})),o=x,l=!0,this},render(u){return l||this.configure(),fy.updateContainer(g.jsx(Vce,{store:s,children:u,onCreated:o,rootElement:n}),a,null,()=>{}),s},unmount(){C8(n)}}}function Vce({store:n,children:e,onCreated:t,rootElement:i}){return sv(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),g.jsx(hk.Provider,{value:n,children:e})}function C8(n,e){const t=Gp.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),fy.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,a,o,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(a=s.renderLists)==null||a.dispose==null||a.dispose(),(o=r.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),Ace(r),Gp.delete(n),e&&e(n)}catch{}},500)})}}function $ce(n,e,t){return g.jsx(Wce,{children:n,container:e,state:t},e.uuid)}function Wce({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,a=fk(),[o]=F.useState(()=>new ok),[l]=F.useState(()=>new Ye),c=F.useCallback((d,h)=>{const p={...d};Object.keys(d).forEach(x=>{(Ice.includes(x)||d[x]!==h[x]&&h[x])&&delete p[x]});let y;if(h&&r){const x=h.camera;y=d.viewport.getCurrentViewport(x,new Z,r),x!==d.camera&&w8(x,r)}return{...p,scene:t,raycaster:o,pointer:l,mouse:l,previousRoot:a,events:{...d.events,...h==null?void 0:h.events,...i},size:{...d.size,...r},viewport:{...d.viewport,...y},...s}},[n]),[u]=F.useState(()=>{const d=a.getState();return l8((p,y)=>({...d,scene:t,raycaster:o,pointer:l,mouse:l,previousRoot:a,events:{...d.events,...i},size:{...d.size,...r},...s,set:p,get:y,setEvents:x=>p(_=>({..._,events:{..._.events,...x}}))}))});return F.useEffect(()=>{const d=a.subscribe(h=>u.setState(p=>c(h,p)));return()=>{d()}},[c]),F.useEffect(()=>{u.setState(d=>c(a.getState(),d))},[c]),F.useEffect(()=>()=>{u.destroy()},[]),g.jsx(g.Fragment,{children:fy.createPortal(g.jsx(hk.Provider,{value:u,children:e}),u,null)})}fy.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:F.version});const XT={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Gce(n){const{handlePointer:e}=Nce(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(XT).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(a=>({events:{...a.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([a,o])=>{const[l,c]=XT[a];t.addEventListener(l,o,{passive:c})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,a])=>{if(i&&i.connected instanceof HTMLElement){const[o]=XT[s];i.connected.removeEventListener(o,a)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function IF(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function qce({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=F.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=F.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,u=F.useRef(!1);F.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[d,h,p]=F.useMemo(()=>{const v=()=>{if(!o.current.element)return;const{left:b,top:w,width:S,height:A,bottom:P,right:k,x:T,y:E}=o.current.element.getBoundingClientRect(),R={left:b,top:w,width:S,height:A,bottom:P,right:k,x:T,y:E};o.current.element instanceof HTMLElement&&i&&(R.height=o.current.element.offsetHeight,R.width=o.current.element.offsetWidth),Object.freeze(R),u.current&&!Zce(o.current.lastBounds,R)&&a(o.current.lastBounds=R)};return[v,c?IF(v,c):v,l?IF(v,l):v]},[a,i,l,c]);function y(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",p,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function x(){o.current.element&&(o.current.resizeObserver=new r(p),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(v=>v.addEventListener("scroll",p,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{p()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const _=v=>{!v||v===o.current.element||(y(),o.current.element=v,o.current.scrollContainers=A8(v),x())};return Yce(p,!!e),Xce(h),F.useEffect(()=>{y(),x()},[e,p,h]),F.useEffect(()=>y,[]),[_,s,d]}function Xce(n){F.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Yce(n,e){F.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function A8(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...A8(n.parentElement)]}const Kce=["x","y","top","bottom","left","right","width","height"],Zce=(n,e)=>Kce.every(t=>n[t]===e[t]);var Jce=Object.defineProperty,Qce=Object.defineProperties,eue=Object.getOwnPropertyDescriptors,DF=Object.getOwnPropertySymbols,tue=Object.prototype.hasOwnProperty,nue=Object.prototype.propertyIsEnumerable,LF=(n,e,t)=>e in n?Jce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,OF=(n,e)=>{for(var t in e||(e={}))tue.call(e,t)&&LF(n,t,e[t]);if(DF)for(var t of DF(e))nue.call(e,t)&&LF(n,t,e[t]);return n},iue=(n,e)=>Qce(n,eue(e)),FF,UF;typeof window<"u"&&((FF=window.document)!=null&&FF.createElement||((UF=window.navigator)==null?void 0:UF.product)==="ReactNative")?F.useLayoutEffect:F.useEffect;function P8(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=P8(i,e,t);if(r)return r;i=e?null:i.sibling}}function R8(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const jF=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=jF;return}return jF.apply(this,arguments)};const pk=R8(F.createContext(null));class k8 extends F.Component{render(){return F.createElement(pk.Provider,{value:this._reactInternals},this.props.children)}}function rue(){const n=F.useContext(pk);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=F.useId();return F.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=P8(i,!1,s=>{let a=s.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(r)return r}},[n,e])}function sue(){const n=rue(),[e]=F.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==pk&&!e.has(r)&&e.set(r,F.useContext(R8(r)))}t=t.return}return e}function aue(){const n=sue();return F.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>F.createElement(e,null,F.createElement(t.Provider,iue(OF({},i),{value:n.get(t)}))),e=>F.createElement(k8,OF({},e))),[n])}const oue=F.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:a=Gce,eventSource:o,eventPrefix:l,shadows:c,linear:u,flat:d,legacy:h,orthographic:p,frameloop:y,dpr:x,performance:_,raycaster:v,camera:b,scene:w,onPointerMissed:S,onCreated:A,...P},k){F.useMemo(()=>p8(a8),[]);const T=aue(),[E,R]=qce({scroll:!0,debounce:{scroll:50,resize:0},...i}),I=F.useRef(null),D=F.useRef(null);F.useImperativeHandle(k,()=>I.current);const B=y8(S),[G,Y]=F.useState(!1),[X,Q]=F.useState(!1);if(G)throw G;if(X)throw X;const L=F.useRef(null);sv(()=>{const j=I.current;R.width>0&&R.height>0&&j&&(L.current||(L.current=Hce(j)),L.current.configure({gl:s,events:a,shadows:c,linear:u,flat:d,legacy:h,orthographic:p,frameloop:y,dpr:x,performance:_,raycaster:v,camera:b,scene:w,size:R,onPointerMissed:(...te)=>B.current==null?void 0:B.current(...te),onCreated:te=>{te.events.connect==null||te.events.connect(o?Mce(o)?o.current:o:D.current),l&&te.setEvents({compute:(ae,me)=>{const K=ae[l+"X"],re=ae[l+"Y"];me.pointer.set(K/me.size.width*2-1,-(re/me.size.height)*2+1),me.raycaster.setFromCamera(me.pointer,me.camera)}}),A==null||A(te)}}),L.current.render(g.jsx(T,{children:g.jsx(v8,{set:Q,children:g.jsx(F.Suspense,{fallback:g.jsx(Ece,{set:Y}),children:e??null})})})))}),F.useEffect(()=>{const j=I.current;if(j)return()=>C8(j)},[]);const W=o?"none":"auto";return g.jsx("div",{ref:D,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:W,...r},...P,children:g.jsx("div",{ref:E,style:{width:"100%",height:"100%"},children:g.jsx("canvas",{ref:I,style:{display:"block"},children:t})})})}),lue=F.forwardRef(function(e,t){return g.jsx(k8,{children:g.jsx(oue,{...e,ref:t})})});function ow(){return ow=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ow.apply(null,arguments)}function cue(n,e,t){return Math.max(e,Math.min(n,t))}const ri={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function zF(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function BF(n,e,t,i=.15){return i===0?cue(n,e,t):n<e?-zF(e-n,t-e,i)+e:n>t?+zF(n-t,t-e,i)+t:n}function uue(n,[e,t],[i,r]){const[[s,a],[o,l]]=n;return[BF(e,s,a,i),BF(t,o,l,r)]}function due(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function hue(n){var e=due(n,"string");return typeof e=="symbol"?e:String(e)}function $i(n,e,t){return e=hue(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function HF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function vi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?HF(Object(t),!0).forEach(function(i){$i(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):HF(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const N8={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function VF(n){return n?n[0].toUpperCase()+n.slice(1):""}const fue=["enter","leave"];function pue(n=!1,e){return n&&!fue.includes(e)}function mue(n,e="",t=!1){const i=N8[n],r=i&&i[e]||e;return"on"+VF(n)+VF(r)+(pue(t,r)?"Capture":"")}const gue=["gotpointercapture","lostpointercapture"];function yue(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const i=gue.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:t}}function vue(n,e=""){const t=N8[n],i=t&&t[e]||e;return n+i}function HS(n){return"touches"in n}function I8(n){return HS(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function xue(n){return Array.from(n.touches).filter(e=>{var t,i;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(i=t.contains)===null||i===void 0?void 0:i.call(t,e.target))})}function _ue(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function D8(n){return HS(n)?_ue(n)[0]:n}function dA(n,e){try{const t=e.clientX-n.clientX,i=e.clientY-n.clientY,r=(e.clientX+n.clientX)/2,s=(e.clientY+n.clientY)/2,a=Math.hypot(t,i);return{angle:-(Math.atan2(t,i)*180)/Math.PI,distance:a,origin:[r,s]}}catch{}return null}function bue(n){return xue(n).map(e=>e.identifier)}function $F(n,e){const[t,i]=Array.from(n.touches).filter(r=>e.includes(r.identifier));return dA(t,i)}function YT(n){const e=D8(n);return HS(n)?e.identifier:e.pointerId}function qp(n){const e=D8(n);return[e.clientX,e.clientY]}const WF=40,GF=800;function L8(n){let{deltaX:e,deltaY:t,deltaMode:i}=n;return i===1?(e*=WF,t*=WF):i===2&&(e*=GF,t*=GF),[e,t]}function wue(n){var e,t;const{scrollX:i,scrollY:r,scrollLeft:s,scrollTop:a}=n.currentTarget;return[(e=i??s)!==null&&e!==void 0?e:0,(t=r??a)!==null&&t!==void 0?t:0]}function Sue(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s})}return e}function lw(n,...e){return typeof n=="function"?n(...e):n}function Mue(){}function Eue(...n){return n.length===0?Mue:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function qF(n,e){return Object.assign({},e,n||{})}const Tue=32;class O8{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:r}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?lw(i.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:r}=this;t.args=this.args;let s=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,Sue(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const P=t._delta.map(Math.abs);ri.addTo(t._distance,P)}this.axisIntent&&this.axisIntent(e);const[a,o]=t._movement,[l,c]=i.threshold,{_step:u,values:d}=t;if(i.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(a)>=l&&d[0]),u[1]===!1&&(u[1]=Math.abs(o)>=c&&d[1])):(u[0]===!1&&(u[0]=Math.abs(a)>=l&&Math.sign(a)*l),u[1]===!1&&(u[1]=Math.abs(o)>=c&&Math.sign(o)*c)),t.intentional=u[0]!==!1||u[1]!==!1,!t.intentional)return;const h=[0,0];if(i.hasCustomTransform){const[P,k]=d;h[0]=u[0]!==!1?P-u[0]:0,h[1]=u[1]!==!1?k-u[1]:0}else h[0]=u[0]!==!1?a-u[0]:0,h[1]=u[1]!==!1?o-u[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(h);const p=t.offset,y=t._active&&!t._blocked||t.active;y&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=lw(i.bounds,t)),this.setup&&this.setup()),t.movement=h,this.computeOffset()));const[x,_]=t.offset,[[v,b],[w,S]]=t._bounds;t.overflow=[x<v?-1:x>b?1:0,_<w?-1:_>S?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const A=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=uue(t._bounds,t.offset,A),t.delta=ri.sub(t.offset,p),this.computeMovement(),y&&(!t.last||s>Tue)){t.delta=ri.sub(t.offset,p);const P=t.delta.map(Math.abs);ri.addTo(t.distance,P),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[P[0]/s,P[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(vi(vi(vi({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Cue([n,e],t){const i=Math.abs(n),r=Math.abs(e);if(i>r&&i>t)return"x";if(r>i&&r>t)return"y"}class av extends O8{constructor(...e){super(...e),$i(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=ri.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=ri.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[I8(e)]:i.axisThreshold;t.axis=Cue(t._movement,r)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const Aue=n=>n,XF=.15,F8={enabled(n=!0){return n},eventOptions(n,e,t){return vi(vi({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[XF,XF];case!1:return[0,0];default:return ri.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return ri.toVector(n)},transform(n,e,t){const i=n||t.shared.transform;return this.hasCustomTransform=!!i,i||Aue},threshold(n){return ri.toVector(n,0)}},Pue=0,zh=vi(vi({},F8),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=Pue){return n},bounds(n={}){if(typeof n=="function")return s=>zh.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:i=-1/0,bottom:r=1/0}=n;return[[e,t],[i,r]]}}),YF={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class Rue extends av{constructor(...e){super(...e),$i(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=zh.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=YT(e),i._pointerActive=!0,this.computeValues(qp(e)),this.computeInitial(),t.preventScrollAxis&&I8(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive)return;const r=YT(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;const s=qp(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=ri.sub(s,t._values),this.computeValues(s)),ri.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;const r=YT(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,a]=t._distance;if(t.tap=s<=i.tapsThreshold&&a<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{const[o,l]=t._delta,[c,u]=t._movement,[d,h]=i.swipe.velocity,[p,y]=i.swipe.distance,x=i.swipe.duration;if(t.elapsedTime<x){const _=Math.abs(o/t.timeDelta),v=Math.abs(l/t.timeDelta);_>d&&Math.abs(c)>p&&(t.swipe[0]=Math.sign(o)),v>h&&Math.abs(u)>y&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,kue(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=YF[e.key];if(t){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,r),i._keyboardActive=!0,ri.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in YF&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function kue(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const ov=typeof window<"u"&&window.document&&window.document.createElement;function U8(){return ov&&"ontouchstart"in window}function Nue(){return U8()||ov&&window.navigator.maxTouchPoints>1}function Iue(){return ov&&"onpointerdown"in window}function Due(){return ov&&"exitPointerLock"in window.document}function Lue(){try{return"constructor"in GestureEvent}catch{return!1}}const Ra={isBrowser:ov,gesture:Lue(),touch:U8(),touchscreen:Nue(),pointer:Iue(),pointerLock:Due()},Oue=250,Fue=180,Uue=.5,jue=50,zue=250,Bue=10,KF={mouse:0,touch:0,pen:8},Hue=vi(vi({},zh),{},{device(n,e,{pointer:{touch:t=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&Ra.pointerLock,Ra.touch&&t?"touch":this.pointerLock?"mouse":Ra.pointer&&!r?"pointer":Ra.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?Oue:void 0,!(!Ra.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:i=1,keys:r=!0}={}}){return this.pointerButtons=i,this.keys=r,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:i=3,axis:r=void 0}){const s=ri.toVector(n,t?i:r?1:0);return this.filterTaps=t,this.tapsThreshold=i,s},swipe({velocity:n=Uue,distance:e=jue,duration:t=zue}={}){return{velocity:this.transform(ri.toVector(n)),distance:this.transform(ri.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return Fue;case!1:return 0;default:return n}},axisThreshold(n){return n?vi(vi({},KF),n):KF},keyboardDisplacement(n=Bue){return n}});function j8(n){const[e,t]=n.overflow,[i,r]=n._delta,[s,a]=n._direction;(e<0&&i>0&&s<0||e>0&&i<0&&s>0)&&(n._movement[0]=n._movementBound[0]),(t<0&&r>0&&a<0||t>0&&r<0&&a>0)&&(n._movement[1]=n._movementBound[1])}const Vue=30,$ue=100;class Wue extends O8{constructor(...e){super(...e),$i(this,"ingKey","pinching"),$i(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:i}=this.state;e==="wheel"?this.state.offset=ri.add(t,i):this.state.offset=[(1+t[0])*i[0],t[1]+i[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,i]=e._movement;if(!e.axis){const r=Math.abs(t)*Vue-Math.abs(i);r<0?e.axis="angle":r>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,i=this.ctrl.touchIds;if(t._active&&t._touchIds.every(s=>i.has(s))||i.size<2)return;this.start(e),t._touchIds=Array.from(i).slice(0,2);const r=$F(e,t._touchIds);r&&this.pinchStart(e,r)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,i=t._pointerEvents,r=this.ctrl.pointerIds;if(t._active&&Array.from(i.keys()).every(a=>r.has(a))||(i.size<2&&i.set(e.pointerId,e),t._pointerEvents.size<2))return;this.start(e);const s=dA(...Array.from(i.values()));s&&this.pinchStart(e,s)}pinchStart(e,t){const i=this.state;i.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=$F(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const i=dA(...Array.from(t.values()));i&&this.pinchMove(e,i)}pinchMove(e,t){const i=this.state,r=i._values[1],s=t.angle-r;let a=0;Math.abs(s)>270&&(a+=Math.sign(s)),this.computeValues([t.distance,t.angle-360*a]),i.origin=t.origin,i.turns=a,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(t=>!this.ctrl.touchIds.has(t))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const i=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=ri.sub(t._movement,i),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&(Array.isArray(t)?!t.find(i=>e[i]):!e[t])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const i=this.state;i._delta=[-L8(e)[1]/$ue*i.offset[0],0],ri.addTo(i._movement,i._delta),j8(i),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const Gue=vi(vi({},F8),{},{device(n,e,{shared:t,pointer:{touch:i=!1}={}}){if(t.target&&!Ra.touch&&Ra.gesture)return"gesture";if(Ra.touch&&i)return"touch";if(Ra.touchscreen){if(Ra.pointer)return"pointer";if(Ra.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:i={}}){const r=a=>{const o=qF(lw(t,a),{min:-1/0,max:1/0});return[o.min,o.max]},s=a=>{const o=qF(lw(i,a),{min:-1/0,max:1/0});return[o.min,o.max]};return typeof t!="function"&&typeof i!="function"?[r(),s()]:a=>[r(a),s(a)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",ri.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});class que extends av{constructor(...e){super(...e),$i(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(qp(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const t=qp(e),i=this.state;i._delta=ri.sub(t,i._values),ri.addTo(i._movement,i._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const Xue=vi(vi({},zh),{},{mouseOnly:(n=!0)=>n});class Yue extends av{constructor(...e){super(...e),$i(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const t=this.state,i=wue(e);t._delta=ri.sub(i,t._values),ri.addTo(t._movement,t._delta),this.computeValues(i),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const Kue=zh;class Zue extends av{constructor(...e){super(...e),$i(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=L8(e),ri.addTo(t._movement,t._delta),j8(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const Jue=zh;class Que extends av{constructor(...e){super(...e),$i(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(qp(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const t=this.state;if(!t._active)return;t._active=!1;const i=qp(e);t._movement=t._delta=ri.sub(i,t._values),this.computeValues(i),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const ede=vi(vi({},zh),{},{mouseOnly:(n=!0)=>n}),mk=new Map,hA=new Map;function tde(n){mk.set(n.key,n.engine),hA.set(n.key,n.resolver)}const nde={key:"drag",engine:Rue,resolver:Hue},ide={key:"hover",engine:Que,resolver:ede},rde={key:"move",engine:que,resolver:Xue},sde={key:"pinch",engine:Wue,resolver:Gue},ade={key:"scroll",engine:Yue,resolver:Kue},ode={key:"wheel",engine:Zue,resolver:Jue};function lde(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function cde(n,e){if(n==null)return{};var t=lde(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}const ude={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=Ra.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},dde=["target","eventOptions","window","enabled","transform"];function w1(n={},e){const t={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":t[i]=r.call(t,n[i],i,n);break;case"object":t[i]=w1(n[i],r);break;case"boolean":r&&(t[i]=n[i]);break}return t}function hde(n,e,t={}){const i=n,{target:r,eventOptions:s,window:a,enabled:o,transform:l}=i,c=cde(i,dde);if(t.shared=w1({target:r,eventOptions:s,window:a,enabled:o,transform:l},ude),e){const u=hA.get(e);t[e]=w1(vi({shared:t.shared},c),u)}else for(const u in c){const d=hA.get(u);d&&(t[u]=w1(vi({shared:t.shared},c[u]),d))}return t}class z8{constructor(e,t){$i(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,r,s){const a=this._listeners,o=vue(t,i),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=vi(vi({},l),s);e.addEventListener(o,r,c);const u=()=>{e.removeEventListener(o,r,c),a.delete(u)};return a.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class fde{constructor(){$i(this,"_timeouts",new Map)}add(e,t,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}let pde=class{constructor(e){$i(this,"gestures",new Set),$i(this,"_targetEventStore",new z8(this)),$i(this,"gestureEventStores",{}),$i(this,"gestureTimeoutStores",{}),$i(this,"handlers",{}),$i(this,"config",{}),$i(this,"pointerIds",new Set),$i(this,"touchIds",new Set),$i(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),mde(this,e)}setEventIds(e){if(HS(e))return this.touchIds=new Set(bue(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=hde(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i={};let r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(const a of this.gestures){const o=this.config[a],l=ZF(i,o.eventOptions,!!r);if(o.enabled){const c=mk.get(a);new c(this,e,a).bind(l)}}const s=ZF(i,t.eventOptions,!!r);for(const a in this.nativeHandlers)s(a,"",o=>this.nativeHandlers[a](vi(vi({},this.state.shared),{},{event:o,args:e})),void 0,!0)}for(const s in i)i[s]=Eue(...i[s]);if(!r)return i;for(const s in i){const{device:a,capture:o,passive:l}=yue(s);this._targetEventStore.add(r,a,"",i[s],{capture:o,passive:l})}}}};function Cf(n,e){n.gestures.add(e),n.gestureEventStores[e]=new z8(n,e),n.gestureTimeoutStores[e]=new fde}function mde(n,e){e.drag&&Cf(n,"drag"),e.wheel&&Cf(n,"wheel"),e.scroll&&Cf(n,"scroll"),e.move&&Cf(n,"move"),e.pinch&&Cf(n,"pinch"),e.hover&&Cf(n,"hover")}const ZF=(n,e,t)=>(i,r,s,a={},o=!1)=>{var l,c;const u=(l=a.capture)!==null&&l!==void 0?l:e.capture,d=(c=a.passive)!==null&&c!==void 0?c:e.passive;let h=o?i:mue(i,r,u);t&&d&&(h+="Passive"),n[h]=n[h]||[],n[h].push(s)},gde=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function yde(n){const e={},t={},i=new Set;for(let r in n)gde.test(r)?(i.add(RegExp.lastMatch),t[r]=n[r]):e[r]=n[r];return[t,e,i]}function Af(n,e,t,i,r,s){if(!n.has(t)||!mk.has(i))return;const a=t+"Start",o=t+"End",l=c=>{let u;return c.first&&a in e&&e[a](c),t in e&&(u=e[t](c)),c.last&&o in e&&e[o](c),u};r[i]=l,s[i]=s[i]||{}}function vde(n,e){const[t,i,r]=yde(n),s={};return Af(r,t,"onDrag","drag",s,e),Af(r,t,"onWheel","wheel",s,e),Af(r,t,"onScroll","scroll",s,e),Af(r,t,"onPinch","pinch",s,e),Af(r,t,"onMove","move",s,e),Af(r,t,"onHover","hover",s,e),{handlers:s,config:e,nativeHandlers:i}}function xde(n,e={},t,i){const r=sn.useMemo(()=>new pde(n),[]);if(r.applyHandlers(n,i),r.applyConfig(e,t),sn.useEffect(r.effect.bind(r)),sn.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function _de(n){return n.forEach(tde),function(t,i){const{handlers:r,nativeHandlers:s,config:a}=vde(t,i||{});return xde(r,a,void 0,s)}}function bde(n,e){return _de([nde,sde,ade,ode,rde,ide])(n,e||{})}var gk=cv(),Kt=n=>lv(n,gk),yk=cv();Kt.write=n=>lv(n,yk);var VS=cv();Kt.onStart=n=>lv(n,VS);var vk=cv();Kt.onFrame=n=>lv(n,vk);var xk=cv();Kt.onFinish=n=>lv(n,xk);var gp=[];Kt.setTimeout=(n,e)=>{const t=Kt.now()+e,i=()=>{const s=gp.findIndex(a=>a.cancel==i);~s&&gp.splice(s,1),iu-=~s?1:0},r={time:t,handler:n,cancel:i};return gp.splice(B8(t),0,r),iu+=1,H8(),r};var B8=n=>~(~gp.findIndex(e=>e.time>n)||~gp.length);Kt.cancel=n=>{VS.delete(n),vk.delete(n),xk.delete(n),gk.delete(n),yk.delete(n)};Kt.sync=n=>{fA=!0,Kt.batchedUpdates(n),fA=!1};Kt.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function i(...r){e=r,Kt.onStart(t)}return i.handler=n,i.cancel=()=>{VS.delete(t),e=null},i};var _k=typeof window<"u"?window.requestAnimationFrame:()=>{};Kt.use=n=>_k=n;Kt.now=typeof performance<"u"?()=>performance.now():Date.now;Kt.batchedUpdates=n=>n();Kt.catch=console.error;Kt.frameLoop="always";Kt.advance=()=>{Kt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):$8()};var nu=-1,iu=0,fA=!1;function lv(n,e){fA?(e.delete(n),n(0)):(e.add(n),H8())}function H8(){nu<0&&(nu=0,Kt.frameLoop!=="demand"&&_k(V8))}function wde(){nu=-1}function V8(){~nu&&(_k(V8),Kt.batchedUpdates($8))}function $8(){const n=nu;nu=Kt.now();const e=B8(nu);if(e&&(W8(gp.splice(0,e),t=>t.handler()),iu-=e),!iu){wde();return}VS.flush(),gk.flush(n?Math.min(64,nu-n):16.667),vk.flush(),yk.flush(),xk.flush()}function cv(){let n=new Set,e=n;return{add(t){iu+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return iu-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,iu-=e.size,W8(e,i=>i(t)&&n.add(i)),iu+=n.size,e=n)}}}function W8(n,e){n.forEach(t=>{try{e(t)}catch(i){Kt.catch(i)}})}var Sde=Object.defineProperty,Mde=(n,e)=>{for(var t in e)Sde(n,t,{get:e[t],enumerable:!0})},Ao={};Mde(Ao,{assign:()=>Tde,colors:()=>wu,createStringInterpolator:()=>wk,skipAnimation:()=>q8,to:()=>G8,willAdvance:()=>Sk});function pA(){}var Ede=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),ut={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function Rl(n,e){if(ut.arr(n)){if(!ut.arr(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return n===e}var Nn=(n,e)=>n.forEach(e);function rc(n,e,t){if(ut.arr(n)){for(let i=0;i<n.length;i++)e.call(t,n[i],`${i}`);return}for(const i in n)n.hasOwnProperty(i)&&e.call(t,n[i],i)}var Ba=n=>ut.und(n)?[]:ut.arr(n)?n:[n];function o0(n,e){if(n.size){const t=Array.from(n);n.clear(),Nn(t,e)}}var Tg=(n,...e)=>o0(n,t=>t(...e)),bk=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),wk,G8,wu=null,q8=!1,Sk=pA,Tde=n=>{n.to&&(G8=n.to),n.now&&(Kt.now=n.now),n.colors!==void 0&&(wu=n.colors),n.skipAnimation!=null&&(q8=n.skipAnimation),n.createStringInterpolator&&(wk=n.createStringInterpolator),n.requestAnimationFrame&&Kt.use(n.requestAnimationFrame),n.batchedUpdates&&(Kt.batchedUpdates=n.batchedUpdates),n.willAdvance&&(Sk=n.willAdvance),n.frameLoop&&(Kt.frameLoop=n.frameLoop)},l0=new Set,Ia=[],KT=[],cw=0,$S={get idle(){return!l0.size&&!Ia.length},start(n){cw>n.priority?(l0.add(n),Kt.onStart(Cde)):(X8(n),Kt(mA))},advance:mA,sort(n){if(cw)Kt.onFrame(()=>$S.sort(n));else{const e=Ia.indexOf(n);~e&&(Ia.splice(e,1),Y8(n))}},clear(){Ia=[],l0.clear()}};function Cde(){l0.forEach(X8),l0.clear(),Kt(mA)}function X8(n){Ia.includes(n)||Y8(n)}function Y8(n){Ia.splice(Ade(Ia,e=>e.priority>n.priority),0,n)}function mA(n){const e=KT;for(let t=0;t<Ia.length;t++){const i=Ia[t];cw=i.priority,i.idle||(Sk(i),i.advance(n),i.idle||e.push(i))}return cw=0,KT=Ia,KT.length=0,Ia=e,Ia.length>0}function Ade(n,e){const t=n.findIndex(e);return t<0?n.length:t}var Pde=(n,e,t)=>Math.min(Math.max(t,n),e),Rde={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},_o="[-+]?\\d*\\.?\\d+",uw=_o+"%";function WS(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}var kde=new RegExp("rgb"+WS(_o,_o,_o)),Nde=new RegExp("rgba"+WS(_o,_o,_o,_o)),Ide=new RegExp("hsl"+WS(_o,uw,uw)),Dde=new RegExp("hsla"+WS(_o,uw,uw,_o)),Lde=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Ode=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Fde=/^#([0-9a-fA-F]{6})$/,Ude=/^#([0-9a-fA-F]{8})$/;function jde(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=Fde.exec(n))?parseInt(e[1]+"ff",16)>>>0:wu&&wu[n]!==void 0?wu[n]:(e=kde.exec(n))?(Pf(e[1])<<24|Pf(e[2])<<16|Pf(e[3])<<8|255)>>>0:(e=Nde.exec(n))?(Pf(e[1])<<24|Pf(e[2])<<16|Pf(e[3])<<8|e4(e[4]))>>>0:(e=Lde.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Ude.exec(n))?parseInt(e[1],16)>>>0:(e=Ode.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Ide.exec(n))?(JF(QF(e[1]),O_(e[2]),O_(e[3]))|255)>>>0:(e=Dde.exec(n))?(JF(QF(e[1]),O_(e[2]),O_(e[3]))|e4(e[4]))>>>0:null}function ZT(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function JF(n,e,t){const i=t<.5?t*(1+e):t+e-t*e,r=2*t-i,s=ZT(r,i,n+1/3),a=ZT(r,i,n),o=ZT(r,i,n-1/3);return Math.round(s*255)<<24|Math.round(a*255)<<16|Math.round(o*255)<<8}function Pf(n){const e=parseInt(n,10);return e<0?0:e>255?255:e}function QF(n){return(parseFloat(n)%360+360)%360/360}function e4(n){const e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function O_(n){const e=parseFloat(n);return e<0?0:e>100?1:e/100}function t4(n){let e=jde(n);if(e===null)return n;e=e||0;const t=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${t}, ${i}, ${r}, ${s})`}var py=(n,e,t)=>{if(ut.fun(n))return n;if(ut.arr(n))return py({range:n,output:e,extrapolate:t});if(ut.str(n.output[0]))return wk(n);const i=n,r=i.output,s=i.range||[0,1],a=i.extrapolateLeft||i.extrapolate||"extend",o=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const u=Bde(c,s);return zde(c,s[u],s[u+1],r[u],r[u+1],l,a,o,i.map)}};function zde(n,e,t,i,r,s,a,o,l){let c=l?l(n):n;if(c<e){if(a==="identity")return c;a==="clamp"&&(c=e)}if(c>t){if(o==="identity")return c;o==="clamp"&&(c=t)}return i===r?i:e===t?n<=e?i:r:(e===-1/0?c=-c:t===1/0?c=c-e:c=(c-e)/(t-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function Bde(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}var Hde=(n,e="end")=>t=>{t=e==="end"?Math.min(t,.999):Math.max(t,.001);const i=t*n,r=e==="end"?Math.floor(i):Math.ceil(i);return Pde(0,1,r/n)},dw=1.70158,F_=dw*1.525,n4=dw+1,i4=2*Math.PI/3,r4=2*Math.PI/4.5,U_=n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,Vde={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>1-(1-n)*(1-n),easeInOutQuad:n=>n<.5?2*n*n:1-Math.pow(-2*n+2,2)/2,easeInCubic:n=>n*n*n,easeOutCubic:n=>1-Math.pow(1-n,3),easeInOutCubic:n=>n<.5?4*n*n*n:1-Math.pow(-2*n+2,3)/2,easeInQuart:n=>n*n*n*n,easeOutQuart:n=>1-Math.pow(1-n,4),easeInOutQuart:n=>n<.5?8*n*n*n*n:1-Math.pow(-2*n+2,4)/2,easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>1-Math.pow(1-n,5),easeInOutQuint:n=>n<.5?16*n*n*n*n*n:1-Math.pow(-2*n+2,5)/2,easeInSine:n=>1-Math.cos(n*Math.PI/2),easeOutSine:n=>Math.sin(n*Math.PI/2),easeInOutSine:n=>-(Math.cos(Math.PI*n)-1)/2,easeInExpo:n=>n===0?0:Math.pow(2,10*n-10),easeOutExpo:n=>n===1?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>n===0?0:n===1?1:n<.5?Math.pow(2,20*n-10)/2:(2-Math.pow(2,-20*n+10))/2,easeInCirc:n=>1-Math.sqrt(1-Math.pow(n,2)),easeOutCirc:n=>Math.sqrt(1-Math.pow(n-1,2)),easeInOutCirc:n=>n<.5?(1-Math.sqrt(1-Math.pow(2*n,2)))/2:(Math.sqrt(1-Math.pow(-2*n+2,2))+1)/2,easeInBack:n=>n4*n*n*n-dw*n*n,easeOutBack:n=>1+n4*Math.pow(n-1,3)+dw*Math.pow(n-1,2),easeInOutBack:n=>n<.5?Math.pow(2*n,2)*((F_+1)*2*n-F_)/2:(Math.pow(2*n-2,2)*((F_+1)*(n*2-2)+F_)+2)/2,easeInElastic:n=>n===0?0:n===1?1:-Math.pow(2,10*n-10)*Math.sin((n*10-10.75)*i4),easeOutElastic:n=>n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n*10-.75)*i4)+1,easeInOutElastic:n=>n===0?0:n===1?1:n<.5?-(Math.pow(2,20*n-10)*Math.sin((20*n-11.125)*r4))/2:Math.pow(2,-20*n+10)*Math.sin((20*n-11.125)*r4)/2+1,easeInBounce:n=>1-U_(1-n),easeOutBounce:U_,easeInOutBounce:n=>n<.5?(1-U_(1-2*n))/2:(1+U_(2*n-1))/2,steps:Hde},my=Symbol.for("FluidValue.get"),Xp=Symbol.for("FluidValue.observers"),Go=n=>!!(n&&n[my]),Ca=n=>n&&n[my]?n[my]():n,s4=n=>n[Xp]||null;function $de(n,e){n.eventObserved?n.eventObserved(e):n(e)}function hw(n,e){const t=n[Xp];t&&t.forEach(i=>{$de(i,e)})}var Wde=class{constructor(n){if(!n&&!(n=this.get))throw Error("Unknown getter");Gde(this,n)}},Gde=(n,e)=>K8(n,my,e);function uv(n,e){if(n[my]){let t=n[Xp];t||K8(n,Xp,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function fw(n,e){const t=n[Xp];if(t&&t.has(e)){const i=t.size-1;i?t.delete(e):n[Xp]=null,n.observerRemoved&&n.observerRemoved(i,e)}}var K8=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),S1=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,qde=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,a4=new RegExp(`(${S1.source})(%|[a-z]+)`,"i"),Xde=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,GS=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Z8=n=>{const[e,t]=Yde(n);if(!e||bk())return n;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(t&&t.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);return r||n}else{if(t&&GS.test(t))return Z8(t);if(t)return t}return n},Yde=n=>{const e=GS.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]},JT,Kde=(n,e,t,i,r)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(i)}, ${r})`,J8=n=>{JT||(JT=wu?new RegExp(`(${Object.keys(wu).join("|")})(?!\\w)`,"g"):/^\b$/);const e=n.output.map(s=>Ca(s).replace(GS,Z8).replace(qde,t4).replace(JT,t4)),t=e.map(s=>s.match(S1).map(Number)),r=t[0].map((s,a)=>t.map(o=>{if(!(a in o))throw Error('The arity of each "output" value must be equal');return o[a]})).map(s=>py({...n,output:s}));return s=>{var l;const a=!a4.test(e[0])&&((l=e.find(c=>a4.test(c)))==null?void 0:l.replace(S1,""));let o=0;return e[0].replace(S1,()=>`${r[o++](s)}${a||""}`).replace(Xde,Kde)}},Mk="react-spring: ",Q8=n=>{const e=n;let t=!1;if(typeof e!="function")throw new TypeError(`${Mk}once requires a function parameter`);return(...i)=>{t||(e(...i),t=!0)}},Zde=Q8(console.warn);function Jde(){Zde(`${Mk}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Qde=Q8(console.warn);function ehe(){Qde(`${Mk}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function qS(n){return ut.str(n)&&(n[0]=="#"||/\d/.test(n)||!bk()&&GS.test(n)||n in(wu||{}))}var Ek=bk()?F.useEffect:F.useLayoutEffect,the=()=>{const n=F.useRef(!1);return Ek(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function eH(){const n=F.useState()[1],e=the();return()=>{e.current&&n(Math.random())}}function nhe(n,e){const[t]=F.useState(()=>({inputs:e,result:n()})),i=F.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&ihe(e,s.inputs)||(s={inputs:e,result:n()}):s=t,F.useEffect(()=>{i.current=s,r==t&&(t.inputs=t.result=void 0)},[s]),s.result}function ihe(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}var tH=n=>F.useEffect(n,rhe),rhe=[];function o4(n){const e=F.useRef();return F.useEffect(()=>{e.current=n}),e.current}var gy=Symbol.for("Animated:node"),she=n=>!!n&&n[gy]===n,Vo=n=>n&&n[gy],Tk=(n,e)=>Ede(n,gy,e),XS=n=>n&&n[gy]&&n[gy].getPayload(),nH=class{constructor(){Tk(this,this)}getPayload(){return this.payload||[]}},dv=class extends nH{constructor(n){super(),this._value=n,this.done=!0,this.durationProgress=0,ut.num(this._value)&&(this.lastPosition=this._value)}static create(n){return new dv(n)}getPayload(){return[this]}getValue(){return this._value}setValue(n,e){return ut.num(n)&&(this.lastPosition=n,e&&(n=Math.round(n/e)*e,this.done&&(this.lastPosition=n))),this._value===n?!1:(this._value=n,!0)}reset(){const{done:n}=this;this.done=!1,ut.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,n&&(this.lastVelocity=null),this.v0=null)}},yy=class extends dv{constructor(n){super(0),this._string=null,this._toString=py({output:[n,n]})}static create(n){return new yy(n)}getValue(){const n=this._string;return n??(this._string=this._toString(this._value))}setValue(n){if(ut.str(n)){if(n==this._string)return!1;this._string=n,this._value=1}else if(super.setValue(n))this._string=null;else return!1;return!0}reset(n){n&&(this._toString=py({output:[this.getValue(),n]})),this._value=0,super.reset()}},pw={dependencies:null},Ck=class extends nH{constructor(n){super(),this.source=n,this.setValue(n)}getValue(n){const e={};return rc(this.source,(t,i)=>{she(t)?e[i]=t.getValue(n):Go(t)?e[i]=Ca(t):n||(e[i]=t)}),e}setValue(n){this.source=n,this.payload=this._makePayload(n)}reset(){this.payload&&Nn(this.payload,n=>n.reset())}_makePayload(n){if(n){const e=new Set;return rc(n,this._addToPayload,e),Array.from(e)}}_addToPayload(n){pw.dependencies&&Go(n)&&pw.dependencies.add(n);const e=XS(n);e&&Nn(e,t=>this.add(t))}},iH=class extends Ck{constructor(n){super(n)}static create(n){return new iH(n)}getValue(){return this.source.map(n=>n.getValue())}setValue(n){const e=this.getPayload();return n.length==e.length?e.map((t,i)=>t.setValue(n[i])).some(Boolean):(super.setValue(n.map(ahe)),!0)}};function ahe(n){return(qS(n)?yy:dv).create(n)}function gA(n){const e=Vo(n);return e?e.constructor:ut.arr(n)?iH:qS(n)?yy:dv}var l4=(n,e)=>{const t=!ut.fun(n)||n.prototype&&n.prototype.isReactComponent;return F.forwardRef((i,r)=>{const s=F.useRef(null),a=t&&F.useCallback(y=>{s.current=che(r,y)},[r]),[o,l]=lhe(i,e),c=eH(),u=()=>{const y=s.current;if(t&&!y)return;(y?e.applyAnimatedValues(y,o.getValue(!0)):!1)===!1&&c()},d=new ohe(u,l),h=F.useRef();Ek(()=>(h.current=d,Nn(l,y=>uv(y,d)),()=>{h.current&&(Nn(h.current.deps,y=>fw(y,h.current)),Kt.cancel(h.current.update))})),F.useEffect(u,[]),tH(()=>()=>{const y=h.current;Nn(y.deps,x=>fw(x,y))});const p=e.getComponentProps(o.getValue());return F.createElement(n,{...p,ref:a})})},ohe=class{constructor(n,e){this.update=n,this.deps=e}eventObserved(n){n.type=="change"&&Kt.write(this.update)}};function lhe(n,e){const t=new Set;return pw.dependencies=t,n.style&&(n={...n,style:e.createAnimatedStyle(n.style)}),n=new Ck(n),pw.dependencies=null,[n,t]}function che(n,e){return n&&(ut.fun(n)?n(e):n.current=e),e}var c4=Symbol.for("AnimatedComponent"),uhe=(n,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=r=>new Ck(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:i},s=a=>{const o=u4(a)||"Anonymous";return ut.str(a)?a=s[a]||(s[a]=l4(a,r)):a=a[c4]||(a[c4]=l4(a,r)),a.displayName=`Animated(${o})`,a};return rc(n,(a,o)=>{ut.arr(n)&&(o=u4(a)),s[o]=s(a)}),{animated:s}},u4=n=>ut.str(n)?n:n&&ut.str(n.displayName)?n.displayName:ut.fun(n)&&n.name||null;function Od(n,...e){return ut.fun(n)?n(...e):n}var c0=(n,e)=>n===!0||!!(e&&n&&(ut.fun(n)?n(e):Ba(n).includes(e))),rH=(n,e)=>ut.obj(n)?e&&n[e]:n,sH=(n,e)=>n.default===!0?n[e]:n.default?n.default[e]:void 0,dhe=n=>n,Ak=(n,e=dhe)=>{let t=hhe;n.default&&n.default!==!0&&(n=n.default,t=Object.keys(n));const i={};for(const r of t){const s=e(n[r],r);ut.und(s)||(i[r]=s)}return i},hhe=["config","onProps","onStart","onChange","onPause","onResume","onRest"],fhe={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function phe(n){const e={};let t=0;if(rc(n,(i,r)=>{fhe[r]||(e[r]=i,t++)}),t)return e}function aH(n){const e=phe(n);if(e){const t={to:e};return rc(n,(i,r)=>r in e||(t[r]=i)),t}return{...n}}function vy(n){return n=Ca(n),ut.arr(n)?n.map(vy):qS(n)?Ao.createStringInterpolator({range:[0,1],output:[n,n]})(1):n}function mhe(n){for(const e in n)return!0;return!1}function yA(n){return ut.fun(n)||ut.arr(n)&&ut.obj(n[0])}function ghe(n,e){var t;(t=n.ref)==null||t.delete(n),e==null||e.delete(n)}function yhe(n,e){var t;e&&n.ref!==e&&((t=n.ref)==null||t.delete(n),e.add(n),n.ref=e)}var vhe={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},vA={...vhe.default,mass:1,damping:1,easing:Vde.linear,clamp:!1},xhe=class{constructor(){this.velocity=0,Object.assign(this,vA)}};function _he(n,e,t){t&&(t={...t},d4(t,e),e={...t,...e}),d4(n,e),Object.assign(n,e);for(const a in vA)n[a]==null&&(n[a]=vA[a]);let{frequency:i,damping:r}=n;const{mass:s}=n;return ut.und(i)||(i<.01&&(i=.01),r<0&&(r=0),n.tension=Math.pow(2*Math.PI/i,2)*s,n.friction=4*Math.PI*r*s/i),n}function d4(n,e){if(!ut.und(e.decay))n.duration=void 0;else{const t=!ut.und(e.tension)||!ut.und(e.friction);(t||!ut.und(e.frequency)||!ut.und(e.damping)||!ut.und(e.mass))&&(n.duration=void 0,n.decay=void 0),t&&(n.frequency=void 0)}}var h4=[],bhe=class{constructor(){this.changed=!1,this.values=h4,this.toValues=null,this.fromValues=h4,this.config=new xhe,this.immediate=!1}};function oH(n,{key:e,props:t,defaultProps:i,state:r,actions:s}){return new Promise((a,o)=>{let l,c,u=c0(t.cancel??(i==null?void 0:i.cancel),e);if(u)p();else{ut.und(t.pause)||(r.paused=c0(t.pause,e));let y=i==null?void 0:i.pause;y!==!0&&(y=r.paused||c0(y,e)),l=Od(t.delay||0,e),y?(r.resumeQueue.add(h),s.pause()):(s.resume(),h())}function d(){r.resumeQueue.add(h),r.timeouts.delete(c),c.cancel(),l=c.time-Kt.now()}function h(){l>0&&!Ao.skipAnimation?(r.delayed=!0,c=Kt.setTimeout(p,l),r.pauseQueue.add(d),r.timeouts.add(c)):p()}function p(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(c),n<=(r.cancelId||0)&&(u=!0);try{s.start({...t,callId:n,cancel:u},a)}catch(y){o(y)}}})}var Pk=(n,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?yp(n.get()):e.every(t=>t.noop)?lH(n.get()):vo(n.get(),e.every(t=>t.finished)),lH=n=>({value:n,noop:!0,finished:!0,cancelled:!1}),vo=(n,e,t=!1)=>({value:n,finished:e,cancelled:t}),yp=n=>({value:n,cancelled:!0,finished:!1});function cH(n,e,t,i){const{callId:r,parentId:s,onRest:a}=e,{asyncTo:o,promise:l}=t;return!s&&n===o&&!e.reset?l:t.promise=(async()=>{t.asyncId=r,t.asyncTo=n;const c=Ak(e,(_,v)=>v==="onRest"?void 0:_);let u,d;const h=new Promise((_,v)=>(u=_,d=v)),p=_=>{const v=r<=(t.cancelId||0)&&yp(i)||r!==t.asyncId&&vo(i,!1);if(v)throw _.result=v,d(_),_},y=(_,v)=>{const b=new f4,w=new p4;return(async()=>{if(Ao.skipAnimation)throw xy(t),w.result=vo(i,!1),d(w),w;p(b);const S=ut.obj(_)?{..._}:{...v,to:_};S.parentId=r,rc(c,(P,k)=>{ut.und(S[k])&&(S[k]=P)});const A=await i.start(S);return p(b),t.paused&&await new Promise(P=>{t.resumeQueue.add(P)}),A})()};let x;if(Ao.skipAnimation)return xy(t),vo(i,!1);try{let _;ut.arr(n)?_=(async v=>{for(const b of v)await y(b)})(n):_=Promise.resolve(n(y,i.stop.bind(i))),await Promise.all([_.then(u),h]),x=vo(i.get(),!0,!1)}catch(_){if(_ instanceof f4)x=_.result;else if(_ instanceof p4)x=_.result;else throw _}finally{r==t.asyncId&&(t.asyncId=s,t.asyncTo=s?o:void 0,t.promise=s?l:void 0)}return ut.fun(a)&&Kt.batchedUpdates(()=>{a(x,i,i.item)}),x})()}function xy(n,e){o0(n.timeouts,t=>t.cancel()),n.pauseQueue.clear(),n.resumeQueue.clear(),n.asyncId=n.asyncTo=n.promise=void 0,e&&(n.cancelId=e)}var f4=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},p4=class extends Error{constructor(){super("SkipAnimationSignal")}},xA=n=>n instanceof Rk,whe=1,Rk=class extends Wde{constructor(){super(...arguments),this.id=whe++,this._priority=0}get priority(){return this._priority}set priority(n){this._priority!=n&&(this._priority=n,this._onPriorityChange(n))}get(){const n=Vo(this);return n&&n.getValue()}to(...n){return Ao.to(this,n)}interpolate(...n){return Jde(),Ao.to(this,n)}toJSON(){return this.get()}observerAdded(n){n==1&&this._attach()}observerRemoved(n){n==0&&this._detach()}_attach(){}_detach(){}_onChange(n,e=!1){hw(this,{type:"change",parent:this,value:n,idle:e})}_onPriorityChange(n){this.idle||$S.sort(this),hw(this,{type:"priority",parent:this,priority:n})}},Ch=Symbol.for("SpringPhase"),uH=1,_A=2,bA=4,QT=n=>(n[Ch]&uH)>0,kc=n=>(n[Ch]&_A)>0,ag=n=>(n[Ch]&bA)>0,m4=(n,e)=>e?n[Ch]|=_A|uH:n[Ch]&=~_A,g4=(n,e)=>e?n[Ch]|=bA:n[Ch]&=~bA,She=class extends Rk{constructor(n,e){if(super(),this.animation=new bhe,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!ut.und(n)||!ut.und(e)){const t=ut.obj(n)?{...n}:{...e,from:n};ut.und(t.default)&&(t.default=!0),this.start(t)}}get idle(){return!(kc(this)||this._state.asyncTo)||ag(this)}get goal(){return Ca(this.animation.to)}get velocity(){const n=Vo(this);return n instanceof dv?n.lastVelocity||0:n.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return QT(this)}get isAnimating(){return kc(this)}get isPaused(){return ag(this)}get isDelayed(){return this._state.delayed}advance(n){let e=!0,t=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,a=XS(i.to);!a&&Go(i.to)&&(r=Ba(Ca(i.to))),i.values.forEach((c,u)=>{if(c.done)return;const d=c.constructor==yy?1:a?a[u].lastPosition:r[u];let h=i.immediate,p=d;if(!h){if(p=c.lastPosition,s.tension<=0){c.done=!0;return}let y=c.elapsedTime+=n;const x=i.fromValues[u],_=c.v0!=null?c.v0:c.v0=ut.arr(s.velocity)?s.velocity[u]:s.velocity;let v;const b=s.precision||(x==d?.005:Math.min(1,Math.abs(d-x)*.001));if(ut.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,S=Math.exp(-(1-w)*y);p=x+_/(1-w)*(1-S),h=Math.abs(c.lastPosition-p)<=b,v=_*S}else{v=c.lastVelocity==null?_:c.lastVelocity;const w=s.restVelocity||b/10,S=s.clamp?0:s.bounce,A=!ut.und(S),P=x==d?c.v0>0:x<d;let k,T=!1;const E=1,R=Math.ceil(n/E);for(let I=0;I<R&&(k=Math.abs(v)>w,!(!k&&(h=Math.abs(d-p)<=b,h)));++I){A&&(T=p==d||p>d==P,T&&(v=-v*S,p=d));const D=-s.tension*1e-6*(p-d),B=-s.friction*.001*v,G=(D+B)/s.mass;v=v+G*E,p=p+v*E}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,y=c.elapsedTime+=n)),w=(s.progress||0)+y/this._memoizedDuration,w=w>1?1:w<0?0:w,c.durationProgress=w),p=x+s.easing(w)*(d-x),v=(p-c.lastPosition)/n,h=w==1}c.lastVelocity=v,Number.isNaN(p)&&(console.warn("Got NaN while animating:",this),h=!0)}a&&!a[u].done&&(h=!1),h?c.done=!0:e=!1,c.setValue(p,s.round)&&(t=!0)});const o=Vo(this),l=o.getValue();if(e){const c=Ca(i.to);(l!==c||t)&&!s.decay?(o.setValue(c),this._onChange(c)):t&&s.decay&&this._onChange(l),this._stop()}else t&&this._onChange(l)}set(n){return Kt.batchedUpdates(()=>{this._stop(),this._focus(n),this._set(n)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(kc(this)){const{to:n,config:e}=this.animation;Kt.batchedUpdates(()=>{this._onStart(),e.decay||this._set(n,!1),this._stop()})}return this}update(n){return(this.queue||(this.queue=[])).push(n),this}start(n,e){let t;return ut.und(n)?(t=this.queue||[],this.queue=[]):t=[ut.obj(n)?n:{...e,to:n}],Promise.all(t.map(i=>this._update(i))).then(i=>Pk(this,i))}stop(n){const{to:e}=this.animation;return this._focus(this.get()),xy(this._state,n&&this._lastCallId),Kt.batchedUpdates(()=>this._stop(e,n)),this}reset(){this._update({reset:!0})}eventObserved(n){n.type=="change"?this._start():n.type=="priority"&&(this.priority=n.priority+1)}_prepareNode(n){const e=this.key||"";let{to:t,from:i}=n;t=ut.obj(t)?t[e]:t,(t==null||yA(t))&&(t=void 0),i=ut.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:t,from:i};return QT(this)||(n.reverse&&([t,i]=[i,t]),i=Ca(i),ut.und(i)?Vo(this)||this._set(t):this._set(i)),r}_update({...n},e){const{key:t,defaultProps:i}=this;n.default&&Object.assign(i,Ak(n,(a,o)=>/^on/.test(o)?rH(a,t):a)),v4(this,n,"onProps"),lg(this,"onProps",n,this);const r=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return oH(++this._lastCallId,{key:t,props:n,defaultProps:i,state:s,actions:{pause:()=>{ag(this)||(g4(this,!0),Tg(s.pauseQueue),lg(this,"onPause",vo(this,og(this,this.animation.to)),this))},resume:()=>{ag(this)&&(g4(this,!1),kc(this)&&this._resume(),Tg(s.resumeQueue),lg(this,"onResume",vo(this,og(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(a=>{if(n.loop&&a.finished&&!(e&&a.noop)){const o=dH(n);if(o)return this._update(o,!0)}return a})}_merge(n,e,t){if(e.cancel)return this.stop(!0),t(yp(this));const i=!ut.und(n.to),r=!ut.und(n.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return t(yp(this));const{key:s,defaultProps:a,animation:o}=this,{to:l,from:c}=o;let{to:u=l,from:d=c}=n;r&&!i&&(!e.default||ut.und(u))&&(u=d),e.reverse&&([u,d]=[d,u]);const h=!Rl(d,c);h&&(o.from=d),d=Ca(d);const p=!Rl(u,l);p&&this._focus(u);const y=yA(e.to),{config:x}=o,{decay:_,velocity:v}=x;(i||r)&&(x.velocity=0),e.config&&!y&&_he(x,Od(e.config,s),e.config!==a.config?Od(a.config,s):void 0);let b=Vo(this);if(!b||ut.und(u))return t(vo(this,!0));const w=ut.und(e.reset)?r&&!e.default:!ut.und(d)&&c0(e.reset,s),S=w?d:this.get(),A=vy(u),P=ut.num(A)||ut.arr(A)||qS(A),k=!y&&(!P||c0(a.immediate||e.immediate,s));if(p){const I=gA(u);if(I!==b.constructor)if(k)b=this._set(A);else throw Error(`Cannot animate between ${b.constructor.name} and ${I.name}, as the "to" prop suggests`)}const T=b.constructor;let E=Go(u),R=!1;if(!E){const I=w||!QT(this)&&h;(p||I)&&(R=Rl(vy(S),A),E=!R),(!Rl(o.immediate,k)&&!k||!Rl(x.decay,_)||!Rl(x.velocity,v))&&(E=!0)}if(R&&kc(this)&&(o.changed&&!w?E=!0:E||this._stop(l)),!y&&((E||Go(l))&&(o.values=b.getPayload(),o.toValues=Go(u)?null:T==yy?[1]:Ba(A)),o.immediate!=k&&(o.immediate=k,!k&&!w&&this._set(l)),E)){const{onRest:I}=o;Nn(Ehe,B=>v4(this,e,B));const D=vo(this,og(this,l));Tg(this._pendingCalls,D),this._pendingCalls.add(t),o.changed&&Kt.batchedUpdates(()=>{var B;o.changed=!w,I==null||I(D,this),w?Od(a.onRest,D):(B=o.onStart)==null||B.call(o,D,this)})}w&&this._set(S),y?t(cH(e.to,e,this._state,this)):E?this._start():kc(this)&&!p?this._pendingCalls.add(t):t(lH(S))}_focus(n){const e=this.animation;n!==e.to&&(s4(this)&&this._detach(),e.to=n,s4(this)&&this._attach())}_attach(){let n=0;const{to:e}=this.animation;Go(e)&&(uv(e,this),xA(e)&&(n=e.priority+1)),this.priority=n}_detach(){const{to:n}=this.animation;Go(n)&&fw(n,this)}_set(n,e=!0){const t=Ca(n);if(!ut.und(t)){const i=Vo(this);if(!i||!Rl(t,i.getValue())){const r=gA(t);!i||i.constructor!=r?Tk(this,r.create(t)):i.setValue(t),i&&Kt.batchedUpdates(()=>{this._onChange(t,e)})}}return Vo(this)}_onStart(){const n=this.animation;n.changed||(n.changed=!0,lg(this,"onStart",vo(this,og(this,n.to)),this))}_onChange(n,e){e||(this._onStart(),Od(this.animation.onChange,n,this)),Od(this.defaultProps.onChange,n,this),super._onChange(n,e)}_start(){const n=this.animation;Vo(this).reset(Ca(n.to)),n.immediate||(n.fromValues=n.values.map(e=>e.lastPosition)),kc(this)||(m4(this,!0),ag(this)||this._resume())}_resume(){Ao.skipAnimation?this.finish():$S.start(this)}_stop(n,e){if(kc(this)){m4(this,!1);const t=this.animation;Nn(t.values,r=>{r.done=!0}),t.toValues&&(t.onChange=t.onPause=t.onResume=void 0),hw(this,{type:"idle",parent:this});const i=e?yp(this.get()):vo(this.get(),og(this,n??t.to));Tg(this._pendingCalls,i),t.changed&&(t.changed=!1,lg(this,"onRest",i,this))}}};function og(n,e){const t=vy(e),i=vy(n.get());return Rl(i,t)}function dH(n,e=n.loop,t=n.to){const i=Od(e);if(i){const r=i!==!0&&aH(i),s=(r||n).reverse,a=!r||r.reset;return _y({...n,loop:e,default:!1,pause:void 0,to:!s||yA(t)?t:void 0,from:a?n.from:void 0,reset:a,...r})}}function _y(n){const{to:e,from:t}=n=aH(n),i=new Set;return ut.obj(e)&&y4(e,i),ut.obj(t)&&y4(t,i),n.keys=i.size?Array.from(i):null,n}function Mhe(n){const e=_y(n);return ut.und(e.default)&&(e.default=Ak(e)),e}function y4(n,e){rc(n,(t,i)=>t!=null&&e.add(i))}var Ehe=["onStart","onRest","onChange","onPause","onResume"];function v4(n,e,t){n.animation[t]=e[t]!==sH(e,t)?rH(e[t],n.key):void 0}function lg(n,e,...t){var i,r,s,a;(r=(i=n.animation)[e])==null||r.call(i,...t),(a=(s=n.defaultProps)[e])==null||a.call(s,...t)}var The=["onStart","onChange","onRest"],Che=1,Ahe=class{constructor(n,e){this.id=Che++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),n&&this.start({default:!0,...n})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(n=>n.idle&&!n.isDelayed&&!n.isPaused)}get item(){return this._item}set item(n){this._item=n}get(){const n={};return this.each((e,t)=>n[t]=e.get()),n}set(n){for(const e in n){const t=n[e];ut.und(t)||this.springs[e].set(t)}}update(n){return n&&this.queue.push(_y(n)),this}start(n){let{queue:e}=this;return n?e=Ba(n).map(_y):this.queue=[],this._flush?this._flush(this,e):(gH(this,e),wA(this,e))}stop(n,e){if(n!==!!n&&(e=n),e){const t=this.springs;Nn(Ba(e),i=>t[i].stop(!!n))}else xy(this._state,this._lastAsyncId),this.each(t=>t.stop(!!n));return this}pause(n){if(ut.und(n))this.start({pause:!0});else{const e=this.springs;Nn(Ba(n),t=>e[t].pause())}return this}resume(n){if(ut.und(n))this.start({pause:!1});else{const e=this.springs;Nn(Ba(n),t=>e[t].resume())}return this}each(n){rc(this.springs,n)}_onFrame(){const{onStart:n,onChange:e,onRest:t}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,o0(n,([o,l])=>{l.value=this.get(),o(l,this,this._item)}));const s=!i&&this._started,a=r||s&&t.size?this.get():null;r&&e.size&&o0(e,([o,l])=>{l.value=a,o(l,this,this._item)}),s&&(this._started=!1,o0(t,([o,l])=>{l.value=a,o(l,this,this._item)}))}eventObserved(n){if(n.type=="change")this._changed.add(n.parent),n.idle||this._active.add(n.parent);else if(n.type=="idle")this._active.delete(n.parent);else return;Kt.onFrame(this._onFrame)}};function wA(n,e){return Promise.all(e.map(t=>hH(n,t))).then(t=>Pk(n,t))}async function hH(n,e,t){const{keys:i,to:r,from:s,loop:a,onRest:o,onResolve:l}=e,c=ut.obj(e.default)&&e.default;a&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const u=ut.arr(r)||ut.fun(r)?r:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):Nn(The,x=>{const _=e[x];if(ut.fun(_)){const v=n._events[x];e[x]=({finished:b,cancelled:w})=>{const S=v.get(_);S?(b||(S.finished=!1),w&&(S.cancelled=!0)):v.set(_,{value:null,finished:b||!1,cancelled:w||!1})},c&&(c[x]=e[x])}});const d=n._state;e.pause===!d.paused?(d.paused=e.pause,Tg(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const h=(i||Object.keys(n.springs)).map(x=>n.springs[x].start(e)),p=e.cancel===!0||sH(e,"cancel")===!0;(u||p&&d.asyncId)&&h.push(oH(++n._lastAsyncId,{props:e,state:d,actions:{pause:pA,resume:pA,start(x,_){p?(xy(d,n._lastAsyncId),_(yp(n))):(x.onRest=o,_(cH(u,x,d,n)))}}})),d.paused&&await new Promise(x=>{d.resumeQueue.add(x)});const y=Pk(n,await Promise.all(h));if(a&&y.finished&&!(t&&y.noop)){const x=dH(e,a,r);if(x)return gH(n,[x]),hH(n,x,!0)}return l&&Kt.batchedUpdates(()=>l(y,n,n.item)),y}function x4(n,e){const t={...n.springs};return e&&Nn(Ba(e),i=>{ut.und(i.keys)&&(i=_y(i)),ut.obj(i.to)||(i={...i,to:void 0}),mH(t,i,r=>pH(r))}),fH(n,t),t}function fH(n,e){rc(e,(t,i)=>{n.springs[i]||(n.springs[i]=t,uv(t,n))})}function pH(n,e){const t=new She;return t.key=n,e&&uv(t,e),t}function mH(n,e,t){e.keys&&Nn(e.keys,i=>{(n[i]||(n[i]=t(i)))._prepareNode(e)})}function gH(n,e){Nn(e,t=>{mH(n.springs,t,i=>pH(i,n))})}var YS=({children:n,...e})=>{const t=F.useContext(mw),i=e.pause||!!t.pause,r=e.immediate||!!t.immediate;e=nhe(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=mw;return F.createElement(s,{value:e},n)},mw=Phe(YS,{});YS.Provider=mw.Provider;YS.Consumer=mw.Consumer;function Phe(n,e){return Object.assign(n,F.createContext(e)),n.Provider._context=n,n.Consumer._context=n,n}var Rhe=()=>{const n=[],e=function(i){ehe();const r=[];return Nn(n,(s,a)=>{if(ut.und(i))r.push(s.start());else{const o=t(i,s,a);o&&r.push(s.start(o))}}),r};e.current=n,e.add=function(i){n.includes(i)||n.push(i)},e.delete=function(i){const r=n.indexOf(i);~r&&n.splice(r,1)},e.pause=function(){return Nn(n,i=>i.pause(...arguments)),this},e.resume=function(){return Nn(n,i=>i.resume(...arguments)),this},e.set=function(i){Nn(n,(r,s)=>{const a=ut.fun(i)?i(s,r):i;a&&r.set(a)})},e.start=function(i){const r=[];return Nn(n,(s,a)=>{if(ut.und(i))r.push(s.start());else{const o=this._getProps(i,s,a);o&&r.push(s.start(o))}}),r},e.stop=function(){return Nn(n,i=>i.stop(...arguments)),this},e.update=function(i){return Nn(n,(r,s)=>r.update(this._getProps(i,r,s))),this};const t=function(i,r,s){return ut.fun(i)?i(s,r):i};return e._getProps=t,e};function khe(n,e,t){const i=ut.fun(e)&&e;i&&!t&&(t=[]);const r=F.useMemo(()=>i||arguments.length==3?Rhe():void 0,[]),s=F.useRef(0),a=eH(),o=F.useMemo(()=>({ctrls:[],queue:[],flush(v,b){const w=x4(v,b);return s.current>0&&!o.queue.length&&!Object.keys(w).some(A=>!v.springs[A])?wA(v,b):new Promise(A=>{fH(v,w),o.queue.push(()=>{A(wA(v,b))}),a()})}}),[]),l=F.useRef([...o.ctrls]),c=[],u=o4(n)||0;F.useMemo(()=>{Nn(l.current.slice(n,u),v=>{ghe(v,r),v.stop(!0)}),l.current.length=n,d(u,n)},[n]),F.useMemo(()=>{d(0,Math.min(u,n))},t);function d(v,b){for(let w=v;w<b;w++){const S=l.current[w]||(l.current[w]=new Ahe(null,o.flush)),A=i?i(w,S):e[w];A&&(c[w]=Mhe(A))}}const h=l.current.map((v,b)=>x4(v,c[b])),p=F.useContext(YS),y=o4(p),x=p!==y&&mhe(p);Ek(()=>{s.current++,o.ctrls=l.current;const{queue:v}=o;v.length&&(o.queue=[],Nn(v,b=>b())),Nn(l.current,(b,w)=>{r==null||r.add(b),x&&b.start({default:p});const S=c[w];S&&(yhe(b,S.ref),b.ref?b.queue.push(S):b.start(S))})}),tH(()=>()=>{Nn(o.ctrls,v=>v.stop(!0))});const _=h.map(v=>({...v}));return r?[_,r]:_}function Nhe(n,e){const t=ut.fun(n),[[i],r]=khe(1,t?n:[n],t?e||[]:e);return t||arguments.length==2?[i,r]:i}var Ihe=class extends Rk{constructor(n,e){super(),this.source=n,this.idle=!0,this._active=new Set,this.calc=py(...e);const t=this._get(),i=gA(t);Tk(this,i.create(t))}advance(n){const e=this._get(),t=this.get();Rl(e,t)||(Vo(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&_4(this._active)&&e2(this)}_get(){const n=ut.arr(this.source)?this.source.map(Ca):Ba(Ca(this.source));return this.calc(...n)}_start(){this.idle&&!_4(this._active)&&(this.idle=!1,Nn(XS(this),n=>{n.done=!1}),Ao.skipAnimation?(Kt.batchedUpdates(()=>this.advance()),e2(this)):$S.start(this))}_attach(){let n=1;Nn(Ba(this.source),e=>{Go(e)&&uv(e,this),xA(e)&&(e.idle||this._active.add(e),n=Math.max(n,e.priority+1))}),this.priority=n,this._start()}_detach(){Nn(Ba(this.source),n=>{Go(n)&&fw(n,this)}),this._active.clear(),e2(this)}eventObserved(n){n.type=="change"?n.idle?this.advance():(this._active.add(n.parent),this._start()):n.type=="idle"?this._active.delete(n.parent):n.type=="priority"&&(this.priority=Ba(this.source).reduce((e,t)=>Math.max(e,(xA(t)?t.priority:0)+1),0))}};function Dhe(n){return n.idle!==!1}function _4(n){return!n.size||Array.from(n).every(Dhe)}function e2(n){n.idle||(n.idle=!0,Nn(XS(n),e=>{e.done=!0}),hw(n,{type:"idle",parent:n}))}Ao.assign({createStringInterpolator:J8,to:(n,e)=>new Ihe(n,e)});var Lhe=["primitive"].concat(Object.keys(a8).filter(n=>/^[A-Z]/.test(n)).map(n=>n[0].toLowerCase()+n.slice(1)));Ao.assign({createStringInterpolator:J8,colors:Rde,frameLoop:"demand"});Uce(()=>{Kt.advance()});var Ohe=uhe(Lhe,{applyAnimatedValues:Dl}),Fhe=Ohe.animated;function Uhe({enabled:n=!0,snap:e,global:t,domElement:i,cursor:r=!0,children:s,speed:a=1,rotation:o=[0,0,0],zoom:l=1,polar:c=[0,Math.PI/2],azimuth:u=[-1/0,1/0],config:d={mass:1,tension:170,friction:26}}){const h=bu(P=>P.events),p=bu(P=>P.gl),y=i||h.connected||p.domElement,{size:x}=bu(),_=F.useMemo(()=>[o[0]+c[0],o[0]+c[1]],[o[0],c[0],c[1]]),v=F.useMemo(()=>[o[1]+u[0],o[1]+u[1]],[o[1],u[0],u[1]]),b=F.useMemo(()=>[Ii.clamp(o[0],..._),Ii.clamp(o[1],...v),o[2]],[o[0],o[1],o[2],_,v]),[w,S]=Nhe(()=>({scale:1,rotation:b,config:d}));F.useEffect(()=>void S.start({scale:1,rotation:b,config:d}),[b]),F.useEffect(()=>{if(t&&r&&n)return y.style.cursor="grab",p.domElement.style.cursor="",()=>{y.style.cursor="default",p.domElement.style.cursor="default"}},[t,r,y,n]);const A=bde({onHover:({last:P})=>{r&&!t&&n&&(y.style.cursor=P?"auto":"grab")},onDrag:({down:P,delta:[k,T],memo:[E,R]=w.rotation.animation.to||b})=>{if(!n)return[T,k];r&&(y.style.cursor=P?"grabbing":"grab"),k=Ii.clamp(R+k/x.width*Math.PI*a,...v),T=Ii.clamp(E+T/x.height*Math.PI*a,..._);const I=e&&!P&&typeof e!="boolean"?e:d;return S.start({scale:P&&T>_[1]/2?l:1,rotation:e&&!P?b:[T,k,0],config:D=>D==="scale"?{...I,friction:I.friction*3}:I}),[T,k]}},{target:t?y:void 0});return F.createElement(Fhe.group,ow({},A==null?void 0:A(),w),s)}const yH=(()=>parseInt($y.replace(/\D+/g,"")))();var Da=Uint8Array,ru=Uint16Array,SA=Uint32Array,vH=new Da([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),xH=new Da([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),jhe=new Da([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_H=function(n,e){for(var t=new ru(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new SA(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},bH=_H(vH,2),wH=bH[0],zhe=bH[1];wH[28]=258,zhe[258]=28;var Bhe=_H(xH,0),Hhe=Bhe[0],MA=new ru(32768);for(var ei=0;ei<32768;++ei){var Nc=(ei&43690)>>>1|(ei&21845)<<1;Nc=(Nc&52428)>>>2|(Nc&13107)<<2,Nc=(Nc&61680)>>>4|(Nc&3855)<<4,MA[ei]=((Nc&65280)>>>8|(Nc&255)<<8)>>>1}var u0=function(n,e,t){for(var i=n.length,r=0,s=new ru(e);r<i;++r)++s[n[r]-1];var a=new ru(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;var o;if(t){o=new ru(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var c=r<<4|n[r],u=e-n[r],d=a[n[r]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)o[MA[d]>>>l]=c}else for(o=new ru(i),r=0;r<i;++r)n[r]&&(o[r]=MA[a[n[r]-1]++]>>>15-n[r]);return o},hv=new Da(288);for(var ei=0;ei<144;++ei)hv[ei]=8;for(var ei=144;ei<256;++ei)hv[ei]=9;for(var ei=256;ei<280;++ei)hv[ei]=7;for(var ei=280;ei<288;++ei)hv[ei]=8;var SH=new Da(32);for(var ei=0;ei<32;++ei)SH[ei]=5;var Vhe=u0(hv,9,1),$he=u0(SH,5,1),t2=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ao=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},n2=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Whe=function(n){return(n/8|0)+(n&7&&1)},Ghe=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof ru?ru:n instanceof SA?SA:Da)(t-e);return i.set(n.subarray(e,t)),i},qhe=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new Da(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new Da(i*3));var a=function(oe){var _e=e.length;if(oe>_e){var Ce=new Da(Math.max(_e*2,oe));Ce.set(e),e=Ce}},o=t.f||0,l=t.p||0,c=t.b||0,u=t.l,d=t.d,h=t.m,p=t.n,y=i*8;do{if(!u){t.f=o=ao(n,l,1);var x=ao(n,l+1,3);if(l+=3,x)if(x==1)u=Vhe,d=$he,h=9,p=5;else if(x==2){var w=ao(n,l,31)+257,S=ao(n,l+10,15)+4,A=w+ao(n,l+5,31)+1;l+=14;for(var P=new Da(A),k=new Da(19),T=0;T<S;++T)k[jhe[T]]=ao(n,l+T*3,7);l+=S*3;for(var E=t2(k),R=(1<<E)-1,I=u0(k,E,1),T=0;T<A;){var D=I[ao(n,l,R)];l+=D&15;var _=D>>>4;if(_<16)P[T++]=_;else{var B=0,G=0;for(_==16?(G=3+ao(n,l,3),l+=2,B=P[T-1]):_==17?(G=3+ao(n,l,7),l+=3):_==18&&(G=11+ao(n,l,127),l+=7);G--;)P[T++]=B}}var Y=P.subarray(0,w),X=P.subarray(w);h=t2(Y),p=t2(X),u=u0(Y,h,1),d=u0(X,p,1)}else throw"invalid block type";else{var _=Whe(l)+4,v=n[_-4]|n[_-3]<<8,b=_+v;if(b>i){if(s)throw"unexpected EOF";break}r&&a(c+v),e.set(n.subarray(_,b),c),t.b=c+=v,t.p=l=b*8;continue}if(l>y){if(s)throw"unexpected EOF";break}}r&&a(c+131072);for(var Q=(1<<h)-1,L=(1<<p)-1,W=l;;W=l){var B=u[n2(n,l)&Q],j=B>>>4;if(l+=B&15,l>y){if(s)throw"unexpected EOF";break}if(!B)throw"invalid length/literal";if(j<256)e[c++]=j;else if(j==256){W=l,u=null;break}else{var te=j-254;if(j>264){var T=j-257,ae=vH[T];te=ao(n,l,(1<<ae)-1)+wH[T],l+=ae}var me=d[n2(n,l)&L],K=me>>>4;if(!me)throw"invalid distance";l+=me&15;var X=Hhe[K];if(K>3){var ae=xH[K];X+=n2(n,l)&(1<<ae)-1,l+=ae}if(l>y){if(s)throw"unexpected EOF";break}r&&a(c+131072);for(var re=c+te;c<re;c+=4)e[c]=e[c-X],e[c+1]=e[c+1-X],e[c+2]=e[c+2-X],e[c+3]=e[c+3-X];c=re}}t.l=u,t.p=W,t.b=c,u&&(o=1,t.m=h,t.d=d,t.n=p)}while(!o);return c==e.length?e:Ghe(e,0,c)},Xhe=new Da(0),Yhe=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function j_(n,e){return qhe((Yhe(n),n.subarray(2,-4)),e)}var Khe=typeof TextDecoder<"u"&&new TextDecoder,Zhe=0;try{Khe.decode(Xhe,{stream:!0}),Zhe=1}catch{}const Jhe=n=>n&&n.isCubeTexture;class Qhe extends Zn{constructor(e,t){var i,r;const s=Jhe(e),o=((r=s?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,l=Math.floor(Math.log2(o)),c=Math.pow(2,l),u=3*Math.max(c,16*7),d=4*c,h=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/d}`,`#define CUBEUV_MAX_MIP ${l}.0`],p=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,y=h.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${yH>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,x={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},_=new tv(1,16),v=new js({uniforms:x,fragmentShader:y,vertexShader:p,side:xo});super(_,v)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}class efe extends KR{constructor(e){super(e),this.type=vr}parse(e){const a=function(T,E){switch(T){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(E||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(E||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(E||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(E||""))}},u=`
`,d=function(T,E,R){E=E||1024;let D=T.pos,B=-1,G=0,Y="",X=String.fromCharCode.apply(null,new Uint16Array(T.subarray(D,D+128)));for(;0>(B=X.indexOf(u))&&G<E&&D<T.byteLength;)Y+=X,G+=X.length,D+=128,X+=String.fromCharCode.apply(null,new Uint16Array(T.subarray(D,D+128)));return-1<B?(R!==!1&&(T.pos+=G+B+1),Y+X.slice(0,B)):!1},h=function(T){const E=/^#\?(\S+)/,R=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,I=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,D=/^\s*FORMAT=(\S+)\s*$/,B=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,G={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Y,X;for((T.pos>=T.byteLength||!(Y=d(T)))&&a(1,"no header found"),(X=Y.match(E))||a(3,"bad initial token"),G.valid|=1,G.programtype=X[1],G.string+=Y+`
`;Y=d(T),Y!==!1;){if(G.string+=Y+`
`,Y.charAt(0)==="#"){G.comments+=Y+`
`;continue}if((X=Y.match(R))&&(G.gamma=parseFloat(X[1])),(X=Y.match(I))&&(G.exposure=parseFloat(X[1])),(X=Y.match(D))&&(G.valid|=2,G.format=X[1]),(X=Y.match(B))&&(G.valid|=4,G.height=parseInt(X[1],10),G.width=parseInt(X[2],10)),G.valid&2&&G.valid&4)break}return G.valid&2||a(3,"missing format specifier"),G.valid&4||a(3,"missing image size specifier"),G},p=function(T,E,R){const I=E;if(I<8||I>32767||T[0]!==2||T[1]!==2||T[2]&128)return new Uint8Array(T);I!==(T[2]<<8|T[3])&&a(3,"wrong scanline width");const D=new Uint8Array(4*E*R);D.length||a(4,"unable to allocate buffer space");let B=0,G=0;const Y=4*I,X=new Uint8Array(4),Q=new Uint8Array(Y);let L=R;for(;L>0&&G<T.byteLength;){G+4>T.byteLength&&a(1),X[0]=T[G++],X[1]=T[G++],X[2]=T[G++],X[3]=T[G++],(X[0]!=2||X[1]!=2||(X[2]<<8|X[3])!=I)&&a(3,"bad rgbe scanline format");let W=0,j;for(;W<Y&&G<T.byteLength;){j=T[G++];const ae=j>128;if(ae&&(j-=128),(j===0||W+j>Y)&&a(3,"bad scanline data"),ae){const me=T[G++];for(let K=0;K<j;K++)Q[W++]=me}else Q.set(T.subarray(G,G+j),W),W+=j,G+=j}const te=I;for(let ae=0;ae<te;ae++){let me=0;D[B]=Q[ae+me],me+=I,D[B+1]=Q[ae+me],me+=I,D[B+2]=Q[ae+me],me+=I,D[B+3]=Q[ae+me],B+=4}L--}return D},y=function(T,E,R,I){const D=T[E+3],B=Math.pow(2,D-128)/255;R[I+0]=T[E+0]*B,R[I+1]=T[E+1]*B,R[I+2]=T[E+2]*B,R[I+3]=1},x=function(T,E,R,I){const D=T[E+3],B=Math.pow(2,D-128)/255;R[I+0]=$d.toHalfFloat(Math.min(T[E+0]*B,65504)),R[I+1]=$d.toHalfFloat(Math.min(T[E+1]*B,65504)),R[I+2]=$d.toHalfFloat(Math.min(T[E+2]*B,65504)),R[I+3]=$d.toHalfFloat(1)},_=new Uint8Array(e);_.pos=0;const v=h(_),b=v.width,w=v.height,S=p(_.subarray(_.pos),b,w);let A,P,k;switch(this.type){case yi:k=S.length/4;const T=new Float32Array(k*4);for(let R=0;R<k;R++)y(S,R*4,T,R*4);A=T,P=yi;break;case vr:k=S.length/4;const E=new Uint16Array(k*4);for(let R=0;R<k;R++)x(S,R*4,E,R*4);A=E,P=vr;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:b,height:w,data:A,header:v.string,gamma:v.gamma,exposure:v.exposure,type:P}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(a,o){switch(a.type){case yi:case vr:"colorSpace"in a?a.colorSpace="srgb-linear":a.encoding=3e3,a.minFilter=On,a.magFilter=On,a.generateMipmaps=!1,a.flipY=!0;break}t&&t(a,o)}return super.load(e,s,i,r)}}const cg=yH>=152;class tfe extends KR{constructor(e){super(e),this.type=vr}parse(e){const E=Math.pow(2.7182818,2.2);function R(z,q){for(var fe=0,Me=0;Me<65536;++Me)(Me==0||z[Me>>3]&1<<(Me&7))&&(q[fe++]=Me);for(var Ne=fe-1;fe<65536;)q[fe++]=0;return Ne}function I(z){for(var q=0;q<16384;q++)z[q]={},z[q].len=0,z[q].lit=0,z[q].p=null}const D={l:0,c:0,lc:0};function B(z,q,fe,Me,Ne){for(;fe<z;)q=q<<8|Tt(Me,Ne),fe+=8;fe-=z,D.l=q>>fe&(1<<z)-1,D.c=q,D.lc=fe}const G=new Array(59);function Y(z){for(var q=0;q<=58;++q)G[q]=0;for(var q=0;q<65537;++q)G[z[q]]+=1;for(var fe=0,q=58;q>0;--q){var Me=fe+G[q]>>1;G[q]=fe,fe=Me}for(var q=0;q<65537;++q){var Ne=z[q];Ne>0&&(z[q]=Ne|G[Ne]++<<6)}}function X(z,q,fe,Me,Ne,Ie,Ke){for(var $e=fe,H=0,ne=0;Ne<=Ie;Ne++){if($e.value-fe.value>Me)return!1;B(6,H,ne,z,$e);var he=D.l;if(H=D.c,ne=D.lc,Ke[Ne]=he,he==63){if($e.value-fe.value>Me)throw"Something wrong with hufUnpackEncTable";B(8,H,ne,z,$e);var se=D.l+6;if(H=D.c,ne=D.lc,Ne+se>Ie+1)throw"Something wrong with hufUnpackEncTable";for(;se--;)Ke[Ne++]=0;Ne--}else if(he>=59){var se=he-59+2;if(Ne+se>Ie+1)throw"Something wrong with hufUnpackEncTable";for(;se--;)Ke[Ne++]=0;Ne--}}Y(Ke)}function Q(z){return z&63}function L(z){return z>>6}function W(z,q,fe,Me){for(;q<=fe;q++){var Ne=L(z[q]),Ie=Q(z[q]);if(Ne>>Ie)throw"Invalid table entry";if(Ie>14){var Ke=Me[Ne>>Ie-14];if(Ke.len)throw"Invalid table entry";if(Ke.lit++,Ke.p){var $e=Ke.p;Ke.p=new Array(Ke.lit);for(var H=0;H<Ke.lit-1;++H)Ke.p[H]=$e[H]}else Ke.p=new Array(1);Ke.p[Ke.lit-1]=q}else if(Ie)for(var ne=0,H=1<<14-Ie;H>0;H--){var Ke=Me[(Ne<<14-Ie)+ne];if(Ke.len||Ke.p)throw"Invalid table entry";Ke.len=Ie,Ke.lit=q,ne++}}return!0}const j={c:0,lc:0};function te(z,q,fe,Me){z=z<<8|Tt(fe,Me),q+=8,j.c=z,j.lc=q}const ae={c:0,lc:0};function me(z,q,fe,Me,Ne,Ie,Ke,$e,H,ne){if(z==q){Me<8&&(te(fe,Me,Ne,Ke),fe=j.c,Me=j.lc),Me-=8;var he=fe>>Me,he=new Uint8Array([he])[0];if(H.value+he>ne)return!1;for(var se=$e[H.value-1];he-- >0;)$e[H.value++]=se}else if(H.value<ne)$e[H.value++]=z;else return!1;ae.c=fe,ae.lc=Me}function K(z){return z&65535}function re(z){var q=K(z);return q>32767?q-65536:q}const oe={a:0,b:0};function _e(z,q){var fe=re(z),Me=re(q),Ne=Me,Ie=fe+(Ne&1)+(Ne>>1),Ke=Ie,$e=Ie-Ne;oe.a=Ke,oe.b=$e}function Ce(z,q){var fe=K(z),Me=K(q),Ne=fe-(Me>>1)&65535,Ie=Me+Ne-32768&65535;oe.a=Ie,oe.b=Ne}function Ee(z,q,fe,Me,Ne,Ie,Ke){for(var $e=Ke<16384,H=fe>Ne?Ne:fe,ne=1,he;ne<=H;)ne<<=1;for(ne>>=1,he=ne,ne>>=1;ne>=1;){for(var se=0,pe=se+Ie*(Ne-he),Ae=Ie*ne,Ue=Ie*he,Ze=Me*ne,qe=Me*he,it,at,et,lt;se<=pe;se+=Ue){for(var Pt=se,zt=se+Me*(fe-he);Pt<=zt;Pt+=qe){var It=Pt+Ze,Dt=Pt+Ae,Et=Dt+Ze;$e?(_e(z[Pt+q],z[Dt+q]),it=oe.a,et=oe.b,_e(z[It+q],z[Et+q]),at=oe.a,lt=oe.b,_e(it,at),z[Pt+q]=oe.a,z[It+q]=oe.b,_e(et,lt),z[Dt+q]=oe.a,z[Et+q]=oe.b):(Ce(z[Pt+q],z[Dt+q]),it=oe.a,et=oe.b,Ce(z[It+q],z[Et+q]),at=oe.a,lt=oe.b,Ce(it,at),z[Pt+q]=oe.a,z[It+q]=oe.b,Ce(et,lt),z[Dt+q]=oe.a,z[Et+q]=oe.b)}if(fe&ne){var Dt=Pt+Ae;$e?_e(z[Pt+q],z[Dt+q]):Ce(z[Pt+q],z[Dt+q]),it=oe.a,z[Dt+q]=oe.b,z[Pt+q]=it}}if(Ne&ne)for(var Pt=se,zt=se+Me*(fe-he);Pt<=zt;Pt+=qe){var It=Pt+Ze;$e?_e(z[Pt+q],z[It+q]):Ce(z[Pt+q],z[It+q]),it=oe.a,z[It+q]=oe.b,z[Pt+q]=it}he=ne,ne>>=1}return se}function Pe(z,q,fe,Me,Ne,Ie,Ke,$e,H,ne){for(var he=0,se=0,pe=$e,Ae=Math.trunc(Ne.value+(Ie+7)/8);Ne.value<Ae;)for(te(he,se,fe,Ne),he=j.c,se=j.lc;se>=14;){var Ue=he>>se-14&16383,Ze=q[Ue];if(Ze.len)se-=Ze.len,me(Ze.lit,Ke,he,se,fe,Me,Ne,H,ne,pe),he=ae.c,se=ae.lc;else{if(!Ze.p)throw"hufDecode issues";var qe;for(qe=0;qe<Ze.lit;qe++){for(var it=Q(z[Ze.p[qe]]);se<it&&Ne.value<Ae;)te(he,se,fe,Ne),he=j.c,se=j.lc;if(se>=it&&L(z[Ze.p[qe]])==(he>>se-it&(1<<it)-1)){se-=it,me(Ze.p[qe],Ke,he,se,fe,Me,Ne,H,ne,pe),he=ae.c,se=ae.lc;break}}if(qe==Ze.lit)throw"hufDecode issues"}}var at=8-Ie&7;for(he>>=at,se-=at;se>0;){var Ze=q[he<<14-se&16383];if(Ze.len)se-=Ze.len,me(Ze.lit,Ke,he,se,fe,Me,Ne,H,ne,pe),he=ae.c,se=ae.lc;else throw"hufDecode issues"}return!0}function De(z,q,fe,Me,Ne,Ie){var Ke={value:0},$e=fe.value,H=nt(q,fe),ne=nt(q,fe);fe.value+=4;var he=nt(q,fe);if(fe.value+=4,H<0||H>=65537||ne<0||ne>=65537)throw"Something wrong with HUF_ENCSIZE";var se=new Array(65537),pe=new Array(16384);I(pe);var Ae=Me-(fe.value-$e);if(X(z,q,fe,Ae,H,ne,se),he>8*(Me-(fe.value-$e)))throw"Something wrong with hufUncompress";W(se,H,ne,pe),Pe(se,pe,z,q,fe,he,ne,Ie,Ne,Ke)}function xe(z,q,fe){for(var Me=0;Me<fe;++Me)q[Me]=z[q[Me]]}function we(z){for(var q=1;q<z.length;q++){var fe=z[q-1]+z[q]-128;z[q]=fe}}function $(z,q){for(var fe=0,Me=Math.floor((z.length+1)/2),Ne=0,Ie=z.length-1;!(Ne>Ie||(q[Ne++]=z[fe++],Ne>Ie));)q[Ne++]=z[Me++]}function Se(z){for(var q=z.byteLength,fe=new Array,Me=0,Ne=new DataView(z);q>0;){var Ie=Ne.getInt8(Me++);if(Ie<0){var Ke=-Ie;q-=Ke+1;for(var $e=0;$e<Ke;$e++)fe.push(Ne.getUint8(Me++))}else{var Ke=Ie;q-=2;for(var H=Ne.getUint8(Me++),$e=0;$e<Ke+1;$e++)fe.push(H)}}return fe}function de(z,q,fe,Me,Ne,Ie){var It=new DataView(Ie.buffer),Ke=fe[z.idx[0]].width,$e=fe[z.idx[0]].height,H=3,ne=Math.floor(Ke/8),he=Math.ceil(Ke/8),se=Math.ceil($e/8),pe=Ke-(he-1)*8,Ae=$e-(se-1)*8,Ue={value:0},Ze=new Array(H),qe=new Array(H),it=new Array(H),at=new Array(H),et=new Array(H);for(let en=0;en<H;++en)et[en]=q[z.idx[en]],Ze[en]=en<1?0:Ze[en-1]+he*se,qe[en]=new Float32Array(64),it[en]=new Uint16Array(64),at[en]=new Uint16Array(he*64);for(let en=0;en<se;++en){var lt=8;en==se-1&&(lt=Ae);var Pt=8;for(let Zt=0;Zt<he;++Zt){Zt==he-1&&(Pt=pe);for(let hn=0;hn<H;++hn)it[hn].fill(0),it[hn][0]=Ne[Ze[hn]++],J(Ue,Me,it[hn]),ue(it[hn],qe[hn]),je(qe[hn]);Le(qe);for(let hn=0;hn<H;++hn)Xe(qe[hn],at[hn],Zt*64)}let $n=0;for(let Zt=0;Zt<H;++Zt){const hn=fe[z.idx[Zt]].type;for(let Vt=8*en;Vt<8*en+lt;++Vt){$n=et[Zt][Vt];for(let bi=0;bi<ne;++bi){const jn=bi*64+(Vt&7)*8;It.setUint16($n+0*2*hn,at[Zt][jn+0],!0),It.setUint16($n+1*2*hn,at[Zt][jn+1],!0),It.setUint16($n+2*2*hn,at[Zt][jn+2],!0),It.setUint16($n+3*2*hn,at[Zt][jn+3],!0),It.setUint16($n+4*2*hn,at[Zt][jn+4],!0),It.setUint16($n+5*2*hn,at[Zt][jn+5],!0),It.setUint16($n+6*2*hn,at[Zt][jn+6],!0),It.setUint16($n+7*2*hn,at[Zt][jn+7],!0),$n+=8*2*hn}}if(ne!=he)for(let Vt=8*en;Vt<8*en+lt;++Vt){const bi=et[Zt][Vt]+8*ne*2*hn,jn=ne*64+(Vt&7)*8;for(let Wn=0;Wn<Pt;++Wn)It.setUint16(bi+Wn*2*hn,at[Zt][jn+Wn],!0)}}}for(var zt=new Uint16Array(Ke),It=new DataView(Ie.buffer),Dt=0;Dt<H;++Dt){fe[z.idx[Dt]].decoded=!0;var Et=fe[z.idx[Dt]].type;if(fe[Dt].type==2)for(var dn=0;dn<$e;++dn){const en=et[Dt][dn];for(var $t=0;$t<Ke;++$t)zt[$t]=It.getUint16(en+$t*2*Et,!0);for(var $t=0;$t<Ke;++$t)It.setFloat32(en+$t*2*Et,ke(zt[$t]),!0)}}}function J(z,q,fe){for(var Me,Ne=1;Ne<64;)Me=q[z.value],Me==65280?Ne=64:Me>>8==255?Ne+=Me&255:(fe[Ne]=Me,Ne++),z.value++}function ue(z,q){q[0]=ke(z[0]),q[1]=ke(z[1]),q[2]=ke(z[5]),q[3]=ke(z[6]),q[4]=ke(z[14]),q[5]=ke(z[15]),q[6]=ke(z[27]),q[7]=ke(z[28]),q[8]=ke(z[2]),q[9]=ke(z[4]),q[10]=ke(z[7]),q[11]=ke(z[13]),q[12]=ke(z[16]),q[13]=ke(z[26]),q[14]=ke(z[29]),q[15]=ke(z[42]),q[16]=ke(z[3]),q[17]=ke(z[8]),q[18]=ke(z[12]),q[19]=ke(z[17]),q[20]=ke(z[25]),q[21]=ke(z[30]),q[22]=ke(z[41]),q[23]=ke(z[43]),q[24]=ke(z[9]),q[25]=ke(z[11]),q[26]=ke(z[18]),q[27]=ke(z[24]),q[28]=ke(z[31]),q[29]=ke(z[40]),q[30]=ke(z[44]),q[31]=ke(z[53]),q[32]=ke(z[10]),q[33]=ke(z[19]),q[34]=ke(z[23]),q[35]=ke(z[32]),q[36]=ke(z[39]),q[37]=ke(z[45]),q[38]=ke(z[52]),q[39]=ke(z[54]),q[40]=ke(z[20]),q[41]=ke(z[22]),q[42]=ke(z[33]),q[43]=ke(z[38]),q[44]=ke(z[46]),q[45]=ke(z[51]),q[46]=ke(z[55]),q[47]=ke(z[60]),q[48]=ke(z[21]),q[49]=ke(z[34]),q[50]=ke(z[37]),q[51]=ke(z[47]),q[52]=ke(z[50]),q[53]=ke(z[56]),q[54]=ke(z[59]),q[55]=ke(z[61]),q[56]=ke(z[35]),q[57]=ke(z[36]),q[58]=ke(z[48]),q[59]=ke(z[49]),q[60]=ke(z[57]),q[61]=ke(z[58]),q[62]=ke(z[62]),q[63]=ke(z[63])}function je(z){const q=.5*Math.cos(.7853975),fe=.5*Math.cos(3.14159/16),Me=.5*Math.cos(3.14159/8),Ne=.5*Math.cos(3*3.14159/16),Ie=.5*Math.cos(5*3.14159/16),Ke=.5*Math.cos(3*3.14159/8),$e=.5*Math.cos(7*3.14159/16);for(var H=new Array(4),ne=new Array(4),he=new Array(4),se=new Array(4),pe=0;pe<8;++pe){var Ae=pe*8;H[0]=Me*z[Ae+2],H[1]=Ke*z[Ae+2],H[2]=Me*z[Ae+6],H[3]=Ke*z[Ae+6],ne[0]=fe*z[Ae+1]+Ne*z[Ae+3]+Ie*z[Ae+5]+$e*z[Ae+7],ne[1]=Ne*z[Ae+1]-$e*z[Ae+3]-fe*z[Ae+5]-Ie*z[Ae+7],ne[2]=Ie*z[Ae+1]-fe*z[Ae+3]+$e*z[Ae+5]+Ne*z[Ae+7],ne[3]=$e*z[Ae+1]-Ie*z[Ae+3]+Ne*z[Ae+5]-fe*z[Ae+7],he[0]=q*(z[Ae+0]+z[Ae+4]),he[3]=q*(z[Ae+0]-z[Ae+4]),he[1]=H[0]+H[3],he[2]=H[1]-H[2],se[0]=he[0]+he[1],se[1]=he[3]+he[2],se[2]=he[3]-he[2],se[3]=he[0]-he[1],z[Ae+0]=se[0]+ne[0],z[Ae+1]=se[1]+ne[1],z[Ae+2]=se[2]+ne[2],z[Ae+3]=se[3]+ne[3],z[Ae+4]=se[3]-ne[3],z[Ae+5]=se[2]-ne[2],z[Ae+6]=se[1]-ne[1],z[Ae+7]=se[0]-ne[0]}for(var Ue=0;Ue<8;++Ue)H[0]=Me*z[16+Ue],H[1]=Ke*z[16+Ue],H[2]=Me*z[48+Ue],H[3]=Ke*z[48+Ue],ne[0]=fe*z[8+Ue]+Ne*z[24+Ue]+Ie*z[40+Ue]+$e*z[56+Ue],ne[1]=Ne*z[8+Ue]-$e*z[24+Ue]-fe*z[40+Ue]-Ie*z[56+Ue],ne[2]=Ie*z[8+Ue]-fe*z[24+Ue]+$e*z[40+Ue]+Ne*z[56+Ue],ne[3]=$e*z[8+Ue]-Ie*z[24+Ue]+Ne*z[40+Ue]-fe*z[56+Ue],he[0]=q*(z[Ue]+z[32+Ue]),he[3]=q*(z[Ue]-z[32+Ue]),he[1]=H[0]+H[3],he[2]=H[1]-H[2],se[0]=he[0]+he[1],se[1]=he[3]+he[2],se[2]=he[3]-he[2],se[3]=he[0]-he[1],z[0+Ue]=se[0]+ne[0],z[8+Ue]=se[1]+ne[1],z[16+Ue]=se[2]+ne[2],z[24+Ue]=se[3]+ne[3],z[32+Ue]=se[3]-ne[3],z[40+Ue]=se[2]-ne[2],z[48+Ue]=se[1]-ne[1],z[56+Ue]=se[0]-ne[0]}function Le(z){for(var q=0;q<64;++q){var fe=z[0][q],Me=z[1][q],Ne=z[2][q];z[0][q]=fe+1.5747*Ne,z[1][q]=fe-.1873*Me-.4682*Ne,z[2][q]=fe+1.8556*Me}}function Xe(z,q,fe){for(var Me=0;Me<64;++Me)q[fe+Me]=$d.toHalfFloat(gt(z[Me]))}function gt(z){return z<=1?Math.sign(z)*Math.pow(Math.abs(z),2.2):Math.sign(z)*Math.pow(E,Math.abs(z)-1)}function V(z){return new DataView(z.array.buffer,z.offset.value,z.size)}function O(z){var q=z.viewer.buffer.slice(z.offset.value,z.offset.value+z.size),fe=new Uint8Array(Se(q)),Me=new Uint8Array(fe.length);return we(fe),$(fe,Me),new DataView(Me.buffer)}function ee(z){var q=z.array.slice(z.offset.value,z.offset.value+z.size),fe=j_(q),Me=new Uint8Array(fe.length);return we(fe),$(fe,Me),new DataView(Me.buffer)}function le(z){for(var q=z.viewer,fe={value:z.offset.value},Me=new Uint16Array(z.width*z.scanlineBlockSize*(z.channels*z.type)),Ne=new Uint8Array(8192),Ie=0,Ke=new Array(z.channels),$e=0;$e<z.channels;$e++)Ke[$e]={},Ke[$e].start=Ie,Ke[$e].end=Ke[$e].start,Ke[$e].nx=z.width,Ke[$e].ny=z.lines,Ke[$e].size=z.type,Ie+=Ke[$e].nx*Ke[$e].ny*Ke[$e].size;var H=Ge(q,fe),ne=Ge(q,fe);if(ne>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(H<=ne)for(var $e=0;$e<ne-H+1;$e++)Ne[$e+H]=st(q,fe);var he=new Uint16Array(65536),se=R(Ne,he),pe=nt(q,fe);De(z.array,q,fe,pe,Me,Ie);for(var $e=0;$e<z.channels;++$e)for(var Ae=Ke[$e],Ue=0;Ue<Ke[$e].size;++Ue)Ee(Me,Ae.start+Ue,Ae.nx,Ae.size,Ae.ny,Ae.nx*Ae.size,se);xe(he,Me,Ie);for(var Ze=0,qe=new Uint8Array(Me.buffer.byteLength),it=0;it<z.lines;it++)for(var at=0;at<z.channels;at++){var Ae=Ke[at],et=Ae.nx*Ae.size,lt=new Uint8Array(Me.buffer,Ae.end*2,et*2);qe.set(lt,Ze),Ze+=et*2,Ae.end+=et}return new DataView(qe.buffer)}function ge(z){var q=z.array.slice(z.offset.value,z.offset.value+z.size),fe=j_(q);const Me=z.lines*z.channels*z.width,Ne=z.type==1?new Uint16Array(Me):new Uint32Array(Me);let Ie=0,Ke=0;const $e=new Array(4);for(let H=0;H<z.lines;H++)for(let ne=0;ne<z.channels;ne++){let he=0;switch(z.type){case 1:$e[0]=Ie,$e[1]=$e[0]+z.width,Ie=$e[1]+z.width;for(let se=0;se<z.width;++se){const pe=fe[$e[0]++]<<8|fe[$e[1]++];he+=pe,Ne[Ke]=he,Ke++}break;case 2:$e[0]=Ie,$e[1]=$e[0]+z.width,$e[2]=$e[1]+z.width,Ie=$e[2]+z.width;for(let se=0;se<z.width;++se){const pe=fe[$e[0]++]<<24|fe[$e[1]++]<<16|fe[$e[2]++]<<8;he+=pe,Ne[Ke]=he,Ke++}break}}return new DataView(Ne.buffer)}function ye(z){var q=z.viewer,fe={value:z.offset.value},Me=new Uint8Array(z.width*z.lines*(z.channels*z.type*2)),Ne={version:We(q,fe),unknownUncompressedSize:We(q,fe),unknownCompressedSize:We(q,fe),acCompressedSize:We(q,fe),dcCompressedSize:We(q,fe),rleCompressedSize:We(q,fe),rleUncompressedSize:We(q,fe),rleRawSize:We(q,fe),totalAcUncompressedCount:We(q,fe),totalDcUncompressedCount:We(q,fe),acCompression:We(q,fe)};if(Ne.version<2)throw"EXRLoader.parse: "+Ht.compression+" version "+Ne.version+" is unsupported";for(var Ie=new Array,Ke=Ge(q,fe)-2;Ke>0;){var $e=Oe(q.buffer,fe),H=st(q,fe),ne=H>>2&3,he=(H>>4)-1,se=new Int8Array([he])[0],pe=st(q,fe);Ie.push({name:$e,index:se,type:pe,compression:ne}),Ke-=$e.length+3}for(var Ae=Ht.channels,Ue=new Array(z.channels),Ze=0;Ze<z.channels;++Ze){var qe=Ue[Ze]={},it=Ae[Ze];qe.name=it.name,qe.compression=0,qe.decoded=!1,qe.type=it.pixelType,qe.pLinear=it.pLinear,qe.width=z.width,qe.height=z.lines}for(var at={idx:new Array(3)},et=0;et<z.channels;++et)for(var qe=Ue[et],Ze=0;Ze<Ie.length;++Ze){var lt=Ie[Ze];qe.name==lt.name&&(qe.compression=lt.compression,lt.index>=0&&(at.idx[lt.index]=et),qe.offset=et)}if(Ne.acCompressedSize>0)switch(Ne.acCompression){case 0:var It=new Uint16Array(Ne.totalAcUncompressedCount);De(z.array,q,fe,Ne.acCompressedSize,It,Ne.totalAcUncompressedCount);break;case 1:var Pt=z.array.slice(fe.value,fe.value+Ne.totalAcUncompressedCount),zt=j_(Pt),It=new Uint16Array(zt.buffer);fe.value+=Ne.totalAcUncompressedCount;break}if(Ne.dcCompressedSize>0){var Dt={array:z.array,offset:fe,size:Ne.dcCompressedSize},Et=new Uint16Array(ee(Dt).buffer);fe.value+=Ne.dcCompressedSize}if(Ne.rleRawSize>0){var Pt=z.array.slice(fe.value,fe.value+Ne.rleCompressedSize),zt=j_(Pt),dn=Se(zt.buffer);fe.value+=Ne.rleCompressedSize}for(var $t=0,en=new Array(Ue.length),Ze=0;Ze<en.length;++Ze)en[Ze]=new Array;for(var $n=0;$n<z.lines;++$n)for(var Zt=0;Zt<Ue.length;++Zt)en[Zt].push($t),$t+=Ue[Zt].width*z.type*2;de(at,en,Ue,It,Et,Me);for(var Ze=0;Ze<Ue.length;++Ze){var qe=Ue[Ze];if(!qe.decoded)switch(qe.compression){case 2:for(var hn=0,Vt=0,$n=0;$n<z.lines;++$n){for(var bi=en[Ze][hn],jn=0;jn<qe.width;++jn){for(var Wn=0;Wn<2*qe.type;++Wn)Me[bi++]=dn[Vt+Wn*qe.width*qe.height];Vt++}hn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Me.buffer)}function Oe(z,q){for(var fe=new Uint8Array(z),Me=0;fe[q.value+Me]!=0;)Me+=1;var Ne=new TextDecoder().decode(fe.slice(q.value,q.value+Me));return q.value=q.value+Me+1,Ne}function Te(z,q,fe){var Me=new TextDecoder().decode(new Uint8Array(z).slice(q.value,q.value+fe));return q.value=q.value+fe,Me}function ze(z,q){var fe=He(z,q),Me=nt(z,q);return[fe,Me]}function Je(z,q){var fe=nt(z,q),Me=nt(z,q);return[fe,Me]}function He(z,q){var fe=z.getInt32(q.value,!0);return q.value=q.value+4,fe}function nt(z,q){var fe=z.getUint32(q.value,!0);return q.value=q.value+4,fe}function Tt(z,q){var fe=z[q.value];return q.value=q.value+1,fe}function st(z,q){var fe=z.getUint8(q.value);return q.value=q.value+1,fe}const We=function(z,q){let fe;return"getBigInt64"in DataView.prototype?fe=Number(z.getBigInt64(q.value,!0)):fe=z.getUint32(q.value+4,!0)+Number(z.getUint32(q.value,!0)<<32),q.value+=8,fe};function vt(z,q){var fe=z.getFloat32(q.value,!0);return q.value+=4,fe}function ce(z,q){return $d.toHalfFloat(vt(z,q))}function ke(z){var q=(z&31744)>>10,fe=z&1023;return(z>>15?-1:1)*(q?q===31?fe?NaN:1/0:Math.pow(2,q-15)*(1+fe/1024):6103515625e-14*(fe/1024))}function Ge(z,q){var fe=z.getUint16(q.value,!0);return q.value+=2,fe}function ht(z,q){return ke(Ge(z,q))}function Qe(z,q,fe,Me){for(var Ne=fe.value,Ie=[];fe.value<Ne+Me-1;){var Ke=Oe(q,fe),$e=He(z,fe),H=st(z,fe);fe.value+=3;var ne=He(z,fe),he=He(z,fe);Ie.push({name:Ke,pixelType:$e,pLinear:H,xSampling:ne,ySampling:he})}return fe.value+=1,Ie}function Ve(z,q){var fe=vt(z,q),Me=vt(z,q),Ne=vt(z,q),Ie=vt(z,q),Ke=vt(z,q),$e=vt(z,q),H=vt(z,q),ne=vt(z,q);return{redX:fe,redY:Me,greenX:Ne,greenY:Ie,blueX:Ke,blueY:$e,whiteX:H,whiteY:ne}}function xt(z,q){var fe=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Me=st(z,q);return fe[Me]}function Ot(z,q){var fe=nt(z,q),Me=nt(z,q),Ne=nt(z,q),Ie=nt(z,q);return{xMin:fe,yMin:Me,xMax:Ne,yMax:Ie}}function bn(z,q){var fe=["INCREASING_Y"],Me=st(z,q);return fe[Me]}function ft(z,q){var fe=vt(z,q),Me=vt(z,q);return[fe,Me]}function Ct(z,q){var fe=vt(z,q),Me=vt(z,q),Ne=vt(z,q);return[fe,Me,Ne]}function Gt(z,q,fe,Me,Ne){if(Me==="string"||Me==="stringvector"||Me==="iccProfile")return Te(q,fe,Ne);if(Me==="chlist")return Qe(z,q,fe,Ne);if(Me==="chromaticities")return Ve(z,fe);if(Me==="compression")return xt(z,fe);if(Me==="box2i")return Ot(z,fe);if(Me==="lineOrder")return bn(z,fe);if(Me==="float")return vt(z,fe);if(Me==="v2f")return ft(z,fe);if(Me==="v3f")return Ct(z,fe);if(Me==="int")return He(z,fe);if(Me==="rational")return ze(z,fe);if(Me==="timecode")return Je(z,fe);if(Me==="preview")return fe.value+=Ne,"skipped";fe.value+=Ne}function dt(z,q,fe){const Me={};if(z.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Me.version=z.getUint8(4);const Ne=z.getUint8(5);Me.spec={singleTile:!!(Ne&2),longName:!!(Ne&4),deepFormat:!!(Ne&8),multiPart:!!(Ne&16)},fe.value=8;for(var Ie=!0;Ie;){var Ke=Oe(q,fe);if(Ke==0)Ie=!1;else{var $e=Oe(q,fe),H=nt(z,fe),ne=Gt(z,q,fe,$e,H);ne===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${$e}'.`):Me[Ke]=ne}}if(Ne&-5)throw console.error("EXRHeader:",Me),"THREE.EXRLoader: provided file is currently unsupported.";return Me}function Bt(z,q,fe,Me,Ne){const Ie={size:0,viewer:q,array:fe,offset:Me,width:z.dataWindow.xMax-z.dataWindow.xMin+1,height:z.dataWindow.yMax-z.dataWindow.yMin+1,channels:z.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:z.channels[0].pixelType,uncompress:null,getter:null,format:null,[cg?"colorSpace":"encoding"]:null};switch(z.compression){case"NO_COMPRESSION":Ie.lines=1,Ie.uncompress=V;break;case"RLE_COMPRESSION":Ie.lines=1,Ie.uncompress=O;break;case"ZIPS_COMPRESSION":Ie.lines=1,Ie.uncompress=ee;break;case"ZIP_COMPRESSION":Ie.lines=16,Ie.uncompress=ee;break;case"PIZ_COMPRESSION":Ie.lines=32,Ie.uncompress=le;break;case"PXR24_COMPRESSION":Ie.lines=16,Ie.uncompress=ge;break;case"DWAA_COMPRESSION":Ie.lines=32,Ie.uncompress=ye;break;case"DWAB_COMPRESSION":Ie.lines=256,Ie.uncompress=ye;break;default:throw"EXRLoader.parse: "+z.compression+" is unsupported"}if(Ie.scanlineBlockSize=Ie.lines,Ie.type==1)switch(Ne){case yi:Ie.getter=ht,Ie.inputSize=2;break;case vr:Ie.getter=Ge,Ie.inputSize=2;break}else if(Ie.type==2)switch(Ne){case yi:Ie.getter=vt,Ie.inputSize=4;break;case vr:Ie.getter=ce,Ie.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Ie.type+" for "+z.compression+".";Ie.blockCount=(z.dataWindow.yMax+1)/Ie.scanlineBlockSize;for(var Ke=0;Ke<Ie.blockCount;Ke++)We(q,Me);Ie.outputChannels=Ie.channels==3?4:Ie.channels;const $e=Ie.width*Ie.height*Ie.outputChannels;switch(Ne){case yi:Ie.byteArray=new Float32Array($e),Ie.channels<Ie.outputChannels&&Ie.byteArray.fill(1,0,$e);break;case vr:Ie.byteArray=new Uint16Array($e),Ie.channels<Ie.outputChannels&&Ie.byteArray.fill(15360,0,$e);break;default:console.error("THREE.EXRLoader: unsupported type: ",Ne);break}return Ie.bytesPerLine=Ie.width*Ie.inputSize*Ie.channels,Ie.outputChannels==4?Ie.format=Fi:Ie.format=qy,cg?Ie.colorSpace="srgb-linear":Ie.encoding=3e3,Ie}const Mt=new DataView(e),Ut=new Uint8Array(e),In={value:0},Ht=dt(Mt,e,In),Nt=Bt(Ht,Mt,Ut,In,this.type),si={value:0},Rn={R:0,G:1,B:2,A:3,Y:0};for(let z=0;z<Nt.height/Nt.scanlineBlockSize;z++){const q=nt(Mt,In);Nt.size=nt(Mt,In),Nt.lines=q+Nt.scanlineBlockSize>Nt.height?Nt.height-q:Nt.scanlineBlockSize;const Me=Nt.size<Nt.lines*Nt.bytesPerLine?Nt.uncompress(Nt):V(Nt);In.value+=Nt.size;for(let Ne=0;Ne<Nt.scanlineBlockSize;Ne++){const Ie=Ne+z*Nt.scanlineBlockSize;if(Ie>=Nt.height)break;for(let Ke=0;Ke<Nt.channels;Ke++){const $e=Rn[Ht.channels[Ke].name];for(let H=0;H<Nt.width;H++){si.value=(Ne*(Nt.channels*Nt.width)+Ke*Nt.width+H)*Nt.inputSize;const ne=(Nt.height-1-Ie)*(Nt.width*Nt.outputChannels)+H*Nt.outputChannels+$e;Nt.byteArray[ne]=Nt.getter(Me,si)}}}}return{header:Ht,width:Nt.width,height:Nt.height,data:Nt.byteArray,format:Nt.format,[cg?"colorSpace":"encoding"]:Nt[cg?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(a,o){cg?a.colorSpace=o.colorSpace:a.encoding=o.encoding,a.minFilter=On,a.magFilter=On,a.generateMipmaps=!1,a.flipY=!1,t&&t(a,o)}return super.load(e,s,i,r)}}const nfe=3e3,ife=3001,rfe=F.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:i=1,floatIntensity:r=1,floatingRange:s=[-.1,.1],autoInvalidate:a=!1,...o},l)=>{const c=F.useRef(null);F.useImperativeHandle(l,()=>c.current,[]);const u=F.useRef(Math.random()*1e4);return BS(d=>{var h,p;if(!e||t===0)return;a&&d.invalidate();const y=u.current+d.clock.elapsedTime;c.current.rotation.x=Math.cos(y/4*t)/8*i,c.current.rotation.y=Math.sin(y/4*t)/8*i,c.current.rotation.z=Math.sin(y/4*t)/20*i;let x=Math.sin(y/4*t)/10;x=Ii.mapLinear(x,-.1,.1,(h=s==null?void 0:s[0])!==null&&h!==void 0?h:-.1,(p=s==null?void 0:s[1])!==null&&p!==void 0?p:.1),c.current.position.y=x*r,c.current.updateMatrix()}),F.createElement("group",o,F.createElement("group",{ref:c,matrixAutoUpdate:!1},n))}),MH=(n,e,t)=>{let i;switch(n){case gs:i=new Uint8ClampedArray(e*t*4);break;case vr:i=new Uint16Array(e*t*4);break;case ol:i=new Uint32Array(e*t*4);break;case uS:i=new Int8Array(e*t*4);break;case dS:i=new Int16Array(e*t*4);break;case Gy:i=new Int32Array(e*t*4);break;case yi:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let z_;const sfe=(n,e,t,i)=>{if(z_!==void 0)return z_;const r=new Ya(1,1,i);e.setRenderTarget(r);const s=new Zn(new $u,new fc({color:16777215}));e.render(s,t),e.setRenderTarget(null);const a=MH(n,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,a),r.dispose(),s.geometry.dispose(),s.material.dispose(),z_=a[0]!==0,z_};class kk{constructor(e){var t,i,r,s,a,o,l,c,u,d,h,p,y,x,_,v;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(w){throw this._renderer.setRenderTarget(null),w}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const b={format:Fi,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter)!==void 0?(o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter:On,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter:On,samples:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.samples)!==void 0?(d=e.renderTargetOptions)===null||d===void 0?void 0:d.samples:void 0,wrapS:((h=e.renderTargetOptions)===null||h===void 0?void 0:h.wrapS)!==void 0?(p=e.renderTargetOptions)===null||p===void 0?void 0:p.wrapS:Ai,wrapT:((y=e.renderTargetOptions)===null||y===void 0?void 0:y.wrapT)!==void 0?(x=e.renderTargetOptions)===null||x===void 0?void 0:x.wrapT:Ai};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=kk.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Zy,this._camera=new hm,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!sfe(this._type,this._renderer,this._camera,b)){let w;switch(this._type){case vr:w=this._renderer.extensions.has("EXT_color_buffer_float")?yi:void 0;break}w!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${yi}`),this._type=w):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Zn(new $u,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Ya(this.width,this.height,b),this._renderTarget.texture.mapping=((_=e.renderTargetOptions)===null||_===void 0?void 0:_.mapping)!==void 0?(v=e.renderTargetOptions)===null||v===void 0?void 0:v.mapping:Ru}static instantiateRenderer(){const e=new uk;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=MH(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new So(this.toArray(),this.width,this.height,Fi,this._type,(e==null?void 0:e.mapping)||Ru,(e==null?void 0:e.wrapS)||Ai,(e==null?void 0:e.wrapT)||Ai,(e==null?void 0:e.magFilter)||On,(e==null?void 0:e.minFilter)||On,(e==null?void 0:e.anisotropy)||1,ll);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof js&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof Fn&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof Fn&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const afe=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,ofe=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class lfe extends js{constructor({gamma:e,offsetHdr:t,offsetSdr:i,gainMapMin:r,gainMapMax:s,maxDisplayBoost:a,hdrCapacityMin:o,hdrCapacityMax:l,sdr:c,gainMap:u}){super({name:"GainMapDecoderMaterial",vertexShader:afe,fragmentShader:ofe,uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new Z(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new Z().fromArray(t)},offsetSdr:{value:new Z().fromArray(i)},gainMapMin:{value:new Z().fromArray(r)},gainMapMax:{value:new Z().fromArray(s)},weightFactor:{value:(Math.log2(a)-o)/(l-o)}},blending:nl,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=a,this._hdrCapacityMin=o,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class EH extends Error{}class TH extends Error{}const ug=(n,e,t)=>{const i=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(i)return i[1];const r=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(r){const s=r[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(a=>a.replace(/<\/?rdf:li>/g,"")):r[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},cfe=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const i=e.indexOf("x:xmpmeta>",t),r=e.slice(t,i+10);try{const s=ug(r,"hdrgm:GainMapMin","0"),a=ug(r,"hdrgm:GainMapMax"),o=ug(r,"hdrgm:Gamma","1"),l=ug(r,"hdrgm:OffsetSDR","0.015625"),c=ug(r,"hdrgm:OffsetHDR","0.015625"),u=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),d=u?u[1]:"0",h=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!h)throw new Error("Incomplete gainmap metadata");const p=h[1];return{gainMapMin:Array.isArray(s)?s.map(y=>parseFloat(y)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(a)?a.map(y=>parseFloat(y)):[parseFloat(a),parseFloat(a),parseFloat(a)],gamma:Array.isArray(o)?o.map(y=>parseFloat(y)):[parseFloat(o),parseFloat(o),parseFloat(o)],offsetSdr:Array.isArray(l)?l.map(y=>parseFloat(y)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(c)?c.map(y=>parseFloat(y)):[parseFloat(c),parseFloat(c),parseFloat(c)],hdrCapacityMin:parseFloat(d),hdrCapacityMax:parseFloat(p)}}catch{}t=e.indexOf("<x:xmpmeta",i)}};class ufe{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const r=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const a=s.byteLength;let o=2,l=0,c;for(;o<a;){if(++l>250){i(new Error(`Found no marker after ${l} loops `));return}if(s.getUint8(o)!==255){i(new Error(`Not a valid marker at offset 0x${o.toString(16)}, found: 0x${s.getUint8(o).toString(16)}`));return}if(c=s.getUint8(o+1),r&&console.log(`Marker: ${c.toString(16)}`),c===226){r&&console.log("Found APP2 marker (0xffe2)");const u=o+4;if(s.getUint32(u)===1297106432){const d=u+4;let h;if(s.getUint16(d)===18761)h=!1;else if(s.getUint16(d)===19789)h=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(d+2,!h)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const p=s.getUint32(d+4,!h);if(p<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const y=d+p,x=s.getUint16(y,!h),_=y+2;let v=0;for(let A=_;A<_+12*x;A+=12)s.getUint16(A,!h)===45057&&(v=s.getUint32(A+8,!h));const b=4,w=y+2+x*12+b,S=[];for(let A=w;A<w+v*16;A+=16){const P={MPType:s.getUint32(A,!h),size:s.getUint32(A+4,!h),dataOffset:s.getUint32(A+8,!h),dependantImages:s.getUint32(A+12,!h),start:-1,end:-1,isFII:!1};P.dataOffset?(P.start=d+P.dataOffset,P.isFII=!1):(P.start=0,P.isFII=!0),P.end=P.start+P.size,S.push(P)}if(this.options.extractNonFII&&S.length){const A=new Blob([s]),P=[];for(const k of S){if(k.isFII&&!this.options.extractFII)continue;const T=A.slice(k.start,k.end+1,"image/jpeg");P.push(T)}t(P)}}}o+=2+s.getUint16(o+2)}})}}const dfe=async n=>{const e=cfe(n);if(!e)throw new TH("Gain map XMP metadata not found");const i=await new ufe({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new EH("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},b4=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=r=>{t(r)},i.src=URL.createObjectURL(n)});class CH extends Yi{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new US}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new lfe({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Fn,sdr:new Fn});return new kk({width:16,height:16,type:vr,colorSpace:ll,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,i,r){const s=r?new Blob([r],{type:"image/jpeg"}):void 0,a=new Blob([i],{type:"image/jpeg"});let o,l,c=!1;if(typeof createImageBitmap>"u"){const h=await Promise.all([s?b4(s):Promise.resolve(void 0),b4(a)]);l=h[0],o=h[1],c=!0}else{const h=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(a,{imageOrientation:"flipY"})]);l=h[0],o=h[1]}const u=new Fn(l||new ImageData(2,2),Ru,Ai,Ai,On,ZC,Fi,gs,1,ll);u.flipY=c,u.needsUpdate=!0;const d=new Fn(o,Ru,Ai,Ai,On,ZC,Fi,gs,1,Mn);d.flipY=c,d.needsUpdate=!0,e.width=o.width,e.height=o.height,e.material.gainMap=u,e.material.sdr=d,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class hfe extends CH{load([e,t,i],r,s,a){const o=this.prepareQuadRenderer();let l,c,u;const d=async()=>{if(l&&c&&u){try{await this.render(o,u,l,c)}catch(E){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(i),typeof a=="function"&&a(E),o.disposeOnDemandRenderer();return}typeof r=="function"&&r(o),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(i),o.disposeOnDemandRenderer()}};let h=!0,p=0,y=0,x=!0,_=0,v=0,b=!0,w=0,S=0;const A=()=>{if(typeof s=="function"){const E=p+_+w,R=y+v+S,I=h&&x&&b;s(new ProgressEvent("progress",{lengthComputable:I,loaded:R,total:E}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(i);const P=new qr(this._internalLoadingManager);P.setResponseType("arraybuffer"),P.setRequestHeader(this.requestHeader),P.setPath(this.path),P.setWithCredentials(this.withCredentials),P.load(e,async E=>{if(typeof E=="string")throw new Error("Invalid sdr buffer");l=E,await d()},E=>{h=E.lengthComputable,y=E.loaded,p=E.total,A()},E=>{this.manager.itemError(e),typeof a=="function"&&a(E)});const k=new qr(this._internalLoadingManager);k.setResponseType("arraybuffer"),k.setRequestHeader(this.requestHeader),k.setPath(this.path),k.setWithCredentials(this.withCredentials),k.load(t,async E=>{if(typeof E=="string")throw new Error("Invalid gainmap buffer");c=E,await d()},E=>{x=E.lengthComputable,v=E.loaded,_=E.total,A()},E=>{this.manager.itemError(t),typeof a=="function"&&a(E)});const T=new qr(this._internalLoadingManager);return T.setRequestHeader(this.requestHeader),T.setPath(this.path),T.setWithCredentials(this.withCredentials),T.load(i,async E=>{if(typeof E!="string")throw new Error("Invalid metadata string");u=JSON.parse(E),await d()},E=>{b=E.lengthComputable,S=E.loaded,w=E.total,A()},E=>{this.manager.itemError(i),typeof a=="function"&&a(E)}),o}}class ffe extends CH{load(e,t,i,r){const s=this.prepareQuadRenderer(),a=new qr(this._internalLoadingManager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(this.withCredentials),this.manager.itemStart(e),a.load(e,async o=>{if(typeof o=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(o);let c,u,d;try{const h=await dfe(l);c=h.sdr,u=h.gainMap,d=h.metadata}catch(h){if(h instanceof TH||h instanceof EH)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),d={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=l;else throw h}try{await this.render(s,d,c,u)}catch(h){this.manager.itemError(e),typeof r=="function"&&r(h),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},i,o=>{this.manager.itemError(e),typeof r=="function"&&r(o)}),s}}const by={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},AH="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",vp=n=>Array.isArray(n),Nk=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function KS({files:n=Nk,path:e="",preset:t=void 0,encoding:i=void 0,extensions:r}={}){let s=null,a=!1;t&&(Ik(t),n=by[t],e=AH),a=vp(n);const{extension:o,isCubemap:l}=Dk(n);if(s=Lk(o),!s)throw new Error("useEnvironment: Unrecognized file extension: "+n);const c=bu(p=>p.gl);F.useLayoutEffect(()=>{if(o!=="webp"&&o!=="jpg"&&o!=="jpeg")return;function p(){ic.clear(s,a?[n]:n)}c.domElement.addEventListener("webglcontextlost",p,{once:!0})},[n,c.domElement]);const u=ic(s,a?[n]:n,p=>{(o==="webp"||o==="jpg"||o==="jpeg")&&p.setRenderer(c),p.setPath==null||p.setPath(e),r&&r(p)});let d=a?u[0]:u;if(o==="jpg"||o==="jpeg"||o==="webp"){var h;d=(h=d.renderTarget)==null?void 0:h.texture}return d.mapping=l?al:Sh,"colorSpace"in d?d.colorSpace=i??l?"srgb":"srgb-linear":d.encoding=i??l?ife:nfe,d}const pfe={files:Nk,path:"",preset:void 0,extensions:void 0};KS.preload=n=>{const e={...pfe,...n};let{files:t,path:i=""}=e;const{preset:r,extensions:s}=e;r&&(Ik(r),t=by[r],i=AH);const{extension:a}=Dk(t);if(a==="webp"||a==="jpg"||a==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const o=Lk(a);if(!o)throw new Error("useEnvironment: Unrecognized file extension: "+t);ic.preload(o,vp(t)?[t]:t,l=>{l.setPath==null||l.setPath(i),s&&s(l)})};const mfe={files:Nk,preset:void 0};KS.clear=n=>{const e={...mfe,...n};let{files:t}=e;const{preset:i}=e;i&&(Ik(i),t=by[i]);const{extension:r}=Dk(t),s=Lk(r);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);ic.clear(s,vp(t)?[t]:t)};function Ik(n){if(!(n in by))throw new Error("Preset must be one of: "+Object.keys(by).join(", "))}function Dk(n){var e;const t=vp(n)&&n.length===6,i=vp(n)&&n.length===3&&n.some(a=>a.endsWith("json")),r=vp(n)?n[0]:n;return{extension:t?"cube":i?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(e=r.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:i}}function Lk(n){return n==="cube"?H6:n==="hdr"?efe:n==="exr"?tfe:n==="jpg"||n==="jpeg"?ffe:n==="webp"?hfe:null}const gfe=n=>n.current&&n.current.isScene,yfe=n=>gfe(n)?n.current:n;function Ok(n,e,t,i,r={}){var s,a,o,l;r={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const c=yfe(e||t),u=c.background,d=c.environment,h={backgroundBlurriness:c.backgroundBlurriness,backgroundIntensity:c.backgroundIntensity,backgroundRotation:(s=(a=c.backgroundRotation)==null||a.clone==null?void 0:a.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:c.environmentIntensity,environmentRotation:(o=(l=c.environmentRotation)==null||l.clone==null?void 0:l.clone())!==null&&o!==void 0?o:[0,0,0]};return n!=="only"&&(c.environment=i),n&&(c.background=i),Dl(c,r),()=>{n!=="only"&&(c.environment=d),n&&(c.background=u),Dl(c,h)}}function Fk({scene:n,background:e=!1,map:t,...i}){const r=bu(s=>s.scene);return F.useLayoutEffect(()=>{if(t)return Ok(e,n,r,t,i)}),null}function PH({background:n=!1,scene:e,blur:t,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:a,environmentRotation:o,...l}){const c=KS(l),u=bu(d=>d.scene);return F.useLayoutEffect(()=>Ok(n,e,u,c,{backgroundBlurriness:t??i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:a,environmentRotation:o})),F.useEffect(()=>()=>{c.dispose()},[c]),null}function vfe({children:n,near:e=.1,far:t=1e3,resolution:i=256,frames:r=1,map:s,background:a=!1,blur:o,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:d,environmentRotation:h,scene:p,files:y,path:x,preset:_=void 0,extensions:v}){const b=bu(T=>T.gl),w=bu(T=>T.scene),S=F.useRef(null),[A]=F.useState(()=>new Zy),P=F.useMemo(()=>{const T=new IR(i);return T.texture.type=vr,T},[i]);F.useEffect(()=>()=>{P.dispose()},[P]),F.useLayoutEffect(()=>{if(r===1){const T=b.autoClear;b.autoClear=!0,S.current.update(b,A),b.autoClear=T}return Ok(a,p,w,P.texture,{backgroundBlurriness:o??l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:d,environmentRotation:h})},[n,A,P.texture,p,w,a,r,b]);let k=1;return BS(()=>{if(r===1/0||k<r){const T=b.autoClear;b.autoClear=!0,S.current.update(b,A),b.autoClear=T,k++}}),F.createElement(F.Fragment,null,$ce(F.createElement(F.Fragment,null,n,F.createElement("cubeCamera",{ref:S,args:[e,t,P]}),y||_?F.createElement(PH,{background:!0,files:y,preset:_,path:x,extensions:v}):s?F.createElement(Fk,{background:!0,map:s,extensions:v}):null),A))}function xfe(n){var e,t,i,r;const s=KS(n),a=n.map||s;F.useMemo(()=>p8({GroundProjectedEnvImpl:Qhe}),[]),F.useEffect(()=>()=>{s.dispose()},[s]);const o=F.useMemo(()=>[a],[a]),l=(e=n.ground)==null?void 0:e.height,c=(t=n.ground)==null?void 0:t.radius,u=(i=(r=n.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return F.createElement(F.Fragment,null,F.createElement(Fk,ow({},n,{map:a})),F.createElement("groundProjectedEnvImpl",{args:o,scale:u,height:l,radius:c}))}function _fe(n){return n.ground?F.createElement(xfe,n):n.map?F.createElement(Fk,n):n.children?F.createElement(vfe,n):F.createElement(PH,n)}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.8.2
*/var La=Uint8Array,np=Uint16Array,bfe=Int32Array,RH=new La([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),kH=new La([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wfe=new La([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),NH=function(n,e){for(var t=new np(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new bfe(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return{b:t,r}},IH=NH(RH,2),DH=IH.b,Sfe=IH.r;DH[28]=258,Sfe[258]=28;var Mfe=NH(kH,0),Efe=Mfe.b,EA=new np(32768);for(var ti=0;ti<32768;++ti){var Ic=(ti&43690)>>1|(ti&21845)<<1;Ic=(Ic&52428)>>2|(Ic&13107)<<2,Ic=(Ic&61680)>>4|(Ic&3855)<<4,EA[ti]=((Ic&65280)>>8|(Ic&255)<<8)>>1}var d0=function(n,e,t){for(var i=n.length,r=0,s=new np(e);r<i;++r)n[r]&&++s[n[r]-1];var a=new np(e);for(r=1;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;var o;if(t){o=new np(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var c=r<<4|n[r],u=e-n[r],d=a[n[r]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)o[EA[d]>>l]=c}else for(o=new np(i),r=0;r<i;++r)n[r]&&(o[r]=EA[a[n[r]-1]++]>>15-n[r]);return o},fv=new La(288);for(var ti=0;ti<144;++ti)fv[ti]=8;for(var ti=144;ti<256;++ti)fv[ti]=9;for(var ti=256;ti<280;++ti)fv[ti]=7;for(var ti=280;ti<288;++ti)fv[ti]=8;var LH=new La(32);for(var ti=0;ti<32;++ti)LH[ti]=5;var Tfe=d0(fv,9,1),Cfe=d0(LH,5,1),i2=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},oo=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},r2=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Afe=function(n){return(n+7)/8|0},Pfe=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new La(n.subarray(e,t))},Rfe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],fo=function(n,e,t){var i=new Error(e||Rfe[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,fo),!t)throw i;return i},kfe=function(n,e,t,i){var r=n.length,s=i?i.length:0;if(!r||e.f&&!e.l)return t||new La(0);var a=!t,o=a||e.i!=2,l=e.i;a&&(t=new La(r*3));var c=function(De){var xe=t.length;if(De>xe){var we=new La(Math.max(xe*2,De));we.set(t),t=we}},u=e.f||0,d=e.p||0,h=e.b||0,p=e.l,y=e.d,x=e.m,_=e.n,v=r*8;do{if(!p){u=oo(n,d,1);var b=oo(n,d+1,3);if(d+=3,b)if(b==1)p=Tfe,y=Cfe,x=9,_=5;else if(b==2){var P=oo(n,d,31)+257,k=oo(n,d+10,15)+4,T=P+oo(n,d+5,31)+1;d+=14;for(var E=new La(T),R=new La(19),I=0;I<k;++I)R[wfe[I]]=oo(n,d+I*3,7);d+=k*3;for(var D=i2(R),B=(1<<D)-1,G=d0(R,D,1),I=0;I<T;){var Y=G[oo(n,d,B)];d+=Y&15;var w=Y>>4;if(w<16)E[I++]=w;else{var X=0,Q=0;for(w==16?(Q=3+oo(n,d,3),d+=2,X=E[I-1]):w==17?(Q=3+oo(n,d,7),d+=3):w==18&&(Q=11+oo(n,d,127),d+=7);Q--;)E[I++]=X}}var L=E.subarray(0,P),W=E.subarray(P);x=i2(L),_=i2(W),p=d0(L,x,1),y=d0(W,_,1)}else fo(1);else{var w=Afe(d)+4,S=n[w-4]|n[w-3]<<8,A=w+S;if(A>r){l&&fo(0);break}o&&c(h+S),t.set(n.subarray(w,A),h),e.b=h+=S,e.p=d=A*8,e.f=u;continue}if(d>v){l&&fo(0);break}}o&&c(h+131072);for(var j=(1<<x)-1,te=(1<<_)-1,ae=d;;ae=d){var X=p[r2(n,d)&j],me=X>>4;if(d+=X&15,d>v){l&&fo(0);break}if(X||fo(2),me<256)t[h++]=me;else if(me==256){ae=d,p=null;break}else{var K=me-254;if(me>264){var I=me-257,re=RH[I];K=oo(n,d,(1<<re)-1)+DH[I],d+=re}var oe=y[r2(n,d)&te],_e=oe>>4;oe||fo(3),d+=oe&15;var W=Efe[_e];if(_e>3){var re=kH[_e];W+=r2(n,d)&(1<<re)-1,d+=re}if(d>v){l&&fo(0);break}o&&c(h+131072);var Ce=h+K;if(h<W){var Ee=s-W,Pe=Math.min(W,Ce);for(Ee+h<0&&fo(3);h<Pe;++h)t[h]=i[Ee+h]}for(;h<Ce;++h)t[h]=t[h-W]}}e.l=p,e.p=ae,e.b=h,e.f=u,p&&(u=1,e.m=x,e.d=y,e.n=_)}while(!u);return h!=t.length&&a?Pfe(t,0,h):t.subarray(0,h)},Nfe=new La(0),Ife=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&fo(6,"invalid zlib data"),(n[1]>>5&1)==+!e&&fo(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Dfe(n,e){return kfe(n.subarray(Ife(n,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var Lfe=typeof TextDecoder<"u"&&new TextDecoder,Ofe=0;try{Lfe.decode(Nfe,{stream:!0}),Ofe=1}catch{}function OH(n,e,t){const i=t.length-n-1;if(e>=t[i])return i-1;if(e<=t[n])return n;let r=n,s=i,a=Math.floor((r+s)/2);for(;e<t[a]||e>=t[a+1];)e<t[a]?s=a:r=a,a=Math.floor((r+s)/2);return a}function Ffe(n,e,t,i){const r=[],s=[],a=[];r[0]=1;for(let o=1;o<=t;++o){s[o]=e-i[n+1-o],a[o]=i[n+o]-e;let l=0;for(let c=0;c<o;++c){const u=a[c+1],d=s[o-c],h=r[c]/(u+d);r[c]=l+u*h,l=d*h}r[o]=l}return r}function Ufe(n,e,t,i){const r=OH(n,i,e),s=Ffe(r,i,n,e),a=new mn(0,0,0,0);for(let o=0;o<=n;++o){const l=t[r-n+o],c=s[o],u=l.w*c;a.x+=l.x*u,a.y+=l.y*u,a.z+=l.z*u,a.w+=l.w*c}return a}function jfe(n,e,t,i,r){const s=[];for(let d=0;d<=t;++d)s[d]=0;const a=[];for(let d=0;d<=i;++d)a[d]=s.slice(0);const o=[];for(let d=0;d<=t;++d)o[d]=s.slice(0);o[0][0]=1;const l=s.slice(0),c=s.slice(0);for(let d=1;d<=t;++d){l[d]=e-r[n+1-d],c[d]=r[n+d]-e;let h=0;for(let p=0;p<d;++p){const y=c[p+1],x=l[d-p];o[d][p]=y+x;const _=o[p][d-1]/o[d][p];o[p][d]=h+y*_,h=x*_}o[d][d]=h}for(let d=0;d<=t;++d)a[0][d]=o[d][t];for(let d=0;d<=t;++d){let h=0,p=1;const y=[];for(let x=0;x<=t;++x)y[x]=s.slice(0);y[0][0]=1;for(let x=1;x<=i;++x){let _=0;const v=d-x,b=t-x;d>=x&&(y[p][0]=y[h][0]/o[b+1][v],_=y[p][0]*o[v][b]);const w=v>=-1?1:-v,S=d-1<=b?x-1:t-d;for(let P=w;P<=S;++P)y[p][P]=(y[h][P]-y[h][P-1])/o[b+1][v+P],_+=y[p][P]*o[v+P][b];d<=b&&(y[p][x]=-y[h][x-1]/o[b+1][d],_+=y[p][x]*o[d][b]),a[x][d]=_;const A=h;h=p,p=A}}let u=t;for(let d=1;d<=i;++d){for(let h=0;h<=t;++h)a[d][h]*=u;u*=t-d}return a}function zfe(n,e,t,i,r){const s=r<n?r:n,a=[],o=OH(n,i,e),l=jfe(o,i,n,s,e),c=[];for(let u=0;u<t.length;++u){const d=t[u].clone(),h=d.w;d.x*=h,d.y*=h,d.z*=h,c[u]=d}for(let u=0;u<=s;++u){const d=c[o-n].clone().multiplyScalar(l[u][0]);for(let h=1;h<=n;++h)d.add(c[o-n+h].clone().multiplyScalar(l[u][h]));a[u]=d}for(let u=s+1;u<=r+1;++u)a[u]=new mn(0,0,0);return a}function Bfe(n,e){let t=1;for(let r=2;r<=n;++r)t*=r;let i=1;for(let r=2;r<=e;++r)i*=r;for(let r=2;r<=n-e;++r)i*=r;return t/i}function Hfe(n){const e=n.length,t=[],i=[];for(let s=0;s<e;++s){const a=n[s];t[s]=new Z(a.x,a.y,a.z),i[s]=a.w}const r=[];for(let s=0;s<e;++s){const a=t[s].clone();for(let o=1;o<=s;++o)a.sub(r[s-o].clone().multiplyScalar(Bfe(s,o)*i[o]));r[s]=a.divideScalar(i[0])}return r}function Vfe(n,e,t,i,r){const s=zfe(n,e,t,i,r);return Hfe(s)}class $fe extends Ja{constructor(e,t,i,r,s){super();const a=t?t.length-1:0,o=i?i.length:0;this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=s||a;for(let l=0;l<o;++l){const c=i[l];this.controlPoints[l]=new mn(c.x,c.y,c.z,c.w)}}getPoint(e,t=new Z){const i=t,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=Ufe(this.degree,this.knots,this.controlPoints,r);return s.w!==1&&s.divideScalar(s.w),i.set(s.x,s.y,s.z)}getTangent(e,t=new Z){const i=t,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=Vfe(this.degree,this.knots,this.controlPoints,r,1);return i.copy(s[1]).normalize(),i}toJSON(){const e=super.toJSON();return e.degree=this.degree,e.knots=[...this.knots],e.controlPoints=this.controlPoints.map(t=>t.toArray()),e.startKnot=this.startKnot,e.endKnot=this.endKnot,e}fromJSON(e){return super.fromJSON(e),this.degree=e.degree,this.knots=[...e.knots],this.controlPoints=e.controlPoints.map(t=>new mn(t[0],t[1],t[2],t[3])),this.startKnot=e.startKnot,this.endKnot=e.endKnot,this}}let ln,Ni,ss;class Wfe extends Yi{constructor(e){super(e)}load(e,t,i,r){const s=this,a=s.path===""?hy.extractUrlBase(e):s.path,o=new qr(this.manager);o.setPath(s.path),o.setResponseType("arraybuffer"),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(l,a))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e,t){if(Zfe(e))ln=new Kfe().parse(e);else{const r=jH(e);if(!Jfe(r))throw new Error("THREE.FBXLoader: Unknown format.");if(S4(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+S4(r));ln=new Yfe().parse(r)}const i=new ZR(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new Gfe(i,this.manager).parse(ln)}}class Gfe{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Ni=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),i=this.parseMaterials(t),r=this.parseDeformers(),s=new qfe().parse(r);return this.parseScene(r,s,i),ss}parseConnections(){const e=new Map;return"Connections"in ln&&ln.Connections.connections.forEach(function(i){const r=i[0],s=i[1],a=i[2];e.has(r)||e.set(r,{parents:[],children:[]});const o={ID:s,relationship:a};e.get(r).parents.push(o),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:r,relationship:a};e.get(s).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in ln.Objects){const i=ln.Objects.Video;for(const r in i){const s=i[r],a=parseInt(r);if(e[a]=s.RelativeFilename||s.Filename,"Content"in s){const o=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(o||l){const c=this.parseImage(i[r]);t[s.RelativeFilename||s.Filename]=c}}}}for(const i in e){const r=e[i];t[r]!==void 0?e[i]=t[r]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){const t=e.Content,i=e.RelativeFilename||e.Filename,r=i.slice(i.lastIndexOf(".")+1).toLowerCase();let s;switch(r){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),s="image/tga";break;case"webp":s="image/webp";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const a=new Uint8Array(t);return window.URL.createObjectURL(new Blob([a],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in ln.Objects){const i=ln.Objects.Texture;for(const r in i){const s=this.parseTexture(i[r],e);t.set(parseInt(r),s)}}return t}parseTexture(e,t){const i=this.loadTexture(e,t);i.ID=e.id,i.name=e.attrName;const r=e.WrapModeU,s=e.WrapModeV,a=r!==void 0?r.value:0,o=s!==void 0?s.value:0;if(i.wrapS=a===0?Nu:Ai,i.wrapT=o===0?Nu:Ai,"Scaling"in e){const l=e.Scaling.value;i.repeat.x=l[0],i.repeat.y=l[1]}if("Translation"in e){const l=e.Translation.value;i.offset.x=l[0],i.offset.y=l[1]}return i}loadTexture(e,t){const i=e.FileName.split(".").pop().toLowerCase();let r=this.manager.getHandler(`.${i}`);r===null&&(r=this.textureLoader);const s=r.path;s||r.setPath(this.textureLoader.path);const a=Ni.get(e.id).children;let o;if(a!==void 0&&a.length>0&&t[a[0].ID]!==void 0&&(o=t[a[0].ID],(o.indexOf("blob:")===0||o.indexOf("data:")===0)&&r.setPath(void 0)),o===void 0)return console.warn("FBXLoader: Undefined filename, creating placeholder texture."),new Fn;const l=r.load(o);return r.setPath(s),l}parseMaterials(e){const t=new Map;if("Material"in ln.Objects){const i=ln.Objects.Material;for(const r in i){const s=this.parseMaterial(i[r],e);s!==null&&t.set(parseInt(r),s)}}return t}parseMaterial(e,t){const i=e.id,r=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!Ni.has(i))return null;const a=this.parseParameters(e,t,i);let o;switch(s.toLowerCase()){case"phong":o=new tu;break;case"lambert":o=new VR;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),o=new tu;break}return o.setValues(a),o.name=r,o}parseParameters(e,t,i){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=qt.colorSpaceToWorking(new ct().fromArray(e.Diffuse.value),Mn):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(r.color=qt.colorSpaceToWorking(new ct().fromArray(e.DiffuseColor.value),Mn)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=qt.colorSpaceToWorking(new ct().fromArray(e.Emissive.value),Mn):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(r.emissive=qt.colorSpaceToWorking(new ct().fromArray(e.EmissiveColor.value),Mn)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),r.opacity=1-(e.TransparencyFactor?parseFloat(e.TransparencyFactor.value):0),(r.opacity===1||r.opacity===0)&&(r.opacity=e.Opacity?parseFloat(e.Opacity.value):null,r.opacity===null&&(r.opacity=1-(e.TransparentColor?parseFloat(e.TransparentColor.value[0]):0))),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=qt.colorSpaceToWorking(new ct().fromArray(e.Specular.value),Mn):e.SpecularColor&&e.SpecularColor.type==="Color"&&(r.specular=qt.colorSpaceToWorking(new ct().fromArray(e.SpecularColor.value),Mn));const s=this;return Ni.get(i).children.forEach(function(a){const o=a.relationship;switch(o){case"Bump":r.bumpMap=s.getTexture(t,a.ID);break;case"Maya|TEX_ao_map":r.aoMap=s.getTexture(t,a.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=s.getTexture(t,a.ID),r.map!==void 0&&(r.map.colorSpace=Mn);break;case"DisplacementColor":r.displacementMap=s.getTexture(t,a.ID);break;case"EmissiveColor":r.emissiveMap=s.getTexture(t,a.ID),r.emissiveMap!==void 0&&(r.emissiveMap.colorSpace=Mn);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=s.getTexture(t,a.ID);break;case"ReflectionColor":r.envMap=s.getTexture(t,a.ID),r.envMap!==void 0&&(r.envMap.mapping=Sh,r.envMap.colorSpace=Mn);break;case"SpecularColor":r.specularMap=s.getTexture(t,a.ID),r.specularMap!==void 0&&(r.specularMap.colorSpace=Mn);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=s.getTexture(t,a.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",o);break}}),r}getTexture(e,t){return"LayeredTexture"in ln.Objects&&t in ln.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Ni.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in ln.Objects){const i=ln.Objects.Deformer;for(const r in i){const s=i[r],a=Ni.get(parseInt(r));if(s.attrType==="Skin"){const o=this.parseSkeleton(a,i);o.ID=r,a.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),o.geometryID=a.parents[0].ID,e[r]=o}else if(s.attrType==="BlendShape"){const o={id:r};o.rawTargets=this.parseMorphTargets(a,i),o.id=r,a.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=o}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const i=[];return e.children.forEach(function(r){const s=t[r.ID];if(s.attrType!=="Cluster")return;const a={ID:r.ID,indices:[],weights:[],transformLink:new wt().fromArray(s.TransformLink.a)};"Indexes"in s&&(a.indices=s.Indexes.a,a.weights=s.Weights.a),i.push(a)}),{rawBones:i,bones:[]}}parseMorphTargets(e,t){const i=[];for(let r=0;r<e.children.length;r++){const s=e.children[r],a=t[s.ID],o={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if(a.attrType!=="BlendShapeChannel")return;o.geoID=Ni.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,i.push(o)}return i}parseScene(e,t,i){ss=new Vl;const r=this.parseModels(e.skeletons,t,i),s=ln.Objects.Model,a=this;r.forEach(function(l){const c=s[l.ID];a.setLookAtProperties(l,c),Ni.get(l.ID).parents.forEach(function(d){const h=r.get(d.ID);h!==void 0&&h.add(l)}),l.parent===null&&ss.add(l)}),this.bindSkeleton(e.skeletons,t,r),this.addGlobalSceneSettings(),ss.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const c=UH(l.userData.transformData);l.applyMatrix4(c),l.updateWorldMatrix()}});const o=new Xfe().parse();ss.children.length===1&&ss.children[0].isGroup&&(ss.children[0].animations=o,ss=ss.children[0]),ss.animations=o}parseModels(e,t,i){const r=new Map,s=ln.Objects.Model;for(const a in s){const o=parseInt(a),l=s[a],c=Ni.get(o);let u=this.buildSkeleton(c,e,o,l.attrName);if(!u){switch(l.attrType){case"Camera":u=this.createCamera(c);break;case"Light":u=this.createLight(c);break;case"Mesh":u=this.createMesh(c,t,i);break;case"NurbsCurve":u=this.createCurve(c,t);break;case"LimbNode":case"Root":u=new oy;break;case"Null":default:u=new Vl;break}u.name=l.attrName?vn.sanitizeNodeName(l.attrName):"",u.userData.originalName=l.attrName,u.ID=o}this.getTransformData(u,l),r.set(o,u)}return r}buildSkeleton(e,t,i,r){let s=null;return e.parents.forEach(function(a){for(const o in t){const l=t[o];l.rawBones.forEach(function(c,u){if(c.ID===a.ID){const d=s;s=new oy,s.matrixWorld.copy(c.transformLink),s.name=r?vn.sanitizeNodeName(r):"",s.userData.originalName=r,s.ID=i,l.bones[u]=s,d!==null&&s.add(d)}})}}),s}createCamera(e){let t,i;if(e.children.forEach(function(r){const s=ln.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)t=new xn;else{let r=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(r=1);let s=1;i.NearPlane!==void 0&&(s=i.NearPlane.value/1e3);let a=1e3;i.FarPlane!==void 0&&(a=i.FarPlane.value/1e3);let o=window.innerWidth,l=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(o=i.AspectWidth.value,l=i.AspectHeight.value);const c=o/l;let u=45;i.FieldOfView!==void 0&&(u=i.FieldOfView.value);const d=i.FocalLength?i.FocalLength.value:null;switch(r){case 0:t=new ir(u,c,s,a),d!==null&&t.setFocalLength(d);break;case 1:console.warn("THREE.FBXLoader: Orthographic cameras not supported yet."),t=new xn;break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),t=new xn;break}}return t}createLight(e){let t,i;if(e.children.forEach(function(r){const s=ln.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)t=new xn;else{let r;i.LightType===void 0?r=0:r=i.LightType.value;let s=16777215;i.Color!==void 0&&(s=qt.colorSpaceToWorking(new ct().fromArray(i.Color.value),Mn));let a=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(a=0);let o=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?o=0:o=i.FarAttenuationEnd.value);const l=1;switch(r){case 0:t=new aw(s,a,o,l);break;case 1:t=new ek(s,a);break;case 2:let c=Math.PI/3;i.InnerAngle!==void 0&&(c=Ii.degToRad(i.InnerAngle.value));let u=0;i.OuterAngle!==void 0&&(u=Ii.degToRad(i.OuterAngle.value),u=Math.max(u,1)),t=new QR(s,a,o,c,u,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),t=new aw(s,a);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,i){let r,s=null,a=null;const o=[];if(e.children.forEach(function(l){t.has(l.ID)&&(s=t.get(l.ID)),i.has(l.ID)&&o.push(i.get(l.ID))}),o.length>1?a=o:o.length>0?a=o[0]:(a=new tu({name:Yi.DEFAULT_MATERIAL_NAME,color:13421772}),o.push(a)),"color"in s.attributes&&o.forEach(function(l){l.vertexColors=!0}),s.groups.length>0){let l=!1;for(let c=0,u=s.groups.length;c<u;c++){const d=s.groups[c];(d.materialIndex<0||d.materialIndex>=o.length)&&(d.materialIndex=o.length,l=!0)}if(l){const c=new tu;o.push(c)}}return s.FBX_Deformer?(r=new LR(s,a),r.normalizeSkinWeights()):r=new Zn(s,a),r}createCurve(e,t){const i=e.children.reduce(function(s,a){return t.has(a.ID)&&(s=t.get(a.ID)),s},null),r=new ar({name:Yi.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new nc(i,r)}getTransformData(e,t){const i={};"InheritType"in t&&(i.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?i.eulerOrder=wy(t.RotationOrder.value):i.eulerOrder=wy(0),"Lcl_Translation"in t&&(i.translation=t.Lcl_Translation.value),"PreRotation"in t&&(i.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(i.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(i.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(i.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(i.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(i.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(i.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(i.rotationPivot=t.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,t){"LookAtProperty"in t&&Ni.get(e.ID).children.forEach(function(r){if(r.relationship==="LookAtProperty"){const s=ln.Objects.Model[r.ID];if("Lcl_Translation"in s){const a=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(a),ss.add(e.target)):e.lookAt(new Z().fromArray(a))}}})}bindSkeleton(e,t,i){const r=this.parsePoseNodes();for(const s in e){const a=e[s];Ni.get(parseInt(a.ID)).parents.forEach(function(l){if(t.has(l.ID)){const c=l.ID;Ni.get(c).parents.forEach(function(d){i.has(d.ID)&&i.get(d.ID).bind(new Jy(a.bones),r[d.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in ln.Objects){const t=ln.Objects.Pose;for(const i in t)if(t[i].attrType==="BindPose"&&t[i].NbPoseNodes>0){const r=t[i].PoseNode;Array.isArray(r)?r.forEach(function(s){e[s.Node]=new wt().fromArray(s.Matrix.a)}):e[r.Node]=new wt().fromArray(r.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in ln){if("AmbientColor"in ln.GlobalSettings){const e=ln.GlobalSettings.AmbientColor.value,t=e[0],i=e[1],r=e[2];if(t!==0||i!==0||r!==0){const s=new ct().setRGB(t,i,r,Mn);ss.add(new tk(s,1))}}"UnitScaleFactor"in ln.GlobalSettings&&(ss.userData.unitScaleFactor=ln.GlobalSettings.UnitScaleFactor.value)}}}class qfe{constructor(){this.negativeMaterialIndices=!1}parse(e){const t=new Map;if("Geometry"in ln.Objects){const i=ln.Objects.Geometry;for(const r in i){const s=Ni.get(parseInt(r)),a=this.parseGeometry(s,i[r],e);t.set(parseInt(r),a)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,i){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,i);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,i){const r=i.skeletons,s=[],a=e.parents.map(function(d){return ln.Objects.Model[d.ID]});if(a.length===0)return;const o=e.children.reduce(function(d,h){return r[h.ID]!==void 0&&(d=r[h.ID]),d},null);e.children.forEach(function(d){i.morphTargets[d.ID]!==void 0&&s.push(i.morphTargets[d.ID])});const l=a[0],c={};"RotationOrder"in l&&(c.eulerOrder=wy(l.RotationOrder.value)),"InheritType"in l&&(c.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(c.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(c.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(c.scale=l.GeometricScaling.value);const u=UH(c);return this.genGeometry(t,o,s,u)}genGeometry(e,t,i,r){const s=new Wt;e.attrName&&(s.name=e.attrName);const a=this.parseGeoNode(e,t),o=this.genBuffers(a),l=new mt(o.vertex,3);if(l.applyMatrix4(r),s.setAttribute("position",l),o.colors.length>0&&s.setAttribute("color",new mt(o.colors,3)),t&&(s.setAttribute("skinIndex",new xS(o.weightsIndices,4)),s.setAttribute("skinWeight",new mt(o.vertexWeights,4)),s.FBX_Deformer=t),o.normal.length>0){const c=new Xt().getNormalMatrix(r),u=new mt(o.normal,3);u.applyNormalMatrix(c),s.setAttribute("normal",u)}if(o.uvs.forEach(function(c,u){const d=u===0?"uv":`uv${u}`;s.setAttribute(d,new mt(o.uvs[u],2))}),a.material&&a.material.mappingType!=="AllSame"){let c=o.materialIndex[0],u=0;if(o.materialIndex.forEach(function(d,h){d!==c&&(s.addGroup(u,h-u,c),c=d,u=h)}),s.groups.length>0){const d=s.groups[s.groups.length-1],h=d.start+d.count;h!==o.materialIndex.length&&s.addGroup(h,o.materialIndex.length-h,c)}s.groups.length===0&&s.addGroup(0,o.materialIndex.length,o.materialIndex[0])}return this.addMorphTargets(s,e,i,r),s}parseGeoNode(e,t){const i={};if(i.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],i.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return i.weightTable={},t!==null&&(i.skeleton=t,t.rawBones.forEach(function(r,s){r.indices.forEach(function(a,o){i.weightTable[a]===void 0&&(i.weightTable[a]=[]),i.weightTable[a].push({id:s,weight:r.weights[o]})})})),i}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,r=0,s=!1,a=[],o=[],l=[],c=[],u=[],d=[];const h=this;return e.vertexIndices.forEach(function(p,y){let x,_=!1;p<0&&(p=p^-1,_=!0);let v=[],b=[];if(a.push(p*3,p*3+1,p*3+2),e.color){const w=B_(y,i,p,e.color);l.push(w[0],w[1],w[2])}if(e.skeleton){if(e.weightTable[p]!==void 0&&e.weightTable[p].forEach(function(w){b.push(w.weight),v.push(w.id)}),b.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const w=[0,0,0,0],S=[0,0,0,0];b.forEach(function(A,P){let k=A,T=v[P];S.forEach(function(E,R,I){if(k>E){I[R]=k,k=E;const D=w[R];w[R]=T,T=D}})}),v=w,b=S}for(;b.length<4;)b.push(0),v.push(0);for(let w=0;w<4;++w)u.push(b[w]),d.push(v[w])}if(e.normal){const w=B_(y,i,p,e.normal);o.push(w[0],w[1],w[2])}e.material&&e.material.mappingType!=="AllSame"&&(x=B_(y,i,p,e.material)[0],x<0&&(h.negativeMaterialIndices=!0,x=0)),e.uv&&e.uv.forEach(function(w,S){const A=B_(y,i,p,w);c[S]===void 0&&(c[S]=[]),c[S].push(A[0]),c[S].push(A[1])}),r++,_&&(h.genFace(t,e,a,x,o,l,c,u,d,r),i++,r=0,a=[],o=[],l=[],c=[],u=[],d=[])}),t}getNormalNewell(e){const t=new Z(0,0,0);for(let i=0;i<e.length;i++){const r=e[i],s=e[(i+1)%e.length];t.x+=(r.y-s.y)*(r.z+s.z),t.y+=(r.z-s.z)*(r.x+s.x),t.z+=(r.x-s.x)*(r.y+s.y)}return t.normalize(),t}getNormalTangentAndBitangent(e){const t=this.getNormalNewell(e),r=(Math.abs(t.z)>.5?new Z(0,1,0):new Z(0,0,1)).cross(t).normalize(),s=t.clone().cross(r).normalize();return{normal:t,tangent:r,bitangent:s}}flattenVertex(e,t,i){return new Ye(e.dot(t),e.dot(i))}genFace(e,t,i,r,s,a,o,l,c,u){let d;if(u>3){const h=[],p=t.baseVertexPositions||t.vertexPositions;for(let v=0;v<i.length;v+=3)h.push(new Z(p[i[v]],p[i[v+1]],p[i[v+2]]));const{tangent:y,bitangent:x}=this.getNormalTangentAndBitangent(h),_=[];for(const v of h)_.push(this.flattenVertex(v,y,x));d=za.triangulateShape(_,[])}else d=[[0,1,2]];for(const[h,p,y]of d)e.vertex.push(t.vertexPositions[i[h*3]]),e.vertex.push(t.vertexPositions[i[h*3+1]]),e.vertex.push(t.vertexPositions[i[h*3+2]]),e.vertex.push(t.vertexPositions[i[p*3]]),e.vertex.push(t.vertexPositions[i[p*3+1]]),e.vertex.push(t.vertexPositions[i[p*3+2]]),e.vertex.push(t.vertexPositions[i[y*3]]),e.vertex.push(t.vertexPositions[i[y*3+1]]),e.vertex.push(t.vertexPositions[i[y*3+2]]),t.skeleton&&(e.vertexWeights.push(l[h*4]),e.vertexWeights.push(l[h*4+1]),e.vertexWeights.push(l[h*4+2]),e.vertexWeights.push(l[h*4+3]),e.vertexWeights.push(l[p*4]),e.vertexWeights.push(l[p*4+1]),e.vertexWeights.push(l[p*4+2]),e.vertexWeights.push(l[p*4+3]),e.vertexWeights.push(l[y*4]),e.vertexWeights.push(l[y*4+1]),e.vertexWeights.push(l[y*4+2]),e.vertexWeights.push(l[y*4+3]),e.weightsIndices.push(c[h*4]),e.weightsIndices.push(c[h*4+1]),e.weightsIndices.push(c[h*4+2]),e.weightsIndices.push(c[h*4+3]),e.weightsIndices.push(c[p*4]),e.weightsIndices.push(c[p*4+1]),e.weightsIndices.push(c[p*4+2]),e.weightsIndices.push(c[p*4+3]),e.weightsIndices.push(c[y*4]),e.weightsIndices.push(c[y*4+1]),e.weightsIndices.push(c[y*4+2]),e.weightsIndices.push(c[y*4+3])),t.color&&(e.colors.push(a[h*3]),e.colors.push(a[h*3+1]),e.colors.push(a[h*3+2]),e.colors.push(a[p*3]),e.colors.push(a[p*3+1]),e.colors.push(a[p*3+2]),e.colors.push(a[y*3]),e.colors.push(a[y*3+1]),e.colors.push(a[y*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(s[h*3]),e.normal.push(s[h*3+1]),e.normal.push(s[h*3+2]),e.normal.push(s[p*3]),e.normal.push(s[p*3+1]),e.normal.push(s[p*3+2]),e.normal.push(s[y*3]),e.normal.push(s[y*3+1]),e.normal.push(s[y*3+2])),t.uv&&t.uv.forEach(function(x,_){e.uvs[_]===void 0&&(e.uvs[_]=[]),e.uvs[_].push(o[_][h*2]),e.uvs[_].push(o[_][h*2+1]),e.uvs[_].push(o[_][p*2]),e.uvs[_].push(o[_][p*2+1]),e.uvs[_].push(o[_][y*2]),e.uvs[_].push(o[_][y*2+1])})}addMorphTargets(e,t,i,r){if(i.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;i.forEach(function(a){a.rawTargets.forEach(function(o){const l=ln.Objects.Geometry[o.geoID];l!==void 0&&s.genMorphGeometry(e,t,l,r,o.name)})})}genMorphGeometry(e,t,i,r,s){const a=t.Vertices!==void 0?t.Vertices.a:[],o=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],l=i.Vertices!==void 0?i.Vertices.a:[],c=i.Indexes!==void 0?i.Indexes.a:[],u=e.attributes.position.count*3,d=new Float32Array(u);for(let x=0;x<c.length;x++){const _=c[x]*3;d[_]=l[x*3],d[_+1]=l[x*3+1],d[_+2]=l[x*3+2]}const h={vertexIndices:o,vertexPositions:d,baseVertexPositions:a},p=this.genBuffers(h),y=new mt(p.vertex,3);y.name=s||i.attrName,y.applyMatrix4(r),e.morphAttributes.position.push(y)}parseNormals(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Normals.a;let s=[];return i==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:s,mappingType:t,referenceType:i}}parseUVs(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.UV.a;let s=[];return i==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:r,indices:s,mappingType:t,referenceType:i}}parseVertexColors(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Colors.a;let s=[];i==="IndexToDirect"&&(s=e.ColorIndex.a);for(let a=0,o=new ct;a<r.length;a+=4)o.fromArray(r,a),qt.colorSpaceToWorking(o,Mn),o.toArray(r,a);return{dataSize:4,buffer:r,indices:s,mappingType:t,referenceType:i}}parseMaterialIndices(e){const t=e.MappingInformationType,i=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const r=e.Materials.a,s=[];for(let a=0;a<r.length;++a)s.push(a);return{dataSize:1,buffer:r,indices:s,mappingType:t,referenceType:i}}parseNurbsGeometry(e){const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Wt;const i=t-1,r=e.KnotVector.a,s=[],a=e.Points.a;for(let d=0,h=a.length;d<h;d+=4)s.push(new mn().fromArray(a,d));let o,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){o=i,l=r.length-1-o;for(let d=0;d<i;++d)s.push(s[d])}const u=new $fe(i,r,s,o,l).getPoints(s.length*12);return new Wt().setFromPoints(u)}}class Xfe{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const i in t){const r=t[i],s=this.addClip(r);e.push(s)}return e}parseClips(){if(ln.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=ln.Objects.AnimationCurveNode,t=new Map;for(const i in e){const r=e[i];if(r.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:r.id,attr:r.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=ln.Objects.AnimationCurve;for(const i in t){const r={id:t[i].id,times:t[i].KeyTime.a.map(Qfe),values:t[i].KeyValueFloat.a},s=Ni.get(r.id);if(s!==void 0){const a=s.parents[0].ID,o=s.parents[0].relationship;o.match(/X/)?e.get(a).curves.x=r:o.match(/Y/)?e.get(a).curves.y=r:o.match(/Z/)?e.get(a).curves.z=r:o.match(/DeformPercent/)&&e.has(a)&&(e.get(a).curves.morph=r)}}}parseAnimationLayers(e){const t=ln.Objects.AnimationLayer,i=new Map;for(const r in t){const s=[],a=Ni.get(parseInt(r));a!==void 0&&(a.children.forEach(function(l,c){if(e.has(l.ID)){const u=e.get(l.ID);if(u.curves.x!==void 0||u.curves.y!==void 0||u.curves.z!==void 0){if(s[c]===void 0){const d=Ni.get(l.ID).parents.filter(function(h){return h.relationship!==void 0})[0].ID;if(d!==void 0){const h=ln.Objects.Model[d.toString()];if(h===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const p={modelName:h.attrName?vn.sanitizeNodeName(h.attrName):"",ID:h.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};ss.traverse(function(y){y.ID===h.id&&(p.transform=y.matrix,y.userData.transformData&&(p.eulerOrder=y.userData.transformData.eulerOrder))}),p.transform||(p.transform=new wt),"PreRotation"in h&&(p.preRotation=h.PreRotation.value),"PostRotation"in h&&(p.postRotation=h.PostRotation.value),s[c]=p}}s[c]&&(s[c][u.attr]=u)}else if(u.curves.morph!==void 0){if(s[c]===void 0){const d=Ni.get(l.ID).parents.filter(function(v){return v.relationship!==void 0})[0].ID,h=Ni.get(d).parents[0].ID,p=Ni.get(h).parents[0].ID,y=Ni.get(p).parents[0].ID,x=ln.Objects.Model[y],_={modelName:x.attrName?vn.sanitizeNodeName(x.attrName):"",morphName:ln.Objects.Deformer[d].attrName};s[c]=_}s[c][u.attr]=u}}}),i.set(parseInt(r),s))}return i}parseAnimStacks(e){const t=ln.Objects.AnimationStack,i={};for(const r in t){const s=Ni.get(parseInt(r)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const a=e.get(s[0].ID);i[r]={name:t[r].attrName,layer:a}}return i}addClip(e){let t=[];const i=this;return e.layer.forEach(function(r){t=t.concat(i.generateTracks(r))}),new Wp(e.name,-1,t)}generateTracks(e){const t=[];let i=new Z,r=new Z;if(e.transform&&e.transform.decompose(i,new Ei,r),i=i.toArray(),r=r.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const s=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");s!==void 0&&t.push(s)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const s=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);s!==void 0&&t.push(s)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const s=this.generateVectorTrack(e.modelName,e.S.curves,r,"scale");s!==void 0&&t.push(s)}if(e.DeformPercent!==void 0){const s=this.generateMorphTrack(e);s!==void 0&&t.push(s)}return t}generateVectorTrack(e,t,i,r){const s=this.getTimesForAllAxes(t),a=this.getKeyframeTrackValues(s,t,i);return new $p(e+"."+r,s,a)}generateRotationTrack(e,t,i,r,s){let a,o;if(t.x!==void 0&&t.y!==void 0&&t.z!==void 0){const h=this.interpolateRotations(t.x,t.y,t.z,s);a=h[0],o=h[1]}const l=wy(0);i!==void 0&&(i=i.map(Ii.degToRad),i.push(l),i=new qi().fromArray(i),i=new Ei().setFromEuler(i)),r!==void 0&&(r=r.map(Ii.degToRad),r.push(l),r=new qi().fromArray(r),r=new Ei().setFromEuler(r).invert());const c=new Ei,u=new qi,d=[];if(!o||!a)return new Th(e+".quaternion",[0],[0]);for(let h=0;h<o.length;h+=3)u.set(o[h],o[h+1],o[h+2],s),c.setFromEuler(u),i!==void 0&&c.premultiply(i),r!==void 0&&c.multiply(r),h>2&&new Ei().fromArray(d,(h-3)/3*4).dot(c)<0&&c.set(-c.x,-c.y,-c.z,-c.w),c.toArray(d,h/3*4);return new Th(e+".quaternion",a,d)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,i=t.values.map(function(s){return s/100}),r=ss.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Vp(e.modelName+".morphTargetInfluences["+r+"]",t.times,i)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(i,r){return i-r}),t.length>1){let i=1,r=t[0];for(let s=1;s<t.length;s++){const a=t[s];a!==r&&(t[i]=a,r=a,i++)}t=t.slice(0,i)}return t}getKeyframeTrackValues(e,t,i){const r=i,s=[];let a=-1,o=-1,l=-1;return e.forEach(function(c){if(t.x&&(a=t.x.times.indexOf(c)),t.y&&(o=t.y.times.indexOf(c)),t.z&&(l=t.z.times.indexOf(c)),a!==-1){const u=t.x.values[a];s.push(u),r[0]=u}else s.push(r[0]);if(o!==-1){const u=t.y.values[o];s.push(u),r[1]=u}else s.push(r[1]);if(l!==-1){const u=t.z.values[l];s.push(u),r[2]=u}else s.push(r[2])}),s}interpolateRotations(e,t,i,r){const s=[],a=[];s.push(e.times[0]),a.push(Ii.degToRad(e.values[0])),a.push(Ii.degToRad(t.values[0])),a.push(Ii.degToRad(i.values[0]));for(let o=1;o<e.values.length;o++){const l=[e.values[o-1],t.values[o-1],i.values[o-1]];if(isNaN(l[0])||isNaN(l[1])||isNaN(l[2]))continue;const c=l.map(Ii.degToRad),u=[e.values[o],t.values[o],i.values[o]];if(isNaN(u[0])||isNaN(u[1])||isNaN(u[2]))continue;const d=u.map(Ii.degToRad),h=[u[0]-l[0],u[1]-l[1],u[2]-l[2]],p=[Math.abs(h[0]),Math.abs(h[1]),Math.abs(h[2])];if(p[0]>=180||p[1]>=180||p[2]>=180){const x=Math.max(...p)/180,_=new qi(...c,r),v=new qi(...d,r),b=new Ei().setFromEuler(_),w=new Ei().setFromEuler(v);b.dot(w)&&w.set(-w.x,-w.y,-w.z,-w.w);const S=e.times[o-1],A=e.times[o]-S,P=new Ei,k=new qi;for(let T=0;T<1;T+=1/x)P.copy(b.clone().slerp(w.clone(),T)),s.push(S+T*A),k.setFromQuaternion(P,r),a.push(k.x),a.push(k.y),a.push(k.z)}else s.push(e.times[o]),a.push(Ii.degToRad(e.values[o])),a.push(Ii.degToRad(t.values[o])),a.push(Ii.degToRad(i.values[o]))}return[s,a]}}class Yfe{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new FH,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,i=e.split(/[\r\n]+/);return i.forEach(function(r,s){const a=r.match(/^[\s\t]*;/),o=r.match(/^[\s\t]*$/);if(a||o)return;const l=r.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),c=r.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),u=r.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(r,l):c?t.parseNodeProperty(r,c,i[++s]):u?t.popStack():r.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,t){const i=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:i},a=this.parseNodeAttr(r),o=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,s):i in o?(i==="PoseNode"?o.PoseNode.push(s):o[i].id!==void 0&&(o[i]={},o[i][o[i].id]=o[i]),a.id!==""&&(o[i][a.id]=s)):typeof a.id=="number"?(o[i]={},o[i][a.id]=s):i!=="Properties70"&&(i==="PoseNode"?o[i]=[s]:o[i]=s),typeof a.id=="number"&&(s.id=a.id),a.name!==""&&(s.attrName=a.name),a.type!==""&&(s.attrType=a.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let i="",r="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:i,type:r}}parseNodeProperty(e,t,i){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();r==="Content"&&s===","&&(s=i.replace(/"/g,"").replace(/,$/,"").trim());const a=this.getCurrentNode();if(a.name==="Properties70"){this.parseNodeSpecialProperty(e,r,s);return}if(r==="C"){const l=s.split(",").slice(1),c=parseInt(l[0]),u=parseInt(l[1]);let d=s.split(",").slice(3);d=d.map(function(h){return h.trim().replace(/^"/,"")}),r="connections",s=[c,u],tpe(s,d),a[r]===void 0&&(a[r]=[])}r==="Node"&&(a.id=s),r in a&&Array.isArray(a[r])?a[r].push(s):r!=="a"?a[r]=s:a.a=s,this.setCurrentProp(a,r),r==="a"&&s.slice(-1)!==","&&(a.a=a2(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=a2(t.a))}parseNodeSpecialProperty(e,t,i){const r=i.split('",').map(function(u){return u.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=r[0],a=r[1],o=r[2],l=r[3];let c=r[4];switch(a){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=a2(c);break}this.getPrevNode()[s]={type:a,type2:o,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),s)}}class Kfe{parse(e){const t=new w4(e);t.skip(23);const i=t.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const r=new FH;for(;!this.endOfContent(t);){const s=this.parseNode(t,i);s!==null&&r.add(s.name,s)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const i={},r=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const a=e.getUint8(),o=e.getString(a);if(r===0)return null;const l=[];for(let h=0;h<s;h++)l.push(this.parseProperty(e));const c=l.length>0?l[0]:"",u=l.length>1?l[1]:"",d=l.length>2?l[2]:"";for(i.singleProperty=s===1&&e.getOffset()===r;r>e.getOffset();){const h=this.parseNode(e,t);h!==null&&this.parseSubNode(o,i,h)}return i.propertyList=l,typeof c=="number"&&(i.id=c),u!==""&&(i.attrName=u),d!==""&&(i.attrType=d),o!==""&&(i.name=o),i}parseSubNode(e,t,i){if(i.singleProperty===!0){const r=i.propertyList[0];Array.isArray(r)?(t[i.name]=i,i.a=r):t[i.name]=r}else if(e==="Connections"&&i.name==="C"){const r=[];i.propertyList.forEach(function(s,a){a!==0&&r.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(r)}else if(i.name==="Properties70")Object.keys(i).forEach(function(s){t[s]=i[s]});else if(e==="Properties70"&&i.name==="P"){let r=i.propertyList[0],s=i.propertyList[1];const a=i.propertyList[2],o=i.propertyList[3];let l;r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:l=i.propertyList[4],t[r]={type:s,type2:a,flag:o,value:l}}else t[i.name]===void 0?typeof i.id=="number"?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:i.name==="PoseNode"?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):t[i.name][i.id]===void 0&&(t[i.name][i.id]=i)}parseProperty(e){const t=e.getString(1);let i;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),s=e.getUint32(),a=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}const o=Dfe(new Uint8Array(e.getArrayBuffer(a))),l=new w4(o.buffer);switch(t){case"b":case"c":return l.getBooleanArray(r);case"d":return l.getFloat64Array(r);case"f":return l.getFloat32Array(r);case"i":return l.getInt32Array(r);case"l":return l.getInt64Array(r)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class w4{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let i=0;i<e;i++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){const t=this.offset;let i=new Uint8Array(this.dv.buffer,t,e);this.skip(e);const r=i.indexOf(0);return r>=0&&(i=new Uint8Array(this.dv.buffer,t,r)),this._textDecoder.decode(i)}}class FH{add(e,t){this[e]=t}}function Zfe(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===jH(n,0,e.length)}function Jfe(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function i(r){const s=n[r-1];return n=n.slice(t+r),t++,s}for(let r=0;r<e.length;++r)if(i(1)===e[r])return!1;return!0}function S4(n){const e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Qfe(n){return n/46186158e3}const epe=[];function B_(n,e,t,i){let r;switch(i.mappingType){case"ByPolygonVertex":r=n;break;case"ByPolygon":r=e;break;case"ByVertice":r=t;break;case"AllSame":r=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(r=i.indices[r]);const s=r*i.dataSize,a=s+i.dataSize;return npe(epe,i.buffer,s,a)}const s2=new qi,Rf=new Z;function UH(n){const e=new wt,t=new wt,i=new wt,r=new wt,s=new wt,a=new wt,o=new wt,l=new wt,c=new wt,u=new wt,d=new wt,h=new wt,p=n.inheritType?n.inheritType:0;n.translation&&e.setPosition(Rf.fromArray(n.translation));const y=wy(0);if(n.preRotation){const I=n.preRotation.map(Ii.degToRad);I.push(y),t.makeRotationFromEuler(s2.fromArray(I))}if(n.rotation){const I=n.rotation.map(Ii.degToRad);I.push(n.eulerOrder||y),i.makeRotationFromEuler(s2.fromArray(I))}if(n.postRotation){const I=n.postRotation.map(Ii.degToRad);I.push(y),r.makeRotationFromEuler(s2.fromArray(I)),r.invert()}n.scale&&s.scale(Rf.fromArray(n.scale)),n.scalingOffset&&o.setPosition(Rf.fromArray(n.scalingOffset)),n.scalingPivot&&a.setPosition(Rf.fromArray(n.scalingPivot)),n.rotationOffset&&l.setPosition(Rf.fromArray(n.rotationOffset)),n.rotationPivot&&c.setPosition(Rf.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(d.copy(n.parentMatrix),u.copy(n.parentMatrixWorld));const x=t.clone().multiply(i).multiply(r),_=new wt;_.extractRotation(u);const v=new wt;v.copyPosition(u);const b=v.clone().invert().multiply(u),w=_.clone().invert().multiply(b),S=s,A=new wt;if(p===0)A.copy(_).multiply(x).multiply(w).multiply(S);else if(p===1)A.copy(_).multiply(w).multiply(x).multiply(S);else{const D=new wt().scale(new Z().setFromMatrixScale(d)).clone().invert(),B=w.clone().multiply(D);A.copy(_).multiply(x).multiply(B).multiply(S)}const P=c.clone().invert(),k=a.clone().invert();let T=e.clone().multiply(l).multiply(c).multiply(t).multiply(i).multiply(r).multiply(P).multiply(o).multiply(a).multiply(s).multiply(k);const E=new wt().copyPosition(T),R=u.clone().multiply(E);return h.copyPosition(R),T=h.clone().multiply(A),T.premultiply(u.invert()),T}function wy(n){n=n||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function a2(n){return n.split(",").map(function(t){return parseFloat(t)})}function jH(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),new TextDecoder().decode(new Uint8Array(n,e,t))}function tpe(n,e){for(let t=0,i=n.length,r=e.length;t<r;t++,i++)n[i]=e[t]}function npe(n,e,t,i){for(let r=t,s=0;r<i;r++,s++)n[s]=e[r];return n}const ipe=/^[og]\s*(.+)?/,rpe=/^mtllib /,spe=/^usemtl /,ape=/^usemap /,M4=/\s+/,E4=new Z,o2=new Z,T4=new Z,C4=new Z,Ea=new Z,H_=new ct;function ope(){const n={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=t!==!1;return}const i=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,s){const a=this._finalize(!1);a&&(a.inherited||a.groupCount<=0)&&this.materials.splice(a.index,1);const o={index:this.materials.length,name:r||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:a!==void 0?a.smooth:this.smooth,groupStart:a!==void 0?a.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const c={index:typeof l=="number"?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return c.clone=this.clone.bind(c),c}};return this.materials.push(o),o},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const s=this.currentMaterial();if(s&&s.groupEnd===-1&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),r&&this.materials.length>1)for(let a=this.materials.length-1;a>=0;a--)this.materials[a].groupCount<=0&&this.materials.splice(a,1);return r&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),s}},i&&i.name&&typeof i.clone=="function"){const r=i.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseNormalIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseUVIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/2)*2},addVertex:function(e,t,i){const r=this.vertices,s=this.object.geometry.vertices;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){const r=this.normals,s=this.object.geometry.normals;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addFaceNormal:function(e,t,i){const r=this.vertices,s=this.object.geometry.normals;E4.fromArray(r,e),o2.fromArray(r,t),T4.fromArray(r,i),Ea.subVectors(T4,o2),C4.subVectors(E4,o2),Ea.cross(C4),Ea.normalize(),s.push(Ea.x,Ea.y,Ea.z),s.push(Ea.x,Ea.y,Ea.z),s.push(Ea.x,Ea.y,Ea.z)},addColor:function(e,t,i){const r=this.colors,s=this.object.geometry.colors;r[e]!==void 0&&s.push(r[e+0],r[e+1],r[e+2]),r[t]!==void 0&&s.push(r[t+0],r[t+1],r[t+2]),r[i]!==void 0&&s.push(r[i+0],r[i+1],r[i+2])},addUV:function(e,t,i){const r=this.uvs,s=this.object.geometry.uvs;s.push(r[e+0],r[e+1]),s.push(r[t+0],r[t+1]),s.push(r[i+0],r[i+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,r,s,a,o,l,c){const u=this.vertices.length;let d=this.parseVertexIndex(e,u),h=this.parseVertexIndex(t,u),p=this.parseVertexIndex(i,u);if(this.addVertex(d,h,p),this.addColor(d,h,p),o!==void 0&&o!==""){const y=this.normals.length;d=this.parseNormalIndex(o,y),h=this.parseNormalIndex(l,y),p=this.parseNormalIndex(c,y),this.addNormal(d,h,p)}else this.addFaceNormal(d,h,p);if(r!==void 0&&r!==""){const y=this.uvs.length;d=this.parseUVIndex(r,y),h=this.parseUVIndex(s,y),p=this.parseUVIndex(a,y),this.addUV(d,h,p),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let i=0,r=e.length;i<r;i++){const s=this.parseVertexIndex(e[i],t);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const i=this.vertices.length,r=this.uvs.length;for(let s=0,a=e.length;s<a;s++)this.addVertexLine(this.parseVertexIndex(e[s],i));for(let s=0,a=t.length;s<a;s++)this.addUVLine(this.parseUVIndex(t[s],r))}};return n.startObject("",!1),n}class lpe extends Yi{constructor(e){super(e),this.materials=null}load(e,t,i,r){const s=this,a=new qr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(o))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new ope;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));const i=e.split(`
`);let r=[];for(let o=0,l=i.length;o<l;o++){const c=i[o].trimStart();if(c.length===0)continue;const u=c.charAt(0);if(u!=="#")if(u==="v"){const d=c.split(M4);switch(d[0]){case"v":t.vertices.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3])),d.length>=7?(H_.setRGB(parseFloat(d[4]),parseFloat(d[5]),parseFloat(d[6]),Mn),t.colors.push(H_.r,H_.g,H_.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]));break;case"vt":t.uvs.push(parseFloat(d[1]),parseFloat(d[2]));break}}else if(u==="f"){const h=c.slice(1).trim().split(M4),p=[];for(let x=0,_=h.length;x<_;x++){const v=h[x];if(v.length>0){const b=v.split("/");p.push(b)}}const y=p[0];for(let x=1,_=p.length-1;x<_;x++){const v=p[x],b=p[x+1];t.addFace(y[0],v[0],b[0],y[1],v[1],b[1],y[2],v[2],b[2])}}else if(u==="l"){const d=c.substring(1).trim().split(" ");let h=[];const p=[];if(c.indexOf("/")===-1)h=d;else for(let y=0,x=d.length;y<x;y++){const _=d[y].split("/");_[0]!==""&&h.push(_[0]),_[1]!==""&&p.push(_[1])}t.addLineGeometry(h,p)}else if(u==="p"){const h=c.slice(1).trim().split(" ");t.addPointGeometry(h)}else if((r=ipe.exec(c))!==null){const d=(" "+r[0].slice(1).trim()).slice(1);t.startObject(d)}else if(spe.test(c))t.object.startMaterial(c.substring(7).trim(),t.materialLibraries);else if(rpe.test(c))t.materialLibraries.push(c.substring(7).trim());else if(ape.test(c))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(u==="s"){if(r=c.split(" "),r.length>1){const h=r[1].trim().toLowerCase();t.object.smooth=h!=="0"&&h!=="off"}else t.object.smooth=!0;const d=t.object.currentMaterial();d&&(d.smooth=t.object.smooth)}else{if(c==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+c+'"')}}t.finalize();const s=new Vl;if(s.materialLibraries=[].concat(t.materialLibraries),!(t.objects.length===1&&t.objects[0].geometry.vertices.length===0)===!0)for(let o=0,l=t.objects.length;o<l;o++){const c=t.objects[o],u=c.geometry,d=c.materials,h=u.type==="Line",p=u.type==="Points";let y=!1;if(u.vertices.length===0)continue;const x=new Wt;x.setAttribute("position",new mt(u.vertices,3)),u.normals.length>0&&x.setAttribute("normal",new mt(u.normals,3)),u.colors.length>0&&(y=!0,x.setAttribute("color",new mt(u.colors,3))),u.hasUVIndices===!0&&x.setAttribute("uv",new mt(u.uvs,2));const _=[];for(let b=0,w=d.length;b<w;b++){const S=d[b],A=S.name+"_"+S.smooth+"_"+y;let P=t.materials[A];if(this.materials!==null){if(P=this.materials.create(S.name),h&&P&&!(P instanceof ar)){const k=new ar;_r.prototype.copy.call(k,P),k.color.copy(P.color),P=k}else if(p&&P&&!(P instanceof Wd)){const k=new Wd({size:10,sizeAttenuation:!1});_r.prototype.copy.call(k,P),k.color.copy(P.color),k.map=P.map,P=k}}P===void 0&&(h?P=new ar:p?P=new Wd({size:1,sizeAttenuation:!1}):P=new tu,P.name=S.name,P.flatShading=!S.smooth,P.vertexColors=y,t.materials[A]=P),_.push(P)}let v;if(_.length>1){for(let b=0,w=d.length;b<w;b++){const S=d[b];x.addGroup(S.groupStart,S.groupCount,b)}h?v=new Ka(x,_):p?v=new r0(x,_):v=new Zn(x,_)}else h?v=new Ka(x,_[0]):p?v=new r0(x,_[0]):v=new Zn(x,_[0]);v.name=c.name,s.add(v)}else if(t.vertices.length>0){const o=new Wd({size:1,sizeAttenuation:!1}),l=new Wt;l.setAttribute("position",new mt(t.vertices,3)),t.colors.length>0&&t.colors[0]!==void 0&&(l.setAttribute("color",new mt(t.colors,3)),o.vertexColors=!0);const c=new r0(l,o);s.add(c)}return s}}class cpe extends Yi{constructor(e){super(e)}load(e,t,i,r){const s=this,a=this.path===""?hy.extractUrlBase(e):this.path,o=new qr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(l,a))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}setMaterialOptions(e){return this.materialOptions=e,this}parse(e,t){const i=e.split(`
`);let r={};const s=/\s+/,a={};for(let l=0;l<i.length;l++){let c=i[l];if(c=c.trim(),c.length===0||c.charAt(0)==="#")continue;const u=c.indexOf(" ");let d=u>=0?c.substring(0,u):c;d=d.toLowerCase();let h=u>=0?c.substring(u+1):"";if(h=h.trim(),d==="newmtl")r={name:h},a[h]=r;else if(d==="ka"||d==="kd"||d==="ks"||d==="ke"){const p=h.split(s,3);r[d]=[parseFloat(p[0]),parseFloat(p[1]),parseFloat(p[2])]}else r[d]=h}const o=new upe(this.resourcePath||t,this.materialOptions);return o.setCrossOrigin(this.crossOrigin),o.setManager(this.manager),o.setMaterials(a),o}}class upe{constructor(e="",t={}){this.baseUrl=e,this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:sl,this.wrap=this.options.wrap!==void 0?this.options.wrap:Nu}setCrossOrigin(e){return this.crossOrigin=e,this}setManager(e){this.manager=e}setMaterials(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(e){if(!this.options)return e;const t={};for(const i in e){const r=e[i],s={};t[i]=s;for(const a in r){let o=!0,l=r[a];const c=a.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(l=[l[0]/255,l[1]/255,l[2]/255]),this.options&&this.options.ignoreZeroRGBs&&l[0]===0&&l[1]===0&&l[2]===0&&(o=!1);break}o&&(s[c]=l)}}return t}preload(){for(const e in this.materialsInfo)this.create(e)}getIndex(e){return this.nameLookup[e]}getAsArray(){let e=0;for(const t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray}create(e){return this.materials[e]===void 0&&this.createMaterial_(e),this.materials[e]}createMaterial_(e){const t=this,i=this.materialsInfo[e],r={name:e,side:this.side};function s(o,l){return typeof l!="string"||l===""?"":/^https?:\/\//i.test(l)?l:o+l}function a(o,l){if(r[o])return;const c=t.getTextureParams(l,r),u=t.loadTexture(s(t.baseUrl,c.url));u.repeat.copy(c.scale),u.offset.copy(c.offset),u.wrapS=t.wrap,u.wrapT=t.wrap,(o==="map"||o==="emissiveMap")&&(u.colorSpace=Mn),r[o]=u}for(const o in i){const l=i[o];let c;if(l!=="")switch(o.toLowerCase()){case"kd":r.color=qt.colorSpaceToWorking(new ct().fromArray(l),Mn);break;case"ks":r.specular=qt.colorSpaceToWorking(new ct().fromArray(l),Mn);break;case"ke":r.emissive=qt.colorSpaceToWorking(new ct().fromArray(l),Mn);break;case"map_kd":a("map",l);break;case"map_ks":a("specularMap",l);break;case"map_ke":a("emissiveMap",l);break;case"norm":a("normalMap",l);break;case"map_bump":case"bump":a("bumpMap",l);break;case"disp":a("displacementMap",l);break;case"map_d":a("alphaMap",l),r.transparent=!0;break;case"ns":r.shininess=parseFloat(l);break;case"d":c=parseFloat(l),c<1&&(r.opacity=c,r.transparent=!0);break;case"tr":c=parseFloat(l),this.options&&this.options.invertTrProperty&&(c=1-c),c>0&&(r.opacity=1-c,r.transparent=!0);break}}return this.materials[e]=new tu(r),this.materials[e]}getTextureParams(e,t){const i={scale:new Ye(1,1),offset:new Ye(0,0)},r=e.split(/\s+/);let s;return s=r.indexOf("-bm"),s>=0&&(t.bumpScale=parseFloat(r[s+1]),r.splice(s,2)),s=r.indexOf("-mm"),s>=0&&(t.displacementBias=parseFloat(r[s+1]),t.displacementScale=parseFloat(r[s+2]),r.splice(s,3)),s=r.indexOf("-s"),s>=0&&(i.scale.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),s=r.indexOf("-o"),s>=0&&(i.offset.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),i.url=r.join(" ").trim(),i}loadTexture(e,t,i,r,s){const a=this.manager!==void 0?this.manager:YR;let o=a.getHandler(e);o===null&&(o=new ZR(a)),o.setCrossOrigin&&o.setCrossOrigin(this.crossOrigin);const l=o.load(e,i,r,s);return t!==void 0&&(l.mapping=t),l}}function dg({position:n,rotation:e}){const t=F.useRef(),i=ic(Wfe,"/assets/models/coffee-bean/source/Coffee Bean.fbx");return F.useEffect(()=>{i&&(i.scale.set(.5,.5,.5),i.traverse(r=>{r.isMesh&&(r.material=new FS({color:"#3E1D1D",roughness:.7,metalness:.2,envMapIntensity:1}))}))},[i]),BS(r=>{t.current.rotation.y+=.01}),g.jsx("group",{ref:t,position:n,rotation:e,children:g.jsx("primitive",{object:i.clone()})})}function dpe({position:n=[-19,-5,3],scale:e=10}){const t=ic(cpe,"/assets/models/a-coffee-tree/source/coffee-step00002/coffee-step00002.mtl"),i=ic(lpe,"/assets/models/a-coffee-tree/source/coffee-step00002/coffee-step00002.obj",r=>{t.preload(),r.setMaterials(t)});return F.useEffect(()=>{i&&i.traverse(r=>{r.isMesh&&(r.material&&r.material.color.r>.9&&r.material.color.g>.9&&r.material.color.b>.9?r.visible=!1:(r.castShadow=!0,r.receiveShadow=!0,r.material&&(r.material.roughness=.8,r.material.metalness=.2,r.material.envMapIntensity=1)))})},[i]),g.jsx("group",{position:n,scale:[e,e,e],children:g.jsx("primitive",{object:i.clone()})})}function hpe({count:n=100}){const e=F.useRef(),t=new Float32Array(n*3);for(let i=0;i<n;i++)t[i*3]=(Math.random()-.5)*10,t[i*3+1]=(Math.random()-.5)*10,t[i*3+2]=(Math.random()-.5)*10;return BS(i=>{e.current.rotation.y+=.001}),g.jsxs("points",{ref:e,children:[g.jsx("bufferGeometry",{children:g.jsx("bufferAttribute",{attach:"attributes-position",count:n,array:t,itemSize:3})}),g.jsx("pointsMaterial",{size:.05,color:"#8B4513",transparent:!0,opacity:.6,sizeAttenuation:!0})]})}function fpe(){return g.jsxs(lue,{camera:{position:[0,0,8],fov:45},style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",pointerEvents:"none"},shadows:!0,children:[g.jsx("ambientLight",{intensity:.5}),g.jsx("directionalLight",{position:[10,10,5],intensity:1,castShadow:!0,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048}),g.jsx("spotLight",{position:[5,5,5],angle:.3,penumbra:1,intensity:.8,castShadow:!0}),g.jsxs(Uhe,{global:!0,rotation:[.13,.1,0],polar:[-.4,.2],azimuth:[-1,.75],config:{mass:2,tension:400},snap:{mass:4,tension:400},children:[g.jsx(rfe,{rotationIntensity:1.5,floatIntensity:4,children:g.jsxs("group",{position:[0,0,0],children:[g.jsx(dg,{position:[-2,0,0],rotation:[.5,0,0]}),g.jsx(dg,{position:[2,0,0],rotation:[-.5,0,0]}),g.jsx(dg,{position:[0,2,0],rotation:[0,.5,0]}),g.jsx(dg,{position:[0,-2,0],rotation:[0,-.5,0]}),g.jsx(dg,{position:[-1.5,1.5,0],rotation:[.3,.3,0]})]})}),g.jsx(dpe,{})]}),g.jsx(hpe,{count:200}),g.jsx(_fe,{preset:"city"})]})}const ppe=()=>g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-[#1a0f0c]/50 backdrop-blur-md transition-opacity duration-500",children:g.jsxs("div",{className:"relative",children:[g.jsxs("div",{className:"coffee-loading",children:[g.jsx("span",{className:"coffee-bean"}),g.jsx("span",{className:"coffee-bean"}),g.jsx("span",{className:"coffee-bean"})]}),g.jsx("div",{className:"text-white text-xl font-medium mt-4 text-center animate-pulse",children:"Loading your experience..."})]})});function kl(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function zH(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var la={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Yp={duration:.5,overwrite:!1,delay:0},Uk,Ar,li,Ha=1e8,Vn=1/Ha,TA=Math.PI*2,mpe=TA/4,gpe=0,BH=Math.sqrt,ype=Math.cos,vpe=Math.sin,br=function(e){return typeof e=="string"},Pi=function(e){return typeof e=="function"},sc=function(e){return typeof e=="number"},jk=function(e){return typeof e>"u"},cl=function(e){return typeof e=="object"},Ls=function(e){return e!==!1},zk=function(){return typeof window<"u"},V_=function(e){return Pi(e)||br(e)},HH=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Xr=Array.isArray,CA=/(?:-?\.?\d|\.)+/gi,VH=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,ip=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,l2=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,$H=/[+-]=-?[.\d]+/,WH=/[^,'"\[\]\s]+/gi,xpe=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,pi,$o,AA,Bk,da={},gw={},GH,qH=function(e){return(gw=Kp(e,da))&&zs},Hk=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Sy=function(e,t){return!t&&console.warn(e)},XH=function(e,t){return e&&(da[e]=t)&&gw&&(gw[e]=t)||da},My=function(){return 0},_pe={suppressEvents:!0,isStart:!0,kill:!1},M1={suppressEvents:!0,kill:!1},bpe={suppressEvents:!0},Vk={},Su=[],PA={},YH,ea={},c2={},A4=30,E1=[],$k="",Wk=function(e){var t=e[0],i,r;if(cl(t)||Pi(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(r=E1.length;r--&&!E1[r].targetTest(t););i=E1[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new xV(e[r],i)))||e.splice(r,1);return e},ah=function(e){return e._gsap||Wk(Va(e))[0]._gsap},KH=function(e,t,i){return(i=e[t])&&Pi(i)?e[t]():jk(i)&&e.getAttribute&&e.getAttribute(t)||i},Os=function(e,t){return(e=e.split(",")).forEach(t)||e},Di=function(e){return Math.round(e*1e5)/1e5||0},Gi=function(e){return Math.round(e*1e7)/1e7||0},xp=function(e,t){var i=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+r:i==="-"?e-r:i==="*"?e*r:e/r},wpe=function(e,t){for(var i=t.length,r=0;e.indexOf(t[r])<0&&++r<i;);return r<i},yw=function(){var e=Su.length,t=Su.slice(0),i,r;for(PA={},Su.length=0,i=0;i<e;i++)r=t[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},Gk=function(e){return!!(e._initted||e._startAt||e.add)},ZH=function(e,t,i,r){Su.length&&!Ar&&yw(),e.render(t,i,r||!!(Ar&&t<0&&Gk(e))),Su.length&&!Ar&&yw()},JH=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(WH).length<2?t:br(e)?e.trim():e},QH=function(e){return e},ha=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Spe=function(e){return function(t,i){for(var r in i)r in t||r==="duration"&&e||r==="ease"||(t[r]=i[r])}},Kp=function(e,t){for(var i in t)e[i]=t[i];return e},P4=function n(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=cl(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},vw=function(e,t){var i={},r;for(r in e)r in t||(i[r]=e[r]);return i},h0=function(e){var t=e.parent||pi,i=e.keyframes?Spe(Xr(e.keyframes)):ha;if(Ls(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},Mpe=function(e,t){for(var i=e.length,r=i===t.length;r&&i--&&e[i]===t[i];);return i<0},eV=function(e,t,i,r,s){i===void 0&&(i="_first"),r===void 0&&(r="_last");var a=e[r],o;if(s)for(o=t[s];a&&a[s]>o;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[r]=t,t._prev=a,t.parent=t._dp=e,t},ZS=function(e,t,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var s=t._prev,a=t._next;s?s._next=a:e[i]===t&&(e[i]=a),a?a._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},Iu=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},oh=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},Epe=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},RA=function(e,t,i,r){return e._startAt&&(Ar?e._startAt.revert(M1):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},Tpe=function n(e){return!e||e._ts&&n(e.parent)},R4=function(e){return e._repeat?Zp(e._tTime,e=e.duration()+e._rDelay)*e:0},Zp=function(e,t){var i=Math.floor(e=Gi(e/t));return e&&i===e?i-1:i},xw=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},JS=function(e){return e._end=Gi(e._start+(e._tDur/Math.abs(e._ts||e._rts||Vn)||0))},QS=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=Gi(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),JS(e),i._dirty||oh(i,e)),e},tV=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=xw(e.rawTime(),t),(!t._dur||pv(0,t.totalDuration(),i)-t._tTime>Vn)&&t.render(i,!0)),oh(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-Vn}},Xo=function(e,t,i,r){return t.parent&&Iu(t),t._start=Gi((sc(i)?i:i||e!==pi?Ta(e,i,t):e._time)+t._delay),t._end=Gi(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),eV(e,t,"_first","_last",e._sort?"_start":0),kA(t)||(e._recent=t),r||tV(e,t),e._ts<0&&QS(e,e._tTime),e},nV=function(e,t){return(da.ScrollTrigger||Hk("scrollTrigger",t))&&da.ScrollTrigger.create(t,e)},iV=function(e,t,i,r,s){if(Xk(e,t,s),!e._initted)return 1;if(!i&&e._pt&&!Ar&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&YH!==na.frame)return Su.push(e),e._lazy=[s,r],1},Cpe=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},kA=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},Ape=function(e,t,i,r){var s=e.ratio,a=t<0||!t&&(!e._start&&Cpe(e)&&!(!e._initted&&kA(e))||(e._ts<0||e._dp._ts<0)&&!kA(e))?0:1,o=e._rDelay,l=0,c,u,d;if(o&&e._repeat&&(l=pv(0,e._tDur,t),u=Zp(l,o),e._yoyo&&u&1&&(a=1-a),u!==Zp(e._tTime,o)&&(s=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==s||Ar||r||e._zTime===Vn||!t&&e._zTime){if(!e._initted&&iV(e,t,r,i,l))return;for(d=e._zTime,e._zTime=t||(i?Vn:0),i||(i=t&&!d),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=l,c=e._pt;c;)c.r(a,c.d),c=c._next;t<0&&RA(e,t,i,!0),e._onUpdate&&!i&&sa(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&sa(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===a&&(a&&Iu(e,1),!i&&!Ar&&(sa(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},Ppe=function(e,t,i){var r;if(i>t)for(r=e._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},Jp=function(e,t,i,r){var s=e._repeat,a=Gi(t)||0,o=e._tTime/e._tDur;return o&&!r&&(e._time*=a/e._dur),e._dur=a,e._tDur=s?s<0?1e10:Gi(a*(s+1)+e._rDelay*s):a,o>0&&!r&&QS(e,e._tTime=e._tDur*o),e.parent&&JS(e),i||oh(e.parent,e),e},k4=function(e){return e instanceof ds?oh(e):Jp(e,e._dur)},Rpe={_start:0,endTime:My,totalDuration:My},Ta=function n(e,t,i){var r=e.labels,s=e._recent||Rpe,a=e.duration()>=Ha?s.endTime(!1):e._dur,o,l,c;return br(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),c=t.substr(-1)==="%",o=t.indexOf("="),l==="<"||l===">"?(o>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(o<0?s:i).totalDuration()/100:1)):o<0?(t in r||(r[t]=a),r[t]):(l=parseFloat(t.charAt(o-1)+t.substr(o+1)),c&&i&&(l=l/100*(Xr(i)?i[0]:i).totalDuration()),o>1?n(e,t.substr(0,o-1),i)+l:a+l)):t==null?a:+t},f0=function(e,t,i){var r=sc(t[1]),s=(r?2:1)+(e<2?0:1),a=t[s],o,l;if(r&&(a.duration=t[1]),a.parent=i,e){for(o=a,l=i;l&&!("immediateRender"in o);)o=l.vars.defaults||{},l=Ls(l.vars.inherit)&&l.parent;a.immediateRender=Ls(o.immediateRender),e<2?a.runBackwards=1:a.startAt=t[s-1]}return new Wi(t[0],a,t[s+1])},Gu=function(e,t){return e||e===0?t(e):t},pv=function(e,t,i){return i<e?e:i>t?t:i},Vr=function(e,t){return!br(e)||!(t=xpe.exec(e))?"":t[1]},kpe=function(e,t,i){return Gu(i,function(r){return pv(e,t,r)})},NA=[].slice,rV=function(e,t){return e&&cl(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&cl(e[0]))&&!e.nodeType&&e!==$o},Npe=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(r){var s;return br(r)&&!t||rV(r,1)?(s=i).push.apply(s,Va(r)):i.push(r)})||i},Va=function(e,t,i){return li&&!t&&li.selector?li.selector(e):br(e)&&!i&&(AA||!Qp())?NA.call((t||Bk).querySelectorAll(e),0):Xr(e)?Npe(e,i):rV(e)?NA.call(e,0):e?[e]:[]},IA=function(e){return e=Va(e)[0]||Sy("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return Va(t,i.querySelectorAll?i:i===e?Sy("Invalid scope")||Bk.createElement("div"):e)}},sV=function(e){return e.sort(function(){return .5-Math.random()})},aV=function(e){if(Pi(e))return e;var t=cl(e)?e:{each:e},i=lh(t.ease),r=t.from||0,s=parseFloat(t.base)||0,a={},o=r>0&&r<1,l=isNaN(r)||o,c=t.axis,u=r,d=r;return br(r)?u=d={center:.5,edges:.5,end:1}[r]||0:!o&&l&&(u=r[0],d=r[1]),function(h,p,y){var x=(y||t).length,_=a[x],v,b,w,S,A,P,k,T,E;if(!_){if(E=t.grid==="auto"?0:(t.grid||[1,Ha])[1],!E){for(k=-Ha;k<(k=y[E++].getBoundingClientRect().left)&&E<x;);E<x&&E--}for(_=a[x]=[],v=l?Math.min(E,x)*u-.5:r%E,b=E===Ha?0:l?x*d/E-.5:r/E|0,k=0,T=Ha,P=0;P<x;P++)w=P%E-v,S=b-(P/E|0),_[P]=A=c?Math.abs(c==="y"?S:w):BH(w*w+S*S),A>k&&(k=A),A<T&&(T=A);r==="random"&&sV(_),_.max=k-T,_.min=T,_.v=x=(parseFloat(t.amount)||parseFloat(t.each)*(E>x?x-1:c?c==="y"?x/E:E:Math.max(E,x/E))||0)*(r==="edges"?-1:1),_.b=x<0?s-x:s,_.u=Vr(t.amount||t.each)||0,i=i&&x<0?gV(i):i}return x=(_[h]-_.min)/_.max||0,Gi(_.b+(i?i(x):x)*_.v)+_.u}},DA=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=Gi(Math.round(parseFloat(i)/e)*e*t);return(r-r%1)/t+(sc(i)?0:Vr(i))}},oV=function(e,t){var i=Xr(e),r,s;return!i&&cl(e)&&(r=i=e.radius||Ha,e.values?(e=Va(e.values),(s=!sc(e[0]))&&(r*=r)):e=DA(e.increment)),Gu(t,i?Pi(e)?function(a){return s=e(a),Math.abs(s-a)<=r?s:a}:function(a){for(var o=parseFloat(s?a.x:a),l=parseFloat(s?a.y:0),c=Ha,u=0,d=e.length,h,p;d--;)s?(h=e[d].x-o,p=e[d].y-l,h=h*h+p*p):h=Math.abs(e[d]-o),h<c&&(c=h,u=d);return u=!r||c<=r?e[u]:a,s||u===a||sc(a)?u:u+Vr(a)}:DA(e))},lV=function(e,t,i,r){return Gu(Xr(e)?!t:i===!0?!!(i=0):!r,function(){return Xr(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*r)/r})},Ipe=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(s,a){return a(s)},r)}},Dpe=function(e,t){return function(i){return e(parseFloat(i))+(t||Vr(i))}},Lpe=function(e,t,i){return uV(e,t,0,1,i)},cV=function(e,t,i){return Gu(i,function(r){return e[~~t(r)]})},Ope=function n(e,t,i){var r=t-e;return Xr(e)?cV(e,n(0,e.length),t):Gu(i,function(s){return(r+(s-e)%r)%r+e})},Fpe=function n(e,t,i){var r=t-e,s=r*2;return Xr(e)?cV(e,n(0,e.length-1),t):Gu(i,function(a){return a=(s+(a-e)%s)%s||0,e+(a>r?s-a:a)})},Ey=function(e){for(var t=0,i="",r,s,a,o;~(r=e.indexOf("random(",t));)a=e.indexOf(")",r),o=e.charAt(r+7)==="[",s=e.substr(r+7,a-r-7).match(o?WH:CA),i+=e.substr(t,r-t)+lV(o?s:+s[0],o?0:+s[1],+s[2]||1e-5),t=a+1;return i+e.substr(t,e.length-t)},uV=function(e,t,i,r,s){var a=t-e,o=r-i;return Gu(s,function(l){return i+((l-e)/a*o||0)})},Upe=function n(e,t,i,r){var s=isNaN(e+t)?0:function(p){return(1-p)*e+p*t};if(!s){var a=br(e),o={},l,c,u,d,h;if(i===!0&&(r=1)&&(i=null),a)e={p:e},t={p:t};else if(Xr(e)&&!Xr(t)){for(u=[],d=e.length,h=d-2,c=1;c<d;c++)u.push(n(e[c-1],e[c]));d--,s=function(y){y*=d;var x=Math.min(h,~~y);return u[x](y-x)},i=t}else r||(e=Kp(Xr(e)?[]:{},e));if(!u){for(l in t)qk.call(o,e,l,"get",t[l]);s=function(y){return Zk(y,o)||(a?e.p:e)}}}return Gu(i,s)},N4=function(e,t,i){var r=e.labels,s=Ha,a,o,l;for(a in r)o=r[a]-t,o<0==!!i&&o&&s>(o=Math.abs(o))&&(l=a,s=o);return l},sa=function(e,t,i){var r=e.vars,s=r[t],a=li,o=e._ctx,l,c,u;if(s)return l=r[t+"Params"],c=r.callbackScope||e,i&&Su.length&&yw(),o&&(li=o),u=l?s.apply(c,l):s.call(c),li=a,u},Cg=function(e){return Iu(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Ar),e.progress()<1&&sa(e,"onInterrupt"),e},rp,dV=[],hV=function(e){if(e)if(e=!e.name&&e.default||e,zk()||e.headless){var t=e.name,i=Pi(e),r=t&&!i&&e.init?function(){this._props=[]}:e,s={init:My,render:Zk,add:qk,kill:eme,modifier:Qpe,rawVars:0},a={targetTest:0,get:0,getSetter:Kk,aliases:{},register:0};if(Qp(),e!==r){if(ea[t])return;ha(r,ha(vw(e,s),a)),Kp(r.prototype,Kp(s,vw(e,a))),ea[r.prop=t]=r,e.targetTest&&(E1.push(r),Vk[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}XH(t,r),e.register&&e.register(zs,r,Fs)}else dV.push(e)},Hn=255,Ag={aqua:[0,Hn,Hn],lime:[0,Hn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Hn],navy:[0,0,128],white:[Hn,Hn,Hn],olive:[128,128,0],yellow:[Hn,Hn,0],orange:[Hn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Hn,0,0],pink:[Hn,192,203],cyan:[0,Hn,Hn],transparent:[Hn,Hn,Hn,0]},u2=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*Hn+.5|0},fV=function(e,t,i){var r=e?sc(e)?[e>>16,e>>8&Hn,e&Hn]:0:Ag.black,s,a,o,l,c,u,d,h,p,y;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Ag[e])r=Ag[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),a=e.charAt(2),o=e.charAt(3),e="#"+s+s+a+a+o+o+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&Hn,r&Hn,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&Hn,e&Hn]}else if(e.substr(0,3)==="hsl"){if(r=y=e.match(CA),!t)l=+r[0]%360/360,c=+r[1]/100,u=+r[2]/100,a=u<=.5?u*(c+1):u+c-u*c,s=u*2-a,r.length>3&&(r[3]*=1),r[0]=u2(l+1/3,s,a),r[1]=u2(l,s,a),r[2]=u2(l-1/3,s,a);else if(~e.indexOf("="))return r=e.match(VH),i&&r.length<4&&(r[3]=1),r}else r=e.match(CA)||Ag.transparent;r=r.map(Number)}return t&&!y&&(s=r[0]/Hn,a=r[1]/Hn,o=r[2]/Hn,d=Math.max(s,a,o),h=Math.min(s,a,o),u=(d+h)/2,d===h?l=c=0:(p=d-h,c=u>.5?p/(2-d-h):p/(d+h),l=d===s?(a-o)/p+(a<o?6:0):d===a?(o-s)/p+2:(s-a)/p+4,l*=60),r[0]=~~(l+.5),r[1]=~~(c*100+.5),r[2]=~~(u*100+.5)),i&&r.length<4&&(r[3]=1),r},pV=function(e){var t=[],i=[],r=-1;return e.split(Mu).forEach(function(s){var a=s.match(ip)||[];t.push.apply(t,a),i.push(r+=a.length+1)}),t.c=i,t},I4=function(e,t,i){var r="",s=(e+r).match(Mu),a=t?"hsla(":"rgba(",o=0,l,c,u,d;if(!s)return e;if(s=s.map(function(h){return(h=fV(h,t,1))&&a+(t?h[0]+","+h[1]+"%,"+h[2]+"%,"+h[3]:h.join(","))+")"}),i&&(u=pV(e),l=i.c,l.join(r)!==u.c.join(r)))for(c=e.replace(Mu,"1").split(ip),d=c.length-1;o<d;o++)r+=c[o]+(~l.indexOf(o)?s.shift()||a+"0,0,0,0)":(u.length?u:s.length?s:i).shift());if(!c)for(c=e.split(Mu),d=c.length-1;o<d;o++)r+=c[o]+s[o];return r+c[d]},Mu=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Ag)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),jpe=/hsl[a]?\(/,mV=function(e){var t=e.join(" "),i;if(Mu.lastIndex=0,Mu.test(t))return i=jpe.test(t),e[1]=I4(e[1],i),e[0]=I4(e[0],i,pV(e[1])),!0},Ty,na=function(){var n=Date.now,e=500,t=33,i=n(),r=i,s=1e3/240,a=s,o=[],l,c,u,d,h,p,y=function x(_){var v=n()-r,b=_===!0,w,S,A,P;if((v>e||v<0)&&(i+=v-t),r+=v,A=r-i,w=A-a,(w>0||b)&&(P=++d.frame,h=A-d.time*1e3,d.time=A=A/1e3,a+=w+(w>=s?4:s-w),S=1),b||(l=c(x)),S)for(p=0;p<o.length;p++)o[p](A,h,P,_)};return d={time:0,frame:0,tick:function(){y(!0)},deltaRatio:function(_){return h/(1e3/(_||60))},wake:function(){GH&&(!AA&&zk()&&($o=AA=window,Bk=$o.document||{},da.gsap=zs,($o.gsapVersions||($o.gsapVersions=[])).push(zs.version),qH(gw||$o.GreenSockGlobals||!$o.gsap&&$o||{}),dV.forEach(hV)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&d.sleep(),c=u||function(_){return setTimeout(_,a-d.time*1e3+1|0)},Ty=1,y(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(l),Ty=0,c=My},lagSmoothing:function(_,v){e=_||1/0,t=Math.min(v||33,e)},fps:function(_){s=1e3/(_||240),a=d.time*1e3+s},add:function(_,v,b){var w=v?function(S,A,P,k){_(S,A,P,k),d.remove(w)}:_;return d.remove(_),o[b?"unshift":"push"](w),Qp(),w},remove:function(_,v){~(v=o.indexOf(_))&&o.splice(v,1)&&p>=v&&p--},_listeners:o},d}(),Qp=function(){return!Ty&&na.wake()},Sn={},zpe=/^[\d.\-M][\d.\-,\s]/,Bpe=/["']/g,Hpe=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),r=i[0],s=1,a=i.length,o,l,c;s<a;s++)l=i[s],o=s!==a-1?l.lastIndexOf(","):l.length,c=l.substr(0,o),t[r]=isNaN(c)?c.replace(Bpe,"").trim():+c,r=l.substr(o+1).trim();return t},Vpe=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<i?e.indexOf(")",i+1):i)},$pe=function(e){var t=(e+"").split("("),i=Sn[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[Hpe(t[1])]:Vpe(e).split(",").map(JH)):Sn._CE&&zpe.test(e)?Sn._CE("",e):i},gV=function(e){return function(t){return 1-e(1-t)}},yV=function n(e,t){for(var i=e._first,r;i;)i instanceof ds?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=t)),i=i._next},lh=function(e,t){return e&&(Pi(e)?e:Sn[e]||$pe(e))||t},Bh=function(e,t,i,r){i===void 0&&(i=function(l){return 1-t(1-l)}),r===void 0&&(r=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:i,easeInOut:r},a;return Os(e,function(o){Sn[o]=da[o]=s,Sn[a=o.toLowerCase()]=i;for(var l in s)Sn[a+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Sn[o+"."+l]=s[l]}),s},vV=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},d2=function n(e,t,i){var r=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),a=s/TA*(Math.asin(1/r)||0),o=function(u){return u===1?1:r*Math.pow(2,-10*u)*vpe((u-a)*s)+1},l=e==="out"?o:e==="in"?function(c){return 1-o(1-c)}:vV(o);return s=TA/s,l.config=function(c,u){return n(e,c,u)},l},h2=function n(e,t){t===void 0&&(t=1.70158);var i=function(a){return a?--a*a*((t+1)*a+t)+1:0},r=e==="out"?i:e==="in"?function(s){return 1-i(1-s)}:vV(i);return r.config=function(s){return n(e,s)},r};Os("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;Bh(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});Sn.Linear.easeNone=Sn.none=Sn.Linear.easeIn;Bh("Elastic",d2("in"),d2("out"),d2());(function(n,e){var t=1/e,i=2*t,r=2.5*t,s=function(o){return o<t?n*o*o:o<i?n*Math.pow(o-1.5/e,2)+.75:o<r?n*(o-=2.25/e)*o+.9375:n*Math.pow(o-2.625/e,2)+.984375};Bh("Bounce",function(a){return 1-s(1-a)},s)})(7.5625,2.75);Bh("Expo",function(n){return Math.pow(2,10*(n-1))*n+n*n*n*n*n*n*(1-n)});Bh("Circ",function(n){return-(BH(1-n*n)-1)});Bh("Sine",function(n){return n===1?1:-ype(n*mpe)+1});Bh("Back",h2("in"),h2("out"),h2());Sn.SteppedEase=Sn.steps=da.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,r=e+(t?0:1),s=t?1:0,a=1-Vn;return function(o){return((r*pv(0,a,o)|0)+s)*i}}};Yp.ease=Sn["quad.out"];Os("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return $k+=n+","+n+"Params,"});var xV=function(e,t){this.id=gpe++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:KH,this.set=t?t.getSetter:Kk},Cy=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Jp(this,+t.duration,1,1),this.data=t.data,li&&(this._ctx=li,li.data.push(this)),Ty||na.wake()}var e=n.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,Jp(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(Qp(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(QS(this,i),!s._dp||s.parent||tV(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Xo(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Vn||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),ZH(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+R4(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+R4(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?Zp(this._tTime,s)+1:1},e.timeScale=function(i,r){if(!arguments.length)return this._rts===-Vn?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?xw(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-Vn?0:this._rts,this.totalTime(pv(-Math.abs(this._delay),this.totalDuration(),s),r!==!1),JS(this),Epe(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Qp(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Vn&&(this._tTime-=Vn)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Xo(r,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(Ls(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?xw(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=bpe);var r=Ar;return Ar=i,Gk(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),Ar=r,this},e.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,k4(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,k4(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(Ta(this,i),Ls(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,Ls(r)),this._dur||(this._zTime=-Vn),this},e.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-Vn:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Vn,this},e.isActive=function(){var i=this.parent||this._dp,r=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-Vn)},e.eventCallback=function(i,r,s){var a=this.vars;return arguments.length>1?(r?(a[i]=r,s&&(a[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=r)):delete a[i],this):a[i]},e.then=function(i){var r=this;return new Promise(function(s){var a=Pi(i)?i:QH,o=function(){var c=r.then;r.then=null,Pi(a)&&(a=a(r))&&(a.then||a===r)&&(r.then=c),s(a),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?o():r._prom=o})},e.kill=function(){Cg(this)},n}();ha(Cy.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Vn,_prom:0,_ps:!1,_rts:1});var ds=function(n){zH(e,n);function e(i,r){var s;return i===void 0&&(i={}),s=n.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=Ls(i.sortChildren),pi&&Xo(i.parent||pi,kl(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&nV(kl(s),i.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,a){return f0(0,arguments,this),this},t.from=function(r,s,a){return f0(1,arguments,this),this},t.fromTo=function(r,s,a,o){return f0(2,arguments,this),this},t.set=function(r,s,a){return s.duration=0,s.parent=this,h0(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Wi(r,s,Ta(this,a),1),this},t.call=function(r,s,a){return Xo(this,Wi.delayedCall(0,r,s),a)},t.staggerTo=function(r,s,a,o,l,c,u){return a.duration=s,a.stagger=a.stagger||o,a.onComplete=c,a.onCompleteParams=u,a.parent=this,new Wi(r,a,Ta(this,l)),this},t.staggerFrom=function(r,s,a,o,l,c,u){return a.runBackwards=1,h0(a).immediateRender=Ls(a.immediateRender),this.staggerTo(r,s,a,o,l,c,u)},t.staggerFromTo=function(r,s,a,o,l,c,u,d){return o.startAt=a,h0(o).immediateRender=Ls(o.immediateRender),this.staggerTo(r,s,o,l,c,u,d)},t.render=function(r,s,a){var o=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=r<=0?0:Gi(r),d=this._zTime<0!=r<0&&(this._initted||!c),h,p,y,x,_,v,b,w,S,A,P,k;if(this!==pi&&u>l&&r>=0&&(u=l),u!==this._tTime||a||d){if(o!==this._time&&c&&(u+=this._time-o,r+=this._time-o),h=u,S=this._start,w=this._ts,v=!w,d&&(c||(o=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(P=this._yoyo,_=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(_*100+r,s,a);if(h=Gi(u%_),u===l?(x=this._repeat,h=c):(A=Gi(u/_),x=~~A,x&&x===A&&(h=c,x--),h>c&&(h=c)),A=Zp(this._tTime,_),!o&&this._tTime&&A!==x&&this._tTime-A*_-this._dur<=0&&(A=x),P&&x&1&&(h=c-h,k=1),x!==A&&!this._lock){var T=P&&A&1,E=T===(P&&x&1);if(x<A&&(T=!T),o=T?0:u%c?c:u,this._lock=1,this.render(o||(k?0:Gi(x*_)),s,!c)._lock=0,this._tTime=u,!s&&this.parent&&sa(this,"onRepeat"),this.vars.repeatRefresh&&!k&&(this.invalidate()._lock=1),o&&o!==this._time||v!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,E&&(this._lock=2,o=T?c:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!k&&this.invalidate()),this._lock=0,!this._ts&&!v)return this;yV(this,k)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(b=Ppe(this,Gi(o),Gi(h)),b&&(u-=h-(h=b._start))),this._tTime=u,this._time=h,this._act=!w,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,o=0),!o&&u&&!s&&!A&&(sa(this,"onStart"),this._tTime!==u))return this;if(h>=o&&r>=0)for(p=this._first;p;){if(y=p._next,(p._act||h>=p._start)&&p._ts&&b!==p){if(p.parent!==this)return this.render(r,s,a);if(p.render(p._ts>0?(h-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(h-p._start)*p._ts,s,a),h!==this._time||!this._ts&&!v){b=0,y&&(u+=this._zTime=-Vn);break}}p=y}else{p=this._last;for(var R=r<0?r:h;p;){if(y=p._prev,(p._act||R<=p._end)&&p._ts&&b!==p){if(p.parent!==this)return this.render(r,s,a);if(p.render(p._ts>0?(R-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(R-p._start)*p._ts,s,a||Ar&&Gk(p)),h!==this._time||!this._ts&&!v){b=0,y&&(u+=this._zTime=R?-Vn:Vn);break}}p=y}}if(b&&!s&&(this.pause(),b.render(h>=o?0:-Vn)._zTime=h>=o?1:-1,this._ts))return this._start=S,JS(this),this.render(r,s,a);this._onUpdate&&!s&&sa(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&o)&&(S===this._start||Math.abs(w)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&Iu(this,1),!s&&!(r<0&&!o)&&(u||o||!l)&&(sa(this,u===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var a=this;if(sc(s)||(s=Ta(this,s,r)),!(r instanceof Cy)){if(Xr(r))return r.forEach(function(o){return a.add(o,s)}),this;if(br(r))return this.addLabel(r,s);if(Pi(r))r=Wi.delayedCall(0,r);else return this}return this!==r?Xo(this,r,s):this},t.getChildren=function(r,s,a,o){r===void 0&&(r=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),o===void 0&&(o=-Ha);for(var l=[],c=this._first;c;)c._start>=o&&(c instanceof Wi?s&&l.push(c):(a&&l.push(c),r&&l.push.apply(l,c.getChildren(!0,s,a)))),c=c._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===r)return s[a]},t.remove=function(r){return br(r)?this.removeLabel(r):Pi(r)?this.killTweensOf(r):(r.parent===this&&ZS(this,r),r===this._recent&&(this._recent=this._last),oh(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Gi(na.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=Ta(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,a){var o=Wi.delayedCall(0,s||My,a);return o.data="isPause",this._hasPause=1,Xo(this,o,Ta(this,r))},t.removePause=function(r){var s=this._first;for(r=Ta(this,r);s;)s._start===r&&s.data==="isPause"&&Iu(s),s=s._next},t.killTweensOf=function(r,s,a){for(var o=this.getTweensOf(r,a),l=o.length;l--;)su!==o[l]&&o[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var a=[],o=Va(r),l=this._first,c=sc(s),u;l;)l instanceof Wi?wpe(l._targets,o)&&(c?(!su||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&a.push(l):(u=l.getTweensOf(o,s)).length&&a.push.apply(a,u),l=l._next;return a},t.tweenTo=function(r,s){s=s||{};var a=this,o=Ta(a,r),l=s,c=l.startAt,u=l.onStart,d=l.onStartParams,h=l.immediateRender,p,y=Wi.to(a,ha({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:s.duration||Math.abs((o-(c&&"time"in c?c.time:a._time))/a.timeScale())||Vn,onStart:function(){if(a.pause(),!p){var _=s.duration||Math.abs((o-(c&&"time"in c?c.time:a._time))/a.timeScale());y._dur!==_&&Jp(y,_,0,1).render(y._time,!0,!0),p=1}u&&u.apply(y,d||[])}},s));return h?y.render(0):y},t.tweenFromTo=function(r,s,a){return this.tweenTo(s,ha({startAt:{time:Ta(this,r)}},a))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),N4(this,Ta(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),N4(this,Ta(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Vn)},t.shiftChildren=function(r,s,a){a===void 0&&(a=0);for(var o=this._first,l=this.labels,c;o;)o._start>=a&&(o._start+=r,o._end+=r),o=o._next;if(s)for(c in l)l[c]>=a&&(l[c]+=r);return oh(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return n.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),oh(this)},t.totalDuration=function(r){var s=0,a=this,o=a._last,l=Ha,c,u,d;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-r:r));if(a._dirty){for(d=a.parent;o;)c=o._prev,o._dirty&&o.totalDuration(),u=o._start,u>l&&a._sort&&o._ts&&!a._lock?(a._lock=1,Xo(a,o,u-o._delay,1)._lock=0):l=u,u<0&&o._ts&&(s-=u,(!d&&!a._dp||d&&d.smoothChildTiming)&&(a._start+=u/a._ts,a._time-=u,a._tTime-=u),a.shiftChildren(-u,!1,-1/0),l=0),o._end>s&&o._ts&&(s=o._end),o=c;Jp(a,a===pi&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(r){if(pi._ts&&(ZH(pi,xw(r,pi)),YH=na.frame),na.frame>=A4){A4+=la.autoSleep||120;var s=pi._first;if((!s||!s._ts)&&la.autoSleep&&na._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||na.sleep()}}},e}(Cy);ha(ds.prototype,{_lock:0,_hasPause:0,_forcing:0});var Wpe=function(e,t,i,r,s,a,o){var l=new Fs(this._pt,e,t,0,1,EV,null,s),c=0,u=0,d,h,p,y,x,_,v,b;for(l.b=i,l.e=r,i+="",r+="",(v=~r.indexOf("random("))&&(r=Ey(r)),a&&(b=[i,r],a(b,e,t),i=b[0],r=b[1]),h=i.match(l2)||[];d=l2.exec(r);)y=d[0],x=r.substring(c,d.index),p?p=(p+1)%5:x.substr(-5)==="rgba("&&(p=1),y!==h[u++]&&(_=parseFloat(h[u-1])||0,l._pt={_next:l._pt,p:x||u===1?x:",",s:_,c:y.charAt(1)==="="?xp(_,y)-_:parseFloat(y)-_,m:p&&p<4?Math.round:0},c=l2.lastIndex);return l.c=c<r.length?r.substring(c,r.length):"",l.fp=o,($H.test(r)||v)&&(l.e=0),this._pt=l,l},qk=function(e,t,i,r,s,a,o,l,c,u){Pi(r)&&(r=r(s||0,e,a));var d=e[t],h=i!=="get"?i:Pi(d)?c?e[t.indexOf("set")||!Pi(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():d,p=Pi(d)?c?Kpe:SV:Yk,y;if(br(r)&&(~r.indexOf("random(")&&(r=Ey(r)),r.charAt(1)==="="&&(y=xp(h,r)+(Vr(h)||0),(y||y===0)&&(r=y))),!u||h!==r||LA)return!isNaN(h*r)&&r!==""?(y=new Fs(this._pt,e,t,+h||0,r-(h||0),typeof d=="boolean"?Jpe:MV,0,p),c&&(y.fp=c),o&&y.modifier(o,this,e),this._pt=y):(!d&&!(t in e)&&Hk(t,r),Wpe.call(this,e,t,h,r,p,l||la.stringFilter,c))},Gpe=function(e,t,i,r,s){if(Pi(e)&&(e=p0(e,s,t,i,r)),!cl(e)||e.style&&e.nodeType||Xr(e)||HH(e))return br(e)?p0(e,s,t,i,r):e;var a={},o;for(o in e)a[o]=p0(e[o],s,t,i,r);return a},_V=function(e,t,i,r,s,a){var o,l,c,u;if(ea[e]&&(o=new ea[e]).init(s,o.rawVars?t[e]:Gpe(t[e],r,s,a,i),i,r,a)!==!1&&(i._pt=l=new Fs(i._pt,s,e,0,1,o.render,o,0,o.priority),i!==rp))for(c=i._ptLookup[i._targets.indexOf(s)],u=o._props.length;u--;)c[o._props[u]]=l;return o},su,LA,Xk=function n(e,t,i){var r=e.vars,s=r.ease,a=r.startAt,o=r.immediateRender,l=r.lazy,c=r.onUpdate,u=r.runBackwards,d=r.yoyoEase,h=r.keyframes,p=r.autoRevert,y=e._dur,x=e._startAt,_=e._targets,v=e.parent,b=v&&v.data==="nested"?v.vars.targets:_,w=e._overwrite==="auto"&&!Uk,S=e.timeline,A,P,k,T,E,R,I,D,B,G,Y,X,Q;if(S&&(!h||!s)&&(s="none"),e._ease=lh(s,Yp.ease),e._yEase=d?gV(lh(d===!0?s:d,Yp.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!S&&!!r.runBackwards,!S||h&&!r.stagger){if(D=_[0]?ah(_[0]).harness:0,X=D&&r[D.prop],A=vw(r,Vk),x&&(x._zTime<0&&x.progress(1),t<0&&u&&o&&!p?x.render(-1,!0):x.revert(u&&y?M1:_pe),x._lazy=0),a){if(Iu(e._startAt=Wi.set(_,ha({data:"isStart",overwrite:!1,parent:v,immediateRender:!0,lazy:!x&&Ls(l),startAt:null,delay:0,onUpdate:c&&function(){return sa(e,"onUpdate")},stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Ar||!o&&!p)&&e._startAt.revert(M1),o&&y&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(u&&y&&!x){if(t&&(o=!1),k=ha({overwrite:!1,data:"isFromStart",lazy:o&&!x&&Ls(l),immediateRender:o,stagger:0,parent:v},A),X&&(k[D.prop]=X),Iu(e._startAt=Wi.set(_,k)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Ar?e._startAt.revert(M1):e._startAt.render(-1,!0)),e._zTime=t,!o)n(e._startAt,Vn,Vn);else if(!t)return}for(e._pt=e._ptCache=0,l=y&&Ls(l)||l&&!y,P=0;P<_.length;P++){if(E=_[P],I=E._gsap||Wk(_)[P]._gsap,e._ptLookup[P]=G={},PA[I.id]&&Su.length&&yw(),Y=b===_?P:b.indexOf(E),D&&(B=new D).init(E,X||A,e,Y,b)!==!1&&(e._pt=T=new Fs(e._pt,E,B.name,0,1,B.render,B,0,B.priority),B._props.forEach(function(L){G[L]=T}),B.priority&&(R=1)),!D||X)for(k in A)ea[k]&&(B=_V(k,A,e,Y,E,b))?B.priority&&(R=1):G[k]=T=qk.call(e,E,k,"get",A[k],Y,b,0,r.stringFilter);e._op&&e._op[P]&&e.kill(E,e._op[P]),w&&e._pt&&(su=e,pi.killTweensOf(E,G,e.globalTime(t)),Q=!e.parent,su=0),e._pt&&l&&(PA[I.id]=1)}R&&TV(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!Q,h&&t<=0&&S.render(Ha,!0,!0)},qpe=function(e,t,i,r,s,a,o,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],u,d,h,p;if(!c)for(c=e._ptCache[t]=[],h=e._ptLookup,p=e._targets.length;p--;){if(u=h[p][t],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return LA=1,e.vars[t]="+=0",Xk(e,o),LA=0,l?Sy(t+" not eligible for reset"):1;c.push(u)}for(p=c.length;p--;)d=c[p],u=d._pt||d,u.s=(r||r===0)&&!s?r:u.s+(r||0)+a*u.c,u.c=i-u.s,d.e&&(d.e=Di(i)+Vr(d.e)),d.b&&(d.b=u.s+Vr(d.b))},Xpe=function(e,t){var i=e[0]?ah(e[0]).harness:0,r=i&&i.aliases,s,a,o,l;if(!r)return t;s=Kp({},t);for(a in r)if(a in s)for(l=r[a].split(","),o=l.length;o--;)s[l[o]]=s[a];return s},Ype=function(e,t,i,r){var s=t.ease||r||"power1.inOut",a,o;if(Xr(t))o=i[e]||(i[e]=[]),t.forEach(function(l,c){return o.push({t:c/(t.length-1)*100,v:l,e:s})});else for(a in t)o=i[a]||(i[a]=[]),a==="ease"||o.push({t:parseFloat(e),v:t[a],e:s})},p0=function(e,t,i,r,s){return Pi(e)?e.call(t,i,r,s):br(e)&&~e.indexOf("random(")?Ey(e):e},bV=$k+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",wV={};Os(bV+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return wV[n]=1});var Wi=function(n){zH(e,n);function e(i,r,s,a){var o;typeof r=="number"&&(s.duration=r,r=s,s=null),o=n.call(this,a?r:h0(r))||this;var l=o.vars,c=l.duration,u=l.delay,d=l.immediateRender,h=l.stagger,p=l.overwrite,y=l.keyframes,x=l.defaults,_=l.scrollTrigger,v=l.yoyoEase,b=r.parent||pi,w=(Xr(i)||HH(i)?sc(i[0]):"length"in r)?[i]:Va(i),S,A,P,k,T,E,R,I;if(o._targets=w.length?Wk(w):Sy("GSAP target "+i+" not found. https://gsap.com",!la.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=p,y||h||V_(c)||V_(u)){if(r=o.vars,S=o.timeline=new ds({data:"nested",defaults:x||{},targets:b&&b.data==="nested"?b.vars.targets:w}),S.kill(),S.parent=S._dp=kl(o),S._start=0,h||V_(c)||V_(u)){if(k=w.length,R=h&&aV(h),cl(h))for(T in h)~bV.indexOf(T)&&(I||(I={}),I[T]=h[T]);for(A=0;A<k;A++)P=vw(r,wV),P.stagger=0,v&&(P.yoyoEase=v),I&&Kp(P,I),E=w[A],P.duration=+p0(c,kl(o),A,E,w),P.delay=(+p0(u,kl(o),A,E,w)||0)-o._delay,!h&&k===1&&P.delay&&(o._delay=u=P.delay,o._start+=u,P.delay=0),S.to(E,P,R?R(A,E,w):0),S._ease=Sn.none;S.duration()?c=u=0:o.timeline=0}else if(y){h0(ha(S.vars.defaults,{ease:"none"})),S._ease=lh(y.ease||r.ease||"none");var D=0,B,G,Y;if(Xr(y))y.forEach(function(X){return S.to(w,X,">")}),S.duration();else{P={};for(T in y)T==="ease"||T==="easeEach"||Ype(T,y[T],P,y.easeEach);for(T in P)for(B=P[T].sort(function(X,Q){return X.t-Q.t}),D=0,A=0;A<B.length;A++)G=B[A],Y={ease:G.e,duration:(G.t-(A?B[A-1].t:0))/100*c},Y[T]=G.v,S.to(w,Y,D),D+=Y.duration;S.duration()<c&&S.to({},{duration:c-S.duration()})}}c||o.duration(c=S.duration())}else o.timeline=0;return p===!0&&!Uk&&(su=kl(o),pi.killTweensOf(w),su=0),Xo(b,kl(o),s),r.reversed&&o.reverse(),r.paused&&o.paused(!0),(d||!c&&!y&&o._start===Gi(b._time)&&Ls(d)&&Tpe(kl(o))&&b.data!=="nested")&&(o._tTime=-Vn,o.render(Math.max(0,-u)||0)),_&&nV(kl(o),_),o}var t=e.prototype;return t.render=function(r,s,a){var o=this._time,l=this._tDur,c=this._dur,u=r<0,d=r>l-Vn&&!u?l:r<Vn?0:r,h,p,y,x,_,v,b,w,S;if(!c)Ape(this,r,s,a);else if(d!==this._tTime||!r||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u||this._lazy){if(h=d,w=this.timeline,this._repeat){if(x=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(x*100+r,s,a);if(h=Gi(d%x),d===l?(y=this._repeat,h=c):(_=Gi(d/x),y=~~_,y&&y===_?(h=c,y--):h>c&&(h=c)),v=this._yoyo&&y&1,v&&(S=this._yEase,h=c-h),_=Zp(this._tTime,x),h===o&&!a&&this._initted&&y===_)return this._tTime=d,this;y!==_&&(w&&this._yEase&&yV(w,v),this.vars.repeatRefresh&&!v&&!this._lock&&h!==x&&this._initted&&(this._lock=a=1,this.render(Gi(x*y),!0).invalidate()._lock=0))}if(!this._initted){if(iV(this,u?r:h,a,s,d))return this._tTime=0,this;if(o!==this._time&&!(a&&this.vars.repeatRefresh&&y!==_))return this;if(c!==this._dur)return this.render(r,s,a)}if(this._tTime=d,this._time=h,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=b=(S||this._ease)(h/c),this._from&&(this.ratio=b=1-b),!o&&d&&!s&&!_&&(sa(this,"onStart"),this._tTime!==d))return this;for(p=this._pt;p;)p.r(b,p.d),p=p._next;w&&w.render(r<0?r:w._dur*w._ease(h/this._dur),s,a)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(u&&RA(this,r,s,a),sa(this,"onUpdate")),this._repeat&&y!==_&&this.vars.onRepeat&&!s&&this.parent&&sa(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(u&&!this._onUpdate&&RA(this,r,!0,!0),(r||!c)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&Iu(this,1),!s&&!(u&&!o)&&(d||o||v)&&(sa(this,d===l?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),n.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,a,o,l){Ty||na.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||Xk(this,c),u=this._ease(c/this._dur),qpe(this,r,s,a,o,u,c,l)?this.resetTo(r,s,a,o,1):(QS(this,0),this.parent||eV(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Cg(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Ar),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,su&&su.vars.overwrite!==!0)._first||Cg(this),this.parent&&a!==this.timeline.totalDuration()&&Jp(this,this._dur*this.timeline._tDur/a,0,1),this}var o=this._targets,l=r?Va(r):o,c=this._ptLookup,u=this._pt,d,h,p,y,x,_,v;if((!s||s==="all")&&Mpe(o,l))return s==="all"&&(this._pt=0),Cg(this);for(d=this._op=this._op||[],s!=="all"&&(br(s)&&(x={},Os(s,function(b){return x[b]=1}),s=x),s=Xpe(o,s)),v=o.length;v--;)if(~l.indexOf(o[v])){h=c[v],s==="all"?(d[v]=s,y=h,p={}):(p=d[v]=d[v]||{},y=s);for(x in y)_=h&&h[x],_&&((!("kill"in _.d)||_.d.kill(x)===!0)&&ZS(this,_,"_pt"),delete h[x]),p!=="all"&&(p[x]=1)}return this._initted&&!this._pt&&u&&Cg(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return f0(1,arguments)},e.delayedCall=function(r,s,a,o){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:o})},e.fromTo=function(r,s,a){return f0(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,a){return pi.killTweensOf(r,s,a)},e}(Cy);ha(Wi.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Os("staggerTo,staggerFrom,staggerFromTo",function(n){Wi[n]=function(){var e=new ds,t=NA.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var Yk=function(e,t,i){return e[t]=i},SV=function(e,t,i){return e[t](i)},Kpe=function(e,t,i,r){return e[t](r.fp,i)},Zpe=function(e,t,i){return e.setAttribute(t,i)},Kk=function(e,t){return Pi(e[t])?SV:jk(e[t])&&e.setAttribute?Zpe:Yk},MV=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},Jpe=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},EV=function(e,t){var i=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+r,i=i._next;r+=t.c}t.set(t.t,t.p,r,t)},Zk=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},Qpe=function(e,t,i,r){for(var s=this._pt,a;s;)a=s._next,s.p===r&&s.modifier(e,t,i),s=a},eme=function(e){for(var t=this._pt,i,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?ZS(this,t,"_pt"):t.dep||(i=1),t=r;return!i},tme=function(e,t,i,r){r.mSet(e,t,r.m.call(r.tween,i,r.mt),r)},TV=function(e){for(var t=e._pt,i,r,s,a;t;){for(i=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:a)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:a=t,t=i}e._pt=s},Fs=function(){function n(t,i,r,s,a,o,l,c,u){this.t=i,this.s=s,this.c=a,this.p=r,this.r=o||MV,this.d=l||this,this.set=c||Yk,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=tme,this.m=i,this.mt=s,this.tween=r},n}();Os($k+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return Vk[n]=1});da.TweenMax=da.TweenLite=Wi;da.TimelineLite=da.TimelineMax=ds;pi=new ds({sortChildren:!1,defaults:Yp,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});la.stringFilter=mV;var ch=[],T1={},nme=[],D4=0,ime=0,f2=function(e){return(T1[e]||nme).map(function(t){return t()})},OA=function(){var e=Date.now(),t=[];e-D4>2&&(f2("matchMediaInit"),ch.forEach(function(i){var r=i.queries,s=i.conditions,a,o,l,c;for(o in r)a=$o.matchMedia(r[o]).matches,a&&(l=1),a!==s[o]&&(s[o]=a,c=1);c&&(i.revert(),l&&t.push(i))}),f2("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),D4=e,f2("matchMedia"))},CV=function(){function n(t,i){this.selector=i&&IA(i),this.data=[],this._r=[],this.isReverted=!1,this.id=ime++,t&&this.add(t)}var e=n.prototype;return e.add=function(i,r,s){Pi(i)&&(s=r,r=i,i=Pi);var a=this,o=function(){var c=li,u=a.selector,d;return c&&c!==a&&c.data.push(a),s&&(a.selector=IA(s)),li=a,d=r.apply(a,arguments),Pi(d)&&a._r.push(d),li=c,a.selector=u,a.isReverted=!1,d};return a.last=o,i===Pi?o(a,function(l){return a.add(null,l)}):i?a[i]=o:o},e.ignore=function(i){var r=li;li=null,i(this),li=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof Wi&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var s=this;if(i?function(){for(var o=s.getTweens(),l=s.data.length,c;l--;)c=s.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(u){return o.splice(o.indexOf(u),1)}));for(o.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,d){return d.g-u.g||-1/0}).forEach(function(u){return u.t.revert(i)}),l=s.data.length;l--;)c=s.data[l],c instanceof ds?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Wi)&&c.revert&&c.revert(i);s._r.forEach(function(u){return u(i,s)}),s.isReverted=!0}():this.data.forEach(function(o){return o.kill&&o.kill()}),this.clear(),r)for(var a=ch.length;a--;)ch[a].id===this.id&&ch.splice(a,1)},e.revert=function(i){this.kill(i||{})},n}(),rme=function(){function n(t){this.contexts=[],this.scope=t,li&&li.data.push(this)}var e=n.prototype;return e.add=function(i,r,s){cl(i)||(i={matches:i});var a=new CV(0,s||this.scope),o=a.conditions={},l,c,u;li&&!a.selector&&(a.selector=li.selector),this.contexts.push(a),r=a.add("onMatch",r),a.queries=i;for(c in i)c==="all"?u=1:(l=$o.matchMedia(i[c]),l&&(ch.indexOf(a)<0&&ch.push(a),(o[c]=l.matches)&&(u=1),l.addListener?l.addListener(OA):l.addEventListener("change",OA)));return u&&r(a,function(d){return a.add(null,d)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),_w={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(r){return hV(r)})},timeline:function(e){return new ds(e)},getTweensOf:function(e,t){return pi.getTweensOf(e,t)},getProperty:function(e,t,i,r){br(e)&&(e=Va(e)[0]);var s=ah(e||{}).get,a=i?QH:JH;return i==="native"&&(i=""),e&&(t?a((ea[t]&&ea[t].get||s)(e,t,i,r)):function(o,l,c){return a((ea[o]&&ea[o].get||s)(e,o,l,c))})},quickSetter:function(e,t,i){if(e=Va(e),e.length>1){var r=e.map(function(u){return zs.quickSetter(u,t,i)}),s=r.length;return function(u){for(var d=s;d--;)r[d](u)}}e=e[0]||{};var a=ea[t],o=ah(e),l=o.harness&&(o.harness.aliases||{})[t]||t,c=a?function(u){var d=new a;rp._pt=0,d.init(e,i?u+i:u,rp,0,[e]),d.render(1,d),rp._pt&&Zk(1,rp)}:o.set(e,l);return a?c:function(u){return c(e,l,i?u+i:u,o,1)}},quickTo:function(e,t,i){var r,s=zs.to(e,ha((r={},r[t]="+=0.1",r.paused=!0,r.stagger=0,r),i||{})),a=function(l,c,u){return s.resetTo(t,l,c,u)};return a.tween=s,a},isTweening:function(e){return pi.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=lh(e.ease,Yp.ease)),P4(Yp,e||{})},config:function(e){return P4(la,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,r=e.plugins,s=e.defaults,a=e.extendTimeline;(r||"").split(",").forEach(function(o){return o&&!ea[o]&&!da[o]&&Sy(t+" effect requires "+o+" plugin.")}),c2[t]=function(o,l,c){return i(Va(o),ha(l||{},s),c)},a&&(ds.prototype[t]=function(o,l,c){return this.add(c2[t](o,cl(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){Sn[e]=lh(t)},parseEase:function(e,t){return arguments.length?lh(e,t):Sn},getById:function(e){return pi.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new ds(e),r,s;for(i.smoothChildTiming=Ls(e.smoothChildTiming),pi.remove(i),i._dp=0,i._time=i._tTime=pi._time,r=pi._first;r;)s=r._next,(t||!(!r._dur&&r instanceof Wi&&r.vars.onComplete===r._targets[0]))&&Xo(i,r,r._start-r._delay),r=s;return Xo(pi,i,0),i},context:function(e,t){return e?new CV(e,t):li},matchMedia:function(e){return new rme(e)},matchMediaRefresh:function(){return ch.forEach(function(e){var t=e.conditions,i,r;for(r in t)t[r]&&(t[r]=!1,i=1);i&&e.revert()})||OA()},addEventListener:function(e,t){var i=T1[e]||(T1[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=T1[e],r=i&&i.indexOf(t);r>=0&&i.splice(r,1)},utils:{wrap:Ope,wrapYoyo:Fpe,distribute:aV,random:lV,snap:oV,normalize:Lpe,getUnit:Vr,clamp:kpe,splitColor:fV,toArray:Va,selector:IA,mapRange:uV,pipe:Ipe,unitize:Dpe,interpolate:Upe,shuffle:sV},install:qH,effects:c2,ticker:na,updateRoot:ds.updateRoot,plugins:ea,globalTimeline:pi,core:{PropTween:Fs,globals:XH,Tween:Wi,Timeline:ds,Animation:Cy,getCache:ah,_removeLinkedListItem:ZS,reverting:function(){return Ar},context:function(e){return e&&li&&(li.data.push(e),e._ctx=li),li},suppressOverwrites:function(e){return Uk=e}}};Os("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return _w[n]=Wi[n]});na.add(ds.updateRoot);rp=_w.to({},{duration:0});var sme=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},ame=function(e,t){var i=e._targets,r,s,a;for(r in t)for(s=i.length;s--;)a=e._ptLookup[s][r],a&&(a=a.d)&&(a._pt&&(a=sme(a,r)),a&&a.modifier&&a.modifier(t[r],e,i[s],r))},p2=function(e,t){return{name:e,headless:1,rawVars:1,init:function(r,s,a){a._onInit=function(o){var l,c;if(br(s)&&(l={},Os(s,function(u){return l[u]=1}),s=l),t){l={};for(c in s)l[c]=t(s[c]);s=l}ame(o,s)}}}},zs=_w.registerPlugin({name:"attr",init:function(e,t,i,r,s){var a,o,l;this.tween=i;for(a in t)l=e.getAttribute(a)||"",o=this.add(e,"setAttribute",(l||0)+"",t[a],r,s,0,0,a),o.op=a,o.b=l,this._props.push(a)},render:function(e,t){for(var i=t._pt;i;)Ar?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",headless:1,init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},p2("roundProps",DA),p2("modifiers"),p2("snap",oV))||_w;Wi.version=ds.version=zs.version="3.13.0";GH=1;zk()&&Qp();Sn.Power0;Sn.Power1;Sn.Power2;Sn.Power3;Sn.Power4;Sn.Linear;Sn.Quad;Sn.Cubic;Sn.Quart;Sn.Quint;Sn.Strong;Sn.Elastic;Sn.Back;Sn.SteppedEase;Sn.Bounce;Sn.Sine;Sn.Expo;Sn.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var L4,au,_p,Jk,Xd,O4,Qk,ome=function(){return typeof window<"u"},ac={},kd=180/Math.PI,bp=Math.PI/180,kf=Math.atan2,F4=1e8,e3=/([A-Z])/g,lme=/(left|right|width|margin|padding|x)/i,cme=/[\s,\(]\S/,Zo={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},FA=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},ume=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},dme=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},hme=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},AV=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},PV=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},fme=function(e,t,i){return e.style[t]=i},pme=function(e,t,i){return e.style.setProperty(t,i)},mme=function(e,t,i){return e._gsap[t]=i},gme=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},yme=function(e,t,i,r,s){var a=e._gsap;a.scaleX=a.scaleY=i,a.renderTransform(s,a)},vme=function(e,t,i,r,s){var a=e._gsap;a[t]=i,a.renderTransform(s,a)},gi="transform",Us=gi+"Origin",xme=function n(e,t){var i=this,r=this.target,s=r.style,a=r._gsap;if(e in ac&&s){if(this.tfm=this.tfm||{},e!=="transform")e=Zo[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return i.tfm[o]=Ll(r,o)}):this.tfm[e]=a.x?a[e]:Ll(r,e),e===Us&&(this.tfm.zOrigin=a.zOrigin);else return Zo.transform.split(",").forEach(function(o){return n.call(i,o,t)});if(this.props.indexOf(gi)>=0)return;a.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Us,t,"")),e=gi}(s||t)&&this.props.push(e,t,s[e])},RV=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},_me=function(){var e=this.props,t=this.target,i=t.style,r=t._gsap,s,a;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?i[e[s]]=e[s+2]:i.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(e3,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)r[a]=this.tfm[a];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=Qk(),(!s||!s.isStart)&&!i[gi]&&(RV(i),r.zOrigin&&i[Us]&&(i[Us]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},kV=function(e,t){var i={target:e,props:[],revert:_me,save:xme};return e._gsap||zs.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(r){return i.save(r)}),i},NV,UA=function(e,t){var i=au.createElementNS?au.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):au.createElement(e);return i&&i.style?i:au.createElement(e)},$a=function n(e,t,i){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(e3,"-$1").toLowerCase())||r.getPropertyValue(t)||!i&&n(e,em(t)||t,1)||""},U4="O,Moz,ms,Ms,Webkit".split(","),em=function(e,t,i){var r=t||Xd,s=r.style,a=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(U4[a]+e in s););return a<0?null:(a===3?"ms":a>=0?U4[a]:"")+e},jA=function(){ome()&&window.document&&(L4=window,au=L4.document,_p=au.documentElement,Xd=UA("div")||{style:{}},UA("div"),gi=em(gi),Us=gi+"Origin",Xd.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",NV=!!em("perspective"),Qk=zs.core.reverting,Jk=1)},j4=function(e){var t=e.ownerSVGElement,i=UA("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=e.cloneNode(!0),s;r.style.display="block",i.appendChild(r),_p.appendChild(i);try{s=r.getBBox()}catch{}return i.removeChild(r),_p.removeChild(i),s},z4=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},IV=function(e){var t,i;try{t=e.getBBox()}catch{t=j4(e),i=1}return t&&(t.width||t.height)||i||(t=j4(e)),t&&!t.width&&!t.x&&!t.y?{x:+z4(e,["x","cx","x1"])||0,y:+z4(e,["y","cy","y1"])||0,width:0,height:0}:t},DV=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&IV(e))},Ah=function(e,t){if(t){var i=e.style,r;t in ac&&t!==Us&&(t=gi),i.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(r==="--"?t:t.replace(e3,"-$1").toLowerCase())):i.removeAttribute(t)}},ou=function(e,t,i,r,s,a){var o=new Fs(e._pt,t,i,0,1,a?PV:AV);return e._pt=o,o.b=r,o.e=s,e._props.push(i),o},B4={deg:1,rad:1,turn:1},bme={grid:1,flex:1},Du=function n(e,t,i,r){var s=parseFloat(i)||0,a=(i+"").trim().substr((s+"").length)||"px",o=Xd.style,l=lme.test(t),c=e.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),d=100,h=r==="px",p=r==="%",y,x,_,v;if(r===a||!s||B4[r]||B4[a])return s;if(a!=="px"&&!h&&(s=n(e,t,i,"px")),v=e.getCTM&&DV(e),(p||a==="%")&&(ac[t]||~t.indexOf("adius")))return y=v?e.getBBox()[l?"width":"height"]:e[u],Di(p?s/y*d:s/100*y);if(o[l?"width":"height"]=d+(h?a:r),x=r!=="rem"&&~t.indexOf("adius")||r==="em"&&e.appendChild&&!c?e:e.parentNode,v&&(x=(e.ownerSVGElement||{}).parentNode),(!x||x===au||!x.appendChild)&&(x=au.body),_=x._gsap,_&&p&&_.width&&l&&_.time===na.time&&!_.uncache)return Di(s/_.width*d);if(p&&(t==="height"||t==="width")){var b=e.style[t];e.style[t]=d+r,y=e[u],b?e.style[t]=b:Ah(e,t)}else(p||a==="%")&&!bme[$a(x,"display")]&&(o.position=$a(e,"position")),x===e&&(o.position="static"),x.appendChild(Xd),y=Xd[u],x.removeChild(Xd),o.position="absolute";return l&&p&&(_=ah(x),_.time=na.time,_.width=x[u]),Di(h?y*s/d:y&&s?d/y*s:0)},Ll=function(e,t,i,r){var s;return Jk||jA(),t in Zo&&t!=="transform"&&(t=Zo[t],~t.indexOf(",")&&(t=t.split(",")[0])),ac[t]&&t!=="transform"?(s=Py(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:ww($a(e,Us))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=bw[t]&&bw[t](e,t,i)||$a(e,t)||KH(e,t)||(t==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?Du(e,t,s,i)+i:s},wme=function(e,t,i,r){if(!i||i==="none"){var s=em(t,e,1),a=s&&$a(e,s,1);a&&a!==i?(t=s,i=a):t==="borderColor"&&(i=$a(e,"borderTopColor"))}var o=new Fs(this._pt,e.style,t,0,1,EV),l=0,c=0,u,d,h,p,y,x,_,v,b,w,S,A;if(o.b=i,o.e=r,i+="",r+="",r.substring(0,6)==="var(--"&&(r=$a(e,r.substring(4,r.indexOf(")")))),r==="auto"&&(x=e.style[t],e.style[t]=r,r=$a(e,t)||r,x?e.style[t]=x:Ah(e,t)),u=[i,r],mV(u),i=u[0],r=u[1],h=i.match(ip)||[],A=r.match(ip)||[],A.length){for(;d=ip.exec(r);)_=d[0],b=r.substring(l,d.index),y?y=(y+1)%5:(b.substr(-5)==="rgba("||b.substr(-5)==="hsla(")&&(y=1),_!==(x=h[c++]||"")&&(p=parseFloat(x)||0,S=x.substr((p+"").length),_.charAt(1)==="="&&(_=xp(p,_)+S),v=parseFloat(_),w=_.substr((v+"").length),l=ip.lastIndex-w.length,w||(w=w||la.units[t]||S,l===r.length&&(r+=w,o.e+=w)),S!==w&&(p=Du(e,t,x,w)||0),o._pt={_next:o._pt,p:b||c===1?b:",",s:p,c:v-p,m:y&&y<4||t==="zIndex"?Math.round:0});o.c=l<r.length?r.substring(l,r.length):""}else o.r=t==="display"&&r==="none"?PV:AV;return $H.test(r)&&(o.e=0),this._pt=o,o},H4={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Sme=function(e){var t=e.split(" "),i=t[0],r=t[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(e=i,i=r,r=e),t[0]=H4[i]||i,t[1]=H4[r]||r,t.join(" ")},Mme=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,r=i.style,s=t.u,a=i._gsap,o,l,c;if(s==="all"||s===!0)r.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)o=s[c],ac[o]&&(l=1,o=o==="transformOrigin"?Us:gi),Ah(i,o);l&&(Ah(i,gi),a&&(a.svg&&i.removeAttribute("transform"),r.scale=r.rotate=r.translate="none",Py(i,1),a.uncache=1,RV(r)))}},bw={clearProps:function(e,t,i,r,s){if(s.data!=="isFromStart"){var a=e._pt=new Fs(e._pt,t,i,0,0,Mme);return a.u=r,a.pr=-10,a.tween=s,e._props.push(i),1}}},Ay=[1,0,0,1,0,0],LV={},OV=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},V4=function(e){var t=$a(e,gi);return OV(t)?Ay:t.substr(7).match(VH).map(Di)},t3=function(e,t){var i=e._gsap||ah(e),r=e.style,s=V4(e),a,o,l,c;return i.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?Ay:s):(s===Ay&&!e.offsetParent&&e!==_p&&!i.svg&&(l=r.display,r.display="block",a=e.parentNode,(!a||!e.offsetParent&&!e.getBoundingClientRect().width)&&(c=1,o=e.nextElementSibling,_p.appendChild(e)),s=V4(e),l?r.display=l:Ah(e,"display"),c&&(o?a.insertBefore(e,o):a?a.appendChild(e):_p.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},zA=function(e,t,i,r,s,a){var o=e._gsap,l=s||t3(e,!0),c=o.xOrigin||0,u=o.yOrigin||0,d=o.xOffset||0,h=o.yOffset||0,p=l[0],y=l[1],x=l[2],_=l[3],v=l[4],b=l[5],w=t.split(" "),S=parseFloat(w[0])||0,A=parseFloat(w[1])||0,P,k,T,E;i?l!==Ay&&(k=p*_-y*x)&&(T=S*(_/k)+A*(-x/k)+(x*b-_*v)/k,E=S*(-y/k)+A*(p/k)-(p*b-y*v)/k,S=T,A=E):(P=IV(e),S=P.x+(~w[0].indexOf("%")?S/100*P.width:S),A=P.y+(~(w[1]||w[0]).indexOf("%")?A/100*P.height:A)),r||r!==!1&&o.smooth?(v=S-c,b=A-u,o.xOffset=d+(v*p+b*x)-v,o.yOffset=h+(v*y+b*_)-b):o.xOffset=o.yOffset=0,o.xOrigin=S,o.yOrigin=A,o.smooth=!!r,o.origin=t,o.originIsAbsolute=!!i,e.style[Us]="0px 0px",a&&(ou(a,o,"xOrigin",c,S),ou(a,o,"yOrigin",u,A),ou(a,o,"xOffset",d,o.xOffset),ou(a,o,"yOffset",h,o.yOffset)),e.setAttribute("data-svg-origin",S+" "+A)},Py=function(e,t){var i=e._gsap||new xV(e);if("x"in i&&!t&&!i.uncache)return i;var r=e.style,s=i.scaleX<0,a="px",o="deg",l=getComputedStyle(e),c=$a(e,Us)||"0",u,d,h,p,y,x,_,v,b,w,S,A,P,k,T,E,R,I,D,B,G,Y,X,Q,L,W,j,te,ae,me,K,re;return u=d=h=x=_=v=b=w=S=0,p=y=1,i.svg=!!(e.getCTM&&DV(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[gi]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[gi]!=="none"?l[gi]:"")),r.scale=r.rotate=r.translate="none"),k=t3(e,i.svg),i.svg&&(i.uncache?(L=e.getBBox(),c=i.xOrigin-L.x+"px "+(i.yOrigin-L.y)+"px",Q=""):Q=!t&&e.getAttribute("data-svg-origin"),zA(e,Q||c,!!Q||i.originIsAbsolute,i.smooth!==!1,k)),A=i.xOrigin||0,P=i.yOrigin||0,k!==Ay&&(I=k[0],D=k[1],B=k[2],G=k[3],u=Y=k[4],d=X=k[5],k.length===6?(p=Math.sqrt(I*I+D*D),y=Math.sqrt(G*G+B*B),x=I||D?kf(D,I)*kd:0,b=B||G?kf(B,G)*kd+x:0,b&&(y*=Math.abs(Math.cos(b*bp))),i.svg&&(u-=A-(A*I+P*B),d-=P-(A*D+P*G))):(re=k[6],me=k[7],j=k[8],te=k[9],ae=k[10],K=k[11],u=k[12],d=k[13],h=k[14],T=kf(re,ae),_=T*kd,T&&(E=Math.cos(-T),R=Math.sin(-T),Q=Y*E+j*R,L=X*E+te*R,W=re*E+ae*R,j=Y*-R+j*E,te=X*-R+te*E,ae=re*-R+ae*E,K=me*-R+K*E,Y=Q,X=L,re=W),T=kf(-B,ae),v=T*kd,T&&(E=Math.cos(-T),R=Math.sin(-T),Q=I*E-j*R,L=D*E-te*R,W=B*E-ae*R,K=G*R+K*E,I=Q,D=L,B=W),T=kf(D,I),x=T*kd,T&&(E=Math.cos(T),R=Math.sin(T),Q=I*E+D*R,L=Y*E+X*R,D=D*E-I*R,X=X*E-Y*R,I=Q,Y=L),_&&Math.abs(_)+Math.abs(x)>359.9&&(_=x=0,v=180-v),p=Di(Math.sqrt(I*I+D*D+B*B)),y=Di(Math.sqrt(X*X+re*re)),T=kf(Y,X),b=Math.abs(T)>2e-4?T*kd:0,S=K?1/(K<0?-K:K):0),i.svg&&(Q=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!OV($a(e,gi)),Q&&e.setAttribute("transform",Q))),Math.abs(b)>90&&Math.abs(b)<270&&(s?(p*=-1,b+=x<=0?180:-180,x+=x<=0?180:-180):(y*=-1,b+=b<=0?180:-180)),t=t||i.uncache,i.x=u-((i.xPercent=u&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+a,i.y=d-((i.yPercent=d&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-d)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+a,i.z=h+a,i.scaleX=Di(p),i.scaleY=Di(y),i.rotation=Di(x)+o,i.rotationX=Di(_)+o,i.rotationY=Di(v)+o,i.skewX=b+o,i.skewY=w+o,i.transformPerspective=S+a,(i.zOrigin=parseFloat(c.split(" ")[2])||!t&&i.zOrigin||0)&&(r[Us]=ww(c)),i.xOffset=i.yOffset=0,i.force3D=la.force3D,i.renderTransform=i.svg?Tme:NV?FV:Eme,i.uncache=0,i},ww=function(e){return(e=e.split(" "))[0]+" "+e[1]},m2=function(e,t,i){var r=Vr(t);return Di(parseFloat(t)+parseFloat(Du(e,"x",i+"px",r)))+r},Eme=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,FV(e,t)},wd="0deg",hg="0px",Sd=") ",FV=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,a=i.x,o=i.y,l=i.z,c=i.rotation,u=i.rotationY,d=i.rotationX,h=i.skewX,p=i.skewY,y=i.scaleX,x=i.scaleY,_=i.transformPerspective,v=i.force3D,b=i.target,w=i.zOrigin,S="",A=v==="auto"&&e&&e!==1||v===!0;if(w&&(d!==wd||u!==wd)){var P=parseFloat(u)*bp,k=Math.sin(P),T=Math.cos(P),E;P=parseFloat(d)*bp,E=Math.cos(P),a=m2(b,a,k*E*-w),o=m2(b,o,-Math.sin(P)*-w),l=m2(b,l,T*E*-w+w)}_!==hg&&(S+="perspective("+_+Sd),(r||s)&&(S+="translate("+r+"%, "+s+"%) "),(A||a!==hg||o!==hg||l!==hg)&&(S+=l!==hg||A?"translate3d("+a+", "+o+", "+l+") ":"translate("+a+", "+o+Sd),c!==wd&&(S+="rotate("+c+Sd),u!==wd&&(S+="rotateY("+u+Sd),d!==wd&&(S+="rotateX("+d+Sd),(h!==wd||p!==wd)&&(S+="skew("+h+", "+p+Sd),(y!==1||x!==1)&&(S+="scale("+y+", "+x+Sd),b.style[gi]=S||"translate(0, 0)"},Tme=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,a=i.x,o=i.y,l=i.rotation,c=i.skewX,u=i.skewY,d=i.scaleX,h=i.scaleY,p=i.target,y=i.xOrigin,x=i.yOrigin,_=i.xOffset,v=i.yOffset,b=i.forceCSS,w=parseFloat(a),S=parseFloat(o),A,P,k,T,E;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=bp,c*=bp,A=Math.cos(l)*d,P=Math.sin(l)*d,k=Math.sin(l-c)*-h,T=Math.cos(l-c)*h,c&&(u*=bp,E=Math.tan(c-u),E=Math.sqrt(1+E*E),k*=E,T*=E,u&&(E=Math.tan(u),E=Math.sqrt(1+E*E),A*=E,P*=E)),A=Di(A),P=Di(P),k=Di(k),T=Di(T)):(A=d,T=h,P=k=0),(w&&!~(a+"").indexOf("px")||S&&!~(o+"").indexOf("px"))&&(w=Du(p,"x",a,"px"),S=Du(p,"y",o,"px")),(y||x||_||v)&&(w=Di(w+y-(y*A+x*k)+_),S=Di(S+x-(y*P+x*T)+v)),(r||s)&&(E=p.getBBox(),w=Di(w+r/100*E.width),S=Di(S+s/100*E.height)),E="matrix("+A+","+P+","+k+","+T+","+w+","+S+")",p.setAttribute("transform",E),b&&(p.style[gi]=E)},Cme=function(e,t,i,r,s){var a=360,o=br(s),l=parseFloat(s)*(o&&~s.indexOf("rad")?kd:1),c=l-r,u=r+c+"deg",d,h;return o&&(d=s.split("_")[1],d==="short"&&(c%=a,c!==c%(a/2)&&(c+=c<0?a:-a)),d==="cw"&&c<0?c=(c+a*F4)%a-~~(c/a)*a:d==="ccw"&&c>0&&(c=(c-a*F4)%a-~~(c/a)*a)),e._pt=h=new Fs(e._pt,t,i,r,c,ume),h.e=u,h.u="deg",e._props.push(i),h},$4=function(e,t){for(var i in t)e[i]=t[i];return e},Ame=function(e,t,i){var r=$4({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=i.style,o,l,c,u,d,h,p,y;r.svg?(c=i.getAttribute("transform"),i.setAttribute("transform",""),a[gi]=t,o=Py(i,1),Ah(i,gi),i.setAttribute("transform",c)):(c=getComputedStyle(i)[gi],a[gi]=t,o=Py(i,1),a[gi]=c);for(l in ac)c=r[l],u=o[l],c!==u&&s.indexOf(l)<0&&(p=Vr(c),y=Vr(u),d=p!==y?Du(i,l,c,y):parseFloat(c),h=parseFloat(u),e._pt=new Fs(e._pt,o,l,d,h-d,FA),e._pt.u=y||0,e._props.push(l));$4(o,r)};Os("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",r="Bottom",s="Left",a=(e<3?[t,i,r,s]:[t+s,t+i,r+i,r+s]).map(function(o){return e<2?n+o:"border"+o+n});bw[e>1?"border"+n:n]=function(o,l,c,u,d){var h,p;if(arguments.length<4)return h=a.map(function(y){return Ll(o,y,c)}),p=h.join(" "),p.split(h[0]).length===5?h[0]:p;h=(u+"").split(" "),p={},a.forEach(function(y,x){return p[y]=h[x]=h[x]||h[(x-1)/2|0]}),o.init(l,p,d)}});var UV={name:"css",register:jA,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,r,s){var a=this._props,o=e.style,l=i.vars.startAt,c,u,d,h,p,y,x,_,v,b,w,S,A,P,k,T;Jk||jA(),this.styles=this.styles||kV(e),T=this.styles.props,this.tween=i;for(x in t)if(x!=="autoRound"&&(u=t[x],!(ea[x]&&_V(x,t,i,r,e,s)))){if(p=typeof u,y=bw[x],p==="function"&&(u=u.call(i,r,e,s),p=typeof u),p==="string"&&~u.indexOf("random(")&&(u=Ey(u)),y)y(this,e,x,u,i)&&(k=1);else if(x.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(x)+"").trim(),u+="",Mu.lastIndex=0,Mu.test(c)||(_=Vr(c),v=Vr(u)),v?_!==v&&(c=Du(e,x,c,v)+v):_&&(u+=_),this.add(o,"setProperty",c,u,r,s,0,0,x),a.push(x),T.push(x,0,o[x]);else if(p!=="undefined"){if(l&&x in l?(c=typeof l[x]=="function"?l[x].call(i,r,e,s):l[x],br(c)&&~c.indexOf("random(")&&(c=Ey(c)),Vr(c+"")||c==="auto"||(c+=la.units[x]||Vr(Ll(e,x))||""),(c+"").charAt(1)==="="&&(c=Ll(e,x))):c=Ll(e,x),h=parseFloat(c),b=p==="string"&&u.charAt(1)==="="&&u.substr(0,2),b&&(u=u.substr(2)),d=parseFloat(u),x in Zo&&(x==="autoAlpha"&&(h===1&&Ll(e,"visibility")==="hidden"&&d&&(h=0),T.push("visibility",0,o.visibility),ou(this,o,"visibility",h?"inherit":"hidden",d?"inherit":"hidden",!d)),x!=="scale"&&x!=="transform"&&(x=Zo[x],~x.indexOf(",")&&(x=x.split(",")[0]))),w=x in ac,w){if(this.styles.save(x),p==="string"&&u.substring(0,6)==="var(--"&&(u=$a(e,u.substring(4,u.indexOf(")"))),d=parseFloat(u)),S||(A=e._gsap,A.renderTransform&&!t.parseTransform||Py(e,t.parseTransform),P=t.smoothOrigin!==!1&&A.smooth,S=this._pt=new Fs(this._pt,o,gi,0,1,A.renderTransform,A,0,-1),S.dep=1),x==="scale")this._pt=new Fs(this._pt,A,"scaleY",A.scaleY,(b?xp(A.scaleY,b+d):d)-A.scaleY||0,FA),this._pt.u=0,a.push("scaleY",x),x+="X";else if(x==="transformOrigin"){T.push(Us,0,o[Us]),u=Sme(u),A.svg?zA(e,u,0,P,0,this):(v=parseFloat(u.split(" ")[2])||0,v!==A.zOrigin&&ou(this,A,"zOrigin",A.zOrigin,v),ou(this,o,x,ww(c),ww(u)));continue}else if(x==="svgOrigin"){zA(e,u,1,P,0,this);continue}else if(x in LV){Cme(this,A,x,h,b?xp(h,b+u):u);continue}else if(x==="smoothOrigin"){ou(this,A,"smooth",A.smooth,u);continue}else if(x==="force3D"){A[x]=u;continue}else if(x==="transform"){Ame(this,u,e);continue}}else x in o||(x=em(x)||x);if(w||(d||d===0)&&(h||h===0)&&!cme.test(u)&&x in o)_=(c+"").substr((h+"").length),d||(d=0),v=Vr(u)||(x in la.units?la.units[x]:_),_!==v&&(h=Du(e,x,c,v)),this._pt=new Fs(this._pt,w?A:o,x,h,(b?xp(h,b+d):d)-h,!w&&(v==="px"||x==="zIndex")&&t.autoRound!==!1?hme:FA),this._pt.u=v||0,_!==v&&v!=="%"&&(this._pt.b=c,this._pt.r=dme);else if(x in o)wme.call(this,e,x,c,b?b+u:u);else if(x in e)this.add(e,x,c||e[x],b?b+u:u,r,s);else if(x!=="parseTransform"){Hk(x,u);continue}w||(x in o?T.push(x,0,o[x]):typeof e[x]=="function"?T.push(x,2,e[x]()):T.push(x,1,c||e[x])),a.push(x)}}k&&TV(this)},render:function(e,t){if(t.tween._time||!Qk())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:Ll,aliases:Zo,getSetter:function(e,t,i){var r=Zo[t];return r&&r.indexOf(",")<0&&(t=r),t in ac&&t!==Us&&(e._gsap.x||Ll(e,"x"))?i&&O4===i?t==="scale"?gme:mme:(O4=i||{})&&(t==="scale"?yme:vme):e.style&&!jk(e.style[t])?fme:~t.indexOf("-")?pme:Kk(e,t)},core:{_removeProperty:Ah,_getMatrix:t3}};zs.utils.checkPrefix=em;zs.core.getStyleSaver=kV;(function(n,e,t,i){var r=Os(n+","+e+","+t,function(s){ac[s]=1});Os(e,function(s){la.units[s]="deg",LV[s]=1}),Zo[r[13]]=n+","+e,Os(i,function(s){var a=s.split(":");Zo[a[1]]=r[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Os("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){la.units[n]="px"});zs.registerPlugin(UV);var Bc=zs.registerPlugin(UV)||zs;Bc.core.Tween;function W4(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Pme(n,e,t){return e&&W4(n.prototype,e),t&&W4(n,t),n}/*!
 * Observer 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Mr,C1,ia,lu,cu,wp,jV,Nd,m0,zV,Wl,co,BV,HV=function(){return Mr||typeof window<"u"&&(Mr=window.gsap)&&Mr.registerPlugin&&Mr},VV=1,sp=[],pn=[],rl=[],g0=Date.now,BA=function(e,t){return t},Rme=function(){var e=m0.core,t=e.bridge||{},i=e._scrollers,r=e._proxies;i.push.apply(i,pn),r.push.apply(r,rl),pn=i,rl=r,BA=function(a,o){return t[a](o)}},Eu=function(e,t){return~rl.indexOf(e)&&rl[rl.indexOf(e)+1][t]},y0=function(e){return!!~zV.indexOf(e)},ns=function(e,t,i,r,s){return e.addEventListener(t,i,{passive:r!==!1,capture:!!s})},ts=function(e,t,i,r){return e.removeEventListener(t,i,!!r)},$_="scrollLeft",W_="scrollTop",HA=function(){return Wl&&Wl.isPressed||pn.cache++},Sw=function(e,t){var i=function r(s){if(s||s===0){VV&&(ia.history.scrollRestoration="manual");var a=Wl&&Wl.isPressed;s=r.v=Math.round(s)||(Wl&&Wl.iOS?1:0),e(s),r.cacheID=pn.cache,a&&BA("ss",s)}else(t||pn.cache!==r.cacheID||BA("ref"))&&(r.cacheID=pn.cache,r.v=e());return r.v+r.offset};return i.offset=0,e&&i},hs={s:$_,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Sw(function(n){return arguments.length?ia.scrollTo(n,nr.sc()):ia.pageXOffset||lu[$_]||cu[$_]||wp[$_]||0})},nr={s:W_,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:hs,sc:Sw(function(n){return arguments.length?ia.scrollTo(hs.sc(),n):ia.pageYOffset||lu[W_]||cu[W_]||wp[W_]||0})},Ts=function(e,t){return(t&&t._ctx&&t._ctx.selector||Mr.utils.toArray)(e)[0]||(typeof e=="string"&&Mr.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},kme=function(e,t){for(var i=t.length;i--;)if(t[i]===e||t[i].contains(e))return!0;return!1},Lu=function(e,t){var i=t.s,r=t.sc;y0(e)&&(e=lu.scrollingElement||cu);var s=pn.indexOf(e),a=r===nr.sc?1:2;!~s&&(s=pn.push(e)-1),pn[s+a]||ns(e,"scroll",HA);var o=pn[s+a],l=o||(pn[s+a]=Sw(Eu(e,i),!0)||(y0(e)?r:Sw(function(c){return arguments.length?e[i]=c:e[i]})));return l.target=e,o||(l.smooth=Mr.getProperty(e,"scrollBehavior")==="smooth"),l},VA=function(e,t,i){var r=e,s=e,a=g0(),o=a,l=t||50,c=Math.max(500,l*3),u=function(y,x){var _=g0();x||_-a>l?(s=r,r=y,o=a,a=_):i?r+=y:r=s+(y-s)/(_-o)*(a-o)},d=function(){s=r=i?0:r,o=a=0},h=function(y){var x=o,_=s,v=g0();return(y||y===0)&&y!==r&&u(y),a===o||v-o>c?0:(r+(i?_:-_))/((i?v:a)-x)*1e3};return{update:u,reset:d,getVelocity:h}},fg=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},G4=function(e){var t=Math.max.apply(Math,e),i=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(i)?t:i},$V=function(){m0=Mr.core.globals().ScrollTrigger,m0&&m0.core&&Rme()},WV=function(e){return Mr=e||HV(),!C1&&Mr&&typeof document<"u"&&document.body&&(ia=window,lu=document,cu=lu.documentElement,wp=lu.body,zV=[ia,lu,cu,wp],Mr.utils.clamp,BV=Mr.core.context||function(){},Nd="onpointerenter"in wp?"pointer":"mouse",jV=Ui.isTouch=ia.matchMedia&&ia.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in ia||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,co=Ui.eventTypes=("ontouchstart"in cu?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in cu?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return VV=0},500),$V(),C1=1),C1};hs.op=nr;pn.cache=0;var Ui=function(){function n(t){this.init(t)}var e=n.prototype;return e.init=function(i){C1||WV(Mr)||console.warn("Please gsap.registerPlugin(Observer)"),m0||$V();var r=i.tolerance,s=i.dragMinimum,a=i.type,o=i.target,l=i.lineHeight,c=i.debounce,u=i.preventDefault,d=i.onStop,h=i.onStopDelay,p=i.ignore,y=i.wheelSpeed,x=i.event,_=i.onDragStart,v=i.onDragEnd,b=i.onDrag,w=i.onPress,S=i.onRelease,A=i.onRight,P=i.onLeft,k=i.onUp,T=i.onDown,E=i.onChangeX,R=i.onChangeY,I=i.onChange,D=i.onToggleX,B=i.onToggleY,G=i.onHover,Y=i.onHoverEnd,X=i.onMove,Q=i.ignoreCheck,L=i.isNormalizer,W=i.onGestureStart,j=i.onGestureEnd,te=i.onWheel,ae=i.onEnable,me=i.onDisable,K=i.onClick,re=i.scrollSpeed,oe=i.capture,_e=i.allowClicks,Ce=i.lockAxis,Ee=i.onLockAxis;this.target=o=Ts(o)||cu,this.vars=i,p&&(p=Mr.utils.toArray(p)),r=r||1e-9,s=s||0,y=y||1,re=re||1,a=a||"wheel,touch,pointer",c=c!==!1,l||(l=parseFloat(ia.getComputedStyle(wp).lineHeight)||22);var Pe,De,xe,we,$,Se,de,J=this,ue=0,je=0,Le=i.passive||!u&&i.passive!==!1,Xe=Lu(o,hs),gt=Lu(o,nr),V=Xe(),O=gt(),ee=~a.indexOf("touch")&&!~a.indexOf("pointer")&&co[0]==="pointerdown",le=y0(o),ge=o.ownerDocument||lu,ye=[0,0,0],Oe=[0,0,0],Te=0,ze=function(){return Te=g0()},Je=function(Ct,Gt){return(J.event=Ct)&&p&&kme(Ct.target,p)||Gt&&ee&&Ct.pointerType!=="touch"||Q&&Q(Ct,Gt)},He=function(){J._vx.reset(),J._vy.reset(),De.pause(),d&&d(J)},nt=function(){var Ct=J.deltaX=G4(ye),Gt=J.deltaY=G4(Oe),dt=Math.abs(Ct)>=r,Bt=Math.abs(Gt)>=r;I&&(dt||Bt)&&I(J,Ct,Gt,ye,Oe),dt&&(A&&J.deltaX>0&&A(J),P&&J.deltaX<0&&P(J),E&&E(J),D&&J.deltaX<0!=ue<0&&D(J),ue=J.deltaX,ye[0]=ye[1]=ye[2]=0),Bt&&(T&&J.deltaY>0&&T(J),k&&J.deltaY<0&&k(J),R&&R(J),B&&J.deltaY<0!=je<0&&B(J),je=J.deltaY,Oe[0]=Oe[1]=Oe[2]=0),(we||xe)&&(X&&X(J),xe&&(_&&xe===1&&_(J),b&&b(J),xe=0),we=!1),Se&&!(Se=!1)&&Ee&&Ee(J),$&&(te(J),$=!1),Pe=0},Tt=function(Ct,Gt,dt){ye[dt]+=Ct,Oe[dt]+=Gt,J._vx.update(Ct),J._vy.update(Gt),c?Pe||(Pe=requestAnimationFrame(nt)):nt()},st=function(Ct,Gt){Ce&&!de&&(J.axis=de=Math.abs(Ct)>Math.abs(Gt)?"x":"y",Se=!0),de!=="y"&&(ye[2]+=Ct,J._vx.update(Ct,!0)),de!=="x"&&(Oe[2]+=Gt,J._vy.update(Gt,!0)),c?Pe||(Pe=requestAnimationFrame(nt)):nt()},We=function(Ct){if(!Je(Ct,1)){Ct=fg(Ct,u);var Gt=Ct.clientX,dt=Ct.clientY,Bt=Gt-J.x,Mt=dt-J.y,Ut=J.isDragging;J.x=Gt,J.y=dt,(Ut||(Bt||Mt)&&(Math.abs(J.startX-Gt)>=s||Math.abs(J.startY-dt)>=s))&&(xe=Ut?2:1,Ut||(J.isDragging=!0),st(Bt,Mt))}},vt=J.onPress=function(ft){Je(ft,1)||ft&&ft.button||(J.axis=de=null,De.pause(),J.isPressed=!0,ft=fg(ft),ue=je=0,J.startX=J.x=ft.clientX,J.startY=J.y=ft.clientY,J._vx.reset(),J._vy.reset(),ns(L?o:ge,co[1],We,Le,!0),J.deltaX=J.deltaY=0,w&&w(J))},ce=J.onRelease=function(ft){if(!Je(ft,1)){ts(L?o:ge,co[1],We,!0);var Ct=!isNaN(J.y-J.startY),Gt=J.isDragging,dt=Gt&&(Math.abs(J.x-J.startX)>3||Math.abs(J.y-J.startY)>3),Bt=fg(ft);!dt&&Ct&&(J._vx.reset(),J._vy.reset(),u&&_e&&Mr.delayedCall(.08,function(){if(g0()-Te>300&&!ft.defaultPrevented){if(ft.target.click)ft.target.click();else if(ge.createEvent){var Mt=ge.createEvent("MouseEvents");Mt.initMouseEvent("click",!0,!0,ia,1,Bt.screenX,Bt.screenY,Bt.clientX,Bt.clientY,!1,!1,!1,!1,0,null),ft.target.dispatchEvent(Mt)}}})),J.isDragging=J.isGesturing=J.isPressed=!1,d&&Gt&&!L&&De.restart(!0),xe&&nt(),v&&Gt&&v(J),S&&S(J,dt)}},ke=function(Ct){return Ct.touches&&Ct.touches.length>1&&(J.isGesturing=!0)&&W(Ct,J.isDragging)},Ge=function(){return(J.isGesturing=!1)||j(J)},ht=function(Ct){if(!Je(Ct)){var Gt=Xe(),dt=gt();Tt((Gt-V)*re,(dt-O)*re,1),V=Gt,O=dt,d&&De.restart(!0)}},Qe=function(Ct){if(!Je(Ct)){Ct=fg(Ct,u),te&&($=!0);var Gt=(Ct.deltaMode===1?l:Ct.deltaMode===2?ia.innerHeight:1)*y;Tt(Ct.deltaX*Gt,Ct.deltaY*Gt,0),d&&!L&&De.restart(!0)}},Ve=function(Ct){if(!Je(Ct)){var Gt=Ct.clientX,dt=Ct.clientY,Bt=Gt-J.x,Mt=dt-J.y;J.x=Gt,J.y=dt,we=!0,d&&De.restart(!0),(Bt||Mt)&&st(Bt,Mt)}},xt=function(Ct){J.event=Ct,G(J)},Ot=function(Ct){J.event=Ct,Y(J)},bn=function(Ct){return Je(Ct)||fg(Ct,u)&&K(J)};De=J._dc=Mr.delayedCall(h||.25,He).pause(),J.deltaX=J.deltaY=0,J._vx=VA(0,50,!0),J._vy=VA(0,50,!0),J.scrollX=Xe,J.scrollY=gt,J.isDragging=J.isGesturing=J.isPressed=!1,BV(this),J.enable=function(ft){return J.isEnabled||(ns(le?ge:o,"scroll",HA),a.indexOf("scroll")>=0&&ns(le?ge:o,"scroll",ht,Le,oe),a.indexOf("wheel")>=0&&ns(o,"wheel",Qe,Le,oe),(a.indexOf("touch")>=0&&jV||a.indexOf("pointer")>=0)&&(ns(o,co[0],vt,Le,oe),ns(ge,co[2],ce),ns(ge,co[3],ce),_e&&ns(o,"click",ze,!0,!0),K&&ns(o,"click",bn),W&&ns(ge,"gesturestart",ke),j&&ns(ge,"gestureend",Ge),G&&ns(o,Nd+"enter",xt),Y&&ns(o,Nd+"leave",Ot),X&&ns(o,Nd+"move",Ve)),J.isEnabled=!0,J.isDragging=J.isGesturing=J.isPressed=we=xe=!1,J._vx.reset(),J._vy.reset(),V=Xe(),O=gt(),ft&&ft.type&&vt(ft),ae&&ae(J)),J},J.disable=function(){J.isEnabled&&(sp.filter(function(ft){return ft!==J&&y0(ft.target)}).length||ts(le?ge:o,"scroll",HA),J.isPressed&&(J._vx.reset(),J._vy.reset(),ts(L?o:ge,co[1],We,!0)),ts(le?ge:o,"scroll",ht,oe),ts(o,"wheel",Qe,oe),ts(o,co[0],vt,oe),ts(ge,co[2],ce),ts(ge,co[3],ce),ts(o,"click",ze,!0),ts(o,"click",bn),ts(ge,"gesturestart",ke),ts(ge,"gestureend",Ge),ts(o,Nd+"enter",xt),ts(o,Nd+"leave",Ot),ts(o,Nd+"move",Ve),J.isEnabled=J.isPressed=J.isDragging=!1,me&&me(J))},J.kill=J.revert=function(){J.disable();var ft=sp.indexOf(J);ft>=0&&sp.splice(ft,1),Wl===J&&(Wl=0)},sp.push(J),L&&y0(o)&&(Wl=J),J.enable(x)},Pme(n,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),n}();Ui.version="3.13.0";Ui.create=function(n){return new Ui(n)};Ui.register=WV;Ui.getAll=function(){return sp.slice()};Ui.getById=function(n){return sp.filter(function(e){return e.vars.id===n})[0]};HV()&&Mr.registerPlugin(Ui);/*!
 * ScrollTrigger 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var kt,Ff,fn,qn,ta,kn,n3,Mw,Ry,v0,Pg,G_,jr,eM,$A,ls,q4,X4,Uf,GV,g2,qV,as,WA,XV,YV,Oc,GA,i3,Sp,r3,Ew,qA,y2,q_=1,Br=Date.now,v2=Br(),Ga=0,Rg=0,Y4=function(e,t,i){var r=Js(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return i["_"+t+"Clamp"]=r,r?e.substr(6,e.length-7):e},K4=function(e,t){return t&&(!Js(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},Nme=function n(){return Rg&&requestAnimationFrame(n)},Z4=function(){return eM=1},J4=function(){return eM=0},Wo=function(e){return e},kg=function(e){return Math.round(e*1e5)/1e5||0},KV=function(){return typeof window<"u"},ZV=function(){return kt||KV()&&(kt=window.gsap)&&kt.registerPlugin&&kt},Ph=function(e){return!!~n3.indexOf(e)},JV=function(e){return(e==="Height"?r3:fn["inner"+e])||ta["client"+e]||kn["client"+e]},QV=function(e){return Eu(e,"getBoundingClientRect")||(Ph(e)?function(){return N1.width=fn.innerWidth,N1.height=r3,N1}:function(){return Ul(e)})},Ime=function(e,t,i){var r=i.d,s=i.d2,a=i.a;return(a=Eu(e,"getBoundingClientRect"))?function(){return a()[r]}:function(){return(t?JV(s):e["client"+s])||0}},Dme=function(e,t){return!t||~rl.indexOf(e)?QV(e):function(){return N1}},Jo=function(e,t){var i=t.s,r=t.d2,s=t.d,a=t.a;return Math.max(0,(i="scroll"+r)&&(a=Eu(e,i))?a()-QV(e)()[s]:Ph(e)?(ta[i]||kn[i])-JV(r):e[i]-e["offset"+r])},X_=function(e,t){for(var i=0;i<Uf.length;i+=3)(!t||~t.indexOf(Uf[i+1]))&&e(Uf[i],Uf[i+1],Uf[i+2])},Js=function(e){return typeof e=="string"},$r=function(e){return typeof e=="function"},Ng=function(e){return typeof e=="number"},Id=function(e){return typeof e=="object"},pg=function(e,t,i){return e&&e.progress(t?0:1)&&i&&e.pause()},x2=function(e,t){if(e.enabled){var i=e._ctx?e._ctx.add(function(){return t(e)}):t(e);i&&i.totalTime&&(e.callbackAnimation=i)}},Nf=Math.abs,e$="left",t$="top",s3="right",a3="bottom",uh="width",dh="height",x0="Right",_0="Left",b0="Top",w0="Bottom",Vi="padding",ka="margin",tm="Width",o3="Height",er="px",Na=function(e){return fn.getComputedStyle(e)},Lme=function(e){var t=Na(e).position;e.style.position=t==="absolute"||t==="fixed"?t:"relative"},Q4=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Ul=function(e,t){var i=t&&Na(e)[$A]!=="matrix(1, 0, 0, 1, 0, 0)"&&kt.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=e.getBoundingClientRect();return i&&i.progress(0).kill(),r},Tw=function(e,t){var i=t.d2;return e["offset"+i]||e["client"+i]||0},n$=function(e){var t=[],i=e.labels,r=e.duration(),s;for(s in i)t.push(i[s]/r);return t},Ome=function(e){return function(t){return kt.utils.snap(n$(e),t)}},l3=function(e){var t=kt.utils.snap(e),i=Array.isArray(e)&&e.slice(0).sort(function(r,s){return r-s});return i?function(r,s,a){a===void 0&&(a=.001);var o;if(!s)return t(r);if(s>0){for(r-=a,o=0;o<i.length;o++)if(i[o]>=r)return i[o];return i[o-1]}else for(o=i.length,r+=a;o--;)if(i[o]<=r)return i[o];return i[0]}:function(r,s,a){a===void 0&&(a=.001);var o=t(r);return!s||Math.abs(o-r)<a||o-r<0==s<0?o:t(s<0?r-e:r+e)}},Fme=function(e){return function(t,i){return l3(n$(e))(t,i.direction)}},Y_=function(e,t,i,r){return i.split(",").forEach(function(s){return e(t,s,r)})},mr=function(e,t,i,r,s){return e.addEventListener(t,i,{passive:!r,capture:!!s})},fr=function(e,t,i,r){return e.removeEventListener(t,i,!!r)},K_=function(e,t,i){i=i&&i.wheelHandler,i&&(e(t,"wheel",i),e(t,"touchmove",i))},e5={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},Z_={toggleActions:"play",anticipatePin:0},Cw={top:0,left:0,center:.5,bottom:1,right:1},A1=function(e,t){if(Js(e)){var i=e.indexOf("="),r=~i?+(e.charAt(i-1)+1)*parseFloat(e.substr(i+1)):0;~i&&(e.indexOf("%")>i&&(r*=t/100),e=e.substr(0,i-1)),e=r+(e in Cw?Cw[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},J_=function(e,t,i,r,s,a,o,l){var c=s.startColor,u=s.endColor,d=s.fontSize,h=s.indent,p=s.fontWeight,y=qn.createElement("div"),x=Ph(i)||Eu(i,"pinType")==="fixed",_=e.indexOf("scroller")!==-1,v=x?kn:i,b=e.indexOf("start")!==-1,w=b?c:u,S="border-color:"+w+";font-size:"+d+";color:"+w+";font-weight:"+p+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return S+="position:"+((_||l)&&x?"fixed;":"absolute;"),(_||l||!x)&&(S+=(r===nr?s3:a3)+":"+(a+parseFloat(h))+"px;"),o&&(S+="box-sizing:border-box;text-align:left;width:"+o.offsetWidth+"px;"),y._isStart=b,y.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),y.style.cssText=S,y.innerText=t||t===0?e+"-"+t:e,v.children[0]?v.insertBefore(y,v.children[0]):v.appendChild(y),y._offset=y["offset"+r.op.d2],P1(y,0,r,b),y},P1=function(e,t,i,r){var s={display:"block"},a=i[r?"os2":"p2"],o=i[r?"p2":"os2"];e._isFlipped=r,s[i.a+"Percent"]=r?-100:0,s[i.a]=r?"1px":0,s["border"+a+tm]=1,s["border"+o+tm]=0,s[i.p]=t+"px",kt.set(e,s)},cn=[],XA={},ky,t5=function(){return Br()-Ga>34&&(ky||(ky=requestAnimationFrame(Kl)))},If=function(){(!as||!as.isPressed||as.startX>kn.clientWidth)&&(pn.cache++,as?ky||(ky=requestAnimationFrame(Kl)):Kl(),Ga||kh("scrollStart"),Ga=Br())},_2=function(){YV=fn.innerWidth,XV=fn.innerHeight},Ig=function(e){pn.cache++,(e===!0||!jr&&!qV&&!qn.fullscreenElement&&!qn.webkitFullscreenElement&&(!WA||YV!==fn.innerWidth||Math.abs(fn.innerHeight-XV)>fn.innerHeight*.25))&&Mw.restart(!0)},Rh={},Ume=[],i$=function n(){return fr(gn,"scrollEnd",n)||Yd(!0)},kh=function(e){return Rh[e]&&Rh[e].map(function(t){return t()})||Ume},Ks=[],r$=function(e){for(var t=0;t<Ks.length;t+=5)(!e||Ks[t+4]&&Ks[t+4].query===e)&&(Ks[t].style.cssText=Ks[t+1],Ks[t].getBBox&&Ks[t].setAttribute("transform",Ks[t+2]||""),Ks[t+3].uncache=1)},c3=function(e,t){var i;for(ls=0;ls<cn.length;ls++)i=cn[ls],i&&(!t||i._ctx===t)&&(e?i.kill(1):i.revert(!0,!0));Ew=!0,t&&r$(t),t||kh("revert")},s$=function(e,t){pn.cache++,(t||!cs)&&pn.forEach(function(i){return $r(i)&&i.cacheID++&&(i.rec=0)}),Js(e)&&(fn.history.scrollRestoration=i3=e)},cs,hh=0,n5,jme=function(){if(n5!==hh){var e=n5=hh;requestAnimationFrame(function(){return e===hh&&Yd(!0)})}},a$=function(){kn.appendChild(Sp),r3=!as&&Sp.offsetHeight||fn.innerHeight,kn.removeChild(Sp)},i5=function(e){return Ry(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},Yd=function(e,t){if(ta=qn.documentElement,kn=qn.body,n3=[fn,qn,ta,kn],Ga&&!e&&!Ew){mr(gn,"scrollEnd",i$);return}a$(),cs=gn.isRefreshing=!0,pn.forEach(function(r){return $r(r)&&++r.cacheID&&(r.rec=r())});var i=kh("refreshInit");GV&&gn.sort(),t||c3(),pn.forEach(function(r){$r(r)&&(r.smooth&&(r.target.style.scrollBehavior="auto"),r(0))}),cn.slice(0).forEach(function(r){return r.refresh()}),Ew=!1,cn.forEach(function(r){if(r._subPinOffset&&r.pin){var s=r.vars.horizontal?"offsetWidth":"offsetHeight",a=r.pin[s];r.revert(!0,1),r.adjustPinSpacing(r.pin[s]-a),r.refresh()}}),qA=1,i5(!0),cn.forEach(function(r){var s=Jo(r.scroller,r._dir),a=r.vars.end==="max"||r._endClamp&&r.end>s,o=r._startClamp&&r.start>=s;(a||o)&&r.setPositions(o?s-1:r.start,a?Math.max(o?s:r.start+1,s):r.end,!0)}),i5(!1),qA=0,i.forEach(function(r){return r&&r.render&&r.render(-1)}),pn.forEach(function(r){$r(r)&&(r.smooth&&requestAnimationFrame(function(){return r.target.style.scrollBehavior="smooth"}),r.rec&&r(r.rec))}),s$(i3,1),Mw.pause(),hh++,cs=2,Kl(2),cn.forEach(function(r){return $r(r.vars.onRefresh)&&r.vars.onRefresh(r)}),cs=gn.isRefreshing=!1,kh("refresh")},YA=0,R1=1,S0,Kl=function(e){if(e===2||!cs&&!Ew){gn.isUpdating=!0,S0&&S0.update(0);var t=cn.length,i=Br(),r=i-v2>=50,s=t&&cn[0].scroll();if(R1=YA>s?-1:1,cs||(YA=s),r&&(Ga&&!eM&&i-Ga>200&&(Ga=0,kh("scrollEnd")),Pg=v2,v2=i),R1<0){for(ls=t;ls-- >0;)cn[ls]&&cn[ls].update(0,r);R1=1}else for(ls=0;ls<t;ls++)cn[ls]&&cn[ls].update(0,r);gn.isUpdating=!1}ky=0},KA=[e$,t$,a3,s3,ka+w0,ka+x0,ka+b0,ka+_0,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],k1=KA.concat([uh,dh,"boxSizing","max"+tm,"max"+o3,"position",ka,Vi,Vi+b0,Vi+x0,Vi+w0,Vi+_0]),zme=function(e,t,i){Mp(i);var r=e._gsap;if(r.spacerIsNative)Mp(r.spacerState);else if(e._gsap.swappedIn){var s=t.parentNode;s&&(s.insertBefore(e,t),s.removeChild(t))}e._gsap.swappedIn=!1},b2=function(e,t,i,r){if(!e._gsap.swappedIn){for(var s=KA.length,a=t.style,o=e.style,l;s--;)l=KA[s],a[l]=i[l];a.position=i.position==="absolute"?"absolute":"relative",i.display==="inline"&&(a.display="inline-block"),o[a3]=o[s3]="auto",a.flexBasis=i.flexBasis||"auto",a.overflow="visible",a.boxSizing="border-box",a[uh]=Tw(e,hs)+er,a[dh]=Tw(e,nr)+er,a[Vi]=o[ka]=o[t$]=o[e$]="0",Mp(r),o[uh]=o["max"+tm]=i[uh],o[dh]=o["max"+o3]=i[dh],o[Vi]=i[Vi],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},Bme=/([A-Z])/g,Mp=function(e){if(e){var t=e.t.style,i=e.length,r=0,s,a;for((e.t._gsap||kt.core.getCache(e.t)).uncache=1;r<i;r+=2)a=e[r+1],s=e[r],a?t[s]=a:t[s]&&t.removeProperty(s.replace(Bme,"-$1").toLowerCase())}},Q_=function(e){for(var t=k1.length,i=e.style,r=[],s=0;s<t;s++)r.push(k1[s],i[k1[s]]);return r.t=e,r},Hme=function(e,t,i){for(var r=[],s=e.length,a=i?8:0,o;a<s;a+=2)o=e[a],r.push(o,o in t?t[o]:e[a+1]);return r.t=e.t,r},N1={left:0,top:0},r5=function(e,t,i,r,s,a,o,l,c,u,d,h,p,y){$r(e)&&(e=e(l)),Js(e)&&e.substr(0,3)==="max"&&(e=h+(e.charAt(4)==="="?A1("0"+e.substr(3),i):0));var x=p?p.time():0,_,v,b;if(p&&p.seek(0),isNaN(e)||(e=+e),Ng(e))p&&(e=kt.utils.mapRange(p.scrollTrigger.start,p.scrollTrigger.end,0,h,e)),o&&P1(o,i,r,!0);else{$r(t)&&(t=t(l));var w=(e||"0").split(" "),S,A,P,k;b=Ts(t,l)||kn,S=Ul(b)||{},(!S||!S.left&&!S.top)&&Na(b).display==="none"&&(k=b.style.display,b.style.display="block",S=Ul(b),k?b.style.display=k:b.style.removeProperty("display")),A=A1(w[0],S[r.d]),P=A1(w[1]||"0",i),e=S[r.p]-c[r.p]-u+A+s-P,o&&P1(o,P,r,i-P<20||o._isStart&&P>20),i-=i-P}if(y&&(l[y]=e||-.001,e<0&&(e=0)),a){var T=e+i,E=a._isStart;_="scroll"+r.d2,P1(a,T,r,E&&T>20||!E&&(d?Math.max(kn[_],ta[_]):a.parentNode[_])<=T+1),d&&(c=Ul(o),d&&(a.style[r.op.p]=c[r.op.p]-r.op.m-a._offset+er))}return p&&b&&(_=Ul(b),p.seek(h),v=Ul(b),p._caScrollDist=_[r.p]-v[r.p],e=e/p._caScrollDist*h),p&&p.seek(x),p?e:Math.round(e)},Vme=/(webkit|moz|length|cssText|inset)/i,s5=function(e,t,i,r){if(e.parentNode!==t){var s=e.style,a,o;if(t===kn){e._stOrig=s.cssText,o=Na(e);for(a in o)!+a&&!Vme.test(a)&&o[a]&&typeof s[a]=="string"&&a!=="0"&&(s[a]=o[a]);s.top=i,s.left=r}else s.cssText=e._stOrig;kt.core.getCache(e).uncache=1,t.appendChild(e)}},o$=function(e,t,i){var r=t,s=r;return function(a){var o=Math.round(e());return o!==r&&o!==s&&Math.abs(o-r)>3&&Math.abs(o-s)>3&&(a=o,i&&i()),s=r,r=Math.round(a),r}},e1=function(e,t,i){var r={};r[t.p]="+="+i,kt.set(e,r)},a5=function(e,t){var i=Lu(e,t),r="_scroll"+t.p2,s=function a(o,l,c,u,d){var h=a.tween,p=l.onComplete,y={};c=c||i();var x=o$(i,c,function(){h.kill(),a.tween=0});return d=u&&d||0,u=u||o-c,h&&h.kill(),l[r]=o,l.inherit=!1,l.modifiers=y,y[r]=function(){return x(c+u*h.ratio+d*h.ratio*h.ratio)},l.onUpdate=function(){pn.cache++,a.tween&&Kl()},l.onComplete=function(){a.tween=0,p&&p.call(h)},h=a.tween=kt.to(e,l),h};return e[r]=i,i.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},mr(e,"wheel",i.wheelHandler),gn.isTouch&&mr(e,"touchmove",i.wheelHandler),s},gn=function(){function n(t,i){Ff||n.register(kt)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),GA(this),this.init(t,i)}var e=n.prototype;return e.init=function(i,r){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Rg){this.update=this.refresh=this.kill=Wo;return}i=Q4(Js(i)||Ng(i)||i.nodeType?{trigger:i}:i,Z_);var s=i,a=s.onUpdate,o=s.toggleClass,l=s.id,c=s.onToggle,u=s.onRefresh,d=s.scrub,h=s.trigger,p=s.pin,y=s.pinSpacing,x=s.invalidateOnRefresh,_=s.anticipatePin,v=s.onScrubComplete,b=s.onSnapComplete,w=s.once,S=s.snap,A=s.pinReparent,P=s.pinSpacer,k=s.containerAnimation,T=s.fastScrollEnd,E=s.preventOverlaps,R=i.horizontal||i.containerAnimation&&i.horizontal!==!1?hs:nr,I=!d&&d!==0,D=Ts(i.scroller||fn),B=kt.core.getCache(D),G=Ph(D),Y=("pinType"in i?i.pinType:Eu(D,"pinType")||G&&"fixed")==="fixed",X=[i.onEnter,i.onLeave,i.onEnterBack,i.onLeaveBack],Q=I&&i.toggleActions.split(" "),L="markers"in i?i.markers:Z_.markers,W=G?0:parseFloat(Na(D)["border"+R.p2+tm])||0,j=this,te=i.onRefreshInit&&function(){return i.onRefreshInit(j)},ae=Ime(D,G,R),me=Dme(D,G),K=0,re=0,oe=0,_e=Lu(D,R),Ce,Ee,Pe,De,xe,we,$,Se,de,J,ue,je,Le,Xe,gt,V,O,ee,le,ge,ye,Oe,Te,ze,Je,He,nt,Tt,st,We,vt,ce,ke,Ge,ht,Qe,Ve,xt,Ot;if(j._startClamp=j._endClamp=!1,j._dir=R,_*=45,j.scroller=D,j.scroll=k?k.time.bind(k):_e,De=_e(),j.vars=i,r=r||i.animation,"refreshPriority"in i&&(GV=1,i.refreshPriority===-9999&&(S0=j)),B.tweenScroll=B.tweenScroll||{top:a5(D,nr),left:a5(D,hs)},j.tweenTo=Ce=B.tweenScroll[R.p],j.scrubDuration=function(dt){ke=Ng(dt)&&dt,ke?ce?ce.duration(dt):ce=kt.to(r,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:ke,paused:!0,onComplete:function(){return v&&v(j)}}):(ce&&ce.progress(1).kill(),ce=0)},r&&(r.vars.lazy=!1,r._initted&&!j.isReverted||r.vars.immediateRender!==!1&&i.immediateRender!==!1&&r.duration()&&r.render(0,!0,!0),j.animation=r.pause(),r.scrollTrigger=j,j.scrubDuration(d),We=0,l||(l=r.vars.id)),S&&((!Id(S)||S.push)&&(S={snapTo:S}),"scrollBehavior"in kn.style&&kt.set(G?[kn,ta]:D,{scrollBehavior:"auto"}),pn.forEach(function(dt){return $r(dt)&&dt.target===(G?qn.scrollingElement||ta:D)&&(dt.smooth=!1)}),Pe=$r(S.snapTo)?S.snapTo:S.snapTo==="labels"?Ome(r):S.snapTo==="labelsDirectional"?Fme(r):S.directional!==!1?function(dt,Bt){return l3(S.snapTo)(dt,Br()-re<500?0:Bt.direction)}:kt.utils.snap(S.snapTo),Ge=S.duration||{min:.1,max:2},Ge=Id(Ge)?v0(Ge.min,Ge.max):v0(Ge,Ge),ht=kt.delayedCall(S.delay||ke/2||.1,function(){var dt=_e(),Bt=Br()-re<500,Mt=Ce.tween;if((Bt||Math.abs(j.getVelocity())<10)&&!Mt&&!eM&&K!==dt){var Ut=(dt-we)/Xe,In=r&&!I?r.totalProgress():Ut,Ht=Bt?0:(In-vt)/(Br()-Pg)*1e3||0,Nt=kt.utils.clamp(-Ut,1-Ut,Nf(Ht/2)*Ht/.185),si=Ut+(S.inertia===!1?0:Nt),Rn,z,q=S,fe=q.onStart,Me=q.onInterrupt,Ne=q.onComplete;if(Rn=Pe(si,j),Ng(Rn)||(Rn=si),z=Math.max(0,Math.round(we+Rn*Xe)),dt<=$&&dt>=we&&z!==dt){if(Mt&&!Mt._initted&&Mt.data<=Nf(z-dt))return;S.inertia===!1&&(Nt=Rn-Ut),Ce(z,{duration:Ge(Nf(Math.max(Nf(si-In),Nf(Rn-In))*.185/Ht/.05||0)),ease:S.ease||"power3",data:Nf(z-dt),onInterrupt:function(){return ht.restart(!0)&&Me&&Me(j)},onComplete:function(){j.update(),K=_e(),r&&!I&&(ce?ce.resetTo("totalProgress",Rn,r._tTime/r._tDur):r.progress(Rn)),We=vt=r&&!I?r.totalProgress():j.progress,b&&b(j),Ne&&Ne(j)}},dt,Nt*Xe,z-dt-Nt*Xe),fe&&fe(j,Ce.tween)}}else j.isActive&&K!==dt&&ht.restart(!0)}).pause()),l&&(XA[l]=j),h=j.trigger=Ts(h||p!==!0&&p),Ot=h&&h._gsap&&h._gsap.stRevert,Ot&&(Ot=Ot(j)),p=p===!0?h:Ts(p),Js(o)&&(o={targets:h,className:o}),p&&(y===!1||y===ka||(y=!y&&p.parentNode&&p.parentNode.style&&Na(p.parentNode).display==="flex"?!1:Vi),j.pin=p,Ee=kt.core.getCache(p),Ee.spacer?gt=Ee.pinState:(P&&(P=Ts(P),P&&!P.nodeType&&(P=P.current||P.nativeElement),Ee.spacerIsNative=!!P,P&&(Ee.spacerState=Q_(P))),Ee.spacer=ee=P||qn.createElement("div"),ee.classList.add("pin-spacer"),l&&ee.classList.add("pin-spacer-"+l),Ee.pinState=gt=Q_(p)),i.force3D!==!1&&kt.set(p,{force3D:!0}),j.spacer=ee=Ee.spacer,st=Na(p),ze=st[y+R.os2],ge=kt.getProperty(p),ye=kt.quickSetter(p,R.a,er),b2(p,ee,st),O=Q_(p)),L){je=Id(L)?Q4(L,e5):e5,J=J_("scroller-start",l,D,R,je,0),ue=J_("scroller-end",l,D,R,je,0,J),le=J["offset"+R.op.d2];var bn=Ts(Eu(D,"content")||D);Se=this.markerStart=J_("start",l,bn,R,je,le,0,k),de=this.markerEnd=J_("end",l,bn,R,je,le,0,k),k&&(xt=kt.quickSetter([Se,de],R.a,er)),!Y&&!(rl.length&&Eu(D,"fixedMarkers")===!0)&&(Lme(G?kn:D),kt.set([J,ue],{force3D:!0}),He=kt.quickSetter(J,R.a,er),Tt=kt.quickSetter(ue,R.a,er))}if(k){var ft=k.vars.onUpdate,Ct=k.vars.onUpdateParams;k.eventCallback("onUpdate",function(){j.update(0,0,1),ft&&ft.apply(k,Ct||[])})}if(j.previous=function(){return cn[cn.indexOf(j)-1]},j.next=function(){return cn[cn.indexOf(j)+1]},j.revert=function(dt,Bt){if(!Bt)return j.kill(!0);var Mt=dt!==!1||!j.enabled,Ut=jr;Mt!==j.isReverted&&(Mt&&(Qe=Math.max(_e(),j.scroll.rec||0),oe=j.progress,Ve=r&&r.progress()),Se&&[Se,de,J,ue].forEach(function(In){return In.style.display=Mt?"none":"block"}),Mt&&(jr=j,j.update(Mt)),p&&(!A||!j.isActive)&&(Mt?zme(p,ee,gt):b2(p,ee,Na(p),Je)),Mt||j.update(Mt),jr=Ut,j.isReverted=Mt)},j.refresh=function(dt,Bt,Mt,Ut){if(!((jr||!j.enabled)&&!Bt)){if(p&&dt&&Ga){mr(n,"scrollEnd",i$);return}!cs&&te&&te(j),jr=j,Ce.tween&&!Mt&&(Ce.tween.kill(),Ce.tween=0),ce&&ce.pause(),x&&r&&(r.revert({kill:!1}).invalidate(),r.getChildren&&r.getChildren(!0,!0,!1).forEach(function(lt){return lt.vars.immediateRender&&lt.render(0,!0,!0)})),j.isReverted||j.revert(!0,!0),j._subPinOffset=!1;var In=ae(),Ht=me(),Nt=k?k.duration():Jo(D,R),si=Xe<=.01||!Xe,Rn=0,z=Ut||0,q=Id(Mt)?Mt.end:i.end,fe=i.endTrigger||h,Me=Id(Mt)?Mt.start:i.start||(i.start===0||!h?0:p?"0 0":"0 100%"),Ne=j.pinnedContainer=i.pinnedContainer&&Ts(i.pinnedContainer,j),Ie=h&&Math.max(0,cn.indexOf(j))||0,Ke=Ie,$e,H,ne,he,se,pe,Ae,Ue,Ze,qe,it,at,et;for(L&&Id(Mt)&&(at=kt.getProperty(J,R.p),et=kt.getProperty(ue,R.p));Ke-- >0;)pe=cn[Ke],pe.end||pe.refresh(0,1)||(jr=j),Ae=pe.pin,Ae&&(Ae===h||Ae===p||Ae===Ne)&&!pe.isReverted&&(qe||(qe=[]),qe.unshift(pe),pe.revert(!0,!0)),pe!==cn[Ke]&&(Ie--,Ke--);for($r(Me)&&(Me=Me(j)),Me=Y4(Me,"start",j),we=r5(Me,h,In,R,_e(),Se,J,j,Ht,W,Y,Nt,k,j._startClamp&&"_startClamp")||(p?-.001:0),$r(q)&&(q=q(j)),Js(q)&&!q.indexOf("+=")&&(~q.indexOf(" ")?q=(Js(Me)?Me.split(" ")[0]:"")+q:(Rn=A1(q.substr(2),In),q=Js(Me)?Me:(k?kt.utils.mapRange(0,k.duration(),k.scrollTrigger.start,k.scrollTrigger.end,we):we)+Rn,fe=h)),q=Y4(q,"end",j),$=Math.max(we,r5(q||(fe?"100% 0":Nt),fe,In,R,_e()+Rn,de,ue,j,Ht,W,Y,Nt,k,j._endClamp&&"_endClamp"))||-.001,Rn=0,Ke=Ie;Ke--;)pe=cn[Ke],Ae=pe.pin,Ae&&pe.start-pe._pinPush<=we&&!k&&pe.end>0&&($e=pe.end-(j._startClamp?Math.max(0,pe.start):pe.start),(Ae===h&&pe.start-pe._pinPush<we||Ae===Ne)&&isNaN(Me)&&(Rn+=$e*(1-pe.progress)),Ae===p&&(z+=$e));if(we+=Rn,$+=Rn,j._startClamp&&(j._startClamp+=Rn),j._endClamp&&!cs&&(j._endClamp=$||-.001,$=Math.min($,Jo(D,R))),Xe=$-we||(we-=.01)&&.001,si&&(oe=kt.utils.clamp(0,1,kt.utils.normalize(we,$,Qe))),j._pinPush=z,Se&&Rn&&($e={},$e[R.a]="+="+Rn,Ne&&($e[R.p]="-="+_e()),kt.set([Se,de],$e)),p&&!(qA&&j.end>=Jo(D,R)))$e=Na(p),he=R===nr,ne=_e(),Oe=parseFloat(ge(R.a))+z,!Nt&&$>1&&(it=(G?qn.scrollingElement||ta:D).style,it={style:it,value:it["overflow"+R.a.toUpperCase()]},G&&Na(kn)["overflow"+R.a.toUpperCase()]!=="scroll"&&(it.style["overflow"+R.a.toUpperCase()]="scroll")),b2(p,ee,$e),O=Q_(p),H=Ul(p,!0),Ue=Y&&Lu(D,he?hs:nr)(),y?(Je=[y+R.os2,Xe+z+er],Je.t=ee,Ke=y===Vi?Tw(p,R)+Xe+z:0,Ke&&(Je.push(R.d,Ke+er),ee.style.flexBasis!=="auto"&&(ee.style.flexBasis=Ke+er)),Mp(Je),Ne&&cn.forEach(function(lt){lt.pin===Ne&&lt.vars.pinSpacing!==!1&&(lt._subPinOffset=!0)}),Y&&_e(Qe)):(Ke=Tw(p,R),Ke&&ee.style.flexBasis!=="auto"&&(ee.style.flexBasis=Ke+er)),Y&&(se={top:H.top+(he?ne-we:Ue)+er,left:H.left+(he?Ue:ne-we)+er,boxSizing:"border-box",position:"fixed"},se[uh]=se["max"+tm]=Math.ceil(H.width)+er,se[dh]=se["max"+o3]=Math.ceil(H.height)+er,se[ka]=se[ka+b0]=se[ka+x0]=se[ka+w0]=se[ka+_0]="0",se[Vi]=$e[Vi],se[Vi+b0]=$e[Vi+b0],se[Vi+x0]=$e[Vi+x0],se[Vi+w0]=$e[Vi+w0],se[Vi+_0]=$e[Vi+_0],V=Hme(gt,se,A),cs&&_e(0)),r?(Ze=r._initted,g2(1),r.render(r.duration(),!0,!0),Te=ge(R.a)-Oe+Xe+z,nt=Math.abs(Xe-Te)>1,Y&&nt&&V.splice(V.length-2,2),r.render(0,!0,!0),Ze||r.invalidate(!0),r.parent||r.totalTime(r.totalTime()),g2(0)):Te=Xe,it&&(it.value?it.style["overflow"+R.a.toUpperCase()]=it.value:it.style.removeProperty("overflow-"+R.a));else if(h&&_e()&&!k)for(H=h.parentNode;H&&H!==kn;)H._pinOffset&&(we-=H._pinOffset,$-=H._pinOffset),H=H.parentNode;qe&&qe.forEach(function(lt){return lt.revert(!1,!0)}),j.start=we,j.end=$,De=xe=cs?Qe:_e(),!k&&!cs&&(De<Qe&&_e(Qe),j.scroll.rec=0),j.revert(!1,!0),re=Br(),ht&&(K=-1,ht.restart(!0)),jr=0,r&&I&&(r._initted||Ve)&&r.progress()!==Ve&&r.progress(Ve||0,!0).render(r.time(),!0,!0),(si||oe!==j.progress||k||x||r&&!r._initted)&&(r&&!I&&(r._initted||oe||r.vars.immediateRender!==!1)&&r.totalProgress(k&&we<-.001&&!oe?kt.utils.normalize(we,$,0):oe,!0),j.progress=si||(De-we)/Xe===oe?0:oe),p&&y&&(ee._pinOffset=Math.round(j.progress*Te)),ce&&ce.invalidate(),isNaN(at)||(at-=kt.getProperty(J,R.p),et-=kt.getProperty(ue,R.p),e1(J,R,at),e1(Se,R,at-(Ut||0)),e1(ue,R,et),e1(de,R,et-(Ut||0))),si&&!cs&&j.update(),u&&!cs&&!Le&&(Le=!0,u(j),Le=!1)}},j.getVelocity=function(){return(_e()-xe)/(Br()-Pg)*1e3||0},j.endAnimation=function(){pg(j.callbackAnimation),r&&(ce?ce.progress(1):r.paused()?I||pg(r,j.direction<0,1):pg(r,r.reversed()))},j.labelToScroll=function(dt){return r&&r.labels&&(we||j.refresh()||we)+r.labels[dt]/r.duration()*Xe||0},j.getTrailing=function(dt){var Bt=cn.indexOf(j),Mt=j.direction>0?cn.slice(0,Bt).reverse():cn.slice(Bt+1);return(Js(dt)?Mt.filter(function(Ut){return Ut.vars.preventOverlaps===dt}):Mt).filter(function(Ut){return j.direction>0?Ut.end<=we:Ut.start>=$})},j.update=function(dt,Bt,Mt){if(!(k&&!Mt&&!dt)){var Ut=cs===!0?Qe:j.scroll(),In=dt?0:(Ut-we)/Xe,Ht=In<0?0:In>1?1:In||0,Nt=j.progress,si,Rn,z,q,fe,Me,Ne,Ie;if(Bt&&(xe=De,De=k?_e():Ut,S&&(vt=We,We=r&&!I?r.totalProgress():Ht)),_&&p&&!jr&&!q_&&Ga&&(!Ht&&we<Ut+(Ut-xe)/(Br()-Pg)*_?Ht=1e-4:Ht===1&&$>Ut+(Ut-xe)/(Br()-Pg)*_&&(Ht=.9999)),Ht!==Nt&&j.enabled){if(si=j.isActive=!!Ht&&Ht<1,Rn=!!Nt&&Nt<1,Me=si!==Rn,fe=Me||!!Ht!=!!Nt,j.direction=Ht>Nt?1:-1,j.progress=Ht,fe&&!jr&&(z=Ht&&!Nt?0:Ht===1?1:Nt===1?2:3,I&&(q=!Me&&Q[z+1]!=="none"&&Q[z+1]||Q[z],Ie=r&&(q==="complete"||q==="reset"||q in r))),E&&(Me||Ie)&&(Ie||d||!r)&&($r(E)?E(j):j.getTrailing(E).forEach(function(ne){return ne.endAnimation()})),I||(ce&&!jr&&!q_?(ce._dp._time-ce._start!==ce._time&&ce.render(ce._dp._time-ce._start),ce.resetTo?ce.resetTo("totalProgress",Ht,r._tTime/r._tDur):(ce.vars.totalProgress=Ht,ce.invalidate().restart())):r&&r.totalProgress(Ht,!!(jr&&(re||dt)))),p){if(dt&&y&&(ee.style[y+R.os2]=ze),!Y)ye(kg(Oe+Te*Ht));else if(fe){if(Ne=!dt&&Ht>Nt&&$+1>Ut&&Ut+1>=Jo(D,R),A)if(!dt&&(si||Ne)){var Ke=Ul(p,!0),$e=Ut-we;s5(p,kn,Ke.top+(R===nr?$e:0)+er,Ke.left+(R===nr?0:$e)+er)}else s5(p,ee);Mp(si||Ne?V:O),nt&&Ht<1&&si||ye(Oe+(Ht===1&&!Ne?Te:0))}}S&&!Ce.tween&&!jr&&!q_&&ht.restart(!0),o&&(Me||w&&Ht&&(Ht<1||!y2))&&Ry(o.targets).forEach(function(ne){return ne.classList[si||w?"add":"remove"](o.className)}),a&&!I&&!dt&&a(j),fe&&!jr?(I&&(Ie&&(q==="complete"?r.pause().totalProgress(1):q==="reset"?r.restart(!0).pause():q==="restart"?r.restart(!0):r[q]()),a&&a(j)),(Me||!y2)&&(c&&Me&&x2(j,c),X[z]&&x2(j,X[z]),w&&(Ht===1?j.kill(!1,1):X[z]=0),Me||(z=Ht===1?1:3,X[z]&&x2(j,X[z]))),T&&!si&&Math.abs(j.getVelocity())>(Ng(T)?T:2500)&&(pg(j.callbackAnimation),ce?ce.progress(1):pg(r,q==="reverse"?1:!Ht,1))):I&&a&&!jr&&a(j)}if(Tt){var H=k?Ut/k.duration()*(k._caScrollDist||0):Ut;He(H+(J._isFlipped?1:0)),Tt(H)}xt&&xt(-Ut/k.duration()*(k._caScrollDist||0))}},j.enable=function(dt,Bt){j.enabled||(j.enabled=!0,mr(D,"resize",Ig),G||mr(D,"scroll",If),te&&mr(n,"refreshInit",te),dt!==!1&&(j.progress=oe=0,De=xe=K=_e()),Bt!==!1&&j.refresh())},j.getTween=function(dt){return dt&&Ce?Ce.tween:ce},j.setPositions=function(dt,Bt,Mt,Ut){if(k){var In=k.scrollTrigger,Ht=k.duration(),Nt=In.end-In.start;dt=In.start+Nt*dt/Ht,Bt=In.start+Nt*Bt/Ht}j.refresh(!1,!1,{start:K4(dt,Mt&&!!j._startClamp),end:K4(Bt,Mt&&!!j._endClamp)},Ut),j.update()},j.adjustPinSpacing=function(dt){if(Je&&dt){var Bt=Je.indexOf(R.d)+1;Je[Bt]=parseFloat(Je[Bt])+dt+er,Je[1]=parseFloat(Je[1])+dt+er,Mp(Je)}},j.disable=function(dt,Bt){if(j.enabled&&(dt!==!1&&j.revert(!0,!0),j.enabled=j.isActive=!1,Bt||ce&&ce.pause(),Qe=0,Ee&&(Ee.uncache=1),te&&fr(n,"refreshInit",te),ht&&(ht.pause(),Ce.tween&&Ce.tween.kill()&&(Ce.tween=0)),!G)){for(var Mt=cn.length;Mt--;)if(cn[Mt].scroller===D&&cn[Mt]!==j)return;fr(D,"resize",Ig),G||fr(D,"scroll",If)}},j.kill=function(dt,Bt){j.disable(dt,Bt),ce&&!Bt&&ce.kill(),l&&delete XA[l];var Mt=cn.indexOf(j);Mt>=0&&cn.splice(Mt,1),Mt===ls&&R1>0&&ls--,Mt=0,cn.forEach(function(Ut){return Ut.scroller===j.scroller&&(Mt=1)}),Mt||cs||(j.scroll.rec=0),r&&(r.scrollTrigger=null,dt&&r.revert({kill:!1}),Bt||r.kill()),Se&&[Se,de,J,ue].forEach(function(Ut){return Ut.parentNode&&Ut.parentNode.removeChild(Ut)}),S0===j&&(S0=0),p&&(Ee&&(Ee.uncache=1),Mt=0,cn.forEach(function(Ut){return Ut.pin===p&&Mt++}),Mt||(Ee.spacer=0)),i.onKill&&i.onKill(j)},cn.push(j),j.enable(!1,!1),Ot&&Ot(j),r&&r.add&&!Xe){var Gt=j.update;j.update=function(){j.update=Gt,pn.cache++,we||$||j.refresh()},kt.delayedCall(.01,j.update),Xe=.01,we=$=0}else j.refresh();p&&jme()},n.register=function(i){return Ff||(kt=i||ZV(),KV()&&window.document&&n.enable(),Ff=Rg),Ff},n.defaults=function(i){if(i)for(var r in i)Z_[r]=i[r];return Z_},n.disable=function(i,r){Rg=0,cn.forEach(function(a){return a[r?"kill":"disable"](i)}),fr(fn,"wheel",If),fr(qn,"scroll",If),clearInterval(G_),fr(qn,"touchcancel",Wo),fr(kn,"touchstart",Wo),Y_(fr,qn,"pointerdown,touchstart,mousedown",Z4),Y_(fr,qn,"pointerup,touchend,mouseup",J4),Mw.kill(),X_(fr);for(var s=0;s<pn.length;s+=3)K_(fr,pn[s],pn[s+1]),K_(fr,pn[s],pn[s+2])},n.enable=function(){if(fn=window,qn=document,ta=qn.documentElement,kn=qn.body,kt&&(Ry=kt.utils.toArray,v0=kt.utils.clamp,GA=kt.core.context||Wo,g2=kt.core.suppressOverwrites||Wo,i3=fn.history.scrollRestoration||"auto",YA=fn.pageYOffset||0,kt.core.globals("ScrollTrigger",n),kn)){Rg=1,Sp=document.createElement("div"),Sp.style.height="100vh",Sp.style.position="absolute",a$(),Nme(),Ui.register(kt),n.isTouch=Ui.isTouch,Oc=Ui.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),WA=Ui.isTouch===1,mr(fn,"wheel",If),n3=[fn,qn,ta,kn],kt.matchMedia?(n.matchMedia=function(c){var u=kt.matchMedia(),d;for(d in c)u.add(d,c[d]);return u},kt.addEventListener("matchMediaInit",function(){return c3()}),kt.addEventListener("matchMediaRevert",function(){return r$()}),kt.addEventListener("matchMedia",function(){Yd(0,1),kh("matchMedia")}),kt.matchMedia().add("(orientation: portrait)",function(){return _2(),_2})):console.warn("Requires GSAP 3.11.0 or later"),_2(),mr(qn,"scroll",If);var i=kn.hasAttribute("style"),r=kn.style,s=r.borderTopStyle,a=kt.core.Animation.prototype,o,l;for(a.revert||Object.defineProperty(a,"revert",{value:function(){return this.time(-.01,!0)}}),r.borderTopStyle="solid",o=Ul(kn),nr.m=Math.round(o.top+nr.sc())||0,hs.m=Math.round(o.left+hs.sc())||0,s?r.borderTopStyle=s:r.removeProperty("border-top-style"),i||(kn.setAttribute("style",""),kn.removeAttribute("style")),G_=setInterval(t5,250),kt.delayedCall(.5,function(){return q_=0}),mr(qn,"touchcancel",Wo),mr(kn,"touchstart",Wo),Y_(mr,qn,"pointerdown,touchstart,mousedown",Z4),Y_(mr,qn,"pointerup,touchend,mouseup",J4),$A=kt.utils.checkPrefix("transform"),k1.push($A),Ff=Br(),Mw=kt.delayedCall(.2,Yd).pause(),Uf=[qn,"visibilitychange",function(){var c=fn.innerWidth,u=fn.innerHeight;qn.hidden?(q4=c,X4=u):(q4!==c||X4!==u)&&Ig()},qn,"DOMContentLoaded",Yd,fn,"load",Yd,fn,"resize",Ig],X_(mr),cn.forEach(function(c){return c.enable(0,1)}),l=0;l<pn.length;l+=3)K_(fr,pn[l],pn[l+1]),K_(fr,pn[l],pn[l+2])}},n.config=function(i){"limitCallbacks"in i&&(y2=!!i.limitCallbacks);var r=i.syncInterval;r&&clearInterval(G_)||(G_=r)&&setInterval(t5,r),"ignoreMobileResize"in i&&(WA=n.isTouch===1&&i.ignoreMobileResize),"autoRefreshEvents"in i&&(X_(fr)||X_(mr,i.autoRefreshEvents||"none"),qV=(i.autoRefreshEvents+"").indexOf("resize")===-1)},n.scrollerProxy=function(i,r){var s=Ts(i),a=pn.indexOf(s),o=Ph(s);~a&&pn.splice(a,o?6:2),r&&(o?rl.unshift(fn,r,kn,r,ta,r):rl.unshift(s,r))},n.clearMatchMedia=function(i){cn.forEach(function(r){return r._ctx&&r._ctx.query===i&&r._ctx.kill(!0,!0)})},n.isInViewport=function(i,r,s){var a=(Js(i)?Ts(i):i).getBoundingClientRect(),o=a[s?uh:dh]*r||0;return s?a.right-o>0&&a.left+o<fn.innerWidth:a.bottom-o>0&&a.top+o<fn.innerHeight},n.positionInViewport=function(i,r,s){Js(i)&&(i=Ts(i));var a=i.getBoundingClientRect(),o=a[s?uh:dh],l=r==null?o/2:r in Cw?Cw[r]*o:~r.indexOf("%")?parseFloat(r)*o/100:parseFloat(r)||0;return s?(a.left+l)/fn.innerWidth:(a.top+l)/fn.innerHeight},n.killAll=function(i){if(cn.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),i!==!0){var r=Rh.killAll||[];Rh={},r.forEach(function(s){return s()})}},n}();gn.version="3.13.0";gn.saveStyles=function(n){return n?Ry(n).forEach(function(e){if(e&&e.style){var t=Ks.indexOf(e);t>=0&&Ks.splice(t,5),Ks.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),kt.core.getCache(e),GA())}}):Ks};gn.revert=function(n,e){return c3(!n,e)};gn.create=function(n,e){return new gn(n,e)};gn.refresh=function(n){return n?Ig(!0):(Ff||gn.register())&&Yd(!0)};gn.update=function(n){return++pn.cache&&Kl(n===!0?2:0)};gn.clearScrollMemory=s$;gn.maxScroll=function(n,e){return Jo(n,e?hs:nr)};gn.getScrollFunc=function(n,e){return Lu(Ts(n),e?hs:nr)};gn.getById=function(n){return XA[n]};gn.getAll=function(){return cn.filter(function(n){return n.vars.id!=="ScrollSmoother"})};gn.isScrolling=function(){return!!Ga};gn.snapDirectional=l3;gn.addEventListener=function(n,e){var t=Rh[n]||(Rh[n]=[]);~t.indexOf(e)||t.push(e)};gn.removeEventListener=function(n,e){var t=Rh[n],i=t&&t.indexOf(e);i>=0&&t.splice(i,1)};gn.batch=function(n,e){var t=[],i={},r=e.interval||.016,s=e.batchMax||1e9,a=function(c,u){var d=[],h=[],p=kt.delayedCall(r,function(){u(d,h),d=[],h=[]}).pause();return function(y){d.length||p.restart(!0),d.push(y.trigger),h.push(y),s<=d.length&&p.progress(1)}},o;for(o in e)i[o]=o.substr(0,2)==="on"&&$r(e[o])&&o!=="onRefreshInit"?a(o,e[o]):e[o];return $r(s)&&(s=s(),mr(gn,"refresh",function(){return s=e.batchMax()})),Ry(n).forEach(function(l){var c={};for(o in i)c[o]=i[o];c.trigger=l,t.push(gn.create(c))}),t};var o5=function(e,t,i,r){return t>r?e(r):t<0&&e(0),i>r?(r-t)/(i-t):i<0?t/(t-i):1},w2=function n(e,t){t===!0?e.style.removeProperty("touch-action"):e.style.touchAction=t===!0?"auto":t?"pan-"+t+(Ui.isTouch?" pinch-zoom":""):"none",e===ta&&n(kn,t)},t1={auto:1,scroll:1},$me=function(e){var t=e.event,i=e.target,r=e.axis,s=(t.changedTouches?t.changedTouches[0]:t).target,a=s._gsap||kt.core.getCache(s),o=Br(),l;if(!a._isScrollT||o-a._isScrollT>2e3){for(;s&&s!==kn&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(t1[(l=Na(s)).overflowY]||t1[l.overflowX]));)s=s.parentNode;a._isScroll=s&&s!==i&&!Ph(s)&&(t1[(l=Na(s)).overflowY]||t1[l.overflowX]),a._isScrollT=o}(a._isScroll||r==="x")&&(t.stopPropagation(),t._gsapAllow=!0)},l$=function(e,t,i,r){return Ui.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:r=r&&$me,onPress:r,onDrag:r,onScroll:r,onEnable:function(){return i&&mr(qn,Ui.eventTypes[0],c5,!1,!0)},onDisable:function(){return fr(qn,Ui.eventTypes[0],c5,!0)}})},Wme=/(input|label|select|textarea)/i,l5,c5=function(e){var t=Wme.test(e.target.tagName);(t||l5)&&(e._gsapAllow=!0,l5=t)},Gme=function(e){Id(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t=e,i=t.normalizeScrollX,r=t.momentum,s=t.allowNestedScroll,a=t.onRelease,o,l,c=Ts(e.target)||ta,u=kt.core.globals().ScrollSmoother,d=u&&u.get(),h=Oc&&(e.content&&Ts(e.content)||d&&e.content!==!1&&!d.smooth()&&d.content()),p=Lu(c,nr),y=Lu(c,hs),x=1,_=(Ui.isTouch&&fn.visualViewport?fn.visualViewport.scale*fn.visualViewport.width:fn.outerWidth)/fn.innerWidth,v=0,b=$r(r)?function(){return r(o)}:function(){return r||2.8},w,S,A=l$(c,e.type,!0,s),P=function(){return S=!1},k=Wo,T=Wo,E=function(){l=Jo(c,nr),T=v0(Oc?1:0,l),i&&(k=v0(0,Jo(c,hs))),w=hh},R=function(){h._gsap.y=kg(parseFloat(h._gsap.y)+p.offset)+"px",h.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(h._gsap.y)+", 0, 1)",p.offset=p.cacheID=0},I=function(){if(S){requestAnimationFrame(P);var L=kg(o.deltaY/2),W=T(p.v-L);if(h&&W!==p.v+p.offset){p.offset=W-p.v;var j=kg((parseFloat(h&&h._gsap.y)||0)-p.offset);h.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+j+", 0, 1)",h._gsap.y=j+"px",p.cacheID=pn.cache,Kl()}return!0}p.offset&&R(),S=!0},D,B,G,Y,X=function(){E(),D.isActive()&&D.vars.scrollY>l&&(p()>l?D.progress(1)&&p(l):D.resetTo("scrollY",l))};return h&&kt.set(h,{y:"+=0"}),e.ignoreCheck=function(Q){return Oc&&Q.type==="touchmove"&&I()||x>1.05&&Q.type!=="touchstart"||o.isGesturing||Q.touches&&Q.touches.length>1},e.onPress=function(){S=!1;var Q=x;x=kg((fn.visualViewport&&fn.visualViewport.scale||1)/_),D.pause(),Q!==x&&w2(c,x>1.01?!0:i?!1:"x"),B=y(),G=p(),E(),w=hh},e.onRelease=e.onGestureStart=function(Q,L){if(p.offset&&R(),!L)Y.restart(!0);else{pn.cache++;var W=b(),j,te;i&&(j=y(),te=j+W*.05*-Q.velocityX/.227,W*=o5(y,j,te,Jo(c,hs)),D.vars.scrollX=k(te)),j=p(),te=j+W*.05*-Q.velocityY/.227,W*=o5(p,j,te,Jo(c,nr)),D.vars.scrollY=T(te),D.invalidate().duration(W).play(.01),(Oc&&D.vars.scrollY>=l||j>=l-1)&&kt.to({},{onUpdate:X,duration:W})}a&&a(Q)},e.onWheel=function(){D._ts&&D.pause(),Br()-v>1e3&&(w=0,v=Br())},e.onChange=function(Q,L,W,j,te){if(hh!==w&&E(),L&&i&&y(k(j[2]===L?B+(Q.startX-Q.x):y()+L-j[1])),W){p.offset&&R();var ae=te[2]===W,me=ae?G+Q.startY-Q.y:p()+W-te[1],K=T(me);ae&&me!==K&&(G+=K-me),p(K)}(W||L)&&Kl()},e.onEnable=function(){w2(c,i?!1:"x"),gn.addEventListener("refresh",X),mr(fn,"resize",X),p.smooth&&(p.target.style.scrollBehavior="auto",p.smooth=y.smooth=!1),A.enable()},e.onDisable=function(){w2(c,!0),fr(fn,"resize",X),gn.removeEventListener("refresh",X),A.kill()},e.lockAxis=e.lockAxis!==!1,o=new Ui(e),o.iOS=Oc,Oc&&!p()&&p(1),Oc&&kt.ticker.add(Wo),Y=o._dc,D=kt.to(o,{ease:"power4",paused:!0,inherit:!1,scrollX:i?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:o$(p,p(),function(){return D.pause()})},onUpdate:Kl,onComplete:Y.vars.onComplete}),o};gn.sort=function(n){if($r(n))return cn.sort(n);var e=fn.pageYOffset||0;return gn.getAll().forEach(function(t){return t._sortY=t.trigger?e+t.trigger.getBoundingClientRect().top:t.start+fn.innerHeight}),cn.sort(n||function(t,i){return(t.vars.refreshPriority||0)*-1e6+(t.vars.containerAnimation?1e6:t._sortY)-((i.vars.containerAnimation?1e6:i._sortY)+(i.vars.refreshPriority||0)*-1e6)})};gn.observe=function(n){return new Ui(n)};gn.normalizeScroll=function(n){if(typeof n>"u")return as;if(n===!0&&as)return as.enable();if(n===!1){as&&as.kill(),as=n;return}var e=n instanceof Ui?n:Gme(n);return as&&as.target===e.target&&as.kill(),Ph(e.target)&&(as=e),e};gn.core={_getVelocityProp:VA,_inputObserver:l$,_scrollers:pn,_proxies:rl,bridge:{ss:function(){Ga||kh("scrollStart"),Ga=Br()},ref:function(){return jr}}};ZV()&&kt.registerPlugin(gn);Bc.registerPlugin(gn);const qme=()=>{const[n,e]=F.useState(null),[t,i]=F.useState(!0);F.useEffect(()=>{const a=setTimeout(()=>{i(!1)},1500);return Bc.timeline({delay:1.5}).from(".fade-in",{opacity:0,y:50,duration:1.2,stagger:.3,ease:"power4.out"}).to(".fade-in",{opacity:1,y:0,duration:0}),Bc.from(".feature-card",{scrollTrigger:{trigger:".feature-card",start:"top center+=100",toggleActions:"play none none none"},opacity:0,y:100,duration:1,stagger:.2,ease:"power3.out"}),Bc.timeline({scrollTrigger:{trigger:".stats-section",start:"top center+=100",toggleActions:"play none none none"}}).from(".stat-number",{textContent:0,duration:2,ease:"power1.out",snap:{textContent:1},stagger:.2}),Bc.to(".gradient-text",{backgroundPosition:"200% center",duration:15,repeat:-1,ease:"none",delay:1.5}),()=>{clearTimeout(a),gn.getAll().forEach(c=>c.kill())}},[]);const r=a=>{e(a),Bc.to(`.card-${a}`,{scale:1.05,duration:.3,ease:"power2.out"})},s=a=>{e(null),Bc.to(`.card-${a}`,{scale:1,duration:.3,ease:"power2.out"})};return g.jsxs(g.Fragment,{children:[t&&g.jsx(ppe,{}),g.jsxs("div",{className:`relative min-h-screen bg-[#1a0f0c] overflow-hidden transition-opacity duration-500 ${t?"opacity-0":"opacity-100"}`,children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#1a0f0c] via-[#2c1810] to-[#1a0f0c] z-0"}),g.jsx(fpe,{}),g.jsxs("div",{className:"relative z-10",children:[g.jsx("nav",{className:"bg-[#0a0605]/90 backdrop-blur-md border-b border-white/20 sticky top-0",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"flex justify-between h-16",children:[g.jsx("div",{className:"flex-shrink-0 flex items-center",children:g.jsxs("h1",{className:"text-2xl font-bold text-white tracking-wider hover:scale-105 transition-transform duration-300",children:["Coffee",g.jsx("span",{className:"text-green-400",children:"Farmer"})]})}),g.jsxs("div",{className:"flex items-center space-x-6",children:[g.jsx(ql,{to:"/login",className:"text-white hover:text-green-400 px-4 py-2 rounded-md text-sm font-medium transition-all duration-300 hover:scale-105 relative after:absolute after:bottom-0 after:left-0 after:h-[2px] after:w-0 hover:after:w-full after:bg-green-400 after:transition-all after:duration-300",children:"Login"}),g.jsx(ql,{to:"/register",className:"bg-green-500 text-white hover:bg-green-400 px-6 py-2 rounded-md text-sm font-medium transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-green-500/30 border border-green-400/30",children:"Sign Up"})]})]})})}),g.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-24",children:g.jsxs("div",{className:"text-center",children:[g.jsx("h1",{className:"fade-in !opacity-100 gradient-text text-6xl md:text-7xl font-extrabold mb-8 tracking-tight drop-shadow-2xl",children:"Cultivate Success in Every Bean"}),g.jsx("p",{className:"fade-in !opacity-100 text-xl md:text-2xl text-white mb-12 max-w-3xl mx-auto leading-relaxed font-medium drop-shadow-lg",children:"Join the future of coffee farming with our intelligent management platform. Track, analyze, and optimize your coffee production like never before."}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mt-16",children:[{icon:"",title:"Smart Farming",description:"Get real-time insights and recommendations for optimal crop management.",color:"from-green-500/30 to-green-600/30",hover:"hover:from-green-500/40 hover:to-green-600/40"},{icon:"",title:"Data Analytics",description:"Track your farm's performance with advanced analytics and reporting tools.",color:"from-blue-500/30 to-blue-600/30",hover:"hover:from-blue-500/40 hover:to-blue-600/40"},{icon:"",title:"Sustainable Growth",description:"Implement sustainable farming practices for better yield and quality.",color:"from-amber-500/30 to-amber-600/30",hover:"hover:from-amber-500/40 hover:to-amber-600/40"}].map((a,o)=>g.jsxs("div",{className:`feature-card !opacity-100 fade-in card-${o} bg-gradient-to-br ${a.color} ${a.hover} backdrop-blur-xl rounded-xl p-8 text-left border border-white/20 hover:border-white/30 transition-all duration-500 cursor-pointer shadow-lg hover:shadow-xl`,onMouseEnter:()=>r(o),onMouseLeave:()=>s(o),children:[g.jsx("div",{className:"text-5xl mb-4 transform transition-all duration-500 hover:scale-110 hover:rotate-12",children:a.icon}),g.jsx("h3",{className:"text-white text-xl font-bold mb-3",children:a.title}),g.jsx("p",{className:"text-white/90",children:a.description})]},o))}),g.jsx("div",{className:"stats-section !opacity-100 fade-in grid grid-cols-2 md:grid-cols-4 gap-8 mt-20 text-center",children:[{value:"1000+",label:"Active Farmers"},{value:"25K+",label:"Hectares Managed"},{value:"98%",label:"Success Rate"},{value:"24/7",label:"Support"}].map((a,o)=>g.jsxs("div",{className:"bg-white/10 hover:bg-white/15 rounded-lg p-6 backdrop-blur-sm border border-white/20 transition-all duration-300 hover:scale-105 hover:shadow-lg",children:[g.jsx("div",{className:"stat-number text-3xl font-bold text-green-400 mb-2",children:a.value}),g.jsx("div",{className:"text-white font-medium",children:a.label})]},o))}),g.jsxs("div",{className:"fade-in !opacity-100 mt-20",children:[g.jsxs(ql,{to:"/register",className:"group inline-flex items-center px-8 py-4 text-lg font-bold rounded-full bg-gradient-to-r from-green-500 to-green-400 text-white hover:from-green-400 hover:to-green-300 transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-green-500/30 border border-green-400/30",children:["Start Your Journey",g.jsx("svg",{className:"w-5 h-5 ml-2 transform transition-transform duration-300 group-hover:translate-x-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),g.jsx("p",{className:"mt-4 text-white/80 font-medium",children:"Join hundreds of successful coffee farmers today"})]})]})})]})]})]})};Za.register(To,Co,_u,Ua,Xl,Jc,dc,hc,uc);const Xme=()=>{const{user:n}=Po(),{isDarkMode:e}=Zi(),[t,i]=F.useState(!0),[r,s]=F.useState(null),[a,o]=F.useState(0),[l,c]=F.useState(0);F.useState(0);const[u,d]=F.useState([]),[h,p]=F.useState({labels:[],datasets:[{label:"Average Yield per Farmer (kg)",data:[],borderColor:"rgb(75, 192, 192)",tension:.1}]}),[y,x]=F.useState({labels:[],datasets:[{label:"Number of Active Farmers",data:[],borderColor:"rgb(54, 162, 235)",tension:.1}]}),[_,v]=F.useState({labels:["Premium Grade","Fine Grade","Commercial Grade"],datasets:[{data:[0,0,0],backgroundColor:["rgba(75, 192, 192, 0.8)","rgba(54, 162, 235, 0.8)","rgba(255, 206, 86, 0.8)"],borderWidth:0,hoverOffset:4}]}),[b,w]=F.useState(0),[S,A]=F.useState(0),[P,k]=F.useState({expectedYield:0,growthRate:0,performanceCategories:{high:0,average:0,needsSupport:0}});return F.useEffect(()=>{(async()=>{try{i(!0);const[E,R,I]=await Promise.all([tt.from("farmer_detail").select(`
              id,
              farm_location,
              farm_size,
              farm_elevation,
              created_at,
              users (
                first_name,
                last_name
              )
            `),tt.from("harvest_data").select(`
              farmer_id,
              harvest_date,
              coffee_raw_quantity,
              coffee_dry_quantity,
              coffee_premium_grade,
              coffee_fine_grade,
              coffee_commercial_grade,
              farmer_detail (
                farm_elevation,
                users (
                  first_name,
                  last_name
                )
              )
            `).order("harvest_date",{ascending:!0}),tt.from("plant_data").select("farmer_id, number_of_tree_planted")]);if(E.error||R.error||I.error)throw new Error("Error fetching farmer data");o(E.data.length);const D=new Date;D.setMonth(D.getMonth()-6);const B=new Set(R.data.filter(de=>new Date(de.harvest_date)>=D).map(de=>de.farmer_id)).size;c(B);const G={};let Y=0;I.data.forEach(de=>{de.farmer_id&&(G[de.farmer_id]=(G[de.farmer_id]||0)+(de.number_of_tree_planted||0),Y+=de.number_of_tree_planted||0)});const X=Object.keys(G).length,Q=X>0?Math.round(Y/X):0;w(Q),A(Y);const L={premium:0,fine:0,commercial:0};R.data.forEach(de=>{L.premium+=Number(de.coffee_premium_grade)||0,L.fine+=Number(de.coffee_fine_grade)||0,L.commercial+=Number(de.coffee_commercial_grade)||0}),v(de=>({...de,datasets:[{...de.datasets[0],data:[L.premium,L.fine,L.commercial]}]}));const W=R.data.reduce((de,J)=>(de[J.farmer_id]=(de[J.farmer_id]||0)+(J.coffee_dry_quantity||0),de),{}),j=Object.entries(W).map(([de,J])=>{var je,Le;const ue=E.data.find(Xe=>Xe.id===de);return{id:de,name:`${(je=ue==null?void 0:ue.users)==null?void 0:je.first_name} ${(Le=ue==null?void 0:ue.users)==null?void 0:Le.last_name}`,totalYield:J,location:ue==null?void 0:ue.farm_location}}).sort((de,J)=>J.totalYield-de.totalYield).slice(0,5);d(j);const te={},ae={};R.data.forEach(de=>{const J=new Date(de.harvest_date).getFullYear();te[J]||(te[J]=0,ae[J]=new Set),te[J]+=de.coffee_dry_quantity||0,ae[J].add(de.farmer_id)});const me=Object.keys(te).sort(),K=me.map(de=>te[de]/ae[de].size);p({labels:me,datasets:[{label:"Average Yield per Farmer (kg)",data:K,borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.5)",tension:.1}]});const re=me.map(de=>ae[de].size);x({labels:me,datasets:[{label:"Number of Active Farmers",data:re,borderColor:"rgb(54, 162, 235)",backgroundColor:"rgba(54, 162, 235, 0.5)",tension:.1}]});const oe=Math.max(...me),_e=oe-1,Ce=re[re.length-1]/re[re.length-2]-1,Pe=te[oe]/ae[oe].size*(1+Ce),De=Object.entries(W).map(([de,J])=>({farmerId:de,avgYield:J/(R.data.filter(ue=>ue.farmer_id===de).length||1)})),xe=De.map(de=>de.avgYield).sort((de,J)=>J-de),we=xe[Math.floor(xe.length*.2)]||0,$=xe[Math.floor(xe.length*.8)]||0,Se={high:De.filter(de=>de.avgYield>=we).length,average:De.filter(de=>de.avgYield<we&&de.avgYield>$).length,needsSupport:De.filter(de=>de.avgYield<=$).length};k({expectedYield:Pe,growthRate:Ce,performanceCategories:Se})}catch(E){console.error("Error fetching farmer analytics:",E),s("Failed to load farmer analytics. Please try again later.")}finally{i(!1)}})()},[]),t?g.jsx(ci,{children:g.jsx("div",{className:"max-w-7xl mx-auto",children:g.jsxs("div",{className:"animate-pulse",children:[g.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8"}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[1,2,3,4].map(T=>g.jsxs("div",{className:`p-6 rounded-lg shadow ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),g.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4"})]},T))})]})})}):g.jsx(ci,{children:g.jsx("div",{className:"max-w-7xl mx-auto",children:g.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:[g.jsxs("div",{className:`mb-8 ${e?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6`,children:[g.jsx("h1",{className:`text-2xl font-bold ${e?"text-white":"text-gray-900"}`,children:"Analytics"}),n&&g.jsxs("p",{className:`mt-2 text-lg ${e?"text-gray-400":"text-gray-700"}`,children:["Welcome back, ",n.first_name," ",n.last_name]}),g.jsx("p",{className:`mt-2 text-sm ${e?"text-gray-400":"text-gray-700"}`,children:"Comprehensive overview of farmer performance and trends"})]}),g.jsxs("div",{className:"mt-8",children:[g.jsx("h2",{className:`text-xl font-semibold mb-6 ${e?"text-white":"text-gray-900"}`,children:"Current Farmer Metrics"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[g.jsxs("div",{className:`p-6 rounded-lg shadow ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-sm font-medium ${e?"text-gray-400":"text-gray-500"}`,children:"Total Farmers"}),g.jsx("p",{className:`mt-2 text-3xl font-bold ${e?"text-indigo-400":"text-indigo-600"}`,children:a})]}),g.jsxs("div",{className:`p-6 rounded-lg shadow ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-sm font-medium ${e?"text-gray-400":"text-gray-500"}`,children:"Active Farmers"}),g.jsx("p",{className:`mt-2 text-3xl font-bold ${e?"text-indigo-400":"text-indigo-600"}`,children:l})]}),g.jsxs("div",{className:`p-6 rounded-lg shadow ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-sm font-medium ${e?"text-gray-400":"text-gray-500"}`,children:"Avg Trees/Farmer"}),g.jsx("p",{className:`mt-2 text-3xl font-bold ${e?"text-indigo-400":"text-indigo-600"}`,children:Math.round(b)})]}),g.jsxs("div",{className:`p-6 rounded-lg shadow ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-sm font-medium ${e?"text-gray-400":"text-gray-500"}`,children:"Total Active Plants"}),g.jsx("p",{className:`mt-2 text-3xl font-bold ${e?"text-indigo-400":"text-indigo-600"}`,children:S})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[g.jsxs("div",{className:`p-6 rounded-lg shadow ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-lg font-medium mb-4 ${e?"text-white":"text-gray-900"}`,children:"Top Performers"}),g.jsx("div",{className:"space-y-4",children:u.slice(0,3).map((T,E)=>g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white
                          ${E===0?"bg-yellow-500":E===1?"bg-gray-400":"bg-orange-500"}`,children:E+1}),g.jsx("span",{className:e?"text-gray-300":"text-gray-700",children:T.name})]}),g.jsxs("span",{className:`font-medium ${e?"text-indigo-400":"text-indigo-600"}`,children:[T.totalYield.toFixed(1)," kg"]})]},T.id))})]}),g.jsxs("div",{className:`p-6 rounded-lg shadow ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-lg font-medium mb-4 ${e?"text-white":"text-gray-900"}`,children:"Coffee Grade Distribution"}),g.jsx("div",{className:"relative h-64",children:g.jsx(Oee,{data:_,options:{responsive:!0,maintainAspectRatio:!1,cutout:"60%",plugins:{legend:{position:"bottom",labels:{color:e?"#D1D5DB":"#4B5563",padding:20,font:{size:12}}}}}})})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[g.jsxs("div",{className:`p-6 rounded-lg shadow ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-lg font-medium mb-4 ${e?"text-white":"text-gray-900"}`,children:"Yearly Productivity"}),g.jsx("div",{className:"h-64",children:g.jsx(Pu,{data:h,options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,grid:{color:e?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:e?"#D1D5DB":"#4B5563"}},x:{grid:{color:e?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:e?"#D1D5DB":"#4B5563"}}},plugins:{legend:{labels:{color:e?"#D1D5DB":"#4B5563"}}}}})})]}),g.jsxs("div",{className:`p-6 rounded-lg shadow ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-lg font-medium mb-4 ${e?"text-white":"text-gray-900"}`,children:"Farmer Growth Trend"}),g.jsx("div",{className:"h-64",children:g.jsx(Pu,{data:y,options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,grid:{color:e?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:e?"#D1D5DB":"#4B5563"}},x:{grid:{color:e?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:e?"#D1D5DB":"#4B5563"}}},plugins:{legend:{labels:{color:e?"#D1D5DB":"#4B5563"}}}}})})]})]}),g.jsxs("div",{className:"mt-12 mb-8",children:[g.jsx("h2",{className:`text-xl font-semibold mb-6 ${e?"text-white":"text-gray-900"}`,children:"Predictive Analytics"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsxs("div",{className:`p-6 rounded-lg shadow ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-sm font-medium ${e?"text-gray-400":"text-gray-500"}`,children:"Expected Yield Growth"}),g.jsxs("p",{className:`mt-2 text-3xl font-bold ${e?"text-green-400":"text-green-600"}`,children:[(P.growthRate*100).toFixed(1),"%"]}),g.jsx("p",{className:`mt-1 text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"Projected annual growth rate"})]}),g.jsxs("div",{className:`p-6 rounded-lg shadow ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-sm font-medium ${e?"text-gray-400":"text-gray-500"}`,children:"Projected Average Yield"}),g.jsxs("p",{className:`mt-2 text-3xl font-bold ${e?"text-indigo-400":"text-indigo-600"}`,children:[P.expectedYield.toFixed(1)," kg"]}),g.jsx("p",{className:`mt-1 text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"Expected yield per farmer next year"})]}),g.jsxs("div",{className:`p-6 rounded-lg shadow ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h3",{className:`text-sm font-medium ${e?"text-gray-400":"text-gray-500"}`,children:"Performance Distribution"}),g.jsxs("div",{className:"mt-2 space-y-2",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:e?"text-green-400":"text-green-600",children:"High Performing"}),g.jsx("span",{className:"font-bold",children:P.performanceCategories.high})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:e?"text-blue-400":"text-blue-600",children:"Average"}),g.jsx("span",{className:"font-bold",children:P.performanceCategories.average})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:e?"text-orange-400":"text-orange-600",children:"Needs Support"}),g.jsx("span",{className:"font-bold",children:P.performanceCategories.needsSupport})]})]})]})]})]})]})]})})})},Yme=()=>{var w;const{plantId:n}=QP(),e=Ki(),{isDarkMode:t}=Zi(),[i,r]=F.useState(null),[s,a]=F.useState(null),[o,l]=F.useState({status:"",age_stage:"",soil_ph:"",moisture_level:"",last_fertilized:""}),[c,u]=F.useState(!0),[d,h]=F.useState(!1),[p,y]=F.useState(""),[x,_]=F.useState("");F.useEffect(()=>{n&&(async()=>{u(!0);const{data:A,error:P}=await tt.from("plant_data").select("*").eq("plant_id",n).single();P||r(A);const{data:k,error:T}=await tt.from("plant_status").select("*").eq("plant_id",n).order("created_at",{ascending:!1}).limit(1).single();!T&&k&&(a(k),l({status:k.status||"",age_stage:k.age_stage||"",soil_ph:k.soil_ph||"",moisture_level:k.moisture_level||"",last_fertilized:k.last_fertilized||""})),u(!1)})()},[n]);const v=S=>{l({...o,[S.target.name]:S.target.value})},b=async S=>{S.preventDefault(),h(!0),y(""),_("");try{await tt.from("plant_status").delete().eq("plant_id",n);const{error:A}=await tt.from("plant_status").insert([{plant_id:n,status:o.status,age_stage:o.age_stage,soil_ph:o.soil_ph,moisture_level:o.moisture_level,last_fertilized:o.last_fertilized}]);if(A)throw A;_("Status updated successfully!");const{data:P}=await tt.from("plant_status").select("*").eq("plant_id",n).order("created_at",{ascending:!1}).limit(1).single();a(P)}catch(A){console.error("Error updating status:",A),y(A.message||"Failed to save. Please try again.")}finally{h(!1)}};return c?g.jsx(ci,{children:g.jsx("div",{className:"flex-1 flex items-center justify-center",children:g.jsx("div",{className:`text-center ${t?"text-white":"text-gray-900"}`,children:"Loading..."})})}):i?g.jsx(ci,{children:g.jsx("div",{className:"flex-1 overflow-auto",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsx("div",{className:`mb-8 ${t?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6`,children:g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsx("button",{onClick:()=>e(-1),className:`px-4 py-2 rounded-lg transition-colors ${t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:" Back"}),g.jsxs("div",{children:[g.jsx("h1",{className:`text-3xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Plant Status"}),g.jsx("p",{className:`mt-2 ${t?"text-gray-400":"text-gray-500"}`,children:"Monitor and update your plant's health and conditions"})]})]})}),g.jsxs("div",{className:`mb-8 ${t?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6`,children:[g.jsx("h2",{className:`text-xl font-bold mb-4 ${t?"text-white":"text-gray-900"}`,children:"Plant Overview"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[g.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Variety"}),g.jsx("p",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"}`,children:i.coffee_variety})]}),g.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[g.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Planting Date"}),g.jsx("p",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"}`,children:(w=i.planting_date)==null?void 0:w.split("T")[0]})]}),g.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[g.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Number of Trees"}),g.jsx("p",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"}`,children:i.number_of_tree_planted})]})]})]}),g.jsxs("div",{className:`mb-8 ${t?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6`,children:[g.jsx("h2",{className:`text-xl font-bold mb-4 ${t?"text-white":"text-gray-900"}`,children:"Update Status"}),p&&g.jsx("div",{className:"mb-4 p-4 rounded-lg bg-red-100 border border-red-400 text-red-700",children:p}),x&&g.jsx("div",{className:"mb-4 p-4 rounded-lg bg-green-100 border border-green-400 text-green-700",children:x}),g.jsxs("form",{onSubmit:b,className:"space-y-6",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsxs("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:["Status",g.jsxs("span",{className:"ml-1 cursor-pointer group relative",children:[g.jsx("span",{className:`inline-block ${t?"bg-gray-600":"bg-gray-200"} text-white rounded-full w-4 h-4 text-xs text-center`,children:"?"}),g.jsx("span",{className:`absolute left-5 top-1/2 -translate-y-1/2 z-10 hidden group-hover:block ${t?"bg-gray-700":"bg-gray-600"} text-white text-xs rounded px-2 py-1 whitespace-nowrap`,children:"General health status"})]})]}),g.jsxs("select",{name:"status",value:o.status,onChange:v,required:!0,className:`w-full px-3 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white focus:border-green-500":"bg-white border-gray-300 text-gray-900 focus:border-green-500"} focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors`,children:[g.jsx("option",{value:"",children:"Select status"}),g.jsx("option",{value:"healthy",children:"Healthy"}),g.jsx("option",{value:"diseased",children:"Diseased"}),g.jsx("option",{value:"pest-affected",children:"Pest-affected"}),g.jsx("option",{value:"stressed",children:"Stressed"})]})]}),g.jsxs("div",{children:[g.jsxs("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:["Age Stage",g.jsxs("span",{className:"ml-1 cursor-pointer group relative",children:[g.jsx("span",{className:`inline-block ${t?"bg-gray-600":"bg-gray-200"} text-white rounded-full w-4 h-4 text-xs text-center`,children:"?"}),g.jsx("span",{className:`absolute left-5 top-1/2 -translate-y-1/2 z-10 hidden group-hover:block ${t?"bg-gray-700":"bg-gray-600"} text-white text-xs rounded px-2 py-1 whitespace-nowrap`,children:"Plant age or stage"})]})]}),g.jsxs("select",{name:"age_stage",value:o.age_stage,onChange:v,required:!0,className:`w-full px-3 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white focus:border-green-500":"bg-white border-gray-300 text-gray-900 focus:border-green-500"} focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors`,children:[g.jsx("option",{value:"",children:"Select age stage"}),g.jsx("option",{value:"seedling",children:"Seedling"}),g.jsx("option",{value:"young",children:"Young"}),g.jsx("option",{value:"mature",children:"Mature"}),g.jsx("option",{value:"old",children:"Old"})]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsxs("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:["Soil pH",g.jsxs("span",{className:"ml-1 cursor-pointer group relative",children:[g.jsx("span",{className:`inline-block ${t?"bg-gray-600":"bg-gray-200"} text-white rounded-full w-4 h-4 text-xs text-center`,children:"?"}),g.jsx("span",{className:`absolute left-5 top-1/2 -translate-y-1/2 z-10 hidden group-hover:block ${t?"bg-gray-700":"bg-gray-600"} text-white text-xs rounded px-2 py-1 whitespace-nowrap`,children:"Measured soil pH"})]})]}),g.jsx("input",{type:"number",step:"0.1",name:"soil_ph",value:o.soil_ph,onChange:v,placeholder:"e.g. 6.2",className:`w-full px-3 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white focus:border-green-500":"bg-white border-gray-300 text-gray-900 focus:border-green-500"} focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors`})]}),g.jsxs("div",{children:[g.jsxs("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:["Moisture Level",g.jsxs("span",{className:"ml-1 cursor-pointer group relative",children:[g.jsx("span",{className:`inline-block ${t?"bg-gray-600":"bg-gray-200"} text-white rounded-full w-4 h-4 text-xs text-center`,children:"?"}),g.jsx("span",{className:`absolute left-5 top-1/2 -translate-y-1/2 z-10 hidden group-hover:block ${t?"bg-gray-700":"bg-gray-600"} text-white text-xs rounded px-2 py-1 whitespace-nowrap`,children:"Soil moisture level"})]})]}),g.jsxs("select",{name:"moisture_level",value:o.moisture_level,onChange:v,className:`w-full px-3 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white focus:border-green-500":"bg-white border-gray-300 text-gray-900 focus:border-green-500"} focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors`,children:[g.jsx("option",{value:"",children:"Select moisture"}),g.jsx("option",{value:"dry",children:"Dry"}),g.jsx("option",{value:"moist",children:"Moist"}),g.jsx("option",{value:"wet",children:"Wet"})]})]})]}),g.jsxs("div",{children:[g.jsxs("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:["Last Fertilized",g.jsxs("span",{className:"ml-1 cursor-pointer group relative",children:[g.jsx("span",{className:`inline-block ${t?"bg-gray-600":"bg-gray-200"} text-white rounded-full w-4 h-4 text-xs text-center`,children:"?"}),g.jsx("span",{className:`absolute left-5 top-1/2 -translate-y-1/2 z-10 hidden group-hover:block ${t?"bg-gray-700":"bg-gray-600"} text-white text-xs rounded px-2 py-1 whitespace-nowrap`,children:"Date of last fertilization"})]})]}),g.jsx("input",{type:"date",name:"last_fertilized",value:o.last_fertilized,onChange:v,className:`w-full px-3 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white focus:border-green-500":"bg-white border-gray-300 text-gray-900 focus:border-green-500"} focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors`})]}),g.jsx("div",{className:"flex justify-end",children:g.jsx("button",{type:"submit",disabled:d,className:"px-6 py-2.5 rounded-lg font-medium transition-colors bg-green-600 text-white hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Saving...":"Save Changes"})})]})]}),s&&g.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6`,children:[g.jsx("h2",{className:`text-xl font-bold mb-4 ${t?"text-white":"text-gray-900"}`,children:"Latest Status"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[g.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Health Status"}),g.jsx("p",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"}`,children:s.status})]}),g.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[g.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Age Stage"}),g.jsx("p",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"}`,children:s.age_stage})]}),g.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[g.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Soil pH"}),g.jsx("p",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"}`,children:s.soil_ph||"N/A"})]}),g.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[g.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Moisture Level"}),g.jsx("p",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"}`,children:s.moisture_level||"N/A"})]}),g.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[g.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Last Fertilized"}),g.jsx("p",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"}`,children:s.last_fertilized||"N/A"})]})]})]})]})})}):g.jsx(ci,{children:g.jsx("div",{className:"flex-1 flex items-center justify-center",children:g.jsx("div",{className:`text-center ${t?"text-white":"text-gray-900"}`,children:"Plant not found."})})})};Za.register(To,Co,_u,Ua,Xl,dc,hc,uc,Jc,KQ);const Kme=()=>{var D,B,G,Y,X,Q,L,W,j,te,ae,me,K,re,oe,_e,Ce,Ee,Pe,De;const{farmerId:n}=QP(),e=Ki(),{isDarkMode:t}=Zi(),{user:i}=Po(),[r,s]=F.useState(!0),[a,o]=F.useState(null),[l,c]=F.useState({basicInfo:null,plantStats:null,harvestData:null,qualityMetrics:null,financialData:null,sustainabilityData:null,supportHistory:null,documents:null}),[u,d]=F.useState({yieldTrend:null,gradeDistribution:null,revenueChart:null,qualityTrend:null}),[h,p]=F.useState(!1),[y,x]=F.useState(null),[_,v]=F.useState(!1),[b,w]=F.useState(null),S=F.useCallback(async()=>{try{s(!0),o(null);const{data:xe,error:we}=await tt.from("users").select(`
          id,
          first_name,
          middle_name,
          last_name,
          email,
          role,
          created_at
        `).eq("id",n).single();if(we)throw we;const{data:$,error:Se}=await tt.from("farmer_detail").select(`
          farmers_details,
          farm_location,
          farm_size,
          farm_elevation,
          plant_id,
          created_at
        `).eq("id",n).single();if(Se)throw Se;const{data:de,error:J}=await tt.from("plant_data").select(`
          plant_id,
          coffee_variety,
          planting_date,
          number_of_tree_planted,
          plant_status (
            status,
            age_stage,
            soil_ph,
            moisture_level,
            last_fertilized
          )
        `).eq("farmer_id",n);if(J)throw J;const{data:ue,error:je}=await tt.from("harvest_data").select(`
          harvest_id,
          harvest_date,
          plant_id,
          coffee_raw_quantity,
          coffee_dry_quantity,
          coffee_premium_grade,
          coffee_fine_grade,
          coffee_commercial_grade
        `).eq("farmer_id",n).order("harvest_date",{ascending:!1});if(je)throw je;const Le={basicInfo:{id:xe.id,first_name:xe.first_name,name:`${xe.first_name} ${xe.middle_name||""} ${xe.last_name}`.trim(),email:xe.email,role:xe.role,farmLocation:($==null?void 0:$.farm_location)||"Not specified",farmSize:($==null?void 0:$.farm_size)||"Not specified",farmElevation:($==null?void 0:$.farm_elevation)||"Not specified",registrationDate:new Date(xe.created_at).toLocaleDateString()},plantStats:{totalTrees:de.reduce((Xe,gt)=>Xe+(parseInt(gt.number_of_tree_planted)||0),0),varieties:A(de),ageDistribution:P(de)},harvestData:k(ue),qualityMetrics:T(ue)};c(Le),E(Le)}catch(xe){console.error("Error fetching farmer data:",xe),o("Failed to load farmer profile. Please try again later.")}finally{s(!1)}},[n]);F.useEffect(()=>{S()},[S]);const A=xe=>{const we={};return xe.forEach($=>{$.coffee_variety&&(we[$.coffee_variety]=(we[$.coffee_variety]||0)+(parseInt($.number_of_tree_planted)||0))}),we},P=xe=>{const we=new Date().getFullYear(),$={"Young (0-2 years)":0,"Mature (3-7 years)":0,"Old (8+ years)":0};return xe.forEach(Se=>{if(Se.planting_date&&Se.number_of_tree_planted){const de=new Date(Se.planting_date).getFullYear(),J=we-de,ue=parseInt(Se.number_of_tree_planted)||0;J<=2?$["Young (0-2 years)"]+=ue:J<=7?$["Mature (3-7 years)"]+=ue:$["Old (8+ years)"]+=ue}}),$},k=xe=>{var we;return{totalYield:xe.reduce(($,Se)=>$+(parseFloat(Se.coffee_dry_quantity)||0),0),harvestCount:xe.length,lastHarvest:(we=xe[0])==null?void 0:we.harvest_date,yieldHistory:xe.map($=>({date:$.harvest_date,yield:parseFloat($.coffee_dry_quantity)||0})).sort(($,Se)=>new Date($.date)-new Date(Se.date))}},T=xe=>({premiumGrade:xe.reduce((we,$)=>we+(parseFloat($.coffee_premium_grade)||0),0),fineGrade:xe.reduce((we,$)=>we+(parseFloat($.coffee_fine_grade)||0),0),commercialGrade:xe.reduce((we,$)=>we+(parseFloat($.coffee_commercial_grade)||0),0)}),E=xe=>{if(!xe)return;const we={yieldTrend:{labels:xe.harvestData.yieldHistory.map($=>new Date($.date).toLocaleDateString()),datasets:[{label:"Yield (kg)",data:xe.harvestData.yieldHistory.map($=>$.yield),borderColor:t?"rgb(74, 222, 128)":"rgb(34, 197, 94)",backgroundColor:t?"rgba(74, 222, 128, 0.1)":"rgba(34, 197, 94, 0.1)",tension:.4}]},gradeDistribution:{labels:["Premium","Fine","Commercial"],datasets:[{data:[xe.qualityMetrics.premiumGrade,xe.qualityMetrics.fineGrade,xe.qualityMetrics.commercialGrade],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(234, 179, 8, 0.8)"]}]}};d(we)},R=()=>{const xe=l.basicInfo.name.split(" "),we=xe[0],$=xe[xe.length-1],Se=xe.length>2?xe.slice(1,-1).join(" "):"";x({first_name:we,middle_name:Se,last_name:$,farm_location:l.basicInfo.farmLocation,farm_size:l.basicInfo.farmSize,farm_elevation:l.basicInfo.farmElevation}),p(!0)},I=async()=>{try{v(!0),w(null);const{error:xe}=await tt.from("users").update({first_name:y.first_name,middle_name:y.middle_name,last_name:y.last_name}).eq("id",n);if(xe)throw xe;const{error:we}=await tt.from("farmer_detail").update({farm_location:y.farm_location,farm_size:y.farm_size,farm_elevation:y.farm_elevation}).eq("id",n);if(we)throw we;await S(),p(!1)}catch(xe){console.error("Error saving changes:",xe),w("Failed to save changes. Please try again.")}finally{v(!1)}};return i?g.jsx(ci,{children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsx("div",{className:`mb-8 ${t?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6`,children:g.jsxs("div",{className:"flex items-center",children:[g.jsx("button",{onClick:()=>e(-1),className:`mr-4 px-4 py-2 rounded-lg text-sm transition-colors
                ${t?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:g.jsxs("div",{className:"flex items-center",children:[g.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back"]})}),g.jsxs("div",{children:[g.jsxs("h1",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:[(D=l.basicInfo)==null?void 0:D.first_name,"'s Profile"]}),l.basicInfo&&g.jsx("p",{className:`mt-2 text-lg ${t?"text-gray-400":"text-gray-700"}`,children:l.basicInfo.name})]})]})}),a&&g.jsx("div",{className:"mb-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-md",children:a}),r?g.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(xe=>g.jsxs("div",{className:`animate-pulse rounded-lg ${t?"bg-gray-800":"bg-white"} p-6`,children:[g.jsx("div",{className:`h-4 ${t?"bg-gray-700":"bg-gray-200"} rounded w-1/4 mb-4`}),g.jsx("div",{className:`h-4 ${t?"bg-gray-700":"bg-gray-200"} rounded w-1/2`})]},xe))}):g.jsxs("div",{className:"space-y-8",children:[g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[g.jsxs("div",{className:`rounded-lg shadow-lg ${t?"bg-gray-800":"bg-white"} p-6`,children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h2",{className:`text-xl font-semibold ${t?"text-white":"text-gray-900"}`,children:"Basic Information"}),(i==null?void 0:i.role)==="admin"&&g.jsx("button",{onClick:R,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors
                        bg-indigo-600 text-white hover:bg-indigo-700`,children:"Edit"})]}),g.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[g.jsxs("div",{children:[g.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Email"}),g.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:(B=l.basicInfo)==null?void 0:B.email})]}),g.jsxs("div",{children:[g.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Farm Location"}),g.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:(G=l.basicInfo)==null?void 0:G.farmLocation})]}),g.jsxs("div",{children:[g.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Farm Size"}),g.jsxs("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:[(Y=l.basicInfo)==null?void 0:Y.farmSize," hectares"]})]}),g.jsxs("div",{children:[g.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Farm Elevation"}),g.jsxs("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:[(X=l.basicInfo)==null?void 0:X.farmElevation," meters"]})]}),g.jsxs("div",{children:[g.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Registration Date"}),g.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:(Q=l.basicInfo)==null?void 0:Q.registrationDate})]})]})]}),g.jsxs("div",{className:`rounded-lg shadow-lg ${t?"bg-gray-800":"bg-white"} p-6`,children:[g.jsx("h2",{className:`text-xl font-semibold mb-6 ${t?"text-white":"text-gray-900"}`,children:"Plant Statistics"}),g.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[g.jsxs("div",{children:[g.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Total Trees"}),g.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:(L=l.plantStats)==null?void 0:L.totalTrees})]}),g.jsxs("div",{className:"mt-4",children:[g.jsx("h3",{className:`text-lg font-medium mb-4 ${t?"text-gray-200":"text-gray-800"}`,children:"Age Distribution"}),g.jsx("div",{className:"h-64",children:g.jsx(J0,{data:{labels:Object.keys(((W=l.plantStats)==null?void 0:W.ageDistribution)||{}),datasets:[{data:Object.values(((j=l.plantStats)==null?void 0:j.ageDistribution)||{}),backgroundColor:["rgba(52, 211, 153, 0.8)","rgba(59, 130, 246, 0.8)","rgba(251, 146, 60, 0.8)"]}]},options:{responsive:!0,plugins:{legend:{position:"bottom",labels:{color:t?"#D1D5DB":"#374151"}}}}})})]})]})]})]}),g.jsxs("div",{className:`rounded-lg shadow-lg ${t?"bg-gray-800":"bg-white"} p-6`,children:[g.jsx("h2",{className:`text-xl font-semibold mb-6 ${t?"text-white":"text-gray-900"}`,children:"Harvest Performance"}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[g.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Total Yield"}),g.jsxs("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:[(te=l.harvestData)==null?void 0:te.totalYield.toFixed(2)," kg"]})]}),g.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[g.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Harvest Count"}),g.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:(ae=l.harvestData)==null?void 0:ae.harvestCount})]}),g.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[g.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Last Harvest"}),g.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:(me=l.harvestData)!=null&&me.lastHarvest?new Date(l.harvestData.lastHarvest).toLocaleDateString():"N/A"})]})]}),g.jsxs("div",{children:[g.jsx("h3",{className:`text-lg font-medium mb-4 ${t?"text-gray-200":"text-gray-800"}`,children:"Yield History"}),g.jsx("div",{className:"h-80",children:g.jsx(Pu,{data:{labels:((K=l.harvestData)==null?void 0:K.yieldHistory.map(xe=>new Date(xe.date).toLocaleDateString()))||[],datasets:[{label:"Yield (kg)",data:((re=l.harvestData)==null?void 0:re.yieldHistory.map(xe=>xe.yield))||[],borderColor:t?"rgb(74, 222, 128)":"rgb(34, 197, 94)",backgroundColor:t?"rgba(74, 222, 128, 0.1)":"rgba(34, 197, 94, 0.1)",tension:.4}]},options:{responsive:!0,scales:{y:{beginAtZero:!0,grid:{color:t?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:t?"#D1D5DB":"#374151"}},x:{grid:{color:t?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:t?"#D1D5DB":"#374151"}}},plugins:{legend:{labels:{color:t?"#D1D5DB":"#374151"}}}}})})]})]})]}),g.jsxs("div",{className:`rounded-lg shadow-lg ${t?"bg-gray-800":"bg-white"} p-6`,children:[g.jsx("h2",{className:`text-xl font-semibold mb-6 ${t?"text-white":"text-gray-900"}`,children:"Quality Metrics"}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("h3",{className:`text-lg font-medium mb-4 ${t?"text-gray-200":"text-gray-800"}`,children:"Grade Distribution"}),g.jsx("div",{className:"h-64",children:g.jsx(J0,{data:{labels:["Premium","Fine","Commercial"],datasets:[{data:[((oe=l.qualityMetrics)==null?void 0:oe.premiumGrade)||0,((_e=l.qualityMetrics)==null?void 0:_e.fineGrade)||0,((Ce=l.qualityMetrics)==null?void 0:Ce.commercialGrade)||0],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(234, 179, 8, 0.8)"]}]},options:{responsive:!0,plugins:{legend:{position:"bottom",labels:{color:t?"#D1D5DB":"#374151"}},tooltip:{callbacks:{label:function(xe){const we=xe.raw,$=xe.dataset.data.reduce((de,J)=>de+J,0),Se=$>0?(we/$*100).toFixed(1):0;return[`${xe.label}: ${Se}%`,`Volume: ${we.toFixed(2)} kg`]}}}}}})})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[g.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Premium Grade"}),g.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:(()=>{var Se,de,J,ue;const xe=((Se=l.qualityMetrics)==null?void 0:Se.premiumGrade)||0,we=(((de=l.qualityMetrics)==null?void 0:de.premiumGrade)||0)+(((J=l.qualityMetrics)==null?void 0:J.fineGrade)||0)+(((ue=l.qualityMetrics)==null?void 0:ue.commercialGrade)||0);return`${we>0?(xe/we*100).toFixed(1):0}%`})()}),g.jsxs("p",{className:`text-sm mt-1 ${t?"text-gray-400":"text-gray-500"}`,children:[(Ee=l.qualityMetrics)==null?void 0:Ee.premiumGrade.toFixed(2)," kg"]})]}),g.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[g.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Fine Grade"}),g.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:(()=>{var Se,de,J,ue;const xe=((Se=l.qualityMetrics)==null?void 0:Se.fineGrade)||0,we=(((de=l.qualityMetrics)==null?void 0:de.premiumGrade)||0)+(((J=l.qualityMetrics)==null?void 0:J.fineGrade)||0)+(((ue=l.qualityMetrics)==null?void 0:ue.commercialGrade)||0);return`${we>0?(xe/we*100).toFixed(1):0}%`})()}),g.jsxs("p",{className:`text-sm mt-1 ${t?"text-gray-400":"text-gray-500"}`,children:[(Pe=l.qualityMetrics)==null?void 0:Pe.fineGrade.toFixed(2)," kg"]})]}),g.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[g.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Commercial Grade"}),g.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:(()=>{var Se,de,J,ue;const xe=((Se=l.qualityMetrics)==null?void 0:Se.commercialGrade)||0,we=(((de=l.qualityMetrics)==null?void 0:de.premiumGrade)||0)+(((J=l.qualityMetrics)==null?void 0:J.fineGrade)||0)+(((ue=l.qualityMetrics)==null?void 0:ue.commercialGrade)||0);return`${we>0?(xe/we*100).toFixed(1):0}%`})()}),g.jsxs("p",{className:`text-sm mt-1 ${t?"text-gray-400":"text-gray-500"}`,children:[(De=l.qualityMetrics)==null?void 0:De.commercialGrade.toFixed(2)," kg"]})]})]})]})]})]}),h&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:`rounded-lg shadow-xl max-w-md w-full ${t?"bg-gray-800":"bg-white"} p-6`,children:[g.jsx("h3",{className:`text-xl font-semibold mb-4 ${t?"text-white":"text-gray-900"}`,children:"Edit Basic Information"}),b&&g.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-md",children:b}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`,children:"First Name"}),g.jsx("input",{type:"text",value:y.first_name,onChange:xe=>x({...y,first_name:xe.target.value}),className:`mt-1 block w-full rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm`})]}),g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`,children:"Middle Name"}),g.jsx("input",{type:"text",value:y.middle_name,onChange:xe=>x({...y,middle_name:xe.target.value}),className:`mt-1 block w-full rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm`})]}),g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`,children:"Last Name"}),g.jsx("input",{type:"text",value:y.last_name,onChange:xe=>x({...y,last_name:xe.target.value}),className:`mt-1 block w-full rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm`})]}),g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`,children:"Farm Location"}),g.jsx("input",{type:"text",value:y.farm_location,onChange:xe=>x({...y,farm_location:xe.target.value}),className:`mt-1 block w-full rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm`})]}),g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`,children:"Farm Size (hectares)"}),g.jsx("input",{type:"number",value:y.farm_size,onChange:xe=>x({...y,farm_size:xe.target.value}),className:`mt-1 block w-full rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm`})]}),g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`,children:"Farm Elevation (meters)"}),g.jsx("input",{type:"number",value:y.farm_elevation,onChange:xe=>x({...y,farm_elevation:xe.target.value}),className:`mt-1 block w-full rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm`})]})]}),g.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[g.jsx("button",{onClick:()=>p(!1),className:`px-4 py-2 rounded-lg text-sm font-medium ${t?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Cancel"}),g.jsx("button",{onClick:I,disabled:_,className:`px-4 py-2 rounded-lg text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 
                    ${_?"opacity-50 cursor-not-allowed":""}`,children:_?"Saving...":"Save Changes"})]})]})})]})}):g.jsx(sb,{to:"/login"})};let Zme={data:""},Jme=n=>typeof window=="object"?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||Zme,Qme=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ege=/\/\*[^]*?\*\/|  +/g,u5=/\n+/g,Gc=(n,e)=>{let t="",i="",r="";for(let s in n){let a=n[s];s[0]=="@"?s[1]=="i"?t=s+" "+a+";":i+=s[1]=="f"?Gc(a,s):s+"{"+Gc(a,s[1]=="k"?"":e)+"}":typeof a=="object"?i+=Gc(a,e?e.replace(/([^,])+/g,o=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,o):o?o+" "+l:l)):s):a!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=Gc.p?Gc.p(s,a):s+":"+a+";")}return t+(e&&r?e+"{"+r+"}":r)+i},Ml={},c$=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+c$(n[t]);return e}return n},tge=(n,e,t,i,r)=>{let s=c$(n),a=Ml[s]||(Ml[s]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(s));if(!Ml[a]){let l=s!==n?n:(c=>{let u,d,h=[{}];for(;u=Qme.exec(c.replace(ege,""));)u[4]?h.shift():u[3]?(d=u[3].replace(u5," ").trim(),h.unshift(h[0][d]=h[0][d]||{})):h[0][u[1]]=u[2].replace(u5," ").trim();return h[0]})(n);Ml[a]=Gc(r?{["@keyframes "+a]:l}:l,t?"":"."+a)}let o=t&&Ml.g?Ml.g:null;return t&&(Ml.g=Ml[a]),((l,c,u,d)=>{d?c.data=c.data.replace(d,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(Ml[a],e,i,o),a},nge=(n,e,t)=>n.reduce((i,r,s)=>{let a=e[s];if(a&&a.call){let o=a(t),l=o&&o.props&&o.props.className||/^go/.test(o)&&o;a=l?"."+l:o&&typeof o=="object"?o.props?"":Gc(o,""):o===!1?"":o}return i+r+(a??"")},"");function tM(n){let e=this||{},t=n.call?n(e.p):n;return tge(t.unshift?t.raw?nge(t,[].slice.call(arguments,1),e.p):t.reduce((i,r)=>Object.assign(i,r&&r.call?r(e.p):r),{}):t,Jme(e.target),e.g,e.o,e.k)}let u$,ZA,JA;tM.bind({g:1});let oc=tM.bind({k:1});function ige(n,e,t,i){Gc.p=e,u$=n,ZA=t,JA=i}function qu(n,e){let t=this||{};return function(){let i=arguments;function r(s,a){let o=Object.assign({},s),l=o.className||r.className;t.p=Object.assign({theme:ZA&&ZA()},o),t.o=/ *go\d+/.test(l),o.className=tM.apply(t,i)+(l?" "+l:""),e&&(o.ref=a);let c=n;return n[0]&&(c=o.as||n,delete o.as),JA&&c[0]&&JA(o),u$(c,o)}return e?e(r):r}}var rge=n=>typeof n=="function",QA=(n,e)=>rge(n)?n(e):n,sge=(()=>{let n=0;return()=>(++n).toString()})(),age=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),oge=20,d$=(n,e)=>{switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,oge)};case 1:return{...n,toasts:n.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:t}=e;return d$(n,{type:n.toasts.find(s=>s.id===t.id)?1:0,toast:t});case 3:let{toastId:i}=e;return{...n,toasts:n.toasts.map(s=>s.id===i||i===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let r=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+r}))}}},lge=[],S2={toasts:[],pausedAt:void 0},u3=n=>{S2=d$(S2,n),lge.forEach(e=>{e(S2)})},cge=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:(t==null?void 0:t.id)||sge()}),mv=n=>(e,t)=>{let i=cge(e,n,t);return u3({type:2,toast:i}),i.id},yr=(n,e)=>mv("blank")(n,e);yr.error=mv("error");yr.success=mv("success");yr.loading=mv("loading");yr.custom=mv("custom");yr.dismiss=n=>{u3({type:3,toastId:n})};yr.remove=n=>u3({type:4,toastId:n});yr.promise=(n,e,t)=>{let i=yr.loading(e.loading,{...t,...t==null?void 0:t.loading});return typeof n=="function"&&(n=n()),n.then(r=>{let s=e.success?QA(e.success,r):void 0;return s?yr.success(s,{id:i,...t,...t==null?void 0:t.success}):yr.dismiss(i),r}).catch(r=>{let s=e.error?QA(e.error,r):void 0;s?yr.error(s,{id:i,...t,...t==null?void 0:t.error}):yr.dismiss(i)}),n};var uge=oc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,dge=oc`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,hge=oc`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,fge=qu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${uge} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${dge} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${hge} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,pge=oc`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,mge=qu("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${pge} 1s linear infinite;
`,gge=oc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,yge=oc`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,vge=qu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${gge} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${yge} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,xge=qu("div")`
  position: absolute;
`,_ge=qu("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,bge=oc`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,wge=qu("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${bge} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Sge=({toast:n})=>{let{icon:e,type:t,iconTheme:i}=n;return e!==void 0?typeof e=="string"?F.createElement(wge,null,e):e:t==="blank"?null:F.createElement(_ge,null,F.createElement(mge,{...i}),t!=="loading"&&F.createElement(xge,null,t==="error"?F.createElement(fge,{...i}):F.createElement(vge,{...i})))},Mge=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Ege=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,Tge="0%{opacity:0;} 100%{opacity:1;}",Cge="0%{opacity:1;} 100%{opacity:0;}",Age=qu("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Pge=qu("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Rge=(n,e)=>{let t=n.includes("top")?1:-1,[i,r]=age()?[Tge,Cge]:[Mge(t),Ege(t)];return{animation:e?`${oc(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${oc(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};F.memo(({toast:n,position:e,style:t,children:i})=>{let r=n.height?Rge(n.position||e||"top-center",n.visible):{opacity:0},s=F.createElement(Sge,{toast:n}),a=F.createElement(Pge,{...n.ariaProps},QA(n.message,n));return F.createElement(Age,{className:n.className,style:{...r,...t,...n.style}},typeof i=="function"?i({icon:s,message:a}):F.createElement(F.Fragment,null,s,a))});ige(F.createElement);tM`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;const kge=()=>{const n=Ki(),{isDarkMode:e}=Zi(),[t,i]=F.useState(null),[r,s]=F.useState([]),[a,o]=F.useState([]),[l,c]=F.useState(!0),[u,d]=F.useState({coffee_type:"raw",price_per_kg:"",currency:"PHP"}),h=[{value:"raw",label:"Raw Coffee"},{value:"dried",label:"Dried Coffee"},{value:"premium",label:"Premium Grade"},{value:"fine",label:"Fine Grade"},{value:"commercial",label:"Commercial Grade"}];F.useEffect(()=>{p(),y(),x()},[]);const p=async()=>{try{const{data:{user:v}}=await tt.auth.getUser();if(v){const{data:b,error:w}=await tt.from("users").select("*").eq("id",v.id).single();if(w)throw w;if(b.role!=="admin"){yr.error("Admin access required"),n("/dashboard");return}i(b)}else n("/login")}catch(v){console.error("Error checking user:",v),yr.error("Error checking user permissions")}},y=async()=>{try{const{data:v,error:b}=await tt.from("coffee_prices").select(`
          *,
          creator:created_by (
            first_name,
            last_name
          )
        `).eq("is_active",!0).order("coffee_type");if(b)throw b;o(v)}catch(v){console.error("Error fetching prices:",v),yr.error("Failed to fetch current prices")}},x=async()=>{try{console.log("Fetching price history...");const{data:v,error:b}=await tt.from("coffee_price_history").select(`
          *,
          user:changed_by (
            first_name,
            last_name
          )
        `).order("change_date",{ascending:!1});if(b)throw console.error("Supabase error:",b),b;console.log("Price history data:",v),s(v)}catch(v){console.error("Error fetching price history:",v),yr.error("Failed to fetch price history")}finally{c(!1)}},_=async v=>{v.preventDefault(),c(!0);try{console.log("Submitting new price...");const b=a.find(A=>A.coffee_type===u.coffee_type),{data:w,error:S}=await tt.from("coffee_prices").insert([{...u,created_by:t.id,is_active:!0}]).select().single();if(S)throw console.error("Error inserting new price:",S),S;if(console.log("New price inserted:",w),b){const{error:A}=await tt.from("coffee_prices").update({is_active:!1}).eq("price_id",b.price_id);if(A)throw console.error("Error updating old price:",A),A;console.log("Old price deactivated");const P={price_id:w.price_id,coffee_type:u.coffee_type,old_price:b.price_per_kg,new_price:u.price_per_kg,changed_by:t.id,reason:"Price update"};console.log("Creating history record:",P);const{error:k}=await tt.from("coffee_price_history").insert([P]);if(k)throw console.error("Error creating history record:",k),k;console.log("History record created")}yr.success("Price updated successfully"),d({coffee_type:"raw",price_per_kg:"",currency:"PHP"}),await y(),await x()}catch(b){console.error("Error updating price:",b),yr.error("Failed to update price")}finally{c(!1)}};return g.jsx(ci,{children:g.jsxs("div",{className:"container mx-auto px-4 py-8",children:[g.jsx("h1",{className:`text-3xl font-bold mb-8 ${e?"text-white":"text-gray-800"}`,children:"Price Management"}),g.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h2",{className:`text-xl font-semibold mb-4 ${e?"text-white":"text-gray-800"}`,children:"Set New Price"}),g.jsxs("form",{onSubmit:_,className:"space-y-4",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Coffee Type"}),g.jsx("select",{value:u.coffee_type,onChange:v=>d({...u,coffee_type:v.target.value}),className:`w-full rounded-md border ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} p-2`,required:!0,children:h.map(v=>g.jsx("option",{value:v.value,children:v.label},v.value))})]}),g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Price per KG"}),g.jsx("input",{type:"number",step:"0.01",value:u.price_per_kg,onChange:v=>d({...u,price_per_kg:v.target.value}),className:`w-full rounded-md border ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} p-2`,required:!0,min:"0"})]}),g.jsxs("div",{children:[g.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:"Currency"}),g.jsx("input",{type:"text",value:u.currency,onChange:v=>d({...u,currency:v.target.value}),className:`w-full rounded-md border ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} p-2`,required:!0,readOnly:!0})]})]}),g.jsx("div",{className:"flex justify-end",children:g.jsx("button",{type:"submit",disabled:l,className:`px-4 py-2 rounded-md ${l?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"} text-white font-medium`,children:l?"Updating...":"Update Price"})})]})]}),g.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h2",{className:`text-xl font-semibold mb-4 ${e?"text-white":"text-gray-800"}`,children:"Current Prices"}),g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:`min-w-full ${e?"text-gray-300":"text-gray-900"}`,children:[g.jsx("thead",{className:`${e?"bg-gray-900":"bg-blue-50"}`,children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Coffee Type"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Price per KG"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Currency"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Created By"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Last Updated"})]})}),g.jsx("tbody",{className:"divide-y divide-gray-200",children:a.map(v=>{var b;return g.jsxs("tr",{className:e?"bg-gray-800":"bg-white",children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(b=h.find(w=>w.value===v.coffee_type))==null?void 0:b.label}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.price_per_kg}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.currency}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.creator?`${v.creator.first_name} ${v.creator.last_name}`:"Unknown"}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(v.updated_at).toLocaleDateString()})]},v.price_id)})})]})})]}),g.jsxs("div",{className:`p-6 rounded-lg shadow-lg ${e?"bg-gray-800":"bg-white"}`,children:[g.jsx("h2",{className:`text-xl font-semibold mb-4 ${e?"text-white":"text-gray-800"}`,children:"Price History"}),g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:`min-w-full ${e?"text-gray-300":"text-gray-900"}`,children:[g.jsx("thead",{className:`${e?"bg-gray-900":"bg-blue-50"}`,children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Coffee Type"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Old Price"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"New Price"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Changed By"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Change Date"})]})}),g.jsx("tbody",{className:"divide-y divide-gray-200",children:r.map(v=>{var b;return g.jsxs("tr",{className:e?"bg-gray-800":"bg-white",children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(b=h.find(w=>w.value===v.coffee_type))==null?void 0:b.label}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.old_price}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.new_price}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.user?`${v.user.first_name} ${v.user.last_name}`:"Unknown"}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(v.change_date).toLocaleDateString()})]},v.history_id)})})]})})]})]})})};function Nge(){return g.jsx(qX,{children:g.jsx(cz,{children:g.jsx(CG,{children:g.jsxs(_G,{children:[g.jsx(hi,{path:"/",element:g.jsx(qme,{})}),g.jsx(hi,{path:"/login",element:g.jsx(sY,{})}),g.jsx(hi,{path:"/forgot-password",element:g.jsx(XX,{})}),g.jsx(hi,{path:"/reset-password",element:g.jsx(rY,{})}),g.jsx(hi,{path:"/register",element:g.jsx(aY,{})}),g.jsx(hi,{path:"/dashboard",element:g.jsx(Fee,{})}),g.jsx(hi,{path:"/farmer-dashboard",element:g.jsx(Qr,{requiredRoles:["farmer"],children:g.jsx(Uee,{})})}),g.jsx(hi,{path:"/user-management",element:g.jsx(Qr,{requiredRoles:["admin"],children:g.jsx(jee,{})})}),g.jsx(hi,{path:"/admin-analytics",element:g.jsx(Qr,{requiredRoles:["admin"],children:g.jsx(Xme,{})})}),g.jsx(hi,{path:"/farmer-reports",element:g.jsx(Qr,{requiredRoles:["admin"],children:g.jsx(nte,{})})}),g.jsx(hi,{path:"/user-profile",element:g.jsx(Qr,{requiredRoles:["farmer","admin"],children:g.jsx(zee,{})})}),g.jsx(hi,{path:"/predictive-analytics",element:g.jsx(Qr,{requiredRoles:["farmer","admin"],children:g.jsx(qee,{})})}),g.jsx(hi,{path:"/data-entry",element:g.jsx(Qr,{requiredRoles:["admin"],children:g.jsx(Zee,{})})}),g.jsx(hi,{path:"/dss-recommendations",element:g.jsx(Qr,{requiredRoles:["farmer"],children:g.jsx(Jee,{})})}),g.jsx(hi,{path:"/harvest-reporting",element:g.jsxs(Qr,{requiredRoles:["farmer","admin"],children:[" ",g.jsx(tte,{})]})}),g.jsx(hi,{path:"/land-declaration",element:g.jsxs(Qr,{requiredRoles:["farmer","admin"],children:[" ",g.jsx(ete,{})]})}),g.jsx(hi,{path:"/plant-status/:plantId",element:g.jsx(Qr,{requiredRoles:["farmer","admin"],children:g.jsx(Yme,{})})}),g.jsx(hi,{path:"/single-plant-analytics/:plantId",element:g.jsx(Qr,{requiredRoles:["farmer","admin"],children:g.jsx(Xee,{})})}),g.jsx(hi,{path:"/farmer-recommendations",element:g.jsx(Qr,{requiredRoles:["admin"],children:g.jsx(Qee,{})})}),g.jsx(hi,{path:"/farmer-profile/:farmerId",element:g.jsx(Qr,{requiredRoles:["admin"],children:g.jsx(Kme,{})})}),g.jsx(hi,{path:"/price-management",element:g.jsx(Qr,{requiredRoles:["admin"],children:g.jsx(kge,{})})}),g.jsx(hi,{path:"*",element:g.jsx(sb,{to:"/",replace:!0})})]})})})})}M2.createRoot(document.getElementById("root")).render(g.jsx(sn.StrictMode,{children:g.jsx(cz,{children:g.jsx(Nge,{})})}));
